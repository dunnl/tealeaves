<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Tealeaves.Theory.TraversableFunctor</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#"><span class="id" title="library">Classes.Kleisli.TraversableFunctor</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#"><span class="id" title="library">Classes.Kleisli.Theory.TraversableFunctor</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#"><span class="id" title="library">Classes.Coalgebraic.TraversableFunctor</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#"><span class="id" title="library">Classes.Categorical.ContainerFunctor</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#"><span class="id" title="library">Adapters.KleisliToCoalgebraic.TraversableFunctor</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#"><span class="id" title="library">Classes.Categorical.ShapelyFunctor</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#"><span class="id" title="library">Theory.Batch</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.List.html#"><span class="id" title="library">Functors.List</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Misc.Subset.html#Notations"><span class="id" title="module">Subset.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Notations"><span class="id" title="module">Applicative.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#Notations"><span class="id" title="module">ContainerFunctor.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Functors.ProductFunctor.html#Notations"><span class="id" title="module">ProductFunctor.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#Notations"><span class="id" title="module">Kleisli.TraversableFunctor.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Notations"><span class="id" title="module">Batch.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#Notations"><span class="id" title="module">Monoid.Notations</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">Variables</span> <span class="id" title="var">T</span> <span class="id" title="var">G</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab725"></a><h1 class="section">Misc</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="stuff" class="idref" href="#stuff"><span class="id" title="section">stuff</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H0:3" class="idref" href="#H0:3"><span class="id" title="binder">TraversableFunctor</span></a> <a id="H0:3" class="idref" href="#H0:3"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:4" class="idref" href="#H1:4"><span class="id" title="binder">Map</span></a> <a id="H1:4" class="idref" href="#H1:4"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H2:5" class="idref" href="#H2:5"><span class="id" title="binder">ToBatch</span></a> <a id="H2:5" class="idref" href="#H2:5"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Map_Traverse0:6" class="idref" href="#Compat_Map_Traverse0:6"><span class="id" title="binder">!</span></a> <a id="Compat_Map_Traverse0:6" class="idref" href="#Compat_Map_Traverse0:6"><span class="id" title="binder">Compat_Map_Traverse</span></a> <a id="Compat_Map_Traverse0:6" class="idref" href="#Compat_Map_Traverse0:6"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H3:7" class="idref" href="#H3:7"><span class="id" title="binder">!</span></a> <a id="H3:7" class="idref" href="#H3:7"><span class="id" title="binder">Compat_ToBatch_Traverse</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_tolist" class="idref" href="#Batch_contents_tolist"><span class="id" title="lemma">Batch_contents_tolist</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:8" class="idref" href="#A:8"><span class="id" title="binder">A</span></a> <a id="B:9" class="idref" href="#B:9"><span class="id" title="binder">B</span></a>} (<a id="t:10" class="idref" href="#t:10"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#stuff.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:8"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_to_list"><span class="id" title="definition">Vector_to_list</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:8"><span class="id" title="variable">A</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:9"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:10"><span class="id" title="variable">t</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="Tealeaves.Misc.List.html#tolist"><span class="id" title="definition">tolist</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:10"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#tolist_to_foldMap"><span class="id" title="lemma">tolist_to_foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#foldMap_through_runBatch2"><span class="id" title="lemma">foldMap_through_runBatch2</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_to_list_vcons"><span class="id" title="lemma">Vector_to_list_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Misc.List.html#Monoid_op_list"><span class="id" title="instance">Monoid_op_list</span></a> @<a class="idref" href="Tealeaves.Functors.List.html#Return_list"><span class="id" title="instance">Return_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_unit"><span class="id" title="lemma">List.rev_unit</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_toBatch_sim" class="idref" href="#Batch_contents_toBatch_sim"><span class="id" title="lemma">Batch_contents_toBatch_sim</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:11" class="idref" href="#A:11"><span class="id" title="binder">A</span></a> <a id="B:12" class="idref" href="#B:12"><span class="id" title="binder">B</span></a> <a id="B':13" class="idref" href="#B':13"><span class="id" title="binder">B'</span></a>} (<a id="t:14" class="idref" href="#t:14"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#stuff.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:11"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:12"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:14"><span class="id" title="variable">t</span></a>) <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B':13"><span class="id" title="variable">B'</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:14"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim"><span class="id" title="definition">Vector_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> ?<span class="id" title="var">v</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_to_list"><span class="id" title="definition">Vector_to_list</span></a> <span class="id" title="var">_</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Batch_contents_tolist"><span class="id" title="lemma">Batch_contents_tolist</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Batch_contents_tolist"><span class="id" title="lemma">Batch_contents_tolist</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="shape_toBatch_spec" class="idref" href="#shape_toBatch_spec"><span class="id" title="lemma">shape_toBatch_spec</span></a>: <span class="id" title="keyword">∀</span> (<a id="A:15" class="idref" href="#A:15"><span class="id" title="binder">A</span></a> <a id="B:16" class="idref" href="#B:16"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>) (<a id="t:17" class="idref" href="#t:17"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#stuff.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:15"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:16"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:17"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:16"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:17"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">t</span> <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#toBatch_mapfst"><span class="id" title="lemma">toBatch_mapfst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="toBatch_shape" class="idref" href="#toBatch_shape"><span class="id" title="lemma">toBatch_shape</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A':18" class="idref" href="#A':18"><span class="id" title="binder">A'</span></a> <a id="B:19" class="idref" href="#B:19"><span class="id" title="binder">B</span></a>} `(<a id="t1:21" class="idref" href="#t1:21"><span class="id" title="binder">t1</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#stuff.T"><span class="id" title="variable">T</span></a> <a id="A:20" class="idref" href="#A:20"><span class="id" title="binder">A</span></a>) (<a id="t2:22" class="idref" href="#t2:22"><span class="id" title="binder">t2</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#stuff.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A':18"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:21"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:22"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:19"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#stuff.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:19"><span class="id" title="variable">B</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:19"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:21"><span class="id" title="variable">t1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:19"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#stuff.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:19"><span class="id" title="variable">B</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:19"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:22"><span class="id" title="variable">t2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#shape_toBatch_spec"><span class="id" title="lemma">shape_toBatch_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#stuff"><span class="id" title="section">stuff</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab726"></a><h2 class="section">Batch_to_list</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="Batch" class="idref" href="#Batch"><span class="id" title="section">Batch</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Batch_to_list" class="idref" href="#Batch_to_list"><span class="id" title="definition">Batch_to_list</span></a>: <span class="id" title="keyword">∀</span> `(<a id="b:26" class="idref" href="#b:26"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:23" class="idref" href="#A:23"><span class="id" title="binder">A</span></a> <a id="B:24" class="idref" href="#B:24"><span class="id" title="binder">B</span></a> <a id="C:25" class="idref" href="#C:25"><span class="id" title="binder">C</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:23"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Misc.List.html#tolist"><span class="id" title="definition">tolist</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_list" class="idref" href="#Batch_contents_list"><span class="id" title="lemma">Batch_contents_list</span></a>: <span class="id" title="keyword">∀</span> `(<a id="b:30" class="idref" href="#b:30"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:27" class="idref" href="#A:27"><span class="id" title="binder">A</span></a> <a id="B:28" class="idref" href="#B:28"><span class="id" title="binder">B</span></a> <a id="C:29" class="idref" href="#C:29"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b:30"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Batch_to_list"><span class="id" title="definition">Batch_to_list</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b:30"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#proj_vcons"><span class="id" title="lemma">proj_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_unit"><span class="id" title="lemma">List.rev_unit</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_to_list_rw2" class="idref" href="#Batch_to_list_rw2"><span class="id" title="lemma">Batch_to_list_rw2</span></a> {<a id="A:31" class="idref" href="#A:31"><span class="id" title="binder">A</span></a> <a id="B:32" class="idref" href="#B:32"><span class="id" title="binder">B</span></a> <a id="C:33" class="idref" href="#C:33"><span class="id" title="binder">C</span></a>}: <span class="id" title="keyword">∀</span> (<a id="b:34" class="idref" href="#b:34"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:31"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:32"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:32"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:33"><span class="id" title="variable">C</span></a>)) (<a id="a:35" class="idref" href="#a:35"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:31"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Batch_to_list"><span class="id" title="definition">Batch_to_list</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b:34"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:35"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Batch_to_list"><span class="id" title="definition">Batch_to_list</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b:34"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:35"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Batch"><span class="id" title="section">Batch</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab727"></a><h1 class="section">Proof that traversable functors are shapely over lists</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="shapeliness" class="idref" href="#shapeliness"><span class="id" title="section">shapeliness</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H0:38" class="idref" href="#H0:38"><span class="id" title="binder">TraversableFunctor</span></a> <a id="H0:38" class="idref" href="#H0:38"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:39" class="idref" href="#H1:39"><span class="id" title="binder">Map</span></a> <a id="H1:39" class="idref" href="#H1:39"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Map_Traverse0:40" class="idref" href="#Compat_Map_Traverse0:40"><span class="id" title="binder">!</span></a> <a id="Compat_Map_Traverse0:40" class="idref" href="#Compat_Map_Traverse0:40"><span class="id" title="binder">Compat_Map_Traverse</span></a> <a id="Compat_Map_Traverse0:40" class="idref" href="#Compat_Map_Traverse0:40"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H2:41" class="idref" href="#H2:41"><span class="id" title="binder">ToBatch</span></a> <a id="H2:41" class="idref" href="#H2:41"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H3:42" class="idref" href="#H3:42"><span class="id" title="binder">!</span></a> <a id="H3:42" class="idref" href="#H3:42"><span class="id" title="binder">Compat_ToBatch_Traverse</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="shapeliness_tactical" class="idref" href="#shapeliness_tactical"><span class="id" title="lemma">shapeliness_tactical</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:43" class="idref" href="#A:43"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b1:44" class="idref" href="#b1:44"><span class="id" title="binder">b1</span></a> <a id="b2:45" class="idref" href="#b2:45"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#shapeliness.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a>)) (<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a>)) <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b1:44"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a>)) (<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a>) (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a>)) <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b2:45"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Axioms.html#unit"><span class="id" title="inductive">unit</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Axioms.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b1:44"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Axioms.html#unit"><span class="id" title="inductive">unit</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Axioms.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b2:45"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="keyword">fun</span> <a id="A:46" class="idref" href="#A:46"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:46"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#shapeliness.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b1:44"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="keyword">fun</span> <a id="A:47" class="idref" href="#A:47"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:47"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#shapeliness.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:43"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b2:45"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hlist</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c1</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest1</span> <span class="id" title="var">IHrest1</span> <span class="id" title="var">a1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c2</span> | <span class="id" title="var">rest2</span> <span class="id" title="var">a2</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#monoid_op"><span class="id" title="definition">monoid_op</span></a>, <a class="idref" href="Tealeaves.Misc.List.html#Monoid_op_list"><span class="id" title="instance">Monoid_op_list</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hleft</span> := <span class="id" title="var">Hlist</span>); <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.List.html#list_app_inv_l2"><span class="id" title="lemma">list_app_inv_l2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hleft</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Hlist</span> <span class="id" title="var">into</span> <span class="id" title="var">Hright</span>;  <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.List.html#list_app_inv_r2"><span class="id" title="lemma">list_app_inv_r2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hright</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hshape</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hshape</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="var">erewrite</span> <span class="id" title="var">IHrest1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="shapeliness" class="idref" href="#shapeliness"><span class="id" title="lemma">shapeliness</span></a> : <span class="id" title="keyword">∀</span> <a id="A:48" class="idref" href="#A:48"><span class="id" title="binder">A</span></a> (<a id="t1:49" class="idref" href="#t1:49"><span class="id" title="binder">t1</span></a> <a id="t2:50" class="idref" href="#t2:50"><span class="id" title="binder">t2</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#shapeliness.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:48"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:49"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:50"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="Tealeaves.Misc.List.html#tolist"><span class="id" title="definition">tolist</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:49"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Misc.List.html#tolist"><span class="id" title="definition">tolist</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:50"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:49"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:50"><span class="id" title="variable">t2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> [<span class="id" title="var">hyp1</span> <span class="id" title="var">hyp2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">hyp1'</span> : <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Axioms.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="var">A'</span> := <span class="id" title="var">A</span>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Axioms.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="var">A'</span> := <span class="id" title="var">A</span>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">t2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>, <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">hyp1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">hyp1</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">hyp1'</span> <span class="id" title="var">into</span> <span class="id" title="var">hyp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hyp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#toBatch_mapfst"><span class="id" title="lemma">toBatch_mapfst</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hyp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#tolist_through_runBatch"><span class="id" title="lemma">tolist_through_runBatch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">t1</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">hyp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#tolist_through_runBatch"><span class="id" title="lemma">tolist_through_runBatch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">t2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">hyp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">t1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#id_through_runBatch"><span class="id" title="lemma">id_through_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#shapeliness_tactical"><span class="id" title="lemma">shapeliness_tactical</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#shapeliness"><span class="id" title="section">shapeliness</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab728"></a><h1 class="section">Pointwise reasoning for operations</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="pointwise" class="idref" href="#pointwise"><span class="id" title="section">pointwise</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H0:53" class="idref" href="#H0:53"><span class="id" title="binder">Classes.Kleisli.TraversableFunctor.TraversableFunctor</span></a> <a id="H0:53" class="idref" href="#H0:53"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="ToMap_inst:54" class="idref" href="#ToMap_inst:54"><span class="id" title="binder">ToMap_inst</span></a>: <a class="idref" href="Tealeaves.Classes.Functor.html#Map"><span class="id" title="class">Map</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#T:51"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="ToSubset_inst:55" class="idref" href="#ToSubset_inst:55"><span class="id" title="binder">ToSubset_inst</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#ToSubset"><span class="id" title="class">ToSubset</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#T:51"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="ToBatch_inst:56" class="idref" href="#ToBatch_inst:56"><span class="id" title="binder">ToBatch_inst</span></a>: <a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#ToBatch"><span class="id" title="class">ToBatch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#T:51"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Map_Traverse0:57" class="idref" href="#Compat_Map_Traverse0:57"><span class="id" title="binder">!</span></a> <a id="Compat_Map_Traverse0:57" class="idref" href="#Compat_Map_Traverse0:57"><span class="id" title="binder">Compat_Map_Traverse</span></a> <a id="Compat_Map_Traverse0:57" class="idref" href="#Compat_Map_Traverse0:57"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_ToSubset_Traverse0:58" class="idref" href="#Compat_ToSubset_Traverse0:58"><span class="id" title="binder">!</span></a> <a id="Compat_ToSubset_Traverse0:58" class="idref" href="#Compat_ToSubset_Traverse0:58"><span class="id" title="binder">Compat_ToSubset_Traverse</span></a> <a id="Compat_ToSubset_Traverse0:58" class="idref" href="#Compat_ToSubset_Traverse0:58"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:59" class="idref" href="#H1:59"><span class="id" title="binder">!</span></a> <a id="H1:59" class="idref" href="#H1:59"><span class="id" title="binder">Compat_ToBatch_Traverse</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_respectful" class="idref" href="#traverse_respectful"><span class="id" title="lemma">traverse_respectful</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `{<a id="H5:64" class="idref" href="#H5:64"><span class="id" title="binder">Applicative</span></a> <a id="H5:64" class="idref" href="#H5:64"><span class="id" title="binder">G</span></a>} `(<a id="f1:67" class="idref" href="#f1:67"><span class="id" title="binder">f1</span></a> : <a id="A:65" class="idref" href="#A:65"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#G:60"><span class="id" title="variable">G</span></a> <a id="B:66" class="idref" href="#B:66"><span class="id" title="binder">B</span></a>) `(<a id="f2:68" class="idref" href="#f2:68"><span class="id" title="binder">f2</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:65"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#G:60"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:66"><span class="id" title="variable">B</span></a>) (<a id="t:69" class="idref" href="#t:69"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#pointwise.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:65"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="a:70" class="idref" href="#a:70"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:65"><span class="id" title="variable">A</span></a>), <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:70"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:69"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f1:67"><span class="id" title="variable">f1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:70"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f2:68"><span class="id" title="variable">f2</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:70"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f1:67"><span class="id" title="variable">f1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:69"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f2:68"><span class="id" title="variable">f2</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:69"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> ? <span class="id" title="var">hyp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#traverse_through_runBatch"><span class="id" title="lemma">traverse_through_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#element_of"><span class="id" title="definition">element_of</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hyp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#tosubset_through_runBatch2"><span class="id" title="lemma">tosubset_through_runBatch2</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">hyp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHb</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hyp</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">hyp</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab729"></a><h3 class="section">Corollaries</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="traverse_respectful_pure" class="idref" href="#traverse_respectful_pure"><span class="id" title="lemma">traverse_respectful_pure</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `{<a id="H5:75" class="idref" href="#H5:75"><span class="id" title="binder">Applicative</span></a> <a id="H5:75" class="idref" href="#H5:75"><span class="id" title="binder">G</span></a>} `(<a id="f1:77" class="idref" href="#f1:77"><span class="id" title="binder">f1</span></a> : <a id="A:76" class="idref" href="#A:76"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#G:71"><span class="id" title="variable">G</span></a> <span class="id" title="var">A</span>) (<a id="t:78" class="idref" href="#t:78"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#pointwise.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:76"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="a:79" class="idref" href="#a:79"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:76"><span class="id" title="variable">A</span></a>), <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:79"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:78"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f1:77"><span class="id" title="variable">f1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:79"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:79"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f1:77"><span class="id" title="variable">f1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:78"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:78"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse_purity1"><span class="id" title="lemma">traverse_purity1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#traverse_respectful"><span class="id" title="lemma">traverse_respectful</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="traverse_respectful_map" class="idref" href="#traverse_respectful_map"><span class="id" title="lemma">traverse_respectful_map</span></a> {<a id="A:80" class="idref" href="#A:80"><span class="id" title="binder">A</span></a> <a id="B:81" class="idref" href="#B:81"><span class="id" title="binder">B</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `{<a id="H5:86" class="idref" href="#H5:86"><span class="id" title="binder">Applicative</span></a> <a id="H5:86" class="idref" href="#H5:86"><span class="id" title="binder">G</span></a>} (<a id="t:87" class="idref" href="#t:87"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#pointwise.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:80"><span class="id" title="variable">A</span></a>) (<a id="f:88" class="idref" href="#f:88"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:80"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#G:82"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:81"><span class="id" title="variable">B</span></a>) (<a id="g:89" class="idref" href="#g:89"><span class="id" title="binder">g</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:80"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:81"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:90" class="idref" href="#a:90"><span class="id" title="binder">a</span></a>, <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:90"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:87"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f:88"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:90"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#g:89"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:90"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f:88"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:87"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#g:89"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:87"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse_purity1"><span class="id" title="lemma">traverse_purity1</span></a> (<span class="id" title="var">G</span> := <span class="id" title="var">G</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">t</span> <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse_map"><span class="id" title="lemma">traverse_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#traverse_respectful"><span class="id" title="lemma">traverse_respectful</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="traverse_respectful_id" class="idref" href="#traverse_respectful_id"><span class="id" title="lemma">traverse_respectful_id</span></a> {<a id="A:91" class="idref" href="#A:91"><span class="id" title="binder">A</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:92" class="idref" href="#t:92"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#pointwise.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:91"><span class="id" title="variable">A</span></a>) (<a id="f:93" class="idref" href="#f:93"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:91"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:91"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:94" class="idref" href="#a:94"><span class="id" title="binder">a</span></a>, <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:94"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:92"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f:93"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:94"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:94"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := <span class="id" title="keyword">fun</span> <a id="A:95" class="idref" href="#A:95"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:95"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f:93"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:92"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:92"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<span class="id" title="var">F</span> := <span class="id" title="keyword">fun</span> <a id="A:97" class="idref" href="#A:97"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:96"><span class="id" title="variable">A</span></a>) <span class="id" title="var">t</span>) <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#traverse_respectful_pure"><span class="id" title="lemma">traverse_respectful_pure</span></a> (<span class="id" title="var">G</span> := <span class="id" title="keyword">fun</span> <a id="A:99" class="idref" href="#A:99"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:98"><span class="id" title="variable">A</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="map_respectful" class="idref" href="#map_respectful"><span class="id" title="lemma">map_respectful</span></a> : <span class="id" title="keyword">∀</span> `(<a id="f1:102" class="idref" href="#f1:102"><span class="id" title="binder">f1</span></a> : <a id="A:100" class="idref" href="#A:100"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="B:101" class="idref" href="#B:101"><span class="id" title="binder">B</span></a>) `(<a id="f2:103" class="idref" href="#f2:103"><span class="id" title="binder">f2</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:100"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:101"><span class="id" title="variable">B</span></a>) (<a id="t:104" class="idref" href="#t:104"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#pointwise.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:100"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="a:105" class="idref" href="#a:105"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:100"><span class="id" title="variable">A</span></a>), <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:105"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:104"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f1:102"><span class="id" title="variable">f1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:105"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f2:103"><span class="id" title="variable">f2</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:105"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f1:102"><span class="id" title="variable">f1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:104"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f2:103"><span class="id" title="variable">f2</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:104"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">hyp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#map_to_traverse"><span class="id" title="lemma">map_to_traverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#map_to_traverse"><span class="id" title="lemma">map_to_traverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#traverse_respectful"><span class="id" title="lemma">traverse_respectful</span></a> (<span class="id" title="var">G</span> := <span class="id" title="keyword">fun</span> <a id="A:107" class="idref" href="#A:107"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:106"><span class="id" title="variable">A</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="ContainerFunctor_Traverse" class="idref" href="#ContainerFunctor_Traverse"><span class="id" title="instance">ContainerFunctor_Traverse</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#ContainerFunctor"><span class="id" title="class">ContainerFunctor</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#pointwise.T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#compat_tosubset_traverse"><span class="id" title="definition">compat_tosubset_traverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#map_respectful"><span class="id" title="lemma">map_respectful</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#pointwise"><span class="id" title="section">pointwise</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab730"></a><h1 class="section"><code>plength</code></h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="length" class="idref" href="#length"><span class="id" title="section">length</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H:109" class="idref" href="#H:109"><span class="id" title="binder">Map</span></a> <a id="H:109" class="idref" href="#H:109"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H0:110" class="idref" href="#H0:110"><span class="id" title="binder">ToBatch</span></a> <a id="H0:110" class="idref" href="#H0:110"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:111" class="idref" href="#H1:111"><span class="id" title="binder">Traverse</span></a> <a id="H1:111" class="idref" href="#H1:111"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="TraversableFunctor0:112" class="idref" href="#TraversableFunctor0:112"><span class="id" title="binder">!</span></a> <a id="TraversableFunctor0:112" class="idref" href="#TraversableFunctor0:112"><span class="id" title="binder">TraversableFunctor</span></a> <a id="TraversableFunctor0:112" class="idref" href="#TraversableFunctor0:112"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Map_Traverse0:113" class="idref" href="#Compat_Map_Traverse0:113"><span class="id" title="binder">!</span></a> <a id="Compat_Map_Traverse0:113" class="idref" href="#Compat_Map_Traverse0:113"><span class="id" title="binder">Compat_Map_Traverse</span></a> <a id="Compat_Map_Traverse0:113" class="idref" href="#Compat_Map_Traverse0:113"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_ToBatch_Traverse0:114" class="idref" href="#Compat_ToBatch_Traverse0:114"><span class="id" title="binder">!</span></a> <a id="Compat_ToBatch_Traverse0:114" class="idref" href="#Compat_ToBatch_Traverse0:114"><span class="id" title="binder">Compat_ToBatch_Traverse</span></a> <a id="Compat_ToBatch_Traverse0:114" class="idref" href="#Compat_ToBatch_Traverse0:114"><span class="id" title="binder">(</span></a><a id="Compat_ToBatch_Traverse0:114" class="idref" href="#Compat_ToBatch_Traverse0:114"><span class="id" title="binder">T</span></a> <a id="Compat_ToBatch_Traverse0:114" class="idref" href="#Compat_ToBatch_Traverse0:114"><span class="id" title="binder">:=</span></a> <a id="Compat_ToBatch_Traverse0:114" class="idref" href="#Compat_ToBatch_Traverse0:114"><span class="id" title="binder">T</span></a><a id="Compat_ToBatch_Traverse0:114" class="idref" href="#Compat_ToBatch_Traverse0:114"><span class="id" title="binder">)</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="plength_eq_length" class="idref" href="#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:115" class="idref" href="#A:115"><span class="id" title="binder">A</span></a>} {<a id="B:116" class="idref" href="#B:116"><span class="id" title="binder">B</span></a>} (<a id="t:117" class="idref" href="#t:117"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#length.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:115"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:116"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:117"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:117"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#foldMap_through_runBatch2"><span class="id" title="lemma">foldMap_through_runBatch2</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Misc.NaturalNumbers.html#Monoid_op_plus"><span class="id" title="instance">NaturalNumbers.Monoid_op_plus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="plength_eq_length'" class="idref" href="#plength_eq_length'"><span class="id" title="lemma">plength_eq_length'</span></a>: <span class="id" title="keyword">∀</span> {<a id="A:118" class="idref" href="#A:118"><span class="id" title="binder">A</span></a>} (<a id="t:119" class="idref" href="#t:119"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#length.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:118"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:119"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:119"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_Batch_independent" class="idref" href="#length_Batch_independent"><span class="id" title="lemma">length_Batch_independent</span></a>: <span class="id" title="keyword">∀</span> `(<a id="t:121" class="idref" href="#t:121"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#length.T"><span class="id" title="variable">T</span></a> <a id="A:120" class="idref" href="#A:120"><span class="id" title="binder">A</span></a>) <a id="B:122" class="idref" href="#B:122"><span class="id" title="binder">B</span></a> <a id="C:123" class="idref" href="#C:123"><span class="id" title="binder">C</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:122"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:121"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:123"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:121"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch_spec"><span class="id" title="lemma">length_Batch_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch_spec"><span class="id" title="lemma">length_Batch_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">t</span> <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">t</span> <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#traverse_through_runBatch"><span class="id" title="lemma">traverse_through_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#traverse_through_runBatch"><span class="id" title="lemma">traverse_through_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#traverse_const2"><span class="id" title="lemma">traverse_const2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#length"><span class="id" title="section">length</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab731"></a><h1 class="section">Deconstructing with refinement-type vectors</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="deconstruction" class="idref" href="#deconstruction"><span class="id" title="section">deconstruction</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H:125" class="idref" href="#H:125"><span class="id" title="binder">Traverse</span></a> <a id="H:125" class="idref" href="#H:125"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H0:126" class="idref" href="#H0:126"><span class="id" title="binder">Map</span></a> <a id="H0:126" class="idref" href="#H0:126"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="toBatch_inst:127" class="idref" href="#toBatch_inst:127"><span class="id" title="binder">toBatch_inst</span></a>: <a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#ToBatch"><span class="id" title="class">ToBatch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#T:124"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:128" class="idref" href="#H1:128"><span class="id" title="binder">ToSubset</span></a> <a id="H1:128" class="idref" href="#H1:128"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="TraversableFunctor0:129" class="idref" href="#TraversableFunctor0:129"><span class="id" title="binder">!</span></a> <a id="TraversableFunctor0:129" class="idref" href="#TraversableFunctor0:129"><span class="id" title="binder">TraversableFunctor</span></a> <a id="TraversableFunctor0:129" class="idref" href="#TraversableFunctor0:129"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Map_Traverse0:130" class="idref" href="#Compat_Map_Traverse0:130"><span class="id" title="binder">!</span></a> <a id="Compat_Map_Traverse0:130" class="idref" href="#Compat_Map_Traverse0:130"><span class="id" title="binder">Compat_Map_Traverse</span></a> <a id="Compat_Map_Traverse0:130" class="idref" href="#Compat_Map_Traverse0:130"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H2:131" class="idref" href="#H2:131"><span class="id" title="binder">!</span></a> <a id="H2:131" class="idref" href="#H2:131"><span class="id" title="binder">Compat_ToBatch_Traverse</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_ToSubset_Traverse0:132" class="idref" href="#Compat_ToSubset_Traverse0:132"><span class="id" title="binder">!</span></a> <a id="Compat_ToSubset_Traverse0:132" class="idref" href="#Compat_ToSubset_Traverse0:132"><span class="id" title="binder">Compat_ToSubset_Traverse</span></a> <a id="Compat_ToSubset_Traverse0:132" class="idref" href="#Compat_ToSubset_Traverse0:132"><span class="id" title="binder">T</span></a>}.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">Variables</span> <span class="id" title="var">v</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trav_contents" class="idref" href="#trav_contents"><span class="id" title="definition">trav_contents</span></a> {<a id="A:133" class="idref" href="#A:133"><span class="id" title="binder">A</span></a>} (<a id="t:134" class="idref" href="#t:134"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:133"><span class="id" title="variable">A</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:134"><span class="id" title="variable">t</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:133"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="v:135" class="idref" href="#v:135"><span class="id" title="binder">v</span></a> : <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">ToBatch</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.toBatch_inst"><span class="id" title="variable">toBatch_inst</span></a>) (<span class="id" title="var">A'</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:134"><span class="id" title="variable">t</span></a>)) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:133"><span class="id" title="variable">A</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:134"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_length"><span class="id" title="definition">coerce_Vector_length</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:134"><span class="id" title="variable">t</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v:135"><span class="id" title="variable">v</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Definition&nbsp;trav_contents_list&nbsp;{A}&nbsp;(t:&nbsp;T&nbsp;A):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Vector&nbsp;(plength&nbsp;t)&nbsp;A&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;v&nbsp;:&nbsp;Vector&nbsp;(length_Batch&nbsp;(toBatch&nbsp;(A'&nbsp;:=&nbsp;False)&nbsp;t))&nbsp;A<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=&nbsp;Batch_contents&nbsp;(toBatch&nbsp;t)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;coerce_Vector_length&nbsp;(plength_eq_length&nbsp;t)&nbsp;v.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trav_make" class="idref" href="#trav_make"><span class="id" title="definition">trav_make</span></a> {<a id="A:136" class="idref" href="#A:136"><span class="id" title="binder">A</span></a> <a id="B:137" class="idref" href="#B:137"><span class="id" title="binder">B</span></a>} (<a id="t:138" class="idref" href="#t:138"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:136"><span class="id" title="variable">A</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:138"><span class="id" title="variable">t</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:137"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:137"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="v:139" class="idref" href="#v:139"><span class="id" title="binder">v</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="v':140" class="idref" href="#v':140"><span class="id" title="binder">v'</span></a> := <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_length"><span class="id" title="definition">coerce_Vector_length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:138"><span class="id" title="variable">t</span></a>)) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v:139"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:138"><span class="id" title="variable">t</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v':140"><span class="id" title="variable">v'</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab732"></a><h2 class="section">Lemmas regarding <code>trav_make</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.trav_make_lemmas" class="idref" href="#deconstruction.trav_make_lemmas"><span class="id" title="section">trav_make_lemmas</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:141" class="idref" href="#A:141"><span class="id" title="binder">A</span></a> <a id="B:142" class="idref" href="#B:142"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="trav_make_sim1" class="idref" href="#trav_make_sim1"><span class="id" title="lemma">trav_make_sim1</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:143" class="idref" href="#t:143"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.trav_make_lemmas.A"><span class="id" title="variable">A</span></a>) `{<a id="H3:146" class="idref" href="#H3:146"><span class="id" title="binder">v1</span></a> <a id="H3:146" class="idref" href="#H3:146"><span class="id" title="binder">~~</span></a> <a id="H3:146" class="idref" href="#H3:146"><span class="id" title="binder">v2</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.trav_make_lemmas.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:143"><span class="id" title="variable">t</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v1:144"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:143"><span class="id" title="variable">t</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v2:145"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="trav_make_sim2" class="idref" href="#trav_make_sim2"><span class="id" title="lemma">trav_make_sim2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="t1:147" class="idref" href="#t1:147"><span class="id" title="binder">t1</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.trav_make_lemmas.A"><span class="id" title="variable">A</span></a>) (<a id="t2:148" class="idref" href="#t2:148"><span class="id" title="binder">t2</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.trav_make_lemmas.A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="v1:149" class="idref" href="#v1:149"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:147"><span class="id" title="variable">t1</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.trav_make_lemmas.B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="v2:150" class="idref" href="#v2:150"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:148"><span class="id" title="variable">t2</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.trav_make_lemmas.B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:147"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:148"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim"><span class="id" title="definition">Vector_sim</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v1:149"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v2:150"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:147"><span class="id" title="variable">t1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v1:149"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:148"><span class="id" title="variable">t2</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v2:150"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make_sim1"><span class="id" title="lemma">trav_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.trav_make_lemmas"><span class="id" title="section">trav_make_lemmas</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab733"></a><h2 class="section">Miscellaneous</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.list" class="idref" href="#deconstruction.list"><span class="id" title="section">list</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tolist_trav_contents" class="idref" href="#tolist_trav_contents"><span class="id" title="lemma">tolist_trav_contents</span></a> `{<a id="t:152" class="idref" href="#t:152"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a id="A:151" class="idref" href="#A:151"><span class="id" title="binder">A</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_to_list"><span class="id" title="definition">Vector_to_list</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:151"><span class="id" title="variable">A</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_contents"><span class="id" title="definition">trav_contents</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:152"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="Tealeaves.Misc.List.html#tolist"><span class="id" title="definition">tolist</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:152"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_contents"><span class="id" title="definition">trav_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#tolist_through_runBatch"><span class="id" title="lemma">tolist_through_runBatch</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>) <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>) <span class="id" title="var">t</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_rw2"><span class="id" title="lemma">runBatch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents_rw2"><span class="id" title="lemma">Batch_contents_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_to_list"><span class="id" title="definition">Vector_to_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_contents"><span class="id" title="lemma">coerce_Vector_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="tactic">at</span> 1. <span class="comment">(*&nbsp;hidden&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#proj_vcons"><span class="id" title="lemma">proj_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Misc.List.html#Monoid_op_list"><span class="id" title="instance">Monoid_op_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.List.html#Return_list"><span class="id" title="instance">Return_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_unit"><span class="id" title="lemma">List.rev_unit</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hlen</span>: <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1) <span class="id" title="var">Hlen</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="keyword">fun</span> <a id="a:154" class="idref" href="#a:154"><span class="id" title="binder">a</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:153"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="keyword">with</span> (@<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">_</span> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a> <span class="id" title="var">A</span>) <span class="id" title="keyword">with</span> (@<a class="idref" href="Tealeaves.Misc.List.html#Monoid_op_list"><span class="id" title="instance">Monoid_op_list</span></a> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_to_list"><span class="id" title="definition">Vector_to_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_contents"><span class="id" title="lemma">coerce_Vector_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.list"><span class="id" title="section">list</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab734"></a><h2 class="section">Lens-like laws</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.lens_laws" class="idref" href="#deconstruction.lens_laws"><span class="id" title="section">lens_laws</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab735"></a><h3 class="section">get-put</h3>

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="trav_get_put" class="idref" href="#trav_get_put"><span class="id" title="lemma">trav_get_put</span></a> `{<a id="t:156" class="idref" href="#t:156"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a id="A:155" class="idref" href="#A:155"><span class="id" title="binder">A</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:156"><span class="id" title="variable">t</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_contents"><span class="id" title="definition">trav_contents</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:156"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:156"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a>, <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_contents"><span class="id" title="definition">trav_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="tactic">cut</span>: <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>) <span class="id" title="var">t</span><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>) (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="tactic">cut</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_contents"><span class="id" title="lemma">Batch_make_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#trf_extract"><span class="id" title="method">trf_extract</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Batch_contents_toBatch_sim"><span class="id" title="lemma">Batch_contents_toBatch_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="toBatch_trav_make" class="idref" href="#toBatch_trav_make"><span class="id" title="lemma">toBatch_trav_make</span></a> {<a id="A:157" class="idref" href="#A:157"><span class="id" title="binder">A</span></a> <a id="A':158" class="idref" href="#A':158"><span class="id" title="binder">A'</span></a> <a id="B:159" class="idref" href="#B:159"><span class="id" title="binder">B</span></a>} {<a id="t:160" class="idref" href="#t:160"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:157"><span class="id" title="variable">A</span></a>} {<a id="v:161" class="idref" href="#v:161"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:160"><span class="id" title="variable">t</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:159"><span class="id" title="variable">B</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A':158"><span class="id" title="variable">A'</span></a>) (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:160"><span class="id" title="variable">t</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v:161"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A':158"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:160"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:160"><span class="id" title="variable">t</span></a>) <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v:161"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_compose_rw1"><span class="id" title="lemma">Batch_make_compose_rw1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_spec"><span class="id" title="lemma">Batch_replace_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim2"><span class="id" title="lemma">Batch_make_sim2</span></a>; <span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#trf_duplicate"><span class="id" title="method">trf_duplicate</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab736"></a><h3 class="section">put-get</h3>

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="trav_contents_make" class="idref" href="#trav_contents_make"><span class="id" title="lemma">trav_contents_make</span></a> {<a id="A:162" class="idref" href="#A:162"><span class="id" title="binder">A</span></a>} {<a id="t:163" class="idref" href="#t:163"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:162"><span class="id" title="variable">A</span></a>} {<a id="v:164" class="idref" href="#v:164"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:163"><span class="id" title="variable">t</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:162"><span class="id" title="variable">A</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_contents"><span class="id" title="definition">trav_contents</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:163"><span class="id" title="variable">t</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v:164"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v:164"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_contents"><span class="id" title="definition">trav_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#toBatch_trav_make"><span class="id" title="lemma">toBatch_trav_make</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_put_get"><span class="id" title="lemma">Batch_put_get</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab737"></a><h3 class="section">put-put</h3>

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="trav_make_make" class="idref" href="#trav_make_make"><span class="id" title="lemma">trav_make_make</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="t:166" class="idref" href="#t:166"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a id="A:165" class="idref" href="#A:165"><span class="id" title="binder">A</span></a>) `(<a id="v:168" class="idref" href="#v:168"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:166"><span class="id" title="variable">t</span></a>) <a id="B:167" class="idref" href="#B:167"><span class="id" title="binder">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="v1:170" class="idref" href="#v1:170"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="B':169" class="idref" href="#B':169"><span class="id" title="binder">B'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v2:171" class="idref" href="#v2:171"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B':169"><span class="id" title="variable">B'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:172" class="idref" href="#pf:172"><span class="id" title="binder">pf</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v1:170"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v2:171"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:166"><span class="id" title="variable">t</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v:168"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v1:170"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:166"><span class="id" title="variable">t</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v2:171"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <span class="id" title="tactic">at</span> 7.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim3"><span class="id" title="lemma">Batch_make_sim3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#toBatch_trav_make"><span class="id" title="lemma">toBatch_trav_make</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_shape_replace_contents"><span class="id" title="lemma">Batch_shape_replace_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="deconstruction.lens_laws.:::'precoerce'_x_'in'_x" class="idref" href="#deconstruction.lens_laws.:::'precoerce'_x_'in'_x"><span class="id" title="notation">&quot;</span></a>'precoerce' Hlen 'in' F" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#fa652b8c8091f60ed5a3b127754ad981"><span class="id" title="notation">○</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_length"><span class="id" title="definition">coerce_Vector_length</span></a> <span class="id" title="var">Hlen</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">F</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="trav_same_shape" class="idref" href="#trav_same_shape"><span class="id" title="lemma">trav_same_shape</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="t1:174" class="idref" href="#t1:174"><span class="id" title="binder">t1</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a id="A:173" class="idref" href="#A:173"><span class="id" title="binder">A</span></a>) `(<a id="t2:176" class="idref" href="#t2:176"><span class="id" title="binder">t2</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a id="A':175" class="idref" href="#A':175"><span class="id" title="binder">A'</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:174"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:176"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="B:177" class="idref" href="#B:177"><span class="id" title="binder">B</span></a>, <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:177"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t1:174"><span class="id" title="variable">t1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#7ad275f9c7d3d9469cfa6fc77617779f"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t2:176"><span class="id" title="variable">t2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_coerce_fun_sim_l'"><span class="id" title="lemma">Vector_coerce_fun_sim_l'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_coerce_fun_sim_r'"><span class="id" title="lemma">Vector_coerce_fun_sim_r'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_shape"><span class="id" title="lemma">Batch_make_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#toBatch_shape"><span class="id" title="lemma">toBatch_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.lens_laws"><span class="id" title="section">lens_laws</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab738"></a><h2 class="section">Representation theorems</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_repr" class="idref" href="#traverse_repr"><span class="id" title="lemma">traverse_repr</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `{<a id="H6:182" class="idref" href="#H6:182"><span class="id" title="binder">Applicative</span></a> <a id="H6:182" class="idref" href="#H6:182"><span class="id" title="binder">G</span></a>} (<a id="A:183" class="idref" href="#A:183"><span class="id" title="binder">A</span></a> <a id="B:184" class="idref" href="#B:184"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>) (<a id="t:185" class="idref" href="#t:185"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:183"><span class="id" title="variable">A</span></a>) (<a id="f:186" class="idref" href="#f:186"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:183"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#G:178"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:184"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f:186"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:185"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:185"><span class="id" title="variable">t</span></a>) (<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f:186"><span class="id" title="variable">f</span></a>) (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_contents"><span class="id" title="definition">trav_contents</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:185"><span class="id" title="variable">t</span></a>))).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#traverse_through_runBatch"><span class="id" title="lemma">traverse_through_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#runBatch_repr2"><span class="id" title="lemma">runBatch_repr2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a>, <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_contents"><span class="id" title="definition">trav_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#traverse_Vector_coerce"><span class="id" title="lemma">traverse_Vector_coerce</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">change_left</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="v:188" class="idref" href="#v:188"><span class="id" title="binder">v</span></a> : <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">B</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> (<span class="id" title="var">B</span> := <span class="id" title="var">B</span>) <span class="id" title="var">t</span>) <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v:187"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> (<span class="id" title="var">B</span> := <span class="id" title="var">B</span>) <span class="id" title="var">t</span><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>)))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> ((<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#plength_eq_length"><span class="id" title="lemma">plength_eq_length</span></a> (<span class="id" title="var">B</span> := <span class="id" title="var">B</span>) <span class="id" title="var">t</span><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.TraversableFunctor.html#toBatch"><span class="id" title="definition">toBatch</span></a> <span class="id" title="var">t</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_eq"><span class="id" title="lemma">Vector_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_coerce_sim_l'"><span class="id" title="lemma">Vector_coerce_sim_l'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_coerce_sim_r'"><span class="id" title="lemma">Vector_coerce_sim_r'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Batch_contents_toBatch_sim"><span class="id" title="lemma">Batch_contents_toBatch_sim</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab739"></a><h2 class="section">Lemmas regarding <code>plength</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="plength_trav_make" class="idref" href="#plength_trav_make"><span class="id" title="lemma">plength_trav_make</span></a>: <span class="id" title="keyword">∀</span> `(<a id="t:190" class="idref" href="#t:190"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction.T"><span class="id" title="variable">T</span></a> <a id="A:189" class="idref" href="#A:189"><span class="id" title="binder">A</span></a>) `(<a id="v:192" class="idref" href="#v:192"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="B:191" class="idref" href="#B:191"><span class="id" title="binder">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:190"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#trav_make"><span class="id" title="definition">trav_make</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#t:190"><span class="id" title="variable">t</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#v:192"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> <span class="id" title="tactic">at</span> 1 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">change</span> (<span class="id" title="keyword">fun</span> (<a id="x:195" class="idref" href="#x:195"><span class="id" title="binder">x</span></a>:?<span class="id" title="var">X</span>) ⇒ 1) <span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> (<span class="id" title="var">A</span> := <span class="id" title="var">X</span>) 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#foldMap_through_runBatch2"><span class="id" title="lemma">foldMap_through_runBatch2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#toBatch_trav_make"><span class="id" title="lemma">toBatch_trav_make</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">B</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Theory.Batch.html#runBatch_const_contents"><span class="id" title="lemma">runBatch_const_contents</span></a> (<span class="id" title="var">G</span> := @<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="keyword">Type</span> <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#deconstruction"><span class="id" title="section">deconstruction</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="ToSubset_Vector" class="idref" href="#ToSubset_Vector"><span class="id" title="instance">ToSubset_Vector</span></a> {<a id="n:196" class="idref" href="#n:196"><span class="id" title="binder">n</span></a>}: <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#ToSubset"><span class="id" title="class">ToSubset</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#n:196"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">l</span> <span class="id" title="var">pf</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab740"></a><h1 class="section">Auto-refining <code>Batch</code></h1>

</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#"><span class="id" title="library">ContainerFunctor</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#Notations"><span class="id" title="module">ContainerFunctor.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Notations"><span class="id" title="module">Applicative.Notations</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="ToSubset_Batch1" class="idref" href="#ToSubset_Batch1"><span class="id" title="instance">ToSubset_Batch1</span></a> {<a id="B:197" class="idref" href="#B:197"><span class="id" title="binder">B</span></a> <a id="C:198" class="idref" href="#C:198"><span class="id" title="binder">C</span></a>}: <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#ToSubset"><span class="id" title="class">ToSubset</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:197"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:198"><span class="id" title="variable">C</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#ToSubset_Traverse"><span class="id" title="instance">ToSubset_Traverse</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="pw_Batch" class="idref" href="#pw_Batch"><span class="id" title="section">pw_Batch</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="foldMap_Batch_rw2" class="idref" href="#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>: <span class="id" title="keyword">∀</span> {<a id="A:199" class="idref" href="#A:199"><span class="id" title="binder">A</span></a> <a id="B:200" class="idref" href="#B:200"><span class="id" title="binder">B</span></a> <a id="C:201" class="idref" href="#C:201"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} `{<a id="H:205" class="idref" href="#H:205"><span class="id" title="binder">Monoid</span></a> <a id="H:205" class="idref" href="#H:205"><span class="id" title="binder">M</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:206" class="idref" href="#f:206"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:199"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#M:202"><span class="id" title="variable">M</span></a>) (<a id="a:207" class="idref" href="#a:207"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:199"><span class="id" title="variable">A</span></a>) (<a id="rest:208" class="idref" href="#rest:208"><span class="id" title="binder">rest</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:199"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:200"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:200"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:201"><span class="id" title="variable">C</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:200"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:201"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f:206"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#rest:208"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:207"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f:206"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#rest:208"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Classes.Monoid.html#23f40b1adcf5df7d889fd9b798da390c"><span class="id" title="notation">●</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#f:206"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:207"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#traverse_Batch_rw2"><span class="id" title="lemma">traverse_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tosubset_Step1" class="idref" href="#tosubset_Step1"><span class="id" title="definition">tosubset_Step1</span></a> {<a id="A:209" class="idref" href="#A:209"><span class="id" title="binder">A</span></a> <a id="B:210" class="idref" href="#B:210"><span class="id" title="binder">B</span></a> <a id="C:211" class="idref" href="#C:211"><span class="id" title="binder">C</span></a>:<span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a':212" class="idref" href="#a':212"><span class="id" title="binder">a'</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:209"><span class="id" title="variable">A</span></a>) (<a id="rest:213" class="idref" href="#rest:213"><span class="id" title="binder">rest</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:209"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:210"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:210"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:211"><span class="id" title="variable">C</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a:214" class="idref" href="#a:214"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:209"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:210"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:210"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:211"><span class="id" title="variable">C</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#rest:213"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:214"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:210"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:211"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#rest:213"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a':212"><span class="id" title="variable">a'</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:214"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#ToSubset_Batch1"><span class="id" title="instance">ToSubset_Batch1</span></a> @<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#ToSubset_Traverse"><span class="id" title="instance">ToSubset_Traverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a> <span class="id" title="var">a</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Misc.Subset.html#Notations.::tealeaves_scope:'subset'"><span class="id" title="notation">subset</span></a>))<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">rest</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a> <span class="id" title="var">a</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Misc.Subset.html#Notations.::tealeaves_scope:'subset'"><span class="id" title="notation">subset</span></a>))<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">rest</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">a'</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap_morphism"><span class="id" title="lemma">foldMap_morphism</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ϕ</span> := <a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a> <span class="id" title="var">a</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap_morphism"><span class="id" title="lemma">foldMap_morphism</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ϕ</span> := <a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tosubset_Step2" class="idref" href="#tosubset_Step2"><span class="id" title="definition">tosubset_Step2</span></a> {<a id="A:215" class="idref" href="#A:215"><span class="id" title="binder">A</span></a> <a id="B:216" class="idref" href="#B:216"><span class="id" title="binder">B</span></a> <a id="C:217" class="idref" href="#C:217"><span class="id" title="binder">C</span></a>:<span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="rest:218" class="idref" href="#rest:218"><span class="id" title="binder">rest</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:215"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:216"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:216"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:217"><span class="id" title="variable">C</span></a>)) (<a id="a:219" class="idref" href="#a:219"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:215"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:216"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:217"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#rest:218"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:219"><span class="id" title="variable">a</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:219"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#ToSubset_Batch1"><span class="id" title="instance">ToSubset_Batch1</span></a> @<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#ToSubset_Traverse"><span class="id" title="instance">ToSubset_Traverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a> <span class="id" title="var">a</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Misc.Subset.html#Notations.::tealeaves_scope:'subset'"><span class="id" title="notation">subset</span></a>))<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">rest</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">a</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap_morphism"><span class="id" title="lemma">foldMap_morphism</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ϕ</span> := <a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="element_of_Step_spec" class="idref" href="#element_of_Step_spec"><span class="id" title="lemma">element_of_Step_spec</span></a>: <span class="id" title="keyword">∀</span> `(<a id="b:223" class="idref" href="#b:223"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:220" class="idref" href="#A:220"><span class="id" title="binder">A</span></a> <a id="B:221" class="idref" href="#B:221"><span class="id" title="binder">B</span></a> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="C:222" class="idref" href="#C:222"><span class="id" title="binder">C</span></a>)) <a id="a:224" class="idref" href="#a:224"><span class="id" title="binder">a</span></a> <a id="a':225" class="idref" href="#a':225"><span class="id" title="binder">a'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a':225"><span class="id" title="variable">a'</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b:223"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:224"><span class="id" title="variable">a</span></a><a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a':225"><span class="id" title="variable">a'</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b:223"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a':225"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:224"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#element_of_to_foldMap"><span class="id" title="lemma">element_of_to_foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#element_of_to_foldMap"><span class="id" title="lemma">element_of_to_foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="sigMapP" class="idref" href="#sigMapP"><span class="id" title="definition">sigMapP</span></a> (<a id="A:226" class="idref" href="#A:226"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>) (<a id="P:227" class="idref" href="#P:227"><span class="id" title="binder">P</span></a> <a id="Q:228" class="idref" href="#Q:228"><span class="id" title="binder">Q</span></a>: <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:226"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="Himpl:230" class="idref" href="#Himpl:230"><span class="id" title="binder">Himpl</span></a>: <span class="id" title="keyword">∀</span> <a id="a:229" class="idref" href="#a:229"><span class="id" title="binder">a</span></a>, <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#P:227"><span class="id" title="variable">P</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:229"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Q:228"><span class="id" title="variable">Q</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:229"><span class="id" title="variable">a</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#P:227"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Q:228"><span class="id" title="variable">Q</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="723824d26a1aa3d1e06b3e37e32564fd" class="idref" href="#723824d26a1aa3d1e06b3e37e32564fd"><span class="id" title="binder">σ</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#723824d26a1aa3d1e06b3e37e32564fd"><span class="id" title="variable">σ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">a</span> <span class="id" title="var">h</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Q:228"><span class="id" title="variable">Q</span></a> <span class="id" title="var">a</span> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Himpl:230"><span class="id" title="variable">Himpl</span></a> <span class="id" title="var">a</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="elt_decorate" class="idref" href="#elt_decorate"><span class="id" title="definition">elt_decorate</span></a><br/>
&nbsp;&nbsp;&nbsp;{<a id="A:233" class="idref" href="#A:233"><span class="id" title="binder">A</span></a> <a id="B:234" class="idref" href="#B:234"><span class="id" title="binder">B</span></a> <a id="C:235" class="idref" href="#C:235"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;(<a id="b:236" class="idref" href="#b:236"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:233"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:234"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:235"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="a:237" class="idref" href="#a:237"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:234"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:235"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b:236"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:237"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:234"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:235"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b:236"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:234"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:234"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:235"><span class="id" title="variable">C</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#sigMapP"><span class="id" title="definition">sigMapP</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:233"><span class="id" title="variable">A</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:234"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:234"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:235"><span class="id" title="variable">C</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:234"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:235"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#tosubset_Step1"><span class="id" title="definition">tosubset_Step1</span></a> <span class="id" title="var">a</span> <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#elt_decorate:238"><span class="id" title="definition">elt_decorate</span></a> <span class="id" title="var">rest</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">a</span> (<a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#tosubset_Step2"><span class="id" title="definition">tosubset_Step2</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="runBatch_pw" class="idref" href="#runBatch_pw"><span class="id" title="definition">runBatch_pw</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:240" class="idref" href="#A:240"><span class="id" title="binder">A</span></a> <a id="B:241" class="idref" href="#B:241"><span class="id" title="binder">B</span></a> <a id="C:242" class="idref" href="#C:242"><span class="id" title="binder">C</span></a>} (<a id="G:243" class="idref" href="#G:243"><span class="id" title="binder">G</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H2:247" class="idref" href="#H2:247"><span class="id" title="binder">Applicative</span></a> <a id="H2:247" class="idref" href="#H2:247"><span class="id" title="binder">G</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:248" class="idref" href="#b:248"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#A:240"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:241"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:242"><span class="id" title="variable">C</span></a>) `(<a id="f1:250" class="idref" href="#f1:250"><span class="id" title="binder">f1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="a:249" class="idref" href="#a:249"><span class="id" title="binder">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:241"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:242"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#b:248"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#a:249"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#G:243"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#B:241"><span class="id" title="variable">B</span></a>), <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#G:243"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#C:242"><span class="id" title="variable">C</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap"><span class="id" title="definition">ap</span></a> <span class="id" title="var">G</span> (<span class="id" title="var">A</span> := <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">a'</span> <span class="id" title="var">a'in</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">a'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">a'</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span> <a class="idref" href="Tealeaves.Functors.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <span class="id" title="var">a</span><a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#element_of_Step_spec"><span class="id" title="lemma">element_of_Step_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">a</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span> <a class="idref" href="Tealeaves.Functors.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <span class="id" title="var">a</span><a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#element_of_Step_spec"><span class="id" title="lemma">element_of_Step_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#pw_Batch"><span class="id" title="section">pw_Batch</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
