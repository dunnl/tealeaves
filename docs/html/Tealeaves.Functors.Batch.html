<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Tealeaves.Functors.Batch</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves.Classes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Monoid.html#"><span class="id" title="library">Monoid</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#"><span class="id" title="library">Categorical.Applicative</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#"><span class="id" title="library">Categorical.Monad</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#"><span class="id" title="library">Categorical.ShapelyFunctor</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#"><span class="id" title="library">Kleisli.TraversableFunctor</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#"><span class="id" title="library">Kleisli.Theory.TraversableFunctor</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves.Functors</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Constant.html#"><span class="id" title="library">Constant</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.List.html#"><span class="id" title="library">List</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#"><span class="id" title="library">VectorRefinement</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#Notations"><span class="id" title="module">Monoid.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Notations"><span class="id" title="module">Applicative.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#Notations"><span class="id" title="module">Kleisli.TraversableFunctor.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#Notations"><span class="id" title="module">Theory.TraversableFunctor.Notations</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">Variables</span> ψ <span class="id" title="var">ϕ</span> <span class="id" title="var">W</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">M</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">O</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">F</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">Map</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">function_scope</span> <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> <span class="id" title="var">T</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">Return</span>} (<span class="id" title="var">A</span>)%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <span class="id" title="var">F</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">Pure</span>} {<span class="id" title="var">A</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#mult"><span class="id" title="definition">mult</span></a> <span class="id" title="var">F</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">Mult</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab553"></a><h1 class="section">The <span class="inlinecode"><a class="idref" href="Tealeaves.Theory.TraversableFunctor.html#Batch"><span class="id" title="section">Batch</span></a></span> idiom</h1>

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="Batch" class="idref" href="#Batch"><span class="id" title="inductive">Batch</span></a> (<a id="A:1" class="idref" href="#A:1"><span class="id" title="binder">A</span></a> <a id="B:2" class="idref" href="#B:2"><span class="id" title="binder">B</span></a> <a id="C:3" class="idref" href="#C:3"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="Done" class="idref" href="#Done"><span class="id" title="constructor">Done</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:3"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch:4"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:2"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:3"><span class="id" title="variable">C</span></a><br/>
| <a id="Step" class="idref" href="#Step"><span class="id" title="constructor">Step</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch:4"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:2"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:2"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:3"><span class="id" title="variable">C</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch:4"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:2"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:3"><span class="id" title="variable">C</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Infix</span> "⧆" := (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 51, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">tealeaves_scope</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Notation</span> "'BATCH1' B C" := (<span class="id" title="keyword">fun</span> <a id="A:6" class="idref" href="#A:6"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:6"><span class="id" title="variable">A</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0, <span class="id" title="var">B</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0, <span class="id" title="var">C</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Notation</span> "'BATCH2' A C" := (<span class="id" title="keyword">fun</span> <a id="B:7" class="idref" href="#B:7"><span class="id" title="binder">B</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <a class="idref" href="Tealeaves.Functors.Batch.html#B:7"><span class="id" title="variable">B</span></a> <span class="id" title="var">C</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 3).<br/>

<br/>
</div>

<div class="doc">
<a id="lab554"></a><h2 class="section">Functor instances</h2>

<div class="paragraph"> </div>

<a id="lab555"></a><h3 class="section">Map operations</h3>

</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="map_Batch" class="idref" href="#map_Batch"><span class="id" title="definition">map_Batch</span></a> {<a id="A:8" class="idref" href="#A:8"><span class="id" title="binder">A</span></a> <a id="B:9" class="idref" href="#B:9"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="C1:10" class="idref" href="#C1:10"><span class="id" title="binder">C1</span></a> <a id="C2:11" class="idref" href="#C2:11"><span class="id" title="binder">C2</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:12" class="idref" href="#f:12"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C1:10"><span class="id" title="variable">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:11"><span class="id" title="variable">C2</span></a>) (<a id="b:13" class="idref" href="#b:13"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:8"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:9"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:10"><span class="id" title="variable">C1</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:8"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:9"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:11"><span class="id" title="variable">C2</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:13"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:8"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:9"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:11"><span class="id" title="variable">C2</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#f:12"><span class="id" title="variable">f</span></a> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:8"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:9"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:11"><span class="id" title="variable">C2</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#map_Batch:14"><span class="id" title="definition">map_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:8"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:9"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:9"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:10"><span class="id" title="variable">C1</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#B:9"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:11"><span class="id" title="variable">C2</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:12"><span class="id" title="variable">f</span></a>) <span class="id" title="var">rest</span>) <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Map_Batch" class="idref" href="#Map_Batch"><span class="id" title="instance">Map_Batch</span></a> {<a id="A:16" class="idref" href="#A:16"><span class="id" title="binder">A</span></a> <a id="B:17" class="idref" href="#B:17"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="Tealeaves.Classes.Functor.html#Map"><span class="id" title="class">Map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:16"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:17"><span class="id" title="variable">B</span></a>) := @<a class="idref" href="Tealeaves.Functors.Batch.html#map_Batch"><span class="id" title="definition">map_Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="mapfst_Batch" class="idref" href="#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> {<a id="B:18" class="idref" href="#B:18"><span class="id" title="binder">B</span></a> <a id="C:19" class="idref" href="#C:19"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} (<a id="A1:20" class="idref" href="#A1:20"><span class="id" title="binder">A1</span></a> <a id="A2:21" class="idref" href="#A2:21"><span class="id" title="binder">A2</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:22" class="idref" href="#f:22"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A1:20"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:21"><span class="id" title="variable">A2</span></a>) (<a id="b:23" class="idref" href="#b:23"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:20"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:18"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:19"><span class="id" title="variable">C</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:21"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:18"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:19"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:23"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:21"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:18"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:19"><span class="id" title="variable">C</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:21"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:18"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:19"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch:24"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:20"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:21"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:22"><span class="id" title="variable">f</span></a> <span class="id" title="var">rest</span>) (<a class="idref" href="Tealeaves.Functors.Batch.html#f:22"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Map_Batch1" class="idref" href="#Map_Batch1"><span class="id" title="instance">Map_Batch1</span></a> {<a id="B:26" class="idref" href="#B:26"><span class="id" title="binder">B</span></a> <a id="C:27" class="idref" href="#C:27"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="Tealeaves.Classes.Functor.html#Map"><span class="id" title="class">Map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:26"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:27"><span class="id" title="variable">C</span></a>) := @<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="mapsnd_Batch" class="idref" href="#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> {<a id="A:28" class="idref" href="#A:28"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="B1:29" class="idref" href="#B1:29"><span class="id" title="binder">B1</span></a> <a id="B2:30" class="idref" href="#B2:30"><span class="id" title="binder">B2</span></a> : <span class="id" title="keyword">Type</span>) {<a id="C:31" class="idref" href="#C:31"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:32" class="idref" href="#f:32"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#B1:29"><span class="id" title="variable">B1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:30"><span class="id" title="variable">B2</span></a>) (<a id="b:33" class="idref" href="#b:33"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:28"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:30"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:31"><span class="id" title="variable">C</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:28"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:29"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:31"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:33"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:28"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:29"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:31"><span class="id" title="variable">C</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:28"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:29"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:31"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:28"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:29"><span class="id" title="variable">B1</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:32"><span class="id" title="variable">f</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch:34"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:29"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:30"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:32"><span class="id" title="variable">f</span></a> <span class="id" title="var">rest</span>)) <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab556"></a><h3 class="section">Rewriting principles</h3>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="map_Batch_rw1" class="idref" href="#map_Batch_rw1"><span class="id" title="lemma">map_Batch_rw1</span></a> {<a id="A:36" class="idref" href="#A:36"><span class="id" title="binder">A</span></a> <a id="B:37" class="idref" href="#B:37"><span class="id" title="binder">B</span></a> <a id="C1:38" class="idref" href="#C1:38"><span class="id" title="binder">C1</span></a> <a id="C2:39" class="idref" href="#C2:39"><span class="id" title="binder">C2</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:40" class="idref" href="#f:40"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C1:38"><span class="id" title="variable">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:39"><span class="id" title="variable">C2</span></a>) (<a id="c:41" class="idref" href="#c:41"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C1:38"><span class="id" title="variable">C1</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:36"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:37"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:40"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:36"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:37"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:38"><span class="id" title="variable">C1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:41"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:36"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:37"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:39"><span class="id" title="variable">C2</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#f:40"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:41"><span class="id" title="variable">c</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_Batch_rw2" class="idref" href="#map_Batch_rw2"><span class="id" title="lemma">map_Batch_rw2</span></a> {<a id="A:42" class="idref" href="#A:42"><span class="id" title="binder">A</span></a> <a id="B:43" class="idref" href="#B:43"><span class="id" title="binder">B</span></a> <a id="C1:44" class="idref" href="#C1:44"><span class="id" title="binder">C1</span></a> <a id="C2:45" class="idref" href="#C2:45"><span class="id" title="binder">C2</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:46" class="idref" href="#f:46"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C1:44"><span class="id" title="variable">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:45"><span class="id" title="variable">C2</span></a>) (<a id="a:47" class="idref" href="#a:47"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:42"><span class="id" title="variable">A</span></a>) (<a id="rest:48" class="idref" href="#rest:48"><span class="id" title="binder">rest</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:42"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:43"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:43"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:44"><span class="id" title="variable">C1</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:42"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:43"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:46"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#rest:48"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:47"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:42"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:43"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:46"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#rest:48"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:47"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapfst_Batch_rw1" class="idref" href="#mapfst_Batch_rw1"><span class="id" title="lemma">mapfst_Batch_rw1</span></a> {<a id="A1:49" class="idref" href="#A1:49"><span class="id" title="binder">A1</span></a> <a id="A2:50" class="idref" href="#A2:50"><span class="id" title="binder">A2</span></a> <a id="B:51" class="idref" href="#B:51"><span class="id" title="binder">B</span></a> <a id="C:52" class="idref" href="#C:52"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:53" class="idref" href="#f:53"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A1:49"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:50"><span class="id" title="variable">A2</span></a>) (<a id="c:54" class="idref" href="#c:54"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:52"><span class="id" title="variable">C</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:49"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:50"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:53"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:49"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:51"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:52"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:54"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:50"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:51"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:52"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:54"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapfst_Batch_rw2" class="idref" href="#mapfst_Batch_rw2"><span class="id" title="lemma">mapfst_Batch_rw2</span></a> {<a id="A1:55" class="idref" href="#A1:55"><span class="id" title="binder">A1</span></a> <a id="A2:56" class="idref" href="#A2:56"><span class="id" title="binder">A2</span></a> <a id="B:57" class="idref" href="#B:57"><span class="id" title="binder">B</span></a> <a id="C:58" class="idref" href="#C:58"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:59" class="idref" href="#f:59"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A1:55"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:56"><span class="id" title="variable">A2</span></a>) (<a id="a:60" class="idref" href="#a:60"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A1:55"><span class="id" title="variable">A1</span></a>) (<a id="b:61" class="idref" href="#b:61"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:55"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:57"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:57"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:58"><span class="id" title="variable">C</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:55"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:56"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:59"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b:61"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:60"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:55"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:56"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:59"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:61"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:59"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:60"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapsnd_Batch_rw1" class="idref" href="#mapsnd_Batch_rw1"><span class="id" title="lemma">mapsnd_Batch_rw1</span></a> {<a id="A:62" class="idref" href="#A:62"><span class="id" title="binder">A</span></a> <a id="B:63" class="idref" href="#B:63"><span class="id" title="binder">B</span></a> <a id="B':64" class="idref" href="#B':64"><span class="id" title="binder">B'</span></a> <a id="C:65" class="idref" href="#C:65"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:66" class="idref" href="#f:66"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#B':64"><span class="id" title="variable">B'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:63"><span class="id" title="variable">B</span></a>) (<a id="c:67" class="idref" href="#c:67"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:65"><span class="id" title="variable">C</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':64"><span class="id" title="variable">B'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:63"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:66"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:62"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:63"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:65"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:67"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:62"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':64"><span class="id" title="variable">B'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:65"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:67"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapsnd_Batch_rw2" class="idref" href="#mapsnd_Batch_rw2"><span class="id" title="lemma">mapsnd_Batch_rw2</span></a> {<a id="A:68" class="idref" href="#A:68"><span class="id" title="binder">A</span></a> <a id="B:69" class="idref" href="#B:69"><span class="id" title="binder">B</span></a> <a id="B':70" class="idref" href="#B':70"><span class="id" title="binder">B'</span></a> <a id="C:71" class="idref" href="#C:71"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:72" class="idref" href="#f:72"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#B:69"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':70"><span class="id" title="variable">B'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:73" class="idref" href="#a:73"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:68"><span class="id" title="variable">A</span></a>) (<a id="b:74" class="idref" href="#b:74"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:68"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':70"><span class="id" title="variable">B'</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B':70"><span class="id" title="variable">B'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:71"><span class="id" title="variable">C</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:69"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':70"><span class="id" title="variable">B'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:72"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b:74"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:73"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:68"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:69"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:72"><span class="id" title="variable">f</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:69"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':70"><span class="id" title="variable">B'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:72"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:74"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:73"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab557"></a><h3 class="section">Functor laws</h3>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="map_id_Batch" class="idref" href="#map_id_Batch"><span class="id" title="lemma">map_id_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:75" class="idref" href="#A:75"><span class="id" title="binder">A</span></a> <a id="B:76" class="idref" href="#B:76"><span class="id" title="binder">B</span></a> <a id="C:77" class="idref" href="#C:77"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:75"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:76"><span class="id" title="variable">B</span></a>) (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:77"><span class="id" title="variable">C</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:75"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:76"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:77"><span class="id" title="variable">C</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span>|<span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">lemma</span> : <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">C</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. } <span class="id" title="tactic">rewrite</span> <span class="id" title="var">lemma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_map_Batch" class="idref" href="#map_map_Batch"><span class="id" title="lemma">map_map_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:78" class="idref" href="#A:78"><span class="id" title="binder">A</span></a> <a id="B:79" class="idref" href="#B:79"><span class="id" title="binder">B</span></a> <a id="C1:80" class="idref" href="#C1:80"><span class="id" title="binder">C1</span></a> <a id="C2:81" class="idref" href="#C2:81"><span class="id" title="binder">C2</span></a> <a id="C3:82" class="idref" href="#C3:82"><span class="id" title="binder">C3</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:83" class="idref" href="#f:83"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C1:80"><span class="id" title="variable">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:81"><span class="id" title="variable">C2</span></a>) (<a id="g:84" class="idref" href="#g:84"><span class="id" title="binder">g</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C2:81"><span class="id" title="variable">C2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C3:82"><span class="id" title="variable">C3</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:78"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:79"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#g:84"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:78"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:79"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:83"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:78"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:79"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#g:84"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:83"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C2</span>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C3</span>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>, <span class="id" title="var">program</span>] <span class="id" title="keyword">Instance</span> <a id="Functor_Batch" class="idref" href="#Functor_Batch"><span class="id" title="instance">Functor_Batch</span></a> {<a id="A:85" class="idref" href="#A:85"><span class="id" title="binder">A</span></a> <a id="B:86" class="idref" href="#B:86"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="Tealeaves.Classes.Functor.html#Functor"><span class="id" title="class">Functor</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:85"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:86"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_id"><span class="id" title="method">fun_map_id</span></a> := @<a class="idref" href="Tealeaves.Functors.Batch.html#map_id_Batch"><span class="id" title="lemma">map_id_Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> := @<a class="idref" href="Tealeaves.Functors.Batch.html#map_map_Batch"><span class="id" title="lemma">map_map_Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapfst_id_Batch" class="idref" href="#mapfst_id_Batch"><span class="id" title="lemma">mapfst_id_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="B:87" class="idref" href="#B:87"><span class="id" title="binder">B</span></a> <a id="C:88" class="idref" href="#C:88"><span class="id" title="binder">C</span></a> <a id="A:89" class="idref" href="#A:89"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:89"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:89"><span class="id" title="variable">A</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:89"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:89"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:87"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:88"><span class="id" title="variable">C</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span>|<span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapfst_mapfst_Batch" class="idref" href="#mapfst_mapfst_Batch"><span class="id" title="lemma">mapfst_mapfst_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="B:90" class="idref" href="#B:90"><span class="id" title="binder">B</span></a> <a id="C:91" class="idref" href="#C:91"><span class="id" title="binder">C</span></a> <a id="A1:92" class="idref" href="#A1:92"><span class="id" title="binder">A1</span></a> <a id="A2:93" class="idref" href="#A2:93"><span class="id" title="binder">A2</span></a> <a id="A3:94" class="idref" href="#A3:94"><span class="id" title="binder">A3</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:95" class="idref" href="#f:95"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A1:92"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:93"><span class="id" title="variable">A2</span></a>) (<a id="g:96" class="idref" href="#g:96"><span class="id" title="binder">g</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A2:93"><span class="id" title="variable">A2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A3:94"><span class="id" title="variable">A3</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#g:96"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:95"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#B:90"><span class="id" title="variable">B</span></a>) (<span class="id" title="var">C</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#C:91"><span class="id" title="variable">C</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#g:96"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:95"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span>|<span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHrest</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>, <span class="id" title="var">program</span>] <span class="id" title="keyword">Instance</span> <a id="Functor_Batch1" class="idref" href="#Functor_Batch1"><span class="id" title="instance">Functor_Batch1</span></a> {<a id="B:97" class="idref" href="#B:97"><span class="id" title="binder">B</span></a> <a id="C:98" class="idref" href="#C:98"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="Tealeaves.Classes.Functor.html#Functor"><span class="id" title="class">Functor</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:97"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:98"><span class="id" title="variable">C</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_id"><span class="id" title="method">fun_map_id</span></a> := @<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_id_Batch"><span class="id" title="lemma">mapfst_id_Batch</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> := @<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_mapfst_Batch"><span class="id" title="lemma">mapfst_mapfst_Batch</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab558"></a><h3 class="section">Commuting independent maps</h3>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="mapfst_map_Batch" class="idref" href="#mapfst_map_Batch"><span class="id" title="lemma">mapfst_map_Batch</span></a> {<a id="B:99" class="idref" href="#B:99"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:102" class="idref" href="#f:102"><span class="id" title="binder">f</span></a> : <a id="A1:100" class="idref" href="#A1:100"><span class="id" title="binder">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="A2:101" class="idref" href="#A2:101"><span class="id" title="binder">A2</span></a>) `(<a id="g:105" class="idref" href="#g:105"><span class="id" title="binder">g</span></a> : <a id="C1:103" class="idref" href="#C1:103"><span class="id" title="binder">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="C2:104" class="idref" href="#C2:104"><span class="id" title="binder">C2</span></a>) (<a id="b:106" class="idref" href="#b:106"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:100"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:99"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:103"><span class="id" title="variable">C1</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:100"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:101"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:102"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:100"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:99"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#g:105"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:106"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:101"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:99"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#g:105"><span class="id" title="variable">g</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:100"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:101"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:102"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:106"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">B</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C2</span>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapsnd_map_Batch" class="idref" href="#mapsnd_map_Batch"><span class="id" title="lemma">mapsnd_map_Batch</span></a> {<a id="A:107" class="idref" href="#A:107"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:110" class="idref" href="#f:110"><span class="id" title="binder">f</span></a> : <a id="B1:108" class="idref" href="#B1:108"><span class="id" title="binder">B1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="B2:109" class="idref" href="#B2:109"><span class="id" title="binder">B2</span></a>) `(<a id="g:113" class="idref" href="#g:113"><span class="id" title="binder">g</span></a> : <a id="C1:111" class="idref" href="#C1:111"><span class="id" title="binder">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="C2:112" class="idref" href="#C2:112"><span class="id" title="binder">C2</span></a>) (<a id="b:114" class="idref" href="#b:114"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:107"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:109"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:111"><span class="id" title="variable">C1</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:108"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:109"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:110"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:107"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:109"><span class="id" title="variable">B2</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#g:113"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:114"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:107"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:108"><span class="id" title="variable">B1</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#g:113"><span class="id" title="variable">g</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:108"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:109"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:110"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:114"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapfst_mapsnd_Batch" class="idref" href="#mapfst_mapsnd_Batch"><span class="id" title="lemma">mapfst_mapsnd_Batch</span></a> : <span class="id" title="keyword">∀</span> {<a id="C:115" class="idref" href="#C:115"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:118" class="idref" href="#f:118"><span class="id" title="binder">f</span></a> : <a id="A1:116" class="idref" href="#A1:116"><span class="id" title="binder">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="A2:117" class="idref" href="#A2:117"><span class="id" title="binder">A2</span></a>) `(<a id="g:121" class="idref" href="#g:121"><span class="id" title="binder">g</span></a> : <a id="B1:119" class="idref" href="#B1:119"><span class="id" title="binder">B1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="B2:120" class="idref" href="#B2:120"><span class="id" title="binder">B2</span></a>) (<a id="b:122" class="idref" href="#b:122"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:116"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:120"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:115"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:116"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:117"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:118"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:119"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:120"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#g:121"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:122"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:119"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:120"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#g:121"><span class="id" title="variable">g</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:116"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:117"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:118"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:122"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_map_Batch"><span class="id" title="lemma">mapfst_map_Batch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab559"></a><h2 class="section">Applicative instance</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="Applicative_Batch" class="idref" href="#Applicative_Batch"><span class="id" title="section">Applicative_Batch</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:123" class="idref" href="#A:123"><span class="id" title="binder">A</span></a> <a id="B:124" class="idref" href="#B:124"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab560"></a><h3 class="section">Operations</h3>

</div>
<div class="code">
&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Pure_Batch" class="idref" href="#Pure_Batch"><span class="id" title="instance">Pure_Batch</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Pure"><span class="id" title="class">Pure</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="C:125" class="idref" href="#C:125"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="c:126" class="idref" href="#c:126"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:125"><span class="id" title="variable">C</span></a>) ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:125"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:126"><span class="id" title="variable">c</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="mult_Batch" class="idref" href="#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> `(<a id="b1:128" class="idref" href="#b1:128"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a id="C:127" class="idref" href="#C:127"><span class="id" title="binder">C</span></a>) `(<a id="b2:130" class="idref" href="#b2:130"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a id="D:129" class="idref" href="#D:129"><span class="id" title="binder">D</span></a>) : @<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:127"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:129"><span class="id" title="variable">D</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:130"><span class="id" title="variable">b2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">d</span> ⇒ <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) (<span class="id" title="keyword">fun</span> (<a id="c:133" class="idref" href="#c:133"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:127"><span class="id" title="variable">C</span></a>) ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#c:133"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:128"><span class="id" title="variable">b1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:127"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:129"><span class="id" title="variable">D</span></a>) (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#strength_arrow"><span class="id" title="definition">strength_arrow</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch:131"><span class="id" title="definition">mult_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:128"><span class="id" title="variable">b1</span></a> <span class="id" title="var">rest</span>)) <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Mult_Batch" class="idref" href="#Mult_Batch"><span class="id" title="instance">Mult_Batch</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Mult"><span class="id" title="class">Mult</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="C:134" class="idref" href="#C:134"><span class="id" title="binder">C</span></a> <a id="D:135" class="idref" href="#D:135"><span class="id" title="binder">D</span></a> '<a id="pat:138" class="idref" href="#pat:138"><span class="id" title="binder">(</span></a><a id="pat:138" class="idref" href="#pat:138"><span class="id" title="binder">b1</span></a><a id="pat:138" class="idref" href="#pat:138"><span class="id" title="binder">,</span></a> <a id="pat:138" class="idref" href="#pat:138"><span class="id" title="binder">b2</span></a><a id="pat:138" class="idref" href="#pat:138"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:137"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:136"><span class="id" title="variable">b2</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab561"></a><h3 class="section">Examples of operations</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Section&nbsp;demo.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Context<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(A&nbsp;B&nbsp;C&nbsp;D&nbsp;:&nbsp;Type)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(a1&nbsp;a2&nbsp;a3&nbsp;:&nbsp;A)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(c1&nbsp;c2&nbsp;c3&nbsp;:&nbsp;C)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(d1&nbsp;d2&nbsp;d3&nbsp;:&nbsp;D)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mk1&nbsp;:&nbsp;B&nbsp;-&gt;&nbsp;C)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mk1'&nbsp;:&nbsp;B&nbsp;-&gt;&nbsp;D)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mk2&nbsp;:&nbsp;B&nbsp;-&gt;&nbsp;B&nbsp;-&gt;&nbsp;C).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Compute&nbsp;Done&nbsp;A&nbsp;B&nbsp;C&nbsp;c1&nbsp;⊗&nbsp;Done&nbsp;A&nbsp;B&nbsp;D&nbsp;d1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Compute&nbsp;Done&nbsp;A&nbsp;B&nbsp;C&nbsp;c1&nbsp;⊗&nbsp;(Done&nbsp;A&nbsp;B&nbsp;(B&nbsp;-&gt;&nbsp;D)&nbsp;mk1'&nbsp;⧆&nbsp;a1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Compute&nbsp;(Done&nbsp;A&nbsp;B&nbsp;_&nbsp;mk1&nbsp;⧆&nbsp;a1)&nbsp;⊗&nbsp;Done&nbsp;A&nbsp;B&nbsp;D&nbsp;d2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Compute&nbsp;(Done&nbsp;A&nbsp;B&nbsp;_&nbsp;mk1&nbsp;⧆&nbsp;a1)&nbsp;⊗&nbsp;(Done&nbsp;A&nbsp;B&nbsp;_&nbsp;mk1'&nbsp;⧆&nbsp;a2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Compute&nbsp;(Done&nbsp;A&nbsp;B&nbsp;_&nbsp;mk2&nbsp;⧆&nbsp;a1&nbsp;⧆&nbsp;a2)&nbsp;⊗&nbsp;(Done&nbsp;A&nbsp;B&nbsp;_&nbsp;mk1'&nbsp;⧆&nbsp;a3).<br/>
&nbsp;&nbsp;End&nbsp;demo.<br/>
&nbsp;&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab562"></a><h3 class="section">Rewriting principles</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mult_Batch_rw1" class="idref" href="#mult_Batch_rw1"><span class="id" title="lemma">mult_Batch_rw1</span></a> : <span class="id" title="keyword">∀</span> `(<a id="c:140" class="idref" href="#c:140"><span class="id" title="binder">c</span></a> : <a id="C:139" class="idref" href="#C:139"><span class="id" title="binder">C</span></a>) `(<a id="d:142" class="idref" href="#d:142"><span class="id" title="binder">d</span></a> : <a id="D:141" class="idref" href="#D:141"><span class="id" title="binder">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:139"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:140"><span class="id" title="variable">c</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:141"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d:142"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:139"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:141"><span class="id" title="variable">D</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#c:140"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d:142"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mult_Batch_rw2" class="idref" href="#mult_Batch_rw2"><span class="id" title="lemma">mult_Batch_rw2</span></a> : <span class="id" title="keyword">∀</span> `(<a id="d:144" class="idref" href="#d:144"><span class="id" title="binder">d</span></a> : <a id="D:143" class="idref" href="#D:143"><span class="id" title="binder">D</span></a>) `(<a id="b1:146" class="idref" href="#b1:146"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a id="C:145" class="idref" href="#C:145"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#b1:146"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:143"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d:144"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#pair_right"><span class="id" title="definition">pair_right</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d:144"><span class="id" title="variable">d</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:146"><span class="id" title="variable">b1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b1</span>; <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mult_Batch_rw3" class="idref" href="#mult_Batch_rw3"><span class="id" title="lemma">mult_Batch_rw3</span></a> : <span class="id" title="keyword">∀</span> (<a id="D:147" class="idref" href="#D:147"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b2:148" class="idref" href="#b2:148"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:147"><span class="id" title="variable">D</span></a>)) (<a id="a:149" class="idref" href="#a:149"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a>) `(<a id="b1:151" class="idref" href="#b1:151"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a id="C:150" class="idref" href="#C:150"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#b1:151"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#b2:148"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:149"><span class="id" title="variable">a</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#strength_arrow"><span class="id" title="definition">strength_arrow</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b1:151"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:148"><span class="id" title="variable">b2</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:149"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mult_Batch_rw4" class="idref" href="#mult_Batch_rw4"><span class="id" title="lemma">mult_Batch_rw4</span></a> : <span class="id" title="keyword">∀</span> `(<a id="b2:153" class="idref" href="#b2:153"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a id="D:152" class="idref" href="#D:152"><span class="id" title="binder">D</span></a>) `(<a id="c:155" class="idref" href="#c:155"><span class="id" title="binder">c</span></a> : <a id="C:154" class="idref" href="#C:154"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:154"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:155"><span class="id" title="variable">c</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:153"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:155"><span class="id" title="variable">c</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:153"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">b2</span> <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mult_Batch_rw5" class="idref" href="#mult_Batch_rw5"><span class="id" title="lemma">mult_Batch_rw5</span></a> : <span class="id" title="keyword">∀</span> (<a id="a:156" class="idref" href="#a:156"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a>) `(<a id="b1:158" class="idref" href="#b1:158"><span class="id" title="binder">b1</span></a> : @<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="C:157" class="idref" href="#C:157"><span class="id" title="binder">C</span></a>)) `(<a id="d:160" class="idref" href="#d:160"><span class="id" title="binder">d</span></a> : <a id="D:159" class="idref" href="#D:159"><span class="id" title="binder">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#b1:158"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:156"><span class="id" title="variable">a</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:159"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d:160"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#costrength_arrow"><span class="id" title="definition">costrength_arrow</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#pair_right"><span class="id" title="definition">pair_right</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d:160"><span class="id" title="variable">d</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:158"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:156"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mult_Batch_rw6" class="idref" href="#mult_Batch_rw6"><span class="id" title="lemma">mult_Batch_rw6</span></a> : <span class="id" title="keyword">∀</span> `(<a id="b2:162" class="idref" href="#b2:162"><span class="id" title="binder">b2</span></a> : @<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="D:161" class="idref" href="#D:161"><span class="id" title="binder">D</span></a>)) `(<a id="c:164" class="idref" href="#c:164"><span class="id" title="binder">c</span></a> : <a id="C:163" class="idref" href="#C:163"><span class="id" title="binder">C</span></a>) (<a id="a:165" class="idref" href="#a:165"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:163"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:164"><span class="id" title="variable">c</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#b2:162"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:165"><span class="id" title="variable">a</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#strength_arrow"><span class="id" title="definition">strength_arrow</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:164"><span class="id" title="variable">c</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:162"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:165"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch_rw3"><span class="id" title="lemma">mult_Batch_rw3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch_rw4"><span class="id" title="lemma">mult_Batch_rw4</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">b2</span> <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mult_Batch_rw7" class="idref" href="#mult_Batch_rw7"><span class="id" title="lemma">mult_Batch_rw7</span></a> : <span class="id" title="keyword">∀</span> (<a id="a1:166" class="idref" href="#a1:166"><span class="id" title="binder">a1</span></a> <a id="a2:167" class="idref" href="#a2:167"><span class="id" title="binder">a2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a>) `(<a id="b1:169" class="idref" href="#b1:169"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="C:168" class="idref" href="#C:168"><span class="id" title="binder">C</span></a>)) `(<a id="b2:171" class="idref" href="#b2:171"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="D:170" class="idref" href="#D:170"><span class="id" title="binder">D</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#b1:169"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a1:166"><span class="id" title="variable">a1</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#b2:171"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a2:167"><span class="id" title="variable">a2</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#strength_arrow"><span class="id" title="definition">strength_arrow</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#b1:169"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a1:166"><span class="id" title="variable">a1</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:171"><span class="id" title="variable">b2</span></a>)<a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a2:167"><span class="id" title="variable">a2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab563"></a><h3 class="section">Applicative laws</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="app_pure_natural_Batch" class="idref" href="#app_pure_natural_Batch"><span class="id" title="lemma">app_pure_natural_Batch</span></a> : <span class="id" title="keyword">∀</span> `(<a id="f:174" class="idref" href="#f:174"><span class="id" title="binder">f</span></a> : <a id="C1:172" class="idref" href="#C1:172"><span class="id" title="binder">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="C2:173" class="idref" href="#C2:173"><span class="id" title="binder">C2</span></a>) (<a id="c:175" class="idref" href="#c:175"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C1:172"><span class="id" title="variable">C1</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:174"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#c:175"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#f:174"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:175"><span class="id" title="variable">c</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="app_mult_natural_Batch1" class="idref" href="#app_mult_natural_Batch1"><span class="id" title="lemma">app_mult_natural_Batch1</span></a> : <span class="id" title="keyword">∀</span> (<a id="C1:176" class="idref" href="#C1:176"><span class="id" title="binder">C1</span></a> <a id="C2:177" class="idref" href="#C2:177"><span class="id" title="binder">C2</span></a> <a id="D:178" class="idref" href="#D:178"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:179" class="idref" href="#f:179"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C1:176"><span class="id" title="variable">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:177"><span class="id" title="variable">C2</span></a>) (<a id="b1:180" class="idref" href="#b1:180"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:176"><span class="id" title="variable">C1</span></a>) (<a id="b2:181" class="idref" href="#b2:181"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:178"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:179"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:180"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:181"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Misc.Product.html#map_fst"><span class="id" title="definition">map_fst</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:179"><span class="id" title="variable">f</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#b1:180"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:181"><span class="id" title="variable">b2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C1</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">y</span>) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb2</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<span class="id" title="var">b1</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">ext</span> [? ?].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="app_mult_natural_Batch2" class="idref" href="#app_mult_natural_Batch2"><span class="id" title="lemma">app_mult_natural_Batch2</span></a> : <span class="id" title="keyword">∀</span> (<a id="C:182" class="idref" href="#C:182"><span class="id" title="binder">C</span></a> <a id="D1:183" class="idref" href="#D1:183"><span class="id" title="binder">D1</span></a> <a id="D2:184" class="idref" href="#D2:184"><span class="id" title="binder">D2</span></a> : <span class="id" title="keyword">Type</span>) (<a id="g:185" class="idref" href="#g:185"><span class="id" title="binder">g</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#D1:183"><span class="id" title="variable">D1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D2:184"><span class="id" title="variable">D2</span></a>) (<a id="b1:186" class="idref" href="#b1:186"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:182"><span class="id" title="variable">C</span></a>) (<a id="b2:187" class="idref" href="#b2:187"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D1:183"><span class="id" title="variable">D1</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#b1:186"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#g:185"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:187"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Misc.Product.html#map_snd"><span class="id" title="definition">map_snd</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#g:185"><span class="id" title="variable">g</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#b1:186"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:187"><span class="id" title="variable">b2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">D2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ANY</span> <span class="id" title="var">any</span> | <span class="id" title="var">ANY</span> <span class="id" title="var">rest</span> <span class="id" title="var">IH</span> <span class="id" title="var">x'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">b1</span> <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<span class="id" title="var">b1</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">rest</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">D2</span>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<span class="id" title="var">b1</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">rest</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">ext</span> [<span class="id" title="var">c</span> <span class="id" title="var">mk</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="app_mult_natural_Batch" class="idref" href="#app_mult_natural_Batch"><span class="id" title="lemma">app_mult_natural_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="C1:188" class="idref" href="#C1:188"><span class="id" title="binder">C1</span></a> <a id="C2:189" class="idref" href="#C2:189"><span class="id" title="binder">C2</span></a> <a id="D1:190" class="idref" href="#D1:190"><span class="id" title="binder">D1</span></a> <a id="D2:191" class="idref" href="#D2:191"><span class="id" title="binder">D2</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:192" class="idref" href="#f:192"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C1:188"><span class="id" title="variable">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:189"><span class="id" title="variable">C2</span></a>) (<a id="g:193" class="idref" href="#g:193"><span class="id" title="binder">g</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#D1:190"><span class="id" title="variable">D1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D2:191"><span class="id" title="variable">D2</span></a>) (<a id="b1:194" class="idref" href="#b1:194"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:188"><span class="id" title="variable">C1</span></a>) (<a id="b2:195" class="idref" href="#b2:195"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D1:190"><span class="id" title="variable">D1</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:192"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:194"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#g:193"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:195"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Misc.Product.html#map_tensor"><span class="id" title="definition">map_tensor</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:192"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#g:193"><span class="id" title="variable">g</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#b1:194"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:195"><span class="id" title="variable">b2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#app_mult_natural_Batch1"><span class="id" title="lemma">app_mult_natural_Batch1</span></a>, <a class="idref" href="Tealeaves.Functors.Batch.html#app_mult_natural_Batch2"><span class="id" title="lemma">app_mult_natural_Batch2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<span class="id" title="var">b1</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">b2</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">ext</span> [<span class="id" title="var">c1</span> <span class="id" title="var">d1</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="app_assoc_Batch" class="idref" href="#app_assoc_Batch"><span class="id" title="lemma">app_assoc_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="C:196" class="idref" href="#C:196"><span class="id" title="binder">C</span></a> <a id="D:197" class="idref" href="#D:197"><span class="id" title="binder">D</span></a> <a id="E:198" class="idref" href="#E:198"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b1:199" class="idref" href="#b1:199"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:196"><span class="id" title="variable">C</span></a>) (<a id="b2:200" class="idref" href="#b2:200"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:197"><span class="id" title="variable">D</span></a>) (<a id="b3:201" class="idref" href="#b3:201"><span class="id" title="binder">b3</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#E:198"><span class="id" title="variable">E</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Misc.Product.html#associator"><span class="id" title="definition">associator</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#b1:199"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:200"><span class="id" title="variable">b2</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b3:201"><span class="id" title="variable">b3</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:199"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#b2:200"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b3:201"><span class="id" title="variable">b3</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch_rw2"><span class="id" title="lemma">mult_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#app_mult_natural_Batch2"><span class="id" title="lemma">app_mult_natural_Batch2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<span class="id" title="var">b1</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">b2</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#app_mult_natural_Batch2"><span class="id" title="lemma">app_mult_natural_Batch2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<span class="id" title="var">b1</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">b2</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">b3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<span class="id" title="var">b1</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">b2</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">b3</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">ext</span> [[<span class="id" title="var">c</span> <span class="id" title="var">d</span>] <span class="id" title="var">mk</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="app_unital_l_Batch" class="idref" href="#app_unital_l_Batch"><span class="id" title="lemma">app_unital_l_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="C:202" class="idref" href="#C:202"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:203" class="idref" href="#b:203"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:202"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Misc.Product.html#left_unitor"><span class="id" title="definition">left_unitor</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Axioms.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:203"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:203"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Axioms.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="app_unital_r_Batch" class="idref" href="#app_unital_r_Batch"><span class="id" title="lemma">app_unital_r_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="C:204" class="idref" href="#C:204"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:205" class="idref" href="#b:205"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:204"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Misc.Product.html#right_unitor"><span class="id" title="definition">right_unitor</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b:205"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Axioms.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:205"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">fequal</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="app_mult_pure_Batch" class="idref" href="#app_mult_pure_Batch"><span class="id" title="lemma">app_mult_pure_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="C:206" class="idref" href="#C:206"><span class="id" title="binder">C</span></a> <a id="D:207" class="idref" href="#D:207"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>) (<a id="c:208" class="idref" href="#c:208"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:206"><span class="id" title="variable">C</span></a>) (<a id="d:209" class="idref" href="#d:209"><span class="id" title="binder">d</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#D:207"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#c:208"><span class="id" title="variable">c</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#d:209"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#c:208"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d:209"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab564"></a><h3 class="section">Typeclass instance</h3>

</div>
<div class="code">
&nbsp;&nbsp;#[<span class="id" title="var">export</span>, <span class="id" title="var">program</span>] <span class="id" title="keyword">Instance</span> <a id="App_Path" class="idref" href="#App_Path"><span class="id" title="instance">App_Path</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Applicative"><span class="id" title="class">Applicative</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch.B"><span class="id" title="variable">B</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#app_mult_natural_Batch"><span class="id" title="lemma">app_mult_natural_Batch</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#app_assoc_Batch"><span class="id" title="lemma">app_assoc_Batch</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#app_unital_l_Batch"><span class="id" title="lemma">app_unital_l_Batch</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#app_unital_r_Batch"><span class="id" title="lemma">app_unital_r_Batch</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Applicative_Batch"><span class="id" title="section">Applicative_Batch</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab565"></a><h3 class="section"><code>mapfst</code> and <code>mapsnd</code> are homomorphisms</h3>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="mapfst_Batch1" class="idref" href="#mapfst_Batch1"><span class="id" title="lemma">mapfst_Batch1</span></a> {<a id="B:210" class="idref" href="#B:210"><span class="id" title="binder">B</span></a> <a id="C:211" class="idref" href="#C:211"><span class="id" title="binder">C</span></a> <a id="D:212" class="idref" href="#D:212"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:215" class="idref" href="#f:215"><span class="id" title="binder">f</span></a> : <a id="A1:213" class="idref" href="#A1:213"><span class="id" title="binder">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="A2:214" class="idref" href="#A2:214"><span class="id" title="binder">A2</span></a>) (<a id="b1:216" class="idref" href="#b1:216"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:213"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:210"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:211"><span class="id" title="variable">C</span></a>) (<a id="b2:217" class="idref" href="#b2:217"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:213"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:210"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:212"><span class="id" title="variable">D</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:213"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:214"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:215"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b1:216"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:217"><span class="id" title="variable">b2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:213"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:214"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:215"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:216"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:213"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:214"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:215"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:217"><span class="id" title="variable">b2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b1</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_map_Batch"><span class="id" title="lemma">mapfst_map_Batch</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">y</span>) <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_map_Batch"><span class="id" title="lemma">mapfst_map_Batch</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapfst_Batch2" class="idref" href="#mapfst_Batch2"><span class="id" title="lemma">mapfst_Batch2</span></a> {<a id="B:218" class="idref" href="#B:218"><span class="id" title="binder">B</span></a> <a id="C:219" class="idref" href="#C:219"><span class="id" title="binder">C</span></a> <a id="D:220" class="idref" href="#D:220"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:223" class="idref" href="#f:223"><span class="id" title="binder">f</span></a> : <a id="A1:221" class="idref" href="#A1:221"><span class="id" title="binder">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="A2:222" class="idref" href="#A2:222"><span class="id" title="binder">A2</span></a>) (<a id="b1:224" class="idref" href="#b1:224"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:221"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:218"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:219"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:220"><span class="id" title="variable">D</span></a>)) (<a id="b2:225" class="idref" href="#b2:225"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:221"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:218"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:219"><span class="id" title="variable">C</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:221"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:222"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:223"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b1:224"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:225"><span class="id" title="variable">b2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:221"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:222"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:223"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:224"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:221"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:222"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:223"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:225"><span class="id" title="variable">b2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap"><span class="id" title="definition">ap</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_map_Batch"><span class="id" title="lemma">mapfst_map_Batch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch1"><span class="id" title="lemma">mapfst_Batch1</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="mapfst_Batch1_Hom" class="idref" href="#mapfst_Batch1_Hom"><span class="id" title="instance">mapfst_Batch1_Hom</span></a> {<a id="B:226" class="idref" href="#B:226"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:229" class="idref" href="#f:229"><span class="id" title="binder">f</span></a> : <a id="A1:227" class="idref" href="#A1:227"><span class="id" title="binder">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="A2:228" class="idref" href="#A2:228"><span class="id" title="binder">A2</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ApplicativeMorphism"><span class="id" title="class">ApplicativeMorphism</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:227"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:226"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:228"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:226"><span class="id" title="variable">B</span></a>) (<span class="id" title="keyword">fun</span> <a id="C:230" class="idref" href="#C:230"><span class="id" title="binder">C</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:229"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_map_Batch"><span class="id" title="lemma">mapfst_map_Batch</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch1"><span class="id" title="lemma">mapfst_Batch1</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapsnd_Batch1" class="idref" href="#mapsnd_Batch1"><span class="id" title="lemma">mapsnd_Batch1</span></a> {<a id="A:231" class="idref" href="#A:231"><span class="id" title="binder">A</span></a> <a id="C:232" class="idref" href="#C:232"><span class="id" title="binder">C</span></a> <a id="D:233" class="idref" href="#D:233"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:236" class="idref" href="#f:236"><span class="id" title="binder">f</span></a> : <a id="B1:234" class="idref" href="#B1:234"><span class="id" title="binder">B1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="B2:235" class="idref" href="#B2:235"><span class="id" title="binder">B2</span></a>) (<a id="b1:237" class="idref" href="#b1:237"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:231"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:235"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:232"><span class="id" title="variable">C</span></a>) (<a id="b2:238" class="idref" href="#b2:238"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:231"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:235"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:233"><span class="id" title="variable">D</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:234"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:235"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:236"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b1:237"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:238"><span class="id" title="variable">b2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:234"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:235"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:236"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:237"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:234"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:235"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:236"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:238"><span class="id" title="variable">b2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b1</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_map_Batch"><span class="id" title="lemma">mapsnd_map_Batch</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">y</span>) <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_map_Batch"><span class="id" title="lemma">mapsnd_map_Batch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span> <span class="id" title="var">f</span> (<span class="id" title="var">b1</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">b2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#app_mult_natural_Batch2"><span class="id" title="lemma">app_mult_natural_Batch2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span> <span class="id" title="var">f</span> <span class="id" title="var">b1</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span> <span class="id" title="var">f</span> <span class="id" title="var">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb2</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="var">fequal</span>; <span class="id" title="var">ext</span> [<span class="id" title="var">c</span> <span class="id" title="var">rest</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapsnd_Batch2" class="idref" href="#mapsnd_Batch2"><span class="id" title="lemma">mapsnd_Batch2</span></a> {<a id="A:239" class="idref" href="#A:239"><span class="id" title="binder">A</span></a> <a id="C:240" class="idref" href="#C:240"><span class="id" title="binder">C</span></a> <a id="D:241" class="idref" href="#D:241"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:244" class="idref" href="#f:244"><span class="id" title="binder">f</span></a> : <a id="B1:242" class="idref" href="#B1:242"><span class="id" title="binder">B1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="B2:243" class="idref" href="#B2:243"><span class="id" title="binder">B2</span></a>) (<a id="b1:245" class="idref" href="#b1:245"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:239"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:243"><span class="id" title="variable">B2</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:240"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:241"><span class="id" title="variable">D</span></a>)) (<a id="b2:246" class="idref" href="#b2:246"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:239"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:243"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:240"><span class="id" title="variable">C</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:242"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:243"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:244"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b1:245"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:246"><span class="id" title="variable">b2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:242"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:243"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:244"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:245"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:242"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:243"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:244"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:246"><span class="id" title="variable">b2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap"><span class="id" title="definition">ap</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_map_Batch"><span class="id" title="lemma">mapsnd_map_Batch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch1"><span class="id" title="lemma">mapsnd_Batch1</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="mapsnd_Batch2_Hom" class="idref" href="#mapsnd_Batch2_Hom"><span class="id" title="instance">mapsnd_Batch2_Hom</span></a> {<a id="A:247" class="idref" href="#A:247"><span class="id" title="binder">A</span></a> <a id="B1:248" class="idref" href="#B1:248"><span class="id" title="binder">B1</span></a> <a id="B2:249" class="idref" href="#B2:249"><span class="id" title="binder">B2</span></a> : <span class="id" title="keyword">Type</span>} `(<a id="f:250" class="idref" href="#f:250"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#B1:248"><span class="id" title="variable">B1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:249"><span class="id" title="variable">B2</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ApplicativeMorphism"><span class="id" title="class">ApplicativeMorphism</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:247"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:249"><span class="id" title="variable">B2</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:247"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:248"><span class="id" title="variable">B1</span></a>) (<span class="id" title="keyword">fun</span> <a id="C:251" class="idref" href="#C:251"><span class="id" title="binder">C</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:248"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:249"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:250"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_map_Batch"><span class="id" title="lemma">mapsnd_map_Batch</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch1"><span class="id" title="lemma">mapsnd_Batch1</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab566"></a><h1 class="section"><code>runBatch</code></h1>

<div class="paragraph"> </div>

<a id="lab567"></a><h2 class="section">The <code>runBatch</code> operation</h2>

</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="runBatch" class="idref" href="#runBatch"><span class="id" title="definition">runBatch</span></a> {<a id="A:252" class="idref" href="#A:252"><span class="id" title="binder">A</span></a> <a id="B:253" class="idref" href="#B:253"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="F:254" class="idref" href="#F:254"><span class="id" title="binder">F</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) `{<a id="H:255" class="idref" href="#H:255"><span class="id" title="binder">Map</span></a> <a id="H:255" class="idref" href="#H:255"><span class="id" title="binder">F</span></a>} `{<a id="H0:256" class="idref" href="#H0:256"><span class="id" title="binder">Mult</span></a> <a id="H0:256" class="idref" href="#H0:256"><span class="id" title="binder">F</span></a>} `{<a id="H1:257" class="idref" href="#H1:257"><span class="id" title="binder">Pure</span></a> <a id="H1:257" class="idref" href="#H1:257"><span class="id" title="binder">F</span></a>}<br/>
&nbsp;&nbsp;&nbsp;(<a id="b1919c2cd408467287b82e8d6d9b9e05" class="idref" href="#b1919c2cd408467287b82e8d6d9b9e05"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:252"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:254"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:253"><span class="id" title="variable">B</span></a>) (<a id="C:259" class="idref" href="#C:259"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:260" class="idref" href="#b:260"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:252"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:253"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:259"><span class="id" title="variable">C</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#F:254"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:259"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:260"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:254"><span class="id" title="variable">F</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch:261"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:254"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1919c2cd408467287b82e8d6d9b9e05"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:253"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:259"><span class="id" title="variable">C</span></a>) <span class="id" title="var">rest</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1919c2cd408467287b82e8d6d9b9e05"><span class="id" title="variable">ϕ</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab568"></a><h3 class="section">Rewriting principles</h3>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="runBatch_rw1" class="idref" href="#runBatch_rw1"><span class="id" title="lemma">runBatch_rw1</span></a> `{<a id="H2:267" class="idref" href="#H2:267"><span class="id" title="binder">Applicative</span></a> <a id="H2:267" class="idref" href="#H2:267"><span class="id" title="binder">F</span></a>} `(<a id="d6765b0b1bb68e38ee5a1babacfcc9fa" class="idref" href="#d6765b0b1bb68e38ee5a1babacfcc9fa"><span class="id" title="binder">ϕ</span></a> : <a id="A:268" class="idref" href="#A:268"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:263"><span class="id" title="variable">F</span></a> <a id="B:269" class="idref" href="#B:269"><span class="id" title="binder">B</span></a>) (<a id="C:271" class="idref" href="#C:271"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="c:272" class="idref" href="#c:272"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:271"><span class="id" title="variable">C</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:263"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d6765b0b1bb68e38ee5a1babacfcc9fa"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:271"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:268"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:269"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:271"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:272"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:263"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:272"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="runBatch_rw2" class="idref" href="#runBatch_rw2"><span class="id" title="lemma">runBatch_rw2</span></a> `{<a id="H2:277" class="idref" href="#H2:277"><span class="id" title="binder">Applicative</span></a> <a id="H2:277" class="idref" href="#H2:277"><span class="id" title="binder">F</span></a>} `(<a id="34a3d230370ce50e5a12ceb61519f7cd" class="idref" href="#34a3d230370ce50e5a12ceb61519f7cd"><span class="id" title="binder">ϕ</span></a> : <a id="A:278" class="idref" href="#A:278"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:273"><span class="id" title="variable">F</span></a> <a id="B:279" class="idref" href="#B:279"><span class="id" title="binder">B</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:281" class="idref" href="#a:281"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:278"><span class="id" title="variable">A</span></a>) (<a id="C:282" class="idref" href="#C:282"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="rest:283" class="idref" href="#rest:283"><span class="id" title="binder">rest</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:278"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:279"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:279"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:282"><span class="id" title="variable">C</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:273"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#34a3d230370ce50e5a12ceb61519f7cd"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:282"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#rest:283"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:281"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:273"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#34a3d230370ce50e5a12ceb61519f7cd"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:279"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:282"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#rest:283"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#34a3d230370ce50e5a12ceb61519f7cd"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:281"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab569"></a><h3 class="section">Naturality of of <code>runBatch</code></h3>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="runBatch_naturality" class="idref" href="#runBatch_naturality"><span class="id" title="section">runBatch_naturality</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H2:288" class="idref" href="#H2:288"><span class="id" title="binder">Applicative</span></a> <a id="H2:288" class="idref" href="#H2:288"><span class="id" title="binder">F</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="natural_runBatch" class="idref" href="#natural_runBatch"><span class="id" title="lemma">natural_runBatch</span></a> {<a id="A:289" class="idref" href="#A:289"><span class="id" title="binder">A</span></a> <a id="B:290" class="idref" href="#B:290"><span class="id" title="binder">B</span></a> <a id="C1:291" class="idref" href="#C1:291"><span class="id" title="binder">C1</span></a> <a id="C2:292" class="idref" href="#C2:292"><span class="id" title="binder">C2</span></a> : <span class="id" title="keyword">Type</span>} (<a id="eb0b00ff0649118a31dbcb7ac9dd3cd5" class="idref" href="#eb0b00ff0649118a31dbcb7ac9dd3cd5"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:289"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:290"><span class="id" title="variable">B</span></a>) (<a id="f:294" class="idref" href="#f:294"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C1:291"><span class="id" title="variable">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:292"><span class="id" title="variable">C2</span></a>) (<a id="b:295" class="idref" href="#b:295"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:289"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:290"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:291"><span class="id" title="variable">C1</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:294"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#eb0b00ff0649118a31dbcb7ac9dd3cd5"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C1:291"><span class="id" title="variable">C1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:295"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#eb0b00ff0649118a31dbcb7ac9dd3cd5"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C2:292"><span class="id" title="variable">C2</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:289"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:290"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:294"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:295"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>. <span class="id" title="var">fequal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Natural_runBatch" class="idref" href="#Natural_runBatch"><span class="id" title="instance">Natural_runBatch</span></a> `(<a id="74d60da2e1cda00e3ad733e2b320e64b" class="idref" href="#74d60da2e1cda00e3ad733e2b320e64b"><span class="id" title="binder">ϕ</span></a> : <a id="A:296" class="idref" href="#A:296"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a id="B:297" class="idref" href="#B:297"><span class="id" title="binder">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#Natural"><span class="id" title="class">Natural</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#74d60da2e1cda00e3ad733e2b320e64b"><span class="id" title="variable">ϕ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">f</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#natural_runBatch"><span class="id" title="lemma">natural_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_mapfst" class="idref" href="#runBatch_mapfst"><span class="id" title="lemma">runBatch_mapfst</span></a> : <span class="id" title="keyword">∀</span> `(<a id="s:302" class="idref" href="#s:302"><span class="id" title="binder">s</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:299" class="idref" href="#A1:299"><span class="id" title="binder">A1</span></a> <a id="B:300" class="idref" href="#B:300"><span class="id" title="binder">B</span></a> <a id="C:301" class="idref" href="#C:301"><span class="id" title="binder">C</span></a>) `(<a id="fb33683e04d0aeb918c5e7d4168885e9" class="idref" href="#fb33683e04d0aeb918c5e7d4168885e9"><span class="id" title="binder">ϕ</span></a> : <a id="A2:303" class="idref" href="#A2:303"><span class="id" title="binder">A2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:300"><span class="id" title="variable">B</span></a>) (<a id="f:305" class="idref" href="#f:305"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A1:299"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:303"><span class="id" title="variable">A2</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#fb33683e04d0aeb918c5e7d4168885e9"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:305"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:301"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#s:302"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#fb33683e04d0aeb918c5e7d4168885e9"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:301"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:299"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:303"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:305"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#s:302"><span class="id" title="variable">s</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_mapfst'" class="idref" href="#runBatch_mapfst'"><span class="id" title="lemma">runBatch_mapfst'</span></a> : <span class="id" title="keyword">∀</span> `(<a id="50f42681afee915dde9925c12c095c24" class="idref" href="#50f42681afee915dde9925c12c095c24"><span class="id" title="binder">ϕ</span></a> : <a id="A2:306" class="idref" href="#A2:306"><span class="id" title="binder">A2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a id="B:307" class="idref" href="#B:307"><span class="id" title="binder">B</span></a>) `(<a id="f:310" class="idref" href="#f:310"><span class="id" title="binder">f</span></a> : <a id="A1:309" class="idref" href="#A1:309"><span class="id" title="binder">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:306"><span class="id" title="variable">A2</span></a>) <a id="C:311" class="idref" href="#C:311"><span class="id" title="binder">C</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#50f42681afee915dde9925c12c095c24"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:310"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:311"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#50f42681afee915dde9925c12c095c24"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:311"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:309"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:306"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:310"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_mapfst"><span class="id" title="lemma">runBatch_mapfst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_mapsnd" class="idref" href="#runBatch_mapsnd"><span class="id" title="lemma">runBatch_mapsnd</span></a> : <span class="id" title="keyword">∀</span> `(<a id="s:315" class="idref" href="#s:315"><span class="id" title="binder">s</span></a> : @<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:312" class="idref" href="#A:312"><span class="id" title="binder">A</span></a> <a id="B2:313" class="idref" href="#B2:313"><span class="id" title="binder">B2</span></a> <a id="C:314" class="idref" href="#C:314"><span class="id" title="binder">C</span></a>) `(<a id="63a0bf7befab08d767adfd8b6dd02427" class="idref" href="#63a0bf7befab08d767adfd8b6dd02427"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:312"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a id="B1:316" class="idref" href="#B1:316"><span class="id" title="binder">B1</span></a>) (<a id="f:318" class="idref" href="#f:318"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#B1:316"><span class="id" title="variable">B1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:313"><span class="id" title="variable">B2</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:318"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#63a0bf7befab08d767adfd8b6dd02427"><span class="id" title="variable">ϕ</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:314"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#s:315"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#63a0bf7befab08d767adfd8b6dd02427"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:314"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:316"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:313"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:318"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#s:315"><span class="id" title="variable">s</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#natural_runBatch"><span class="id" title="lemma">natural_runBatch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="homomorphism:327" class="idref" href="#homomorphism:327"><span class="id" title="binder">homomorphism</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ApplicativeMorphism"><span class="id" title="class">ApplicativeMorphism</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a id="G:319" class="idref" href="#G:319"><span class="id" title="binder">G</span></a> <a id="bdec4509c7912582c451bde072fecea1" class="idref" href="#bdec4509c7912582c451bde072fecea1"><span class="id" title="binder">ψ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_morphism" class="idref" href="#runBatch_morphism"><span class="id" title="lemma">runBatch_morphism</span></a> `(<a id="edc0165faca07bc0bca090469a22e216" class="idref" href="#edc0165faca07bc0bca090469a22e216"><span class="id" title="binder">ϕ</span></a> : <a id="A:328" class="idref" href="#A:328"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a id="B:329" class="idref" href="#B:329"><span class="id" title="binder">B</span></a>) `(<a id="b:332" class="idref" href="#b:332"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:328"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:329"><span class="id" title="variable">B</span></a> <a id="C:331" class="idref" href="#C:331"><span class="id" title="binder">C</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#018a5ac35c5efd71864c6198e912efcb"><span class="id" title="variable">ψ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:331"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#edc0165faca07bc0bca090469a22e216"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:331"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:332"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#018a5ac35c5efd71864c6198e912efcb"><span class="id" title="variable">ψ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:329"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#edc0165faca07bc0bca090469a22e216"><span class="id" title="variable">ϕ</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:331"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:332"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#appmor_pure"><span class="id" title="method">appmor_pure</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_morphism_1"><span class="id" title="lemma">ap_morphism_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_morphism'" class="idref" href="#runBatch_morphism'"><span class="id" title="lemma">runBatch_morphism'</span></a> `(<a id="f8e7e57386b21695191a078750ec3b89" class="idref" href="#f8e7e57386b21695191a078750ec3b89"><span class="id" title="binder">ϕ</span></a> : <a id="A:333" class="idref" href="#A:333"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a id="B:334" class="idref" href="#B:334"><span class="id" title="binder">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="C:336" class="idref" href="#C:336"><span class="id" title="binder">C</span></a>, <a class="idref" href="Tealeaves.Functors.Batch.html#018a5ac35c5efd71864c6198e912efcb"><span class="id" title="variable">ψ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:336"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f8e7e57386b21695191a078750ec3b89"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:336"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality.G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#018a5ac35c5efd71864c6198e912efcb"><span class="id" title="variable">ψ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:334"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f8e7e57386b21695191a078750ec3b89"><span class="id" title="variable">ϕ</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:336"><span class="id" title="variable">C</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism"><span class="id" title="lemma">runBatch_morphism</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_naturality"><span class="id" title="section">runBatch_naturality</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab570"></a><h2 class="section"><code>runBatch</code> as an applicative transformation</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="runBatch_morphism" class="idref" href="#runBatch_morphism"><span class="id" title="section">runBatch_morphism</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H2:341" class="idref" href="#H2:341"><span class="id" title="binder">Applicative</span></a> <a id="H2:341" class="idref" href="#H2:341"><span class="id" title="binder">F</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="e0b874546c6d2921a8132208613949a1" class="idref" href="#e0b874546c6d2921a8132208613949a1"><span class="id" title="binder">ϕ</span></a> : <a id="A:342" class="idref" href="#A:342"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:337"><span class="id" title="variable">F</span></a> <a id="B:343" class="idref" href="#B:343"><span class="id" title="binder">B</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="appmor_pure_runBatch" class="idref" href="#appmor_pure_runBatch"><span class="id" title="lemma">appmor_pure_runBatch</span></a> : <span class="id" title="keyword">∀</span> (<a id="a:345" class="idref" href="#a:345"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9b0a9514b0502576bddad23e2eb8cc11"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.A"><span class="id" title="variable">A</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#a:345"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:345"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="appmor_mult_runBatch" class="idref" href="#appmor_mult_runBatch"><span class="id" title="lemma">appmor_mult_runBatch</span></a> : <span class="id" title="keyword">∀</span> {<a id="C:346" class="idref" href="#C:346"><span class="id" title="binder">C</span></a> <a id="D:347" class="idref" href="#D:347"><span class="id" title="binder">D</span></a>} (<a id="x:348" class="idref" href="#x:348"><span class="id" title="binder">x</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:346"><span class="id" title="variable">C</span></a>) (<a id="y:349" class="idref" href="#y:349"><span class="id" title="binder">y</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:347"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9b0a9514b0502576bddad23e2eb8cc11"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:346"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:347"><span class="id" title="variable">D</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#x:348"><span class="id" title="variable">x</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#y:349"><span class="id" title="variable">y</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9b0a9514b0502576bddad23e2eb8cc11"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:346"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#x:348"><span class="id" title="variable">x</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9b0a9514b0502576bddad23e2eb8cc11"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:347"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#y:349"><span class="id" title="variable">y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ANY</span> <span class="id" title="var">any</span> | <span class="id" title="var">ANY</span> <span class="id" title="var">rest</span> <span class="id" title="var">IH</span> <span class="id" title="var">x'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch_rw2"><span class="id" title="lemma">mult_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_rw1"><span class="id" title="lemma">runBatch_rw1</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#triangle_4"><span class="id" title="lemma">triangle_4</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#natural_runBatch"><span class="id" title="lemma">natural_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_rw2"><span class="id" title="lemma">runBatch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap"><span class="id" title="definition">ap</span></a>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_mult_natural_r"><span class="id" title="lemma">app_mult_natural_r</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_assoc"><span class="id" title="method">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IH</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9b0a9514b0502576bddad23e2eb8cc11"><span class="id" title="variable">ϕ</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">rest</span>) <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9b0a9514b0502576bddad23e2eb8cc11"><span class="id" title="variable">ϕ</span></a> <span class="id" title="var">x'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap"><span class="id" title="definition">ap</span></a>. <span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch"><span class="id" title="definition">mult_Batch</span></a> ?<span class="id" title="var">jx</span> ?<span class="id" title="var">jy</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">jx</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">jy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#natural_runBatch"><span class="id" title="lemma">natural_runBatch</span></a>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_mult_natural_l"><span class="id" title="lemma">app_mult_natural_l</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9b0a9514b0502576bddad23e2eb8cc11"><span class="id" title="variable">ϕ</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">x</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <span class="id" title="var">rest</span>) <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9b0a9514b0502576bddad23e2eb8cc11"><span class="id" title="variable">ϕ</span></a> <span class="id" title="var">x'</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>. <span class="id" title="var">fequal</span>. <span class="id" title="var">now</span> <span class="id" title="var">ext</span> [[? ?] ?].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="ApplicativeMorphism_runBatch" class="idref" href="#ApplicativeMorphism_runBatch"><span class="id" title="instance">ApplicativeMorphism_runBatch</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ApplicativeMorphism"><span class="id" title="class">ApplicativeMorphism</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism.F"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9b0a9514b0502576bddad23e2eb8cc11"><span class="id" title="variable">ϕ</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#natural_runBatch"><span class="id" title="lemma">natural_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#appmor_mult_runBatch"><span class="id" title="lemma">appmor_mult_runBatch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_morphism"><span class="id" title="section">runBatch_morphism</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab571"></a><h2 class="section"><code>runBatch</code> specialized to monoids</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="runBatch_monoid" class="idref" href="#runBatch_monoid"><span class="id" title="section">runBatch_monoid</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H:353" class="idref" href="#H:353"><span class="id" title="binder">Monoid</span></a> <a id="H:353" class="idref" href="#H:353"><span class="id" title="binder">M</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="runBatch_monoid" class="idref" href="#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:354" class="idref" href="#A:354"><span class="id" title="binder">A</span></a> <a id="B:355" class="idref" href="#B:355"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>} `(<a id="f6e580b87b54d89d63b1a82e941460d6" class="idref" href="#f6e580b87b54d89d63b1a82e941460d6"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:354"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) `(<a id="b:358" class="idref" href="#b:358"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:354"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:355"><span class="id" title="variable">B</span></a> <a id="C:357" class="idref" href="#C:357"><span class="id" title="binder">C</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:358"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Classes.Monoid.html#monoid_unit"><span class="id" title="definition">monoid_unit</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid:359"><span class="id" title="definition">runBatch_monoid</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#f6e580b87b54d89d63b1a82e941460d6"><span class="id" title="variable">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:354"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) <span class="id" title="var">rest</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#23f40b1adcf5df7d889fd9b798da390c"><span class="id" title="notation">●</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f6e580b87b54d89d63b1a82e941460d6"><span class="id" title="variable">ϕ</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_monoid1" class="idref" href="#runBatch_monoid1"><span class="id" title="lemma">runBatch_monoid1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:361" class="idref" href="#A:361"><span class="id" title="binder">A</span></a> <a id="B:362" class="idref" href="#B:362"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>} : <span class="id" title="keyword">∀</span> (<a id="83a1734b23876fea2a85ab7ee2a6271b" class="idref" href="#83a1734b23876fea2a85ab7ee2a6271b"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:361"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) `(<a id="b:365" class="idref" href="#b:365"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:361"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:362"><span class="id" title="variable">B</span></a> <a id="C:364" class="idref" href="#C:364"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#83a1734b23876fea2a85ab7ee2a6271b"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:365"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Constant.html#unconst"><span class="id" title="definition">unconst</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Functors.Constant.html#Const"><span class="id" title="inductive">Const</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) (<a class="idref" href="Tealeaves.Functors.Constant.html#mkConst"><span class="id" title="constructor">mkConst</span></a> (<span class="id" title="var">tag</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#B:362"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#83a1734b23876fea2a85ab7ee2a6271b"><span class="id" title="variable">ϕ</span></a>) <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:365"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_monoid2" class="idref" href="#runBatch_monoid2"><span class="id" title="lemma">runBatch_monoid2</span></a> {<a id="A:366" class="idref" href="#A:366"><span class="id" title="binder">A</span></a> <a id="B:367" class="idref" href="#B:367"><span class="id" title="binder">B</span></a>} : <span class="id" title="keyword">∀</span> (<a id="afcc82b5f6d8a2b1c5bcda5d2a2a1743" class="idref" href="#afcc82b5f6d8a2b1c5bcda5d2a2a1743"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:366"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) `(<a id="b:370" class="idref" href="#b:370"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:366"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:367"><span class="id" title="variable">B</span></a> <a id="C:369" class="idref" href="#C:369"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#afcc82b5f6d8a2b1c5bcda5d2a2a1743"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:370"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#afcc82b5f6d8a2b1c5bcda5d2a2a1743"><span class="id" title="variable">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:366"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:367"><span class="id" title="variable">B</span></a>) <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:370"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_monoid_map" class="idref" href="#runBatch_monoid_map"><span class="id" title="lemma">runBatch_monoid_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:371" class="idref" href="#A:371"><span class="id" title="binder">A</span></a> <a id="B:372" class="idref" href="#B:372"><span class="id" title="binder">B</span></a> <a id="C:373" class="idref" href="#C:373"><span class="id" title="binder">C</span></a> <a id="C':374" class="idref" href="#C':374"><span class="id" title="binder">C'</span></a>} : <span class="id" title="keyword">∀</span> (<a id="524c06f0aeefc97dbf4b1f68dff48f57" class="idref" href="#524c06f0aeefc97dbf4b1f68dff48f57"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:371"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) `(<a id="f:376" class="idref" href="#f:376"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:373"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C':374"><span class="id" title="variable">C'</span></a>) (<a id="b:377" class="idref" href="#b:377"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:371"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:372"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:373"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#524c06f0aeefc97dbf4b1f68dff48f57"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:377"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#524c06f0aeefc97dbf4b1f68dff48f57"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:371"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:372"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:376"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:377"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_monoid_mapsnd" class="idref" href="#runBatch_monoid_mapsnd"><span class="id" title="lemma">runBatch_monoid_mapsnd</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:378" class="idref" href="#A:378"><span class="id" title="binder">A</span></a> <a id="B:379" class="idref" href="#B:379"><span class="id" title="binder">B</span></a> <a id="B':380" class="idref" href="#B':380"><span class="id" title="binder">B'</span></a>} : <span class="id" title="keyword">∀</span> (<a id="a6c05c99b0c5eb12a971825a38121a27" class="idref" href="#a6c05c99b0c5eb12a971825a38121a27"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:378"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) `(<a id="f:382" class="idref" href="#f:382"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#B':380"><span class="id" title="variable">B'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:379"><span class="id" title="variable">B</span></a>) `(<a id="b:384" class="idref" href="#b:384"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:378"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:379"><span class="id" title="variable">B</span></a> <a id="C:383" class="idref" href="#C:383"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a6c05c99b0c5eb12a971825a38121a27"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:384"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a6c05c99b0c5eb12a971825a38121a27"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':380"><span class="id" title="variable">B'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:379"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:382"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:384"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid2"><span class="id" title="lemma">runBatch_monoid2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid2"><span class="id" title="lemma">runBatch_monoid2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_mapsnd"><span class="id" title="lemma">runBatch_mapsnd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="section">runBatch_monoid</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab572"></a><h1 class="section">Length</h1>

</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Misc.NaturalNumbers.html#"><span class="id" title="library">Misc.NaturalNumbers</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="length" class="idref" href="#length"><span class="id" title="section">length</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="length_Batch" class="idref" href="#length_Batch"><span class="id" title="definition">length_Batch</span></a> {<a id="A:385" class="idref" href="#A:385"><span class="id" title="binder">A</span></a> <a id="B:386" class="idref" href="#B:386"><span class="id" title="binder">B</span></a> <a id="C:387" class="idref" href="#C:387"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} (<a id="b:388" class="idref" href="#b:388"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:385"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:386"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:387"><span class="id" title="variable">C</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:388"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch:389"><span class="id" title="definition">length_Batch</span></a> (<span class="id" title="var">C</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#B:386"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:387"><span class="id" title="variable">C</span></a>) <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_Batch_spec" class="idref" href="#length_Batch_spec"><span class="id" title="lemma">length_Batch_spec</span></a> {<a id="A:391" class="idref" href="#A:391"><span class="id" title="binder">A</span></a> <a id="B:392" class="idref" href="#B:392"><span class="id" title="binder">B</span></a> <a id="C:393" class="idref" href="#C:393"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} (<a id="b:394" class="idref" href="#b:394"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:391"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:392"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:393"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:394"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (@<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="keyword">Type</span> <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ 1) <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:394"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Misc.NaturalNumbers.html#Monoid_op_plus"><span class="id" title="instance">Monoid_op_plus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;<span class="comment">(*&nbsp;The&nbsp;length&nbsp;of&nbsp;a&nbsp;batch&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;list&nbsp;we&nbsp;can&nbsp;extract&nbsp;from&nbsp;it&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="batch_length1" class="idref" href="#batch_length1"><span class="id" title="lemma">batch_length1</span></a> : <span class="id" title="keyword">∀</span> {<a id="A:395" class="idref" href="#A:395"><span class="id" title="binder">A</span></a> <a id="B:396" class="idref" href="#B:396"><span class="id" title="binder">B</span></a> <a id="C:397" class="idref" href="#C:397"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} (<a id="b:398" class="idref" href="#b:398"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:395"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:396"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:397"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:398"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:395"><span class="id" title="variable">A</span></a>)) (<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:395"><span class="id" title="variable">A</span></a>) <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:398"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">b</span> <span class="id" title="var">IHb</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Misc.List.html#Monoid_op_list"><span class="id" title="instance">Monoid_op_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">List.app_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="batch_length_map" class="idref" href="#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:399" class="idref" href="#A:399"><span class="id" title="binder">A</span></a> <a id="B:400" class="idref" href="#B:400"><span class="id" title="binder">B</span></a> <a id="C:401" class="idref" href="#C:401"><span class="id" title="binder">C</span></a> <a id="C':402" class="idref" href="#C':402"><span class="id" title="binder">C'</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:403" class="idref" href="#f:403"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:401"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C':402"><span class="id" title="variable">C'</span></a>) (<a id="b:404" class="idref" href="#b:404"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:399"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:400"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:401"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:404"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:399"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:400"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:403"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:404"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">b</span> <span class="id" title="var">IHb</span> <span class="id" title="var">a</span>]; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="batch_length_mapfst" class="idref" href="#batch_length_mapfst"><span class="id" title="lemma">batch_length_mapfst</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:405" class="idref" href="#A:405"><span class="id" title="binder">A</span></a> <a id="A':406" class="idref" href="#A':406"><span class="id" title="binder">A'</span></a> <a id="B:407" class="idref" href="#B:407"><span class="id" title="binder">B</span></a> <a id="C:408" class="idref" href="#C:408"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:409" class="idref" href="#f:409"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:405"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':406"><span class="id" title="variable">A'</span></a>) (<a id="b:410" class="idref" href="#b:410"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:405"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:407"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:408"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:410"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:405"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':406"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:409"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:410"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">b</span> <span class="id" title="var">IHb</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="batch_length_mapsnd" class="idref" href="#batch_length_mapsnd"><span class="id" title="lemma">batch_length_mapsnd</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:411" class="idref" href="#A:411"><span class="id" title="binder">A</span></a> <a id="B:412" class="idref" href="#B:412"><span class="id" title="binder">B</span></a> <a id="B':413" class="idref" href="#B':413"><span class="id" title="binder">B'</span></a> <a id="C:414" class="idref" href="#C:414"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:415" class="idref" href="#f:415"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#B':413"><span class="id" title="variable">B'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:412"><span class="id" title="variable">B</span></a>) (<a id="b:416" class="idref" href="#b:416"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:411"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:412"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:414"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:416"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':413"><span class="id" title="variable">B'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:412"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:415"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:416"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">b</span> <span class="id" title="var">IHb</span> <span class="id" title="var">a</span>]; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> ((<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <span class="id" title="var">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length"><span class="id" title="section">length</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab573"></a><h1 class="section"><code>Batch</code> as a parameterized monad</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="parameterised_monad" class="idref" href="#parameterised_monad"><span class="id" title="section">parameterised_monad</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab574"></a><h2 class="section">Operations</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="batch" class="idref" href="#batch"><span class="id" title="definition">batch</span></a> (<a id="A:417" class="idref" href="#A:417"><span class="id" title="binder">A</span></a> <a id="B:418" class="idref" href="#B:418"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) : <a class="idref" href="Tealeaves.Functors.Batch.html#A:417"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:417"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:418"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:418"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:417"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:418"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:418"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:417"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:418"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:418"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:418"><span class="id" title="variable">B</span></a>) (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:418"><span class="id" title="variable">B</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="join_Batch" class="idref" href="#join_Batch"><span class="id" title="definition">join_Batch</span></a> {<a id="A:419" class="idref" href="#A:419"><span class="id" title="binder">A</span></a> <a id="B:420" class="idref" href="#B:420"><span class="id" title="binder">B</span></a> <a id="C:421" class="idref" href="#C:421"><span class="id" title="binder">C</span></a> <a id="D:422" class="idref" href="#D:422"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:423" class="idref" href="#b:423"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:419"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:420"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:421"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:421"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:422"><span class="id" title="variable">D</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:419"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:420"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:422"><span class="id" title="variable">D</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:423"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">d</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap"><span class="id" title="definition">ap</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:419"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:420"><span class="id" title="variable">B</span></a>) (@<a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch:424"><span class="id" title="definition">join_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:419"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:420"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:421"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:421"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:422"><span class="id" title="variable">D</span></a>) <span class="id" title="var">rest</span>) <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="join_Batch_rw1" class="idref" href="#join_Batch_rw1"><span class="id" title="lemma">join_Batch_rw1</span></a> {<a id="A:426" class="idref" href="#A:426"><span class="id" title="binder">A</span></a> <a id="B:427" class="idref" href="#B:427"><span class="id" title="binder">B</span></a> <a id="C:428" class="idref" href="#C:428"><span class="id" title="binder">C</span></a> <a id="D:429" class="idref" href="#D:429"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="keyword">∀</span> (<a id="rest:430" class="idref" href="#rest:430"><span class="id" title="binder">rest</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:426"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:427"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:428"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:428"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:428"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:429"><span class="id" title="variable">D</span></a>)) (<a id="b:431" class="idref" href="#b:431"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:426"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:427"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:428"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#rest:430"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:431"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rest:430"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:431"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab575"></a><h2 class="section"><code>join</code> as <code>runBatch id</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="join_Batch_rw0" class="idref" href="#join_Batch_rw0"><span class="id" title="lemma">join_Batch_rw0</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:432" class="idref" href="#A:432"><span class="id" title="binder">A</span></a> <a id="B:433" class="idref" href="#B:433"><span class="id" title="binder">B</span></a> <a id="C:434" class="idref" href="#C:434"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:432"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:433"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:434"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:432"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:433"><span class="id" title="variable">B</span></a>) (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:432"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:433"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:434"><span class="id" title="variable">C</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">D</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D</span> <span class="id" title="var">d</span> | <span class="id" title="var">D</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch_rw1"><span class="id" title="lemma">join_Batch_rw1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab576"></a><h3 class="section">Naturality</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ret_natural" class="idref" href="#ret_natural"><span class="id" title="lemma">ret_natural</span></a> (<a id="A1:435" class="idref" href="#A1:435"><span class="id" title="binder">A1</span></a> <a id="A2:436" class="idref" href="#A2:436"><span class="id" title="binder">A2</span></a> <a id="B:437" class="idref" href="#B:437"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:438" class="idref" href="#f:438"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A1:435"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:436"><span class="id" title="variable">A2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:435"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:436"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:438"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:435"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:437"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:436"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:437"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:438"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ret_dinatural" class="idref" href="#ret_dinatural"><span class="id" title="lemma">ret_dinatural</span></a> (<a id="A:439" class="idref" href="#A:439"><span class="id" title="binder">A</span></a> <a id="B1:440" class="idref" href="#B1:440"><span class="id" title="binder">B1</span></a> <a id="B2:441" class="idref" href="#B2:441"><span class="id" title="binder">B2</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:442" class="idref" href="#f:442"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#B1:440"><span class="id" title="variable">B1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:441"><span class="id" title="variable">B2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:440"><span class="id" title="variable">B1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:441"><span class="id" title="variable">B2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:442"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:439"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B2:441"><span class="id" title="variable">B2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:439"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:440"><span class="id" title="variable">B1</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:442"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:439"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B1:440"><span class="id" title="variable">B1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab577"></a><h2 class="section">Other laws</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_batch" class="idref" href="#runBatch_batch"><span class="id" title="lemma">runBatch_batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="G:443" class="idref" href="#G:443"><span class="id" title="binder">G</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) `{<a id="H2:447" class="idref" href="#H2:447"><span class="id" title="binder">Applicative</span></a> <a id="H2:447" class="idref" href="#H2:447"><span class="id" title="binder">G</span></a>} (<a id="A:448" class="idref" href="#A:448"><span class="id" title="binder">A</span></a> <a id="B:449" class="idref" href="#B:449"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:450" class="idref" href="#f:450"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:448"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:443"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:449"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:443"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:450"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:449"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:448"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:449"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:450"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">a</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap1"><span class="id" title="lemma">ap1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab578"></a><h2 class="section">Monad laws</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ret_join" class="idref" href="#ret_join"><span class="id" title="lemma">ret_join</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:451" class="idref" href="#A:451"><span class="id" title="binder">A</span></a> <a id="B:452" class="idref" href="#B:452"><span class="id" title="binder">B</span></a> <a id="C:453" class="idref" href="#C:453"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a>@<a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:451"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:452"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:453"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:453"><span class="id" title="variable">C</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:451"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:452"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:453"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:453"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:451"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:452"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:453"><span class="id" title="variable">C</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> (<span class="id" title="var">C</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">C</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap1"><span class="id" title="lemma">ap1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="join_map_ret" class="idref" href="#join_map_ret"><span class="id" title="lemma">join_map_ret</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:454" class="idref" href="#A:454"><span class="id" title="binder">A</span></a> <a id="B:455" class="idref" href="#B:455"><span class="id" title="binder">B</span></a> <a id="C:456" class="idref" href="#C:456"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a>@<a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:454"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:455"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:455"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:456"><span class="id" title="variable">C</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:454"><span class="id" title="variable">A</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:454"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:455"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:455"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:454"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:455"><span class="id" title="variable">B</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:454"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:455"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:456"><span class="id" title="variable">C</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Abort</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> "'BMONAD' B" := (<span class="id" title="keyword">fun</span> <a id="A:457" class="idref" href="#A:457"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:457"><span class="id" title="variable">A</span></a> <span class="id" title="var">B</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 3).<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="Map_Batch_Fst" class="idref" href="#Map_Batch_Fst"><span class="id" title="instance">Map_Batch_Fst</span></a> (<a id="B:458" class="idref" href="#B:458"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) : <a class="idref" href="Tealeaves.Classes.Functor.html#Map"><span class="id" title="class">Map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#parameterised_monad.:::'BMONAD'_x"><span class="id" title="notation">BMONAD</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:458"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="A:459" class="idref" href="#A:459"><span class="id" title="binder">A</span></a> <a id="B:460" class="idref" href="#B:460"><span class="id" title="binder">B</span></a> <a id="f:461" class="idref" href="#f:461"><span class="id" title="binder">f</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:461"><span class="id" title="variable">f</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="Return_Batch" class="idref" href="#Return_Batch"><span class="id" title="instance">Return_Batch</span></a> (<a id="B:462" class="idref" href="#B:462"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) : <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#Return"><span class="id" title="class">Return</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#parameterised_monad.:::'BMONAD'_x"><span class="id" title="notation">BMONAD</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:462"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="A:463" class="idref" href="#A:463"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:463"><span class="id" title="variable">A</span></a> <span class="id" title="var">B</span>).<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="Join_Batch" class="idref" href="#Join_Batch"><span class="id" title="instance">Join_Batch</span></a> (<a id="B:464" class="idref" href="#B:464"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) : <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#Join"><span class="id" title="class">Join</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#parameterised_monad.:::'BMONAD'_x"><span class="id" title="notation">BMONAD</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:464"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="A:465" class="idref" href="#A:465"><span class="id" title="binder">A</span></a> ⇒ @<a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:465"><span class="id" title="variable">A</span></a> <span class="id" title="var">B</span> <span class="id" title="var">B</span> <span class="id" title="var">B</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Goal</span> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">∀</span></a> <a id="B:466" class="idref" href="#B:466"><span class="id" title="binder">B</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">,</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">Categorical.Monad.Monad</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">(</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">BMONAD</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">B</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#parameterised_monad"><span class="id" title="section">parameterised_monad</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab579"></a><h1 class="section"><code>Batch</code> as a parameterized comonad</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="parameterized" class="idref" href="#parameterized"><span class="id" title="section">parameterized</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Implicit</span> <span class="id" title="var">Arguments</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab580"></a><h2 class="section">Operations</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="extract_Batch" class="idref" href="#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> {<a id="A:467" class="idref" href="#A:467"><span class="id" title="binder">A</span></a> <a id="B:468" class="idref" href="#B:468"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="b:469" class="idref" href="#b:469"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:467"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:467"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:468"><span class="id" title="variable">B</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#B:468"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:469"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#b:469"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch:470"><span class="id" title="definition">extract_Batch</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="cojoin_Batch" class="idref" href="#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> {<a id="A:472" class="idref" href="#A:472"><span class="id" title="binder">A</span></a> <a id="B:473" class="idref" href="#B:473"><span class="id" title="binder">B</span></a> <a id="C:474" class="idref" href="#C:474"><span class="id" title="binder">C</span></a> <a id="D:475" class="idref" href="#D:475"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>} (<a id="b:476" class="idref" href="#b:476"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:472"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:474"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:475"><span class="id" title="variable">D</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:472"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:473"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:473"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:474"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:475"><span class="id" title="variable">D</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:476"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">d</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:472"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:473"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:473"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:474"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:475"><span class="id" title="variable">D</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:473"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:474"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:475"><span class="id" title="variable">D</span></a> <span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:472"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:473"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:473"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:474"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:475"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:472"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:473"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:473"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:474"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:475"><span class="id" title="variable">D</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch:477"><span class="id" title="definition">cojoin_Batch</span></a> <span class="id" title="var">rest</span>)) <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab581"></a><h3 class="section">Specification via <code>runBatch</code>, <code>batch</code>, and <code>double_batch</code></h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extract_Batch_to_runBatch" class="idref" href="#extract_Batch_to_runBatch"><span class="id" title="lemma">extract_Batch_to_runBatch</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:479" class="idref" href="#A:479"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:479"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="keyword">fun</span> <a id="A:480" class="idref" href="#A:480"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#A:480"><span class="id" title="variable">A</span></a>) (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:479"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">B</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="double_batch" class="idref" href="#double_batch"><span class="id" title="definition">double_batch</span></a> {<a id="A:481" class="idref" href="#A:481"><span class="id" title="binder">A</span></a> <a id="B:482" class="idref" href="#B:482"><span class="id" title="binder">B</span></a> <a id="C:483" class="idref" href="#C:483"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#A:481"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:481"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:482"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:482"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:483"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:483"><span class="id" title="variable">C</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:481"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:482"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:482"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:483"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:481"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:482"><span class="id" title="variable">B</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="double_batch_rw" class="idref" href="#double_batch_rw"><span class="id" title="lemma">double_batch_rw</span></a> {<a id="A:484" class="idref" href="#A:484"><span class="id" title="binder">A</span></a> <a id="B:485" class="idref" href="#B:485"><span class="id" title="binder">B</span></a> <a id="C:486" class="idref" href="#C:486"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} (<a id="a:487" class="idref" href="#a:487"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:484"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#double_batch"><span class="id" title="definition">double_batch</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#B:485"><span class="id" title="variable">B</span></a>) (<span class="id" title="var">C</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#C:486"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#a:487"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:484"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:485"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:485"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:485"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:486"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:486"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:485"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:486"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:487"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="double_batch_spec" class="idref" href="#double_batch_spec"><span class="id" title="lemma">double_batch_spec</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:488" class="idref" href="#A:488"><span class="id" title="binder">A</span></a> <a id="B:489" class="idref" href="#B:489"><span class="id" title="binder">B</span></a> <a id="C:490" class="idref" href="#C:490"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#double_batch"><span class="id" title="definition">double_batch</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:489"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:490"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#1c88ff5532c3a847b1beb4908cee4f91"><span class="id" title="notation">⋆2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:488"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:489"><span class="id" title="variable">B</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cojoin_Batch_to_runBatch" class="idref" href="#cojoin_Batch_to_runBatch"><span class="id" title="lemma">cojoin_Batch_to_runBatch</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:491" class="idref" href="#A:491"><span class="id" title="binder">A</span></a> <a id="B:492" class="idref" href="#B:492"><span class="id" title="binder">B</span></a> <a id="C:493" class="idref" href="#C:493"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:491"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:492"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:493"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:491"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:492"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:492"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:493"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#double_batch"><span class="id" title="definition">double_batch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">D</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D</span> <span class="id" title="var">d</span> | <span class="id" title="var">D</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) <a class="idref" href="Tealeaves.Functors.Batch.html#double_batch"><span class="id" title="definition">double_batch</span></a> (<span class="id" title="var">C</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">D</span>) <span class="id" title="var">rest</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) <a class="idref" href="Tealeaves.Functors.Batch.html#double_batch"><span class="id" title="definition">double_batch</span></a> (<span class="id" title="var">C</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">D</span>) <span class="id" title="var">rest</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) <a class="idref" href="Tealeaves.Functors.Batch.html#double_batch"><span class="id" title="definition">double_batch</span></a> (<span class="id" title="var">C</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">D</span>) <span class="id" title="var">rest</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">rest</span> <span class="id" title="var">b</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">rest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">rest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_id"><span class="id" title="method">fun_map_id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab582"></a><h3 class="section">Composition with <code>ret</code>/<code>batch</code></h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extract_Batch_batch" class="idref" href="#extract_Batch_batch"><span class="id" title="lemma">extract_Batch_batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:494" class="idref" href="#A:494"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:494"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:494"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:494"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cojoin_Batch_batch" class="idref" href="#cojoin_Batch_batch"><span class="id" title="lemma">cojoin_Batch_batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:495" class="idref" href="#A:495"><span class="id" title="binder">A</span></a> <a id="B:496" class="idref" href="#B:496"><span class="id" title="binder">B</span></a> <a id="C:497" class="idref" href="#C:497"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:495"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:496"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:497"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:497"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:495"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:497"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#double_batch"><span class="id" title="definition">double_batch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch_to_runBatch"><span class="id" title="lemma">cojoin_Batch_to_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_batch"><span class="id" title="lemma">runBatch_batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">B</span> <span class="id" title="var">C</span>) <span class="id" title="var">A</span> <span class="id" title="var">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab583"></a><h3 class="section">Rewriting rules</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extract_Batch_rw0" class="idref" href="#extract_Batch_rw0"><span class="id" title="lemma">extract_Batch_rw0</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:498" class="idref" href="#A:498"><span class="id" title="binder">A</span></a> <a id="C:499" class="idref" href="#C:499"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="c:500" class="idref" href="#c:500"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:499"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:498"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:498"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:499"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:500"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:500"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extract_Batch_rw1" class="idref" href="#extract_Batch_rw1"><span class="id" title="lemma">extract_Batch_rw1</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:501" class="idref" href="#A:501"><span class="id" title="binder">A</span></a> <a id="B:502" class="idref" href="#B:502"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) (<a id="rest:503" class="idref" href="#rest:503"><span class="id" title="binder">rest</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:501"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:501"><span class="id" title="variable">A</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#A:501"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:502"><span class="id" title="variable">B</span></a>)) (<a id="a:504" class="idref" href="#a:504"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:501"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#rest:503"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:504"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rest:503"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:504"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cojoin_Batch_rw0" class="idref" href="#cojoin_Batch_rw0"><span class="id" title="lemma">cojoin_Batch_rw0</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:505" class="idref" href="#A:505"><span class="id" title="binder">A</span></a> <a id="B:506" class="idref" href="#B:506"><span class="id" title="binder">B</span></a> <a id="C:507" class="idref" href="#C:507"><span class="id" title="binder">C</span></a> <a id="D:508" class="idref" href="#D:508"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>) (<a id="d:509" class="idref" href="#d:509"><span class="id" title="binder">d</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#D:508"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:505"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:506"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:507"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:508"><span class="id" title="variable">D</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:505"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:507"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:508"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d:509"><span class="id" title="variable">d</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:505"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:506"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:506"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:507"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:508"><span class="id" title="variable">D</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:506"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:507"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:508"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#d:509"><span class="id" title="variable">d</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cojoin_Batch_rw1" class="idref" href="#cojoin_Batch_rw1"><span class="id" title="lemma">cojoin_Batch_rw1</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:510" class="idref" href="#A:510"><span class="id" title="binder">A</span></a> <a id="B:511" class="idref" href="#B:511"><span class="id" title="binder">B</span></a> <a id="C:512" class="idref" href="#C:512"><span class="id" title="binder">C</span></a> <a id="D:513" class="idref" href="#D:513"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>) (<a id="rest:514" class="idref" href="#rest:514"><span class="id" title="binder">rest</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:510"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:512"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:512"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:513"><span class="id" title="variable">D</span></a>)) (<a id="a:515" class="idref" href="#a:515"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:510"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:510"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:511"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:512"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:513"><span class="id" title="variable">D</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#rest:514"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:515"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:510"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:511"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:511"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:512"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:513"><span class="id" title="variable">D</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rest:514"><span class="id" title="variable">rest</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:515"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab584"></a><h3 class="section">Naturality properties</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extract_natural" class="idref" href="#extract_natural"><span class="id" title="lemma">extract_natural</span></a> (<a id="A:516" class="idref" href="#A:516"><span class="id" title="binder">A</span></a> <a id="C:517" class="idref" href="#C:517"><span class="id" title="binder">C</span></a> <a id="D:518" class="idref" href="#D:518"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:519" class="idref" href="#f:519"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:517"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:518"><span class="id" title="variable">D</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:520" class="idref" href="#b:520"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:516"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:516"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:517"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:516"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:518"><span class="id" title="variable">D</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:516"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:516"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:519"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:520"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#f:519"><span class="id" title="variable">f</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:516"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:517"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:520"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">D</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">D</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extract_dinatural" class="idref" href="#extract_dinatural"><span class="id" title="lemma">extract_dinatural</span></a> (<a id="A:521" class="idref" href="#A:521"><span class="id" title="binder">A</span></a> <a id="B:522" class="idref" href="#B:522"><span class="id" title="binder">B</span></a> <a id="C:523" class="idref" href="#C:523"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:524" class="idref" href="#f:524"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:521"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:522"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:525" class="idref" href="#b:525"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:521"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:522"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:523"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:522"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:523"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:521"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:522"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:524"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:525"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:521"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:523"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:521"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:522"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:524"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:525"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#extract_natural"><span class="id" title="lemma">extract_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cojoin_natural" class="idref" href="#cojoin_natural"><span class="id" title="lemma">cojoin_natural</span></a> (<a id="A:526" class="idref" href="#A:526"><span class="id" title="binder">A</span></a> <a id="B:527" class="idref" href="#B:527"><span class="id" title="binder">B</span></a> <a id="C:528" class="idref" href="#C:528"><span class="id" title="binder">C</span></a> <a id="D:529" class="idref" href="#D:529"><span class="id" title="binder">D</span></a> <a id="E:530" class="idref" href="#E:530"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:531" class="idref" href="#f:531"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#D:529"><span class="id" title="variable">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#E:530"><span class="id" title="variable">E</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:532" class="idref" href="#b:532"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:526"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:528"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:529"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:526"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:527"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:528"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#E:530"><span class="id" title="variable">E</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:526"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:528"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:531"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:532"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:526"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:527"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:527"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:528"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:531"><span class="id" title="variable">f</span></a>) (@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:526"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:527"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:528"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:529"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:532"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D</span> <span class="id" title="var">d</span> | <span class="id" title="var">D</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> (<span class="id" title="var">B</span> := <span class="id" title="var">B</span>) <span class="id" title="var">rest</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cojoin_natural1" class="idref" href="#cojoin_natural1"><span class="id" title="lemma">cojoin_natural1</span></a> (<a id="A:533" class="idref" href="#A:533"><span class="id" title="binder">A</span></a> <a id="A':534" class="idref" href="#A':534"><span class="id" title="binder">A'</span></a> <a id="B:535" class="idref" href="#B:535"><span class="id" title="binder">B</span></a> <a id="C:536" class="idref" href="#C:536"><span class="id" title="binder">C</span></a> <a id="D:537" class="idref" href="#D:537"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:538" class="idref" href="#f:538"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:533"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':534"><span class="id" title="variable">A'</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:539" class="idref" href="#b:539"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:533"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:536"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:537"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':534"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:535"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:536"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:537"><span class="id" title="variable">D</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:538"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:539"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:538"><span class="id" title="variable">f</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:533"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:535"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:536"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:537"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:539"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D</span> <span class="id" title="var">d</span> | <span class="id" title="var">D</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_map_Batch"><span class="id" title="lemma">mapfst_map_Batch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cojoin_natural2" class="idref" href="#cojoin_natural2"><span class="id" title="lemma">cojoin_natural2</span></a> (<a id="A:540" class="idref" href="#A:540"><span class="id" title="binder">A</span></a> <a id="B:541" class="idref" href="#B:541"><span class="id" title="binder">B</span></a> <a id="C:542" class="idref" href="#C:542"><span class="id" title="binder">C</span></a> <a id="C':543" class="idref" href="#C':543"><span class="id" title="binder">C'</span></a> <a id="D:544" class="idref" href="#D:544"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:545" class="idref" href="#f:545"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:542"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C':543"><span class="id" title="variable">C'</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:546" class="idref" href="#b:546"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:540"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C':543"><span class="id" title="variable">C'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:544"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:540"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:541"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:542"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:544"><span class="id" title="variable">D</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:545"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:546"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:540"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:541"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:545"><span class="id" title="variable">f</span></a>) (@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:540"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:541"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C':543"><span class="id" title="variable">C'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:544"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:546"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D</span> <span class="id" title="var">d</span> | <span class="id" title="var">D</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">C</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_natural"><span class="id" title="lemma">cojoin_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) ?<span class="id" title="var">g</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) ?<span class="id" title="var">f</span> ?<span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">g</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">f</span><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">b</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) ?<span class="id" title="var">g</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) ?<span class="id" title="var">f</span> ?<span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">g</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">f</span><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">b</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cojoin_dinatural" class="idref" href="#cojoin_dinatural"><span class="id" title="lemma">cojoin_dinatural</span></a> (<a id="A:547" class="idref" href="#A:547"><span class="id" title="binder">A</span></a> <a id="B:548" class="idref" href="#B:548"><span class="id" title="binder">B</span></a> <a id="B':549" class="idref" href="#B':549"><span class="id" title="binder">B'</span></a> <a id="C:550" class="idref" href="#C:550"><span class="id" title="binder">C</span></a> <a id="D:551" class="idref" href="#D:551"><span class="id" title="binder">D</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:552" class="idref" href="#f:552"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#B:548"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':549"><span class="id" title="variable">B'</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:553" class="idref" href="#b:553"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:547"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:550"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:551"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:547"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:548"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:552"><span class="id" title="variable">f</span></a>) (@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:547"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:548"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:550"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:551"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:553"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:552"><span class="id" title="variable">f</span></a>) (@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:547"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':549"><span class="id" title="variable">B'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:550"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:551"><span class="id" title="variable">D</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:553"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D</span> <span class="id" title="var">d</span> | <span class="id" title="var">D</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> (<span class="id" title="var">B</span> := <span class="id" title="var">B</span>) <span class="id" title="var">rest</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_map_Batch"><span class="id" title="lemma">mapsnd_map_Batch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">B</span> <span class="id" title="var">B'</span> <span class="id" title="var">f</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> (<span class="id" title="var">B</span> := <span class="id" title="var">B'</span>) <span class="id" title="var">rest</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> (<span class="id" title="var">B</span> := <span class="id" title="var">B</span>) <span class="id" title="var">rest</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab585"></a><h2 class="section"><code>extract</code> as an applicative morphism</h2>

</div>
<div class="code">
&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AppMor_extract" class="idref" href="#AppMor_extract"><span class="id" title="instance">AppMor_extract</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:554" class="idref" href="#A:554"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ApplicativeMorphism"><span class="id" title="class">ApplicativeMorphism</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:554"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:554"><span class="id" title="variable">A</span></a>) (<span class="id" title="keyword">fun</span> <a id="A:555" class="idref" href="#A:555"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#A:555"><span class="id" title="variable">A</span></a>) (@<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:554"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Mult_I"><span class="id" title="instance">Mult_I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">B</span> <span class="id" title="var">b</span> | <span class="id" title="var">B</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">C</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch_rw2"><span class="id" title="lemma">mult_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#extract_natural"><span class="id" title="lemma">extract_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#mult_Batch_rw3"><span class="id" title="lemma">mult_Batch_rw3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch_rw1"><span class="id" title="lemma">extract_Batch_rw1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#extract_natural"><span class="id" title="lemma">extract_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab586"></a><h2 class="section">Comonad laws</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extr_cojoin_Batch" class="idref" href="#extr_cojoin_Batch"><span class="id" title="lemma">extr_cojoin_Batch</span></a> : `(<a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#extract_natural"><span class="id" title="lemma">extract_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;Finish&nbsp;rest&nbsp;of&nbsp;the&nbsp;parameterized&nbsp;comonad&nbsp;structure.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab587"></a><h2 class="section">Misc</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_cojoin_Batch" class="idref" href="#length_cojoin_Batch"><span class="id" title="lemma">length_cojoin_Batch</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:559" class="idref" href="#A:559"><span class="id" title="binder">A</span></a> <a id="A':560" class="idref" href="#A':560"><span class="id" title="binder">A'</span></a> <a id="B:561" class="idref" href="#B:561"><span class="id" title="binder">B</span></a> <a id="C:562" class="idref" href="#C:562"><span class="id" title="binder">C</span></a>} (<a id="b:563" class="idref" href="#b:563"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:559"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:561"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:562"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:563"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':560"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:563"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#parameterized"><span class="id" title="section">parameterized</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab588"></a><h2 class="section"><code>cojoin</code> as <code>runBatch double_batch</code></h2>

</div>
<div class="code">
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AppMor_cojoin" class="idref" href="#AppMor_cojoin"><span class="id" title="instance">AppMor_cojoin</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:564" class="idref" href="#A:564"><span class="id" title="binder">A</span></a> <a id="B:565" class="idref" href="#B:565"><span class="id" title="binder">B</span></a> <a id="C:566" class="idref" href="#C:566"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ApplicativeMorphism"><span class="id" title="class">ApplicativeMorphism</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:564"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:566"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:564"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:565"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:565"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:566"><span class="id" title="variable">C</span></a>) (@<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:564"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:565"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:566"><span class="id" title="variable">C</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch_to_runBatch"><span class="id" title="lemma">cojoin_Batch_to_runBatch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#ApplicativeMorphism_runBatch"><span class="id" title="instance">ApplicativeMorphism_runBatch</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AppMor_join" class="idref" href="#AppMor_join"><span class="id" title="instance">AppMor_join</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:567" class="idref" href="#A:567"><span class="id" title="binder">A</span></a> <a id="B:568" class="idref" href="#B:568"><span class="id" title="binder">B</span></a> <a id="C:569" class="idref" href="#C:569"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ApplicativeMorphism"><span class="id" title="class">ApplicativeMorphism</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:567"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:568"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:569"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:569"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:567"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:568"><span class="id" title="variable">B</span></a>) (@<a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:567"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:568"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:569"><span class="id" title="variable">C</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch_rw0"><span class="id" title="lemma">join_Batch_rw0</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#ApplicativeMorphism_runBatch"><span class="id" title="instance">ApplicativeMorphism_runBatch</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab589"></a><h2 class="section">Reassembly operation</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="traversal_reassemble" class="idref" href="#traversal_reassemble"><span class="id" title="section">traversal_reassemble</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="T:570" class="idref" href="#T:570"><span class="id" title="binder">T</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H0:572" class="idref" href="#H0:572"><span class="id" title="binder">TraversableFunctor</span></a> <a id="H0:572" class="idref" href="#H0:572"><span class="id" title="binder">T</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="add_elements" class="idref" href="#add_elements"><span class="id" title="definition">add_elements</span></a> `(<a id="b:576" class="idref" href="#b:576"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:573" class="idref" href="#A:573"><span class="id" title="binder">A</span></a> <a id="B:574" class="idref" href="#B:574"><span class="id" title="binder">B</span></a> <a id="C:575" class="idref" href="#C:575"><span class="id" title="binder">C</span></a>) `(<a id="l:578" class="idref" href="#l:578"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a id="A':577" class="idref" href="#A':577"><span class="id" title="binder">A'</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':577"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:574"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:575"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:576"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#l:578"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#add_elements:579"><span class="id" title="definition">add_elements</span></a> <span class="id" title="var">rest</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">l'</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#add_elements:579"><span class="id" title="definition">add_elements</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">l'</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#traversal_reassemble"><span class="id" title="section">traversal_reassemble</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab590"></a><h1 class="section"><code>Batch _ B C</code> is a traversable functor</h1>

</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="traverse_Batch" class="idref" href="#traverse_Batch"><span class="id" title="definition">traverse_Batch</span></a> (<a id="B:582" class="idref" href="#B:582"><span class="id" title="binder">B</span></a> <a id="C:583" class="idref" href="#C:583"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="G:584" class="idref" href="#G:584"><span class="id" title="binder">G</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;`{<a id="H:585" class="idref" href="#H:585"><span class="id" title="binder">Map</span></a> <a id="H:585" class="idref" href="#H:585"><span class="id" title="binder">G</span></a>} `{<a id="H0:586" class="idref" href="#H0:586"><span class="id" title="binder">Pure</span></a> <a id="H0:586" class="idref" href="#H0:586"><span class="id" title="binder">G</span></a>} `{<a id="H1:587" class="idref" href="#H1:587"><span class="id" title="binder">Mult</span></a> <a id="H1:587" class="idref" href="#H1:587"><span class="id" title="binder">G</span></a>} (<a id="A:588" class="idref" href="#A:588"><span class="id" title="binder">A</span></a> <a id="A':589" class="idref" href="#A':589"><span class="id" title="binder">A'</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:590" class="idref" href="#f:590"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:588"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:584"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':589"><span class="id" title="variable">A'</span></a>)<br/>
&nbsp;&nbsp;(<a id="b:591" class="idref" href="#b:591"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:588"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:582"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:583"><span class="id" title="variable">C</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#G:584"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':589"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:582"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:583"><span class="id" title="variable">C</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:591"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:584"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':589"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:582"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:583"><span class="id" title="variable">C</span></a> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:584"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':589"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:582"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:583"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#traverse_Batch:592"><span class="id" title="definition">traverse_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:582"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:582"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:583"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#G:584"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:588"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':589"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:590"><span class="id" title="variable">f</span></a> <span class="id" title="var">rest</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#f:590"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Traverse_Batch1" class="idref" href="#Traverse_Batch1"><span class="id" title="instance">Traverse_Batch1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="B:594" class="idref" href="#B:594"><span class="id" title="binder">B</span></a> <a id="C:595" class="idref" href="#C:595"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>), <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#Traverse"><span class="id" title="class">Traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:594"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:595"><span class="id" title="variable">C</span></a>) := <a class="idref" href="Tealeaves.Functors.Batch.html#traverse_Batch"><span class="id" title="definition">traverse_Batch</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="traverse_Batch_rw1" class="idref" href="#traverse_Batch_rw1"><span class="id" title="lemma">traverse_Batch_rw1</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="B:596" class="idref" href="#B:596"><span class="id" title="binder">B</span></a> <a id="C:597" class="idref" href="#C:597"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<a id="G:598" class="idref" href="#G:598"><span class="id" title="binder">G</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;`{<a id="H:599" class="idref" href="#H:599"><span class="id" title="binder">Map</span></a> <a id="H:599" class="idref" href="#H:599"><span class="id" title="binder">G</span></a>} `{<a id="H0:600" class="idref" href="#H0:600"><span class="id" title="binder">Pure</span></a> <a id="H0:600" class="idref" href="#H0:600"><span class="id" title="binder">G</span></a>} `{<a id="H1:601" class="idref" href="#H1:601"><span class="id" title="binder">Mult</span></a> <a id="H1:601" class="idref" href="#H1:601"><span class="id" title="binder">G</span></a>}<br/>
&nbsp;&nbsp;(<a id="A:602" class="idref" href="#A:602"><span class="id" title="binder">A</span></a> <a id="A':603" class="idref" href="#A':603"><span class="id" title="binder">A'</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:604" class="idref" href="#f:604"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:602"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:598"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':603"><span class="id" title="variable">A'</span></a>) (<a id="c:605" class="idref" href="#c:605"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:597"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:604"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:602"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:596"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:597"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:605"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:598"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':603"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:596"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:597"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:605"><span class="id" title="variable">c</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="traverse_Batch_rw1'" class="idref" href="#traverse_Batch_rw1'"><span class="id" title="lemma">traverse_Batch_rw1'</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="B:606" class="idref" href="#B:606"><span class="id" title="binder">B</span></a> <a id="C:607" class="idref" href="#C:607"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<a id="G:608" class="idref" href="#G:608"><span class="id" title="binder">G</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;`{<a id="H:609" class="idref" href="#H:609"><span class="id" title="binder">Map</span></a> <a id="H:609" class="idref" href="#H:609"><span class="id" title="binder">G</span></a>} `{<a id="H0:610" class="idref" href="#H0:610"><span class="id" title="binder">Pure</span></a> <a id="H0:610" class="idref" href="#H0:610"><span class="id" title="binder">G</span></a>} `{<a id="H1:611" class="idref" href="#H1:611"><span class="id" title="binder">Mult</span></a> <a id="H1:611" class="idref" href="#H1:611"><span class="id" title="binder">G</span></a>}<br/>
&nbsp;&nbsp;(<a id="A:612" class="idref" href="#A:612"><span class="id" title="binder">A</span></a> <a id="A':613" class="idref" href="#A':613"><span class="id" title="binder">A'</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:614" class="idref" href="#f:614"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:612"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:608"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':613"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:614"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:612"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:606"><span class="id" title="variable">B</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#G:608"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':613"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:606"><span class="id" title="variable">B</span></a>) (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#C:607"><span class="id" title="variable">C</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.Batch.html#Pure_Batch"><span class="id" title="instance">Pure_Batch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Pure_compose"><span class="id" title="instance">Pure_compose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">at</span> 1; <span class="id" title="var">ext</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#traverse_Batch_rw1"><span class="id" title="lemma">traverse_Batch_rw1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="traverse_Batch_rw2" class="idref" href="#traverse_Batch_rw2"><span class="id" title="lemma">traverse_Batch_rw2</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span>`{<a id="H:616" class="idref" href="#H:616"><span class="id" title="binder">Map</span></a> <a id="H:616" class="idref" href="#H:616"><span class="id" title="binder">G</span></a>} `{<a id="H0:617" class="idref" href="#H0:617"><span class="id" title="binder">Pure</span></a> <a id="H0:617" class="idref" href="#H0:617"><span class="id" title="binder">G</span></a>} `{<a id="H1:618" class="idref" href="#H1:618"><span class="id" title="binder">Mult</span></a> <a id="H1:618" class="idref" href="#H1:618"><span class="id" title="binder">G</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Applicative0:619" class="idref" href="#Applicative0:619"><span class="id" title="binder">!</span></a> <a id="Applicative0:619" class="idref" href="#Applicative0:619"><span class="id" title="binder">Applicative</span></a> <a id="Applicative0:619" class="idref" href="#Applicative0:619"><span class="id" title="binder">G</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="B:620" class="idref" href="#B:620"><span class="id" title="binder">B</span></a> <a id="C:621" class="idref" href="#C:621"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<a id="A:622" class="idref" href="#A:622"><span class="id" title="binder">A</span></a> <a id="A':623" class="idref" href="#A':623"><span class="id" title="binder">A'</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:624" class="idref" href="#f:624"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:622"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:615"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':623"><span class="id" title="variable">A'</span></a>)<br/>
&nbsp;&nbsp;(<a id="k:625" class="idref" href="#k:625"><span class="id" title="binder">k</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:622"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:620"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:620"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:621"><span class="id" title="variable">C</span></a>)) (<a id="a:626" class="idref" href="#a:626"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:622"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:624"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#k:625"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:626"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:615"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':623"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:620"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:621"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#G:615"><span class="id" title="variable">G</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:624"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#k:625"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:624"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:626"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="traverse_Batch_rw2'" class="idref" href="#traverse_Batch_rw2'"><span class="id" title="lemma">traverse_Batch_rw2'</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span>`{<a id="H:628" class="idref" href="#H:628"><span class="id" title="binder">Map</span></a> <a id="H:628" class="idref" href="#H:628"><span class="id" title="binder">G</span></a>} `{<a id="H0:629" class="idref" href="#H0:629"><span class="id" title="binder">Pure</span></a> <a id="H0:629" class="idref" href="#H0:629"><span class="id" title="binder">G</span></a>} `{<a id="H1:630" class="idref" href="#H1:630"><span class="id" title="binder">Mult</span></a> <a id="H1:630" class="idref" href="#H1:630"><span class="id" title="binder">G</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Applicative0:631" class="idref" href="#Applicative0:631"><span class="id" title="binder">!</span></a> <a id="Applicative0:631" class="idref" href="#Applicative0:631"><span class="id" title="binder">Applicative</span></a> <a id="Applicative0:631" class="idref" href="#Applicative0:631"><span class="id" title="binder">G</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="B:632" class="idref" href="#B:632"><span class="id" title="binder">B</span></a> <a id="C:633" class="idref" href="#C:633"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<a id="A:634" class="idref" href="#A:634"><span class="id" title="binder">A</span></a> <a id="A':635" class="idref" href="#A':635"><span class="id" title="binder">A'</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:636" class="idref" href="#f:636"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:634"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:627"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':635"><span class="id" title="variable">A'</span></a>)<br/>
&nbsp;&nbsp;(<a id="k:637" class="idref" href="#k:637"><span class="id" title="binder">k</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:634"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:632"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:632"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:633"><span class="id" title="variable">C</span></a>)) (<a id="a:638" class="idref" href="#a:638"><span class="id" title="binder">a</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:634"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:636"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#k:637"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#3b648b186180eed8424100a8465639ae"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:638"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:627"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':635"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:632"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:633"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#G:627"><span class="id" title="variable">G</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:636"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#k:637"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:636"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:638"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#traverse_Batch_rw2"><span class="id" title="lemma">traverse_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trf_traverse_id_Batch" class="idref" href="#trf_traverse_id_Batch"><span class="id" title="lemma">trf_traverse_id_Batch</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="B:639" class="idref" href="#B:639"><span class="id" title="binder">B</span></a> <a id="C:640" class="idref" href="#C:640"><span class="id" title="binder">C</span></a> <a id="A:641" class="idref" href="#A:641"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>, <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:639"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:640"><span class="id" title="variable">C</span></a>) (<span class="id" title="var">G</span> := <span class="id" title="keyword">fun</span> <a id="X:642" class="idref" href="#X:642"><span class="id" title="binder">X</span></a> : <span class="id" title="keyword">Type</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#X:642"><span class="id" title="variable">X</span></a>) (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:641"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Traverse_Batch1"><span class="id" title="instance">Traverse_Batch1</span></a> <span class="id" title="var">B</span> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span>)) <span class="id" title="keyword">with</span> (@<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trf_traverse_traverse_Batch" class="idref" href="#trf_traverse_traverse_Batch"><span class="id" title="lemma">trf_traverse_traverse_Batch</span></a> (<a id="B:643" class="idref" href="#B:643"><span class="id" title="binder">B</span></a> <a id="C:644" class="idref" href="#C:644"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="H0:646" class="idref" href="#H0:646"><span class="id" title="binder">H0</span></a> : <a class="idref" href="Tealeaves.Classes.Functor.html#Map"><span class="id" title="class">Map</span></a> <a id="G1:645" class="idref" href="#G1:645"><span class="id" title="binder">G1</span></a>) (<a id="H1:647" class="idref" href="#H1:647"><span class="id" title="binder">H1</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Pure"><span class="id" title="class">Pure</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G1:645"><span class="id" title="variable">G1</span></a>) (<a id="H2:648" class="idref" href="#H2:648"><span class="id" title="binder">H2</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Mult"><span class="id" title="class">Mult</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G1:645"><span class="id" title="variable">G1</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Applicative"><span class="id" title="class">Applicative</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G1:645"><span class="id" title="variable">G1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="H4:650" class="idref" href="#H4:650"><span class="id" title="binder">H4</span></a> : <a class="idref" href="Tealeaves.Classes.Functor.html#Map"><span class="id" title="class">Map</span></a> <a id="G2:649" class="idref" href="#G2:649"><span class="id" title="binder">G2</span></a>) (<a id="H5:651" class="idref" href="#H5:651"><span class="id" title="binder">H5</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Pure"><span class="id" title="class">Pure</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G2:649"><span class="id" title="variable">G2</span></a>) (<a id="H6:652" class="idref" href="#H6:652"><span class="id" title="binder">H6</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Mult"><span class="id" title="class">Mult</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G2:649"><span class="id" title="variable">G2</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Applicative"><span class="id" title="class">Applicative</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G2:649"><span class="id" title="variable">G2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="A:653" class="idref" href="#A:653"><span class="id" title="binder">A</span></a> <a id="A':654" class="idref" href="#A':654"><span class="id" title="binder">A'</span></a> <a id="A'':655" class="idref" href="#A'':655"><span class="id" title="binder">A''</span></a> : <span class="id" title="keyword">Type</span>) (<a id="g:656" class="idref" href="#g:656"><span class="id" title="binder">g</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A':654"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G2:649"><span class="id" title="variable">G2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A'':655"><span class="id" title="variable">A''</span></a>) (<a id="f:657" class="idref" href="#f:657"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:653"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G1:645"><span class="id" title="variable">G1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':654"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G1:645"><span class="id" title="variable">G1</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:643"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:644"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#g:656"><span class="id" title="variable">g</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:643"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:644"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:657"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:643"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:644"><span class="id" title="variable">C</span></a>) (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#G1:645"><span class="id" title="variable">G1</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G2:649"><span class="id" title="variable">G2</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#g:656"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#1c88ff5532c3a847b1beb4908cee4f91"><span class="id" title="notation">⋆2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:657"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;RHS&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Traverse_Batch1"><span class="id" title="instance">Traverse_Batch1</span></a> <span class="id" title="var">B</span> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (@<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;cleanup&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_compose1"><span class="id" title="lemma">ap_compose1</span></a> <span class="id" title="var">G2</span> <span class="id" title="var">G1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_compose1"><span class="id" title="lemma">ap_compose1</span></a> <span class="id" title="var">G2</span> <span class="id" title="var">G1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&lt;&lt;unfold_ops&nbsp;Pure_compose&gt;&gt;&nbsp;prevents&nbsp;&lt;&lt;&nbsp;rewrite&nbsp;&lt;-&nbsp;IHrest&gt;&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <span class="id" title="tactic">at</span> 2; <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Pure_compose"><span class="id" title="instance">Pure_compose</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap2"><span class="id" title="lemma">ap2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;deal&nbsp;with&nbsp;&lt;&lt;rest&gt;&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">at</span> 4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#kc2"><span class="id" title="definition">kc2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">at</span> 4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;LHS&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (@<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trf_traverse_morphism_Batch" class="idref" href="#trf_traverse_morphism_Batch"><span class="id" title="lemma">trf_traverse_morphism_Batch</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="B:658" class="idref" href="#B:658"><span class="id" title="binder">B</span></a> <a id="C:659" class="idref" href="#C:659"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="G1:660" class="idref" href="#G1:660"><span class="id" title="binder">G1</span></a> <a id="G2:661" class="idref" href="#G2:661"><span class="id" title="binder">G2</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H5:669" class="idref" href="#H5:669"><span class="id" title="binder">ApplicativeMorphism</span></a> <a id="H5:669" class="idref" href="#H5:669"><span class="id" title="binder">G1</span></a> <a id="H5:669" class="idref" href="#H5:669"><span class="id" title="binder">G2</span></a> <a id="H5:669" class="idref" href="#H5:669"><span class="id" title="binder">ϕ</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="A:670" class="idref" href="#A:670"><span class="id" title="binder">A</span></a> <a id="A':671" class="idref" href="#A':671"><span class="id" title="binder">A'</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:672" class="idref" href="#f:672"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:670"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G1:660"><span class="id" title="variable">G1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':671"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#49348f1a672e8a3a4292701a5d95fa5d"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:658"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:659"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">A'</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:658"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:659"><span class="id" title="variable">C</span></a>) (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#G1:660"><span class="id" title="variable">G1</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:672"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:658"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:659"><span class="id" title="variable">C</span></a>) (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#G2:661"><span class="id" title="variable">G2</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#49348f1a672e8a3a4292701a5d95fa5d"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':671"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:672"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#appmor_pure"><span class="id" title="method">appmor_pure</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Traverse_Batch1"><span class="id" title="instance">Traverse_Batch1</span></a> <span class="id" title="var">B</span> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (@<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#appmor_pure"><span class="id" title="method">appmor_pure</span></a> (<span class="id" title="var">F</span> := <span class="id" title="var">G1</span>) (<span class="id" title="var">G</span> := <span class="id" title="var">G2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_morphism_1"><span class="id" title="lemma">ap_morphism_1</span></a> (<span class="id" title="var">ϕ</span> := <span class="id" title="var">ϕ</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_morphism_1"><span class="id" title="lemma">ap_morphism_1</span></a> (<span class="id" title="var">ϕ</span> := <span class="id" title="var">ϕ</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="TraversableFunctor_Batch" class="idref" href="#TraversableFunctor_Batch"><span class="id" title="instance">TraversableFunctor_Batch</span></a> : <span class="id" title="keyword">∀</span> (<a id="B:673" class="idref" href="#B:673"><span class="id" title="binder">B</span></a> <a id="C:674" class="idref" href="#C:674"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#TraversableFunctor"><span class="id" title="class">TraversableFunctor</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:673"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:674"><span class="id" title="variable">C</span></a>) := <span class="id" title="keyword">fun</span> <a id="B:675" class="idref" href="#B:675"><span class="id" title="binder">B</span></a> <a id="C:676" class="idref" href="#C:676"><span class="id" title="binder">C</span></a> ⇒<br/>
&nbsp;&nbsp;{| <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#trf_traverse_id"><span class="id" title="method">trf_traverse_id</span></a> := <a class="idref" href="Tealeaves.Functors.Batch.html#trf_traverse_id_Batch"><span class="id" title="lemma">trf_traverse_id_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:675"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:676"><span class="id" title="variable">C</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#trf_traverse_traverse"><span class="id" title="method">trf_traverse_traverse</span></a> := @<a class="idref" href="Tealeaves.Functors.Batch.html#trf_traverse_traverse_Batch"><span class="id" title="lemma">trf_traverse_traverse_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:675"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:676"><span class="id" title="variable">C</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#trf_traverse_morphism"><span class="id" title="method">trf_traverse_morphism</span></a> := @<a class="idref" href="Tealeaves.Functors.Batch.html#trf_traverse_morphism_Batch"><span class="id" title="lemma">trf_traverse_morphism_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:675"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:676"><span class="id" title="variable">C</span></a>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_compat_traverse_Batch1" class="idref" href="#map_compat_traverse_Batch1"><span class="id" title="lemma">map_compat_traverse_Batch1</span></a> : <span class="id" title="keyword">∀</span> (<a id="B:677" class="idref" href="#B:677"><span class="id" title="binder">B</span></a> <a id="C:678" class="idref" href="#C:678"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:677"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:678"><span class="id" title="variable">C</span></a>) <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:677"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:678"><span class="id" title="variable">C</span></a>) <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="A:679" class="idref" href="#A:679"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#A:679"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Functors.Identity.html#Map_I"><span class="id" title="instance">Map_I</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Pure_I"><span class="id" title="instance">Pure_I</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Mult_I"><span class="id" title="instance">Mult_I</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">A</span> <span class="id" title="var">A'</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Traverse_Batch1"><span class="id" title="instance">Traverse_Batch1</span></a> <span class="id" title="var">B</span> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span>: <span class="id" title="keyword">∀</span> <a id="B:680" class="idref" href="#B:680"><span class="id" title="binder">B</span></a> <a id="C:681" class="idref" href="#C:681"><span class="id" title="binder">C</span></a>, @<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#Compat_Map_Traverse"><span class="id" title="class">Compat_Map_Traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:680"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:681"><span class="id" title="variable">C</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#map_compat_traverse_Batch1"><span class="id" title="lemma">map_compat_traverse_Batch1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab591"></a><h2 class="section">Specification for <code>runBatch</code></h2>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="runBatch_spec" class="idref" href="#runBatch_spec"><span class="id" title="lemma">runBatch_spec</span></a> {<a id="A:682" class="idref" href="#A:682"><span class="id" title="binder">A</span></a> <a id="B:683" class="idref" href="#B:683"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="F:684" class="idref" href="#F:684"><span class="id" title="binder">F</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} `{<a id="H:685" class="idref" href="#H:685"><span class="id" title="binder">Map</span></a> <a id="H:685" class="idref" href="#H:685"><span class="id" title="binder">F</span></a>} `{<a id="H0:686" class="idref" href="#H0:686"><span class="id" title="binder">Mult</span></a> <a id="H0:686" class="idref" href="#H0:686"><span class="id" title="binder">F</span></a>} `{<a id="H1:687" class="idref" href="#H1:687"><span class="id" title="binder">Pure</span></a> <a id="H1:687" class="idref" href="#H1:687"><span class="id" title="binder">F</span></a>} `{<a id="Applicative0:688" class="idref" href="#Applicative0:688"><span class="id" title="binder">!</span></a> <a id="Applicative0:688" class="idref" href="#Applicative0:688"><span class="id" title="binder">Applicative</span></a> <a id="Applicative0:688" class="idref" href="#Applicative0:688"><span class="id" title="binder">F</span></a>}<br/>
&nbsp;&nbsp;(<a id="9ea0d37b2b37f2ce4edf8b40a83d8795" class="idref" href="#9ea0d37b2b37f2ce4edf8b40a83d8795"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:682"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:684"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:683"><span class="id" title="variable">B</span></a>) (<a id="C:690" class="idref" href="#C:690"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:684"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#9ea0d37b2b37f2ce4edf8b40a83d8795"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:690"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:684"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#F:684"><span class="id" title="variable">F</span></a>) (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:683"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:690"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#9ea0d37b2b37f2ce4edf8b40a83d8795"><span class="id" title="variable">ϕ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (@<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span><a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*<br/>
Instance:&nbsp;forall&nbsp;B,&nbsp;Pure&nbsp;(BATCH1&nbsp;B&nbsp;B).<br/>
Proof.<br/>
&nbsp;&nbsp;unfold&nbsp;Pure.<br/>
&nbsp;&nbsp;intros&nbsp;B&nbsp;A.<br/>
&nbsp;&nbsp;apply&nbsp;batch.<br/>
Defined.<br/>
<br/>
Instance:&nbsp;forall&nbsp;B,&nbsp;Mult&nbsp;(BATCH1&nbsp;B&nbsp;B).<br/>
Proof.<br/>
&nbsp;&nbsp;unfold&nbsp;Mult.<br/>
&nbsp;&nbsp;intros&nbsp;B&nbsp;A&nbsp;A'.<br/>
&nbsp;&nbsp;apply&nbsp;batch.<br/>
Defined.<br/>
<br/>
Arguments&nbsp;extract_Batch&nbsp;(A&nbsp;B)function_scope&nbsp;{Traverse}&nbsp;(G)type_scope&nbsp;_*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab592"></a><h2 class="section">Specification for <code>traverse</code></h2>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="traverse_spec" class="idref" href="#traverse_spec"><span class="id" title="lemma">traverse_spec</span></a><br/>
&nbsp;&nbsp;(<a id="F:691" class="idref" href="#F:691"><span class="id" title="binder">F</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) `{<a id="H:692" class="idref" href="#H:692"><span class="id" title="binder">Map</span></a> <a id="H:692" class="idref" href="#H:692"><span class="id" title="binder">F</span></a>} `{<a id="H0:693" class="idref" href="#H0:693"><span class="id" title="binder">Mult</span></a> <a id="H0:693" class="idref" href="#H0:693"><span class="id" title="binder">F</span></a>} `{<a id="H1:694" class="idref" href="#H1:694"><span class="id" title="binder">Pure</span></a> <a id="H1:694" class="idref" href="#H1:694"><span class="id" title="binder">F</span></a>} `{<a id="Applicative0:695" class="idref" href="#Applicative0:695"><span class="id" title="binder">!</span></a> <a id="Applicative0:695" class="idref" href="#Applicative0:695"><span class="id" title="binder">Applicative</span></a> <a id="Applicative0:695" class="idref" href="#Applicative0:695"><span class="id" title="binder">F</span></a>}<br/>
&nbsp;&nbsp;`(<a id="46d12b25ffbfeefe716ae37cf0ef54b2" class="idref" href="#46d12b25ffbfeefe716ae37cf0ef54b2"><span class="id" title="binder">ϕ</span></a> : <a id="A:696" class="idref" href="#A:696"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:691"><span class="id" title="variable">F</span></a> <a id="A':697" class="idref" href="#A':697"><span class="id" title="binder">A'</span></a>) (<a id="B:699" class="idref" href="#B:699"><span class="id" title="binder">B</span></a> <a id="C:700" class="idref" href="#C:700"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:699"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:700"><span class="id" title="variable">C</span></a>) (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#F:691"><span class="id" title="variable">F</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#46d12b25ffbfeefe716ae37cf0ef54b2"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#F:691"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':697"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:699"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#F:691"><span class="id" title="variable">F</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':697"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:699"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#46d12b25ffbfeefe716ae37cf0ef54b2"><span class="id" title="variable">ϕ</span></a>) (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A:696"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#B:699"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#C:700"><span class="id" title="variable">C</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_rw1"><span class="id" title="lemma">runBatch_rw1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#traverse_Batch_rw1"><span class="id" title="lemma">traverse_Batch_rw1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_rw2"><span class="id" title="lemma">runBatch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#traverse_Batch_rw2'"><span class="id" title="lemma">traverse_Batch_rw2'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">at</span> 6.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_compose2"><span class="id" title="lemma">ap_compose2</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>) <span class="id" title="var">F</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">F</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>) (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">F</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch"><span class="id" title="definition">batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <span class="id" title="var">ϕ</span>) (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span>) <span class="id" title="var">rest</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <span class="id" title="var">F</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a>, <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap"><span class="id" title="definition">ap</span></a>, <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">b</span> <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">b</span> <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (?<span class="id" title="var">f</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#fa652b8c8091f60ed5a3b127754ad981"><span class="id" title="notation">○</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <span class="id" title="keyword">with</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_id"><span class="id" title="method">fun_map_id</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab593"></a><h1 class="section"><code>Batch _ B C</code> is a traversable monad</h1>

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="bindt_Batch" class="idref" href="#bindt_Batch"><span class="id" title="definition">bindt_Batch</span></a> (<a id="B:701" class="idref" href="#B:701"><span class="id" title="binder">B</span></a> <a id="C:702" class="idref" href="#C:702"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="G:703" class="idref" href="#G:703"><span class="id" title="binder">G</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;`{<a id="H:704" class="idref" href="#H:704"><span class="id" title="binder">Map</span></a> <a id="H:704" class="idref" href="#H:704"><span class="id" title="binder">G</span></a>} `{<a id="H0:705" class="idref" href="#H0:705"><span class="id" title="binder">Pure</span></a> <a id="H0:705" class="idref" href="#H0:705"><span class="id" title="binder">G</span></a>} `{<a id="H1:706" class="idref" href="#H1:706"><span class="id" title="binder">Mult</span></a> <a id="H1:706" class="idref" href="#H1:706"><span class="id" title="binder">G</span></a>} (<a id="A:707" class="idref" href="#A:707"><span class="id" title="binder">A</span></a> <a id="A':708" class="idref" href="#A':708"><span class="id" title="binder">A'</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:709" class="idref" href="#f:709"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A:707"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:703"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':708"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:701"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:701"><span class="id" title="variable">B</span></a>))<br/>
&nbsp;&nbsp;(<a id="b:710" class="idref" href="#b:710"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:707"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:701"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:701"><span class="id" title="variable">B</span></a>) : <a class="idref" href="Tealeaves.Functors.Batch.html#G:703"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':708"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:701"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:701"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:703"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:701"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:701"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:709"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:710"><span class="id" title="variable">b</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab594"></a><h1 class="section">Notations</h1>

</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a id="Notations" class="idref" href="#Notations"><span class="id" title="module">Notations</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="45a660fcade13f7b83ca57ede582a0d1" class="idref" href="#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">&quot;</span></a>⧆" := (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 51, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">tealeaves_scope</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Notations"><span class="id" title="module">Notations</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
