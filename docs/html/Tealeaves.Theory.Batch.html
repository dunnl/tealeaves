<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Tealeaves.Theory.Batch</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#"><span class="id" title="library">Functors.Batch</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#"><span class="id" title="library">Functors.VectorRefinement</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Backwards.html#"><span class="id" title="library">Functors.Backwards</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Notations"><span class="id" title="module">Batch.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Notations"><span class="id" title="module">Applicative.Notations</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">Variables</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab713"></a><h1 class="section">Deconstructing <code>Batch A B C</code> via <code>Vector</code></h1>

</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a id="Deconstruction1" class="idref" href="#Deconstruction1"><span class="id" title="module">Deconstruction1</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Deconstruction1.deconstruction" class="idref" href="#Deconstruction1.deconstruction"><span class="id" title="section">deconstruction</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Deconstruction1.Batch_to_contents" class="idref" href="#Deconstruction1.Batch_to_contents"><span class="id" title="definition">Batch_to_contents</span></a> {<a id="A:1" class="idref" href="#A:1"><span class="id" title="binder">A</span></a> <a id="B:2" class="idref" href="#B:2"><span class="id" title="binder">B</span></a> <a id="C:3" class="idref" href="#C:3"><span class="id" title="binder">C</span></a>} (<a id="b:4" class="idref" href="#b:4"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:2"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:3"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:1"><span class="id" title="variable">A</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:4"><span class="id" title="variable">b</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Theory.Batch.html#b:4"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">return</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:1"><span class="id" title="variable">A</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:6"><span class="id" title="variable">b</span></a>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">Vector.nil</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:1"><span class="id" title="variable">A</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">Vector.cons</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:1"><span class="id" title="variable">A</span></a> <span class="id" title="var">a</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="var">rest</span>) (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_contents:5"><span class="id" title="definition">Batch_to_contents</span></a> <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Deconstruction1.Batch_to_makeFn" class="idref" href="#Deconstruction1.Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> {<a id="A:7" class="idref" href="#A:7"><span class="id" title="binder">A</span></a> <a id="B:8" class="idref" href="#B:8"><span class="id" title="binder">B</span></a> <a id="C:9" class="idref" href="#C:9"><span class="id" title="binder">C</span></a>} (<a id="b:10" class="idref" href="#b:10"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:7"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:8"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:9"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:8"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:10"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:9"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Theory.Batch.html#b:10"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">return</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:8"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:12"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:9"><span class="id" title="variable">C</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="v:13" class="idref" href="#v:13"><span class="id" title="binder">v</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:8"><span class="id" title="variable">B</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="var">rest</span>))) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#uncons"><span class="id" title="definition">Vector.uncons</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:13"><span class="id" title="variable">v</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v_rest</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn:11"><span class="id" title="definition">Batch_to_makeFn</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">v_rest</span> <a class="idref" href="Tealeaves.Theory.Batch.html#b:10"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Deconstruction1.Batch_to_contents_rw2" class="idref" href="#Deconstruction1.Batch_to_contents_rw2"><span class="id" title="lemma">Batch_to_contents_rw2</span></a>: <span class="id" title="keyword">∀</span> {<a id="A:14" class="idref" href="#A:14"><span class="id" title="binder">A</span></a> <a id="B:15" class="idref" href="#B:15"><span class="id" title="binder">B</span></a> <a id="C:16" class="idref" href="#C:16"><span class="id" title="binder">C</span></a>} (<a id="b:17" class="idref" href="#b:17"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:14"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:15"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#B:15"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:16"><span class="id" title="variable">C</span></a>)) (<a id="a:18" class="idref" href="#a:18"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#A:14"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Deconstruction1.Batch_to_contents"><span class="id" title="definition">Batch_to_contents</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#b:17"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a:18"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">Vector.cons</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:14"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a:18"><span class="id" title="variable">a</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:17"><span class="id" title="variable">b</span></a>) (<a class="idref" href="Tealeaves.Theory.Batch.html#Deconstruction1.Batch_to_contents"><span class="id" title="definition">Batch_to_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:17"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Deconstruction1.Batch_to_makeFn_rw2" class="idref" href="#Deconstruction1.Batch_to_makeFn_rw2"><span class="id" title="lemma">Batch_to_makeFn_rw2</span></a>: <span class="id" title="keyword">∀</span> {<a id="A:19" class="idref" href="#A:19"><span class="id" title="binder">A</span></a> <a id="B:20" class="idref" href="#B:20"><span class="id" title="binder">B</span></a> <a id="C:21" class="idref" href="#C:21"><span class="id" title="binder">C</span></a>} (<a id="a:22" class="idref" href="#a:22"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#A:19"><span class="id" title="variable">A</span></a>) (<a id="b:23" class="idref" href="#b:23"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:19"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:20"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#B:20"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:21"><span class="id" title="variable">C</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Deconstruction1.Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#b:23"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a:22"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="v:24" class="idref" href="#v:24"><span class="id" title="binder">v</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:20"><span class="id" title="variable">B</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:23"><span class="id" title="variable">b</span></a>))) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Vectors.Vector.html#uncons"><span class="id" title="definition">Vector.uncons</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:24"><span class="id" title="variable">v</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">b'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.Batch.html#Deconstruction1.Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:23"><span class="id" title="variable">b</span></a> <span class="id" title="var">v'</span> <span class="id" title="var">b'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Deconstruction1.Batch_repr" class="idref" href="#Deconstruction1.Batch_repr"><span class="id" title="lemma">Batch_repr</span></a> {<a id="A:25" class="idref" href="#A:25"><span class="id" title="binder">A</span></a> <a id="C:26" class="idref" href="#C:26"><span class="id" title="binder">C</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:27" class="idref" href="#b:27"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:25"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:25"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:26"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Deconstruction1.Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:27"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Deconstruction1.Batch_to_contents"><span class="id" title="definition">Batch_to_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:27"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:27"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Lemma&nbsp;runBatch_repr&nbsp;`{Applicative&nbsp;G}&nbsp;{A&nbsp;B&nbsp;C}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;forall&nbsp;(f:&nbsp;A&nbsp;-&gt;&nbsp;G&nbsp;B)&nbsp;(b:&nbsp;Batch&nbsp;A&nbsp;B&nbsp;C),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;runBatch&nbsp;G&nbsp;f&nbsp;C&nbsp;b&nbsp;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pure&nbsp;(F&nbsp;:=&nbsp;G)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Batch_to_makeFn&nbsp;b)&nbsp;&lt;⋆&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;traverse&nbsp;(T&nbsp;:=&nbsp;VEC&nbsp;(length_Batch&nbsp;b))&nbsp;f&nbsp;(Batch_to_contents&nbsp;b).<br/>
&nbsp;&nbsp;Proof.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;induction&nbsp;b.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;cbn.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;ap2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;rewrite&nbsp;runBatch_rw2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Batch_to_contents_rw2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Batch_to_makeFn_rw2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbn.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;&lt;-&nbsp;ap4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;ap2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;&lt;-&nbsp;ap4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;ap2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;ap2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;IHb.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;Qed.<br/>
&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Deconstruction1.deconstruction"><span class="id" title="section">deconstruction</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Deconstruction1"><span class="id" title="module">Deconstruction1</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab714"></a><h1 class="section">Deconstructing <code>Batch A B C</code> into shape and contents via</h1>

    refinement-style <code>Vector</code> 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="deconstruction" class="idref" href="#deconstruction"><span class="id" title="section">deconstruction</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Generalizable Variables</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span> <span class="id" title="var">a</span>.<br/>

<br/>
</div>

<div class="doc">
Extract the contents of <code>Batch</code> as a vector 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Batch_contents" class="idref" href="#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> `(<a id="b:31" class="idref" href="#b:31"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:28" class="idref" href="#A:28"><span class="id" title="binder">A</span></a> <a id="B:29" class="idref" href="#B:29"><span class="id" title="binder">B</span></a> <a id="C:30" class="idref" href="#C:30"><span class="id" title="binder">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:31"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#A:28"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Theory.Batch.html#b:31"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vnil"><span class="id" title="definition">vnil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">b</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons"><span class="id" title="definition">vcons</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:31"><span class="id" title="variable">b</span></a>) <span class="id" title="var">a</span> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents:32"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:31"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Obtain the build function of <code>Batch</code>. Note that
 <code>Batch_make b v</code> in general has type <code>C</code>, not another <code>Batch</code>.
 That is, this is not <code>make</code> in the sense of <code>put</code> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Batch_make" class="idref" href="#Batch_make"><span class="id" title="definition">Batch_make</span></a> `(<a id="b:37" class="idref" href="#b:37"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:34" class="idref" href="#A:34"><span class="id" title="binder">A</span></a> <a id="B:35" class="idref" href="#B:35"><span class="id" title="binder">B</span></a> <a id="C:36" class="idref" href="#C:36"><span class="id" title="binder">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:37"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:35"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:36"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Theory.Batch.html#b:37"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">return</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:39"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:35"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:36"><span class="id" title="variable">C</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒ <span class="id" title="keyword">fun</span> <a id="v:40" class="idref" href="#v:40"><span class="id" title="binder">v</span></a> ⇒ <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">b</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="keyword">fun</span> <a id="v:41" class="idref" href="#v:41"><span class="id" title="binder">v</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make:38"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:37"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:41"><span class="id" title="variable">v</span></a>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:41"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
This is <code>make</code> in the sense of <code>put</code>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Batch_replace_contents" class="idref" href="#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:45" class="idref" href="#b:45"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:42" class="idref" href="#A:42"><span class="id" title="binder">A</span></a> <a id="B:43" class="idref" href="#B:43"><span class="id" title="binder">B</span></a> <a id="C:44" class="idref" href="#C:44"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="v:47" class="idref" href="#v:47"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:45"><span class="id" title="variable">b</span></a>) <a id="A':46" class="idref" href="#A':46"><span class="id" title="binder">A'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A':46"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:43"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:44"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Theory.Batch.html#b:45"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">return</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:49"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#A':46"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A':46"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:43"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:44"><span class="id" title="variable">C</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="v:50" class="idref" href="#v:50"><span class="id" title="binder">v</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="v:51" class="idref" href="#v:51"><span class="id" title="binder">v</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents:48"><span class="id" title="definition">Batch_replace_contents</span></a> <span class="id" title="var">rest</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:51"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:51"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tealeaves.Theory.Batch.html#v:47"><span class="id" title="variable">v</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab715"></a><h2 class="section">Rewriting rules</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.rw" class="idref" href="#deconstruction.rw"><span class="id" title="section">rw</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:52" class="idref" href="#A:52"><span class="id" title="binder">A</span></a> <a id="B:53" class="idref" href="#B:53"><span class="id" title="binder">B</span></a> <a id="C:54" class="idref" href="#C:54"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">a</span>: <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">b</span>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a>)) (<span class="id" title="var">c</span>: <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_rw1" class="idref" href="#Batch_contents_rw1"><span class="id" title="lemma">Batch_contents_rw1</span></a> {<a id="c:55" class="idref" href="#c:55"><span class="id" title="binder">c</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:55"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vnil"><span class="id" title="definition">vnil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_rw2" class="idref" href="#Batch_contents_rw2"><span class="id" title="lemma">Batch_contents_rw2</span></a> {<a id="b:56" class="idref" href="#b:56"><span class="id" title="binder">b</span></a> <a id="a:57" class="idref" href="#a:57"><span class="id" title="binder">a</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:56"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a:57"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons"><span class="id" title="definition">vcons</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:56"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#a:57"><span class="id" title="variable">a</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:56"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_rw1" class="idref" href="#Batch_make_rw1"><span class="id" title="lemma">Batch_make_rw1</span></a> {<a id="c:58" class="idref" href="#c:58"><span class="id" title="binder">c</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:58"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:58"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_rw2" class="idref" href="#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a> {<a id="b:59" class="idref" href="#b:59"><span class="id" title="binder">b</span></a> <a id="a:60" class="idref" href="#a:60"><span class="id" title="binder">a</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:59"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a:60"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="v:61" class="idref" href="#v:61"><span class="id" title="binder">v</span></a> ⇒ <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:59"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:61"><span class="id" title="variable">v</span></a>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:61"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_rw1" class="idref" href="#Batch_replace_rw1"><span class="id" title="lemma">Batch_replace_rw1</span></a> {<a id="c:62" class="idref" href="#c:62"><span class="id" title="binder">c</span></a>} `{<a id="v:64" class="idref" href="#v:64"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="A':63" class="idref" href="#A':63"><span class="id" title="binder">A'</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:62"><span class="id" title="variable">c</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#v:64"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:62"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_rw2" class="idref" href="#Batch_replace_rw2"><span class="id" title="lemma">Batch_replace_rw2</span></a> {<a id="b:65" class="idref" href="#b:65"><span class="id" title="binder">b</span></a> <a id="a:66" class="idref" href="#a:66"><span class="id" title="binder">a</span></a>} `{<a id="v:68" class="idref" href="#v:68"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="A':67" class="idref" href="#A':67"><span class="id" title="binder">A'</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:65"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a:66"><span class="id" title="variable">a</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#v:68"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:65"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:68"><span class="id" title="variable">v</span></a>)) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:68"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.rw"><span class="id" title="section">rw</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab716"></a><h2 class="section">Lemmas regarding <code>shape</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.shape_lemmas" class="idref" href="#deconstruction.shape_lemmas"><span class="id" title="section">shape_lemmas</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.shape_lemmas.shape_induction" class="idref" href="#deconstruction.shape_lemmas.shape_induction"><span class="id" title="section">shape_induction</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A1:69" class="idref" href="#A1:69"><span class="id" title="binder">A1</span></a> <a id="A2:70" class="idref" href="#A2:70"><span class="id" title="binder">A2</span></a> <a id="B:71" class="idref" href="#B:71"><span class="id" title="binder">B</span></a> <a id="C:72" class="idref" href="#C:72"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="b1:73" class="idref" href="#b1:73"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A1:69"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:71"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:72"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="b2:74" class="idref" href="#b2:74"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A2:70"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:71"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:72"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hshape:75" class="idref" href="#Hshape:75"><span class="id" title="binder">Hshape</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:73"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:74"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:77" class="idref" href="#P:77"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">∀</span> <a id="C:76" class="idref" href="#C:76"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A1:69"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:71"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:76"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A2:70"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:71"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:76"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHdone:80" class="idref" href="#IHdone:80"><span class="id" title="binder">IHdone</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="C:78" class="idref" href="#C:78"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="c:79" class="idref" href="#c:79"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Theory.Batch.html#C:78"><span class="id" title="variable">C</span></a>), <a class="idref" href="Tealeaves.Theory.Batch.html#P:77"><span class="id" title="variable">P</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:78"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:79"><span class="id" title="variable">c</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:79"><span class="id" title="variable">c</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHstep:87" class="idref" href="#IHstep:87"><span class="id" title="binder">IHstep</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="C:81" class="idref" href="#C:81"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b1:82" class="idref" href="#b1:82"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A1:69"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:71"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#B:71"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:81"><span class="id" title="variable">C</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b2:83" class="idref" href="#b2:83"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A2:70"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:71"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#B:71"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:81"><span class="id" title="variable">C</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#P:77"><span class="id" title="variable">P</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#B:71"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:81"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#b1:82"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:83"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a1:84" class="idref" href="#a1:84"><span class="id" title="binder">a1</span></a> : <a class="idref" href="Tealeaves.Theory.Batch.html#A1:69"><span class="id" title="variable">A1</span></a>) (<a id="a2:85" class="idref" href="#a2:85"><span class="id" title="binder">a2</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#A2:70"><span class="id" title="variable">A2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hshape:86" class="idref" href="#Hshape:86"><span class="id" title="binder">Hshape</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:82"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a1:84"><span class="id" title="variable">a1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:83"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a2:85"><span class="id" title="variable">a2</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#P:77"><span class="id" title="variable">P</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:81"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:82"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a1:84"><span class="id" title="variable">a1</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:83"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a2:85"><span class="id" title="variable">a2</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_shape_ind" class="idref" href="#Batch_shape_ind"><span class="id" title="lemma">Batch_shape_ind</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction.P"><span class="id" title="variable">P</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction.C"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction.b1"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction.b2"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction.b1"><span class="id" title="variable">b1</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction.b2"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction.b2"><span class="id" title="variable">b2</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">c'</span> | <span class="id" title="var">rest'</span> <span class="id" title="var">a'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction.IHstep"><span class="id" title="variable">IHstep</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction.Hshape"><span class="id" title="variable">Hshape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas.shape_induction"><span class="id" title="section">shape_induction</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_Batch_shape" class="idref" href="#length_Batch_shape"><span class="id" title="lemma">length_Batch_shape</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:91" class="idref" href="#b1:91"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:88" class="idref" href="#A1:88"><span class="id" title="binder">A1</span></a> <a id="B:89" class="idref" href="#B:89"><span class="id" title="binder">B</span></a> <a id="C:90" class="idref" href="#C:90"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:93" class="idref" href="#b2:93"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:92" class="idref" href="#A2:92"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:89"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:90"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:91"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:93"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:91"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:93"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_shape" class="idref" href="#Batch_make_shape"><span class="id" title="lemma">Batch_make_shape</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:97" class="idref" href="#b1:97"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:94" class="idref" href="#A1:94"><span class="id" title="binder">A1</span></a> <a id="B:95" class="idref" href="#B:95"><span class="id" title="binder">B</span></a> <a id="C:96" class="idref" href="#C:96"><span class="id" title="binder">C</span></a>) `(<a id="b2:99" class="idref" href="#b2:99"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:98" class="idref" href="#A2:98"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:95"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:96"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:97"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:99"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:97"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#7ad275f9c7d3d9469cfa6fc77617779f"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:99"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_shape_ind"><span class="id" title="lemma">Batch_shape_ind</span></a> <span class="id" title="var">Hshape</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hsim</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Theory.Batch.html#length_Batch_shape"><span class="id" title="lemma">length_Batch_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">introv</span> <span class="id" title="var">Hsim'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">cut</span>: <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <span class="id" title="var">b1</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v1</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <span class="id" title="var">b2</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="tactic">cut</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim_eq"><span class="id" title="lemma">Vector_fun_sim_eq</span></a>, <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;is&nbsp;true,&nbsp;but&nbsp;to&nbsp;prove&nbsp;it&nbsp;we&nbsp;need&nbsp;more&nbsp;lemmas&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_shape_rev" class="idref" href="#Batch_make_shape_rev"><span class="id" title="lemma">Batch_make_shape_rev</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:103" class="idref" href="#b1:103"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:100" class="idref" href="#A1:100"><span class="id" title="binder">A1</span></a> <a id="B:101" class="idref" href="#B:101"><span class="id" title="binder">B</span></a> <a id="C:102" class="idref" href="#C:102"><span class="id" title="binder">C</span></a>) `(<a id="b2:105" class="idref" href="#b2:105"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:104" class="idref" href="#A2:104"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:101"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:102"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:103"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#7ad275f9c7d3d9469cfa6fc77617779f"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:105"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:103"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:105"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Abort</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_shape" class="idref" href="#Batch_replace_shape"><span class="id" title="lemma">Batch_replace_shape</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:109" class="idref" href="#b1:109"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:106" class="idref" href="#A1:106"><span class="id" title="binder">A1</span></a> <a id="B:107" class="idref" href="#B:107"><span class="id" title="binder">B</span></a> <a id="C:108" class="idref" href="#C:108"><span class="id" title="binder">C</span></a>) `(<a id="b2:111" class="idref" href="#b2:111"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:110" class="idref" href="#A2:110"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:107"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:108"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:109"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:111"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="A':112" class="idref" href="#A':112"><span class="id" title="binder">A'</span></a>: <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.Batch.html#A':112"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#b1:109"><span class="id" title="variable">b1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#7ad275f9c7d3d9469cfa6fc77617779f"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.Batch.html#A':112"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#b2:111"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_shape_ind"><span class="id" title="lemma">Batch_shape_ind</span></a> <span class="id" title="var">Hshape</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Theory.Batch.html#length_Batch_shape"><span class="id" title="lemma">length_Batch_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">introv</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_rw2"><span class="id" title="lemma">Batch_replace_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_shape_spec" class="idref" href="#Batch_shape_spec"><span class="id" title="lemma">Batch_shape_spec</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b:116" class="idref" href="#b:116"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:113" class="idref" href="#A:113"><span class="id" title="binder">A</span></a> <a id="B:114" class="idref" href="#B:114"><span class="id" title="binder">B</span></a> <a id="C:115" class="idref" href="#C:115"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:116"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:116"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tt"><span class="id" title="definition">Vector_tt</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:116"><span class="id" title="variable">b</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.shape_lemmas"><span class="id" title="section">shape_lemmas</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab717"></a><h2 class="section">Lemmas regarding <code>Batch_make</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.Batch_make" class="idref" href="#deconstruction.Batch_make"><span class="id" title="section">Batch_make</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_sim1" class="idref" href="#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:120" class="idref" href="#b:120"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:117" class="idref" href="#A:117"><span class="id" title="binder">A</span></a> <a id="B:118" class="idref" href="#B:118"><span class="id" title="binder">B</span></a> <a id="C:119" class="idref" href="#C:119"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:121" class="idref" href="#v1:121"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:120"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:118"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:122" class="idref" href="#v2:122"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:120"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:118"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:123" class="idref" href="#Hsim:123"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#v1:121"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:122"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:120"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:121"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:120"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:122"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a> <span class="id" title="var">Hsim</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;sort&nbsp;of&nbsp;lemma&nbsp;is&nbsp;very&nbsp;useful&nbsp;when&nbsp;the&nbsp;complexity&nbsp;of&nbsp;expression<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;v1&gt;&gt;&nbsp;and&nbsp;&lt;&lt;v2&gt;&gt;&nbsp;obstructs&nbsp;tactics&nbsp;like&nbsp;&lt;&lt;rewrite&gt;&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_sim2" class="idref" href="#Batch_make_sim2"><span class="id" title="lemma">Batch_make_sim2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:127" class="idref" href="#b1:127"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:124" class="idref" href="#A:124"><span class="id" title="binder">A</span></a> <a id="B:125" class="idref" href="#B:125"><span class="id" title="binder">B</span></a> <a id="C:126" class="idref" href="#C:126"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:128" class="idref" href="#b2:128"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:124"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:125"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:126"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:129" class="idref" href="#v1:129"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:127"><span class="id" title="variable">b1</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:125"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:130" class="idref" href="#v2:130"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:128"><span class="id" title="variable">b2</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:125"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:131" class="idref" href="#Heq:131"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#b1:127"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:128"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:132" class="idref" href="#Hsim:132"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#v1:129"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:130"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:127"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:129"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:128"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:130"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_sim3" class="idref" href="#Batch_make_sim3"><span class="id" title="lemma">Batch_make_sim3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:136" class="idref" href="#b1:136"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:133" class="idref" href="#A1:133"><span class="id" title="binder">A1</span></a> <a id="B:134" class="idref" href="#B:134"><span class="id" title="binder">B</span></a> <a id="C:135" class="idref" href="#C:135"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:138" class="idref" href="#b2:138"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:137" class="idref" href="#A2:137"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:134"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:135"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:139" class="idref" href="#v1:139"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:136"><span class="id" title="variable">b1</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:134"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:140" class="idref" href="#v2:140"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:138"><span class="id" title="variable">b2</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:134"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:141" class="idref" href="#Heq:141"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:136"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:138"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:142" class="idref" href="#Hsim:142"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#v1:139"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:140"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:136"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:139"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:138"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:140"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim_eq"><span class="id" title="lemma">Vector_fun_sim_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_shape"><span class="id" title="lemma">Batch_make_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_coerce" class="idref" href="#Batch_make_coerce"><span class="id" title="lemma">Batch_make_coerce</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:146" class="idref" href="#b:146"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:143" class="idref" href="#A:143"><span class="id" title="binder">A</span></a> <a id="B:144" class="idref" href="#B:144"><span class="id" title="binder">B</span></a> <a id="C:145" class="idref" href="#C:145"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:147" class="idref" href="#v1:147"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:146"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:144"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:149" class="idref" href="#v2:149"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <a id="n:148" class="idref" href="#n:148"><span class="id" title="binder">n</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:144"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:150" class="idref" href="#Heq:150"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#n:148"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:146"><span class="id" title="variable">b</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#v1:147"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:149"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:146"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:147"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:146"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Heq:150"><span class="id" title="variable">Heq</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:149"><span class="id" title="variable">v2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_eq_refl"><span class="id" title="lemma">coerce_Vector_eq_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Rewrite the <code>Batch</code> argument to an equal one by
      coercing the length proof in the vector. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_rw" class="idref" href="#Batch_make_rw"><span class="id" title="lemma">Batch_make_rw</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:154" class="idref" href="#b1:154"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:151" class="idref" href="#A:151"><span class="id" title="binder">A</span></a> <a id="B:152" class="idref" href="#B:152"><span class="id" title="binder">B</span></a> <a id="C:153" class="idref" href="#C:153"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:155" class="idref" href="#b2:155"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:151"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:152"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:153"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v:156" class="idref" href="#v:156"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:154"><span class="id" title="variable">b1</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:152"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:157" class="idref" href="#Heq:157"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#b1:154"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:155"><span class="id" title="variable">b2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:154"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:156"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:155"><span class="id" title="variable">b2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#7734d17eb5f06d3843f509946ed5ba45"><span class="id" title="notation">rew</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#7734d17eb5f06d3843f509946ed5ba45"><span class="id" title="notation">[</span></a><span class="id" title="keyword">fun</span> <a id="b:158" class="idref" href="#b:158"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:158"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:152"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#7734d17eb5f06d3843f509946ed5ba45"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Heq:157"><span class="id" title="variable">Heq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#7734d17eb5f06d3843f509946ed5ba45"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:156"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_compose" class="idref" href="#Batch_make_compose"><span class="id" title="lemma">Batch_make_compose</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:162" class="idref" href="#b:162"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:159" class="idref" href="#A:159"><span class="id" title="binder">A</span></a> <a id="B:160" class="idref" href="#B:160"><span class="id" title="binder">B</span></a> <a id="C:161" class="idref" href="#C:161"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="f:164" class="idref" href="#f:164"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#C:161"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="D:163" class="idref" href="#D:163"><span class="id" title="binder">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="Hsim:167" class="idref" href="#Hsim:167"><span class="id" title="binder">Hsim</span></a>: <a id="v1:165" class="idref" href="#v1:165"><span class="id" title="binder">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a id="v2:166" class="idref" href="#v2:166"><span class="id" title="binder">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#f:164"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:162"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:165"><span class="id" title="variable">v1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:159"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:160"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#f:164"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:162"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#v2:166"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">v2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">v1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">D</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">D</span> <span class="id" title="var">f</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">f</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">f</span>) <span class="id" title="var">rest</span>) <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">v2</span>, <span class="id" title="var">v1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">change_left</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><span class="id" title="var">f</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <span class="id" title="var">rest</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v1</span>)<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">Vector_hd</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">v1</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHrest</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHrest</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v1</span>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v2</span>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a> <span class="id" title="var">Hsim</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_compose_rw1" class="idref" href="#Batch_make_compose_rw1"><span class="id" title="lemma">Batch_make_compose_rw1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:171" class="idref" href="#b:171"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:168" class="idref" href="#A:168"><span class="id" title="binder">A</span></a> <a id="B:169" class="idref" href="#B:169"><span class="id" title="binder">B</span></a> <a id="C:170" class="idref" href="#C:170"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="f:173" class="idref" href="#f:173"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#C:170"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="D:172" class="idref" href="#D:172"><span class="id" title="binder">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:174" class="idref" href="#v:174"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:171"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#B:169"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#f:173"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:171"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:174"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:168"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:169"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#f:173"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:171"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:174"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_compose"><span class="id" title="lemma">Batch_make_compose</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v1</span> := <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v2</span> :=<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_length"><span class="id" title="definition">coerce_Vector_length</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="tactic">by</span> <span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_compose_rw2" class="idref" href="#Batch_make_compose_rw2"><span class="id" title="lemma">Batch_make_compose_rw2</span></a> `(<a id="b:178" class="idref" href="#b:178"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:175" class="idref" href="#A:175"><span class="id" title="binder">A</span></a> <a id="B:176" class="idref" href="#B:176"><span class="id" title="binder">B</span></a> <a id="C:177" class="idref" href="#C:177"><span class="id" title="binder">C</span></a>) `(<a id="f:180" class="idref" href="#f:180"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#C:177"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="D:179" class="idref" href="#D:179"><span class="id" title="binder">D</span></a>) <a id="v:181" class="idref" href="#v:181"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:175"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:176"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#f:180"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:178"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#v:181"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#f:180"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:178"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_length"><span class="id" title="definition">coerce_Vector_length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <a class="idref" href="Tealeaves.Theory.Batch.html#v:181"><span class="id" title="variable">v</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_compose_rw1"><span class="id" title="lemma">Batch_make_compose_rw1</span></a> <span class="id" title="var">b</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.Batch_make"><span class="id" title="section">Batch_make</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab718"></a><h2 class="section">Lemmas regarding <code>Batch_contents</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_natural" class="idref" href="#Batch_contents_natural"><span class="id" title="lemma">Batch_contents_natural</span></a>: <span class="id" title="keyword">∀</span> `(<a id="b:185" class="idref" href="#b:185"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:182" class="idref" href="#A:182"><span class="id" title="binder">A</span></a> <a id="B:183" class="idref" href="#B:183"><span class="id" title="binder">B</span></a> <a id="C:184" class="idref" href="#C:184"><span class="id" title="binder">C</span></a>) `(<a id="f:187" class="idref" href="#f:187"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#A:182"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="A':186" class="idref" href="#A':186"><span class="id" title="binder">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#f:187"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:185"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Theory.Batch.html#f:187"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:185"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#map_Vector_vcons"><span class="id" title="lemma">map_Vector_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons_sim"><span class="id" title="lemma">vcons_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab719"></a><h2 class="section">Lemmas regarding <code>Batch_make</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.Batch_replace" class="idref" href="#deconstruction.Batch_replace"><span class="id" title="section">Batch_replace</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_sim1" class="idref" href="#Batch_replace_sim1"><span class="id" title="lemma">Batch_replace_sim1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:191" class="idref" href="#b:191"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:188" class="idref" href="#A:188"><span class="id" title="binder">A</span></a> <a id="B:189" class="idref" href="#B:189"><span class="id" title="binder">B</span></a> <a id="C:190" class="idref" href="#C:190"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:193" class="idref" href="#v1:193"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:191"><span class="id" title="variable">b</span></a>) <a id="A':192" class="idref" href="#A':192"><span class="id" title="binder">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:194" class="idref" href="#v2:194"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:191"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#A':192"><span class="id" title="variable">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:195" class="idref" href="#Hsim:195"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#v1:193"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:194"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:191"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:193"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:191"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:194"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_rw2"><span class="id" title="lemma">Batch_replace_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a> <span class="id" title="var">Hsim</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_sim2" class="idref" href="#Batch_replace_sim2"><span class="id" title="lemma">Batch_replace_sim2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:199" class="idref" href="#b1:199"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:196" class="idref" href="#A:196"><span class="id" title="binder">A</span></a> <a id="B:197" class="idref" href="#B:197"><span class="id" title="binder">B</span></a> <a id="C:198" class="idref" href="#C:198"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:200" class="idref" href="#b2:200"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:196"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:197"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:198"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:202" class="idref" href="#v1:202"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:199"><span class="id" title="variable">b1</span></a>) <a id="A':201" class="idref" href="#A':201"><span class="id" title="binder">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:203" class="idref" href="#v2:203"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:200"><span class="id" title="variable">b2</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#A':201"><span class="id" title="variable">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:204" class="idref" href="#Heq:204"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#b1:199"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:200"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:205" class="idref" href="#Hsim:205"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim"><span class="id" title="definition">Vector_sim</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:202"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:203"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:199"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:202"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:200"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:203"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_sim1"><span class="id" title="lemma">Batch_replace_sim1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_sim3" class="idref" href="#Batch_replace_sim3"><span class="id" title="lemma">Batch_replace_sim3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:209" class="idref" href="#b1:209"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:206" class="idref" href="#A1:206"><span class="id" title="binder">A1</span></a> <a id="B:207" class="idref" href="#B:207"><span class="id" title="binder">B</span></a> <a id="C:208" class="idref" href="#C:208"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:211" class="idref" href="#b2:211"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:210" class="idref" href="#A2:210"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:207"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:208"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:213" class="idref" href="#v1:213"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:209"><span class="id" title="variable">b1</span></a>) <a id="A':212" class="idref" href="#A':212"><span class="id" title="binder">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:214" class="idref" href="#v2:214"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:211"><span class="id" title="variable">b2</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#A':212"><span class="id" title="variable">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:215" class="idref" href="#Heq:215"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:209"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:211"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:216" class="idref" href="#Hsim:216"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#v1:213"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:214"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:209"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:213"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:211"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:214"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim_eq"><span class="id" title="lemma">Vector_fun_sim_eq</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_shape"><span class="id" title="lemma">Batch_replace_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_replace_contents" class="idref" href="#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:217" class="idref" href="#A:217"><span class="id" title="binder">A</span></a> <a id="B:218" class="idref" href="#B:218"><span class="id" title="binder">B</span></a> <a id="C:219" class="idref" href="#C:219"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:220" class="idref" href="#b:220"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:217"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:218"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:219"><span class="id" title="variable">C</span></a>) `(<a id="v:222" class="idref" href="#v:222"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="A':221" class="idref" href="#A':221"><span class="id" title="binder">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:220"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:220"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:222"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_shape_replace_contents" class="idref" href="#Batch_shape_replace_contents"><span class="id" title="lemma">Batch_shape_replace_contents</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:223" class="idref" href="#A:223"><span class="id" title="binder">A</span></a> <a id="A':224" class="idref" href="#A':224"><span class="id" title="binder">A'</span></a> <a id="B:225" class="idref" href="#B:225"><span class="id" title="binder">B</span></a> <a id="C:226" class="idref" href="#C:226"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:227" class="idref" href="#b:227"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:223"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:225"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:226"><span class="id" title="variable">C</span></a>) `(<a id="v:228" class="idref" href="#v:228"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Theory.Batch.html#A':224"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:227"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:227"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:228"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.Batch_replace"><span class="id" title="section">Batch_replace</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab720"></a><h2 class="section">Lens-like laws</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.lens_laws" class="idref" href="#deconstruction.lens_laws"><span class="id" title="section">lens_laws</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:229" class="idref" href="#A:229"><span class="id" title="binder">A</span></a> <a id="A':230" class="idref" href="#A':230"><span class="id" title="binder">A'</span></a> <a id="A'':231" class="idref" href="#A'':231"><span class="id" title="binder">A''</span></a> <a id="B:232" class="idref" href="#B:232"><span class="id" title="binder">B</span></a> <a id="C:233" class="idref" href="#C:233"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_contents" class="idref" href="#Batch_make_contents"><span class="id" title="lemma">Batch_make_contents</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:234" class="idref" href="#b:234"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:234"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:234"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:234"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents_rw2"><span class="id" title="lemma">Batch_contents_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_get_put" class="idref" href="#Batch_get_put"><span class="id" title="lemma">Batch_get_put</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:235" class="idref" href="#b:235"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:235"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:235"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:235"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_put_get" class="idref" href="#Batch_put_get"><span class="id" title="lemma">Batch_put_get</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:236" class="idref" href="#b:236"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>) (<a id="v:237" class="idref" href="#v:237"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:236"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A'"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:236"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:237"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:236"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:237"><span class="id" title="variable">v</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:237"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="Tealeaves.Theory.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_nil_eq"><span class="id" title="lemma">Vector_nil_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_surjective_pairing2"><span class="id" title="lemma">Vector_surjective_pairing2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_coerce_eq"><span class="id" title="lemma">Vector_hd_coerce_eq</span></a> (<span class="id" title="var">Heq</span> := <span class="id" title="var">Heq</span>) (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="Tealeaves.Functors.List.html#S_uncons"><span class="id" title="lemma">S_uncons</span></a> <span class="id" title="var">Heq</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (@<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^^&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;why&nbsp;this&nbsp;got&nbsp;expanded&nbsp;but&nbsp;it&nbsp;blocks&nbsp;rewriting&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim_eq"><span class="id" title="lemma">Vector_sim_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_put_put" class="idref" href="#Batch_put_put"><span class="id" title="lemma">Batch_put_put</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:238" class="idref" href="#b:238"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v1:239" class="idref" href="#v1:239"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:238"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A'"><span class="id" title="variable">A'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v2:240" class="idref" href="#v2:240"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:238"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A''"><span class="id" title="variable">A''</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:238"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:239"><span class="id" title="variable">v1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:238"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v1:239"><span class="id" title="variable">v1</span></a><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:240"><span class="id" title="variable">v2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:238"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v2:240"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_sim3"><span class="id" title="lemma">Batch_replace_sim3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_shape_replace_contents"><span class="id" title="lemma">Batch_shape_replace_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_spec" class="idref" href="#Batch_replace_spec"><span class="id" title="lemma">Batch_replace_spec</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:241" class="idref" href="#b:241"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:241"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">precoerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#length_cojoin_Batch"><span class="id" title="lemma">length_cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:241"><span class="id" title="variable">b</span></a><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:241"><span class="id" title="variable">b</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A'"><span class="id" title="variable">A'</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>. <span class="id" title="var">ext</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_cojoin_Batch"><span class="id" title="lemma">length_cojoin_Batch</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A'"><span class="id" title="variable">A'</span></a>) <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_rw2"><span class="id" title="lemma">Batch_replace_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_compose_rw2"><span class="id" title="lemma">Batch_make_compose_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_coerce_eq"><span class="id" title="lemma">Vector_hd_coerce_eq</span></a> (<span class="id" title="var">Heq</span> := <span class="id" title="var">Heq</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="Tealeaves.Functors.Batch.html#length_cojoin_Batch"><span class="id" title="lemma">length_cojoin_Batch</span></a> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_replace_contents" class="idref" href="#Batch_make_replace_contents"><span class="id" title="lemma">Batch_make_replace_contents</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:242" class="idref" href="#b:242"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>) (<a id="v:243" class="idref" href="#v:243"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:242"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.A'"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:242"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:243"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">precoerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:242"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:243"><span class="id" title="variable">v</span></a>)<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#b:242"><span class="id" title="variable">b</span></a><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <span class="id" title="var">b</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_length"><span class="id" title="definition">coerce_Vector_length</span></a> <span class="id" title="var">e</span> <span class="id" title="var">v'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <span class="id" title="var">v'</span>) <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Set</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Unset</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_eq"><span class="id" title="lemma">Vector_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_contents"><span class="id" title="lemma">coerce_Vector_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_coerce_sim"><span class="id" title="lemma">Vector_tl_coerce_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_coerce_eq"><span class="id" title="lemma">Vector_hd_coerce_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.lens_laws"><span class="id" title="section">lens_laws</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab721"></a><h2 class="section">Relating make and shape</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.make_shape" class="idref" href="#deconstruction.make_shape"><span class="id" title="section">make_shape</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_shape_rev" class="idref" href="#Batch_make_shape_rev"><span class="id" title="lemma">Batch_make_shape_rev</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:247" class="idref" href="#b1:247"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:244" class="idref" href="#A:244"><span class="id" title="binder">A</span></a> <a id="B:245" class="idref" href="#B:245"><span class="id" title="binder">B</span></a> <a id="C:246" class="idref" href="#C:246"><span class="id" title="binder">C</span></a>) `(<a id="b2:249" class="idref" href="#b2:249"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:248" class="idref" href="#A2:248"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:245"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:246"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:247"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#7ad275f9c7d3d9469cfa6fc77617779f"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:249"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:247"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:249"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim"><span class="id" title="definition">Vector_fun_sim</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlen</span> <span class="id" title="var">Hsim</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsim</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vnil"><span class="id" title="definition">vnil</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vnil"><span class="id" title="definition">vnil</span></a> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">reflexivity</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> <span class="id" title="var">Vsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Vsim'</span>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons"><span class="id" title="definition">vcons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">v1</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons"><span class="id" title="definition">vcons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">v2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons_sim"><span class="id" title="lemma">vcons_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsim</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Vsim'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="Batch_make_shape_iff" class="idref" href="#Batch_make_shape_iff"><span class="id" title="lemma">Batch_make_shape_iff</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:253" class="idref" href="#b1:253"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:250" class="idref" href="#A1:250"><span class="id" title="binder">A1</span></a> <a id="B:251" class="idref" href="#B:251"><span class="id" title="binder">B</span></a> <a id="C:252" class="idref" href="#C:252"><span class="id" title="binder">C</span></a>) `(<a id="b2:255" class="idref" href="#b2:255"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:254" class="idref" href="#A2:254"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:251"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:252"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:253"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:255"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:253"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#7ad275f9c7d3d9469cfa6fc77617779f"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:255"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_shape"><span class="id" title="lemma">Batch_make_shape</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_shape_rev"><span class="id" title="lemma">Batch_make_shape_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_sim_if_make" class="idref" href="#Batch_replace_sim_if_make"><span class="id" title="lemma">Batch_replace_sim_if_make</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:259" class="idref" href="#b1:259"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:256" class="idref" href="#A1:256"><span class="id" title="binder">A1</span></a> <a id="B:257" class="idref" href="#B:257"><span class="id" title="binder">B</span></a> <a id="C:258" class="idref" href="#C:258"><span class="id" title="binder">C</span></a>) `(<a id="b2:261" class="idref" href="#b2:261"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:260" class="idref" href="#A2:260"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:257"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:258"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:259"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#7ad275f9c7d3d9469cfa6fc77617779f"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:261"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="A':262" class="idref" href="#A':262"><span class="id" title="binder">A'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Theory.Batch.html#A':262"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#b1:259"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#7ad275f9c7d3d9469cfa6fc77617779f"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:261"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_shape_iff"><span class="id" title="lemma">Batch_make_shape_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_shape_ind"><span class="id" title="lemma">Batch_shape_ind</span></a> <span class="id" title="var">Hshape</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Theory.Batch.html#length_Batch_shape"><span class="id" title="lemma">length_Batch_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlen</span> <span class="id" title="var">Hsim</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.make_shape"><span class="id" title="section">make_shape</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab722"></a><h2 class="section">Misc</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.spec" class="idref" href="#deconstruction.spec"><span class="id" title="section">spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_const_contents" class="idref" href="#runBatch_const_contents"><span class="id" title="lemma">runBatch_const_contents</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `{<a id="H2:267" class="idref" href="#H2:267"><span class="id" title="binder">Applicative</span></a> <a id="H2:267" class="idref" href="#H2:267"><span class="id" title="binder">G</span></a>} `(<a id="b:271" class="idref" href="#b:271"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:268" class="idref" href="#A:268"><span class="id" title="binder">A</span></a> <a id="B:269" class="idref" href="#B:269"><span class="id" title="binder">B</span></a> <a id="C:270" class="idref" href="#C:270"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="x:272" class="idref" href="#x:272"><span class="id" title="binder">x</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#G:263"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:269"><span class="id" title="variable">B</span></a>) `(<a id="v:274" class="idref" href="#v:274"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="A':273" class="idref" href="#A':273"><span class="id" title="binder">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#G:263"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#x:272"><span class="id" title="variable">x</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#C:270"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:271"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#G:263"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#x:272"><span class="id" title="variable">x</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#C:270"><span class="id" title="variable">C</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:271"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#v:274"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_eq_iff" class="idref" href="#Batch_eq_iff"><span class="id" title="lemma">Batch_eq_iff</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:278" class="idref" href="#b1:278"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:275" class="idref" href="#A:275"><span class="id" title="binder">A</span></a> <a id="B:276" class="idref" href="#B:276"><span class="id" title="binder">B</span></a> <a id="C:277" class="idref" href="#C:277"><span class="id" title="binder">C</span></a>) `(<a id="b2:279" class="idref" href="#b2:279"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:275"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:276"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:277"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#b1:278"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:279"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:278"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#7ad275f9c7d3d9469cfa6fc77617779f"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:279"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b1:278"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#835af27ef0dc085449c365a6846fa0f7"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b2:279"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim"><span class="id" title="definition">Vector_fun_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hmake</span> <span class="id" title="var">Hcontents</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_get_put"><span class="id" title="lemma">Batch_get_put</span></a> <span class="id" title="var">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_get_put"><span class="id" title="lemma">Batch_get_put</span></a> <span class="id" title="var">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_replace_sim3"><span class="id" title="lemma">Batch_replace_sim3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make_shape_rev"><span class="id" title="lemma">Batch_make_shape_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction.spec"><span class="id" title="section">spec</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab723"></a><h2 class="section">Representation theorems</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_repr1" class="idref" href="#runBatch_repr1"><span class="id" title="lemma">runBatch_repr1</span></a> `{<a id="H2:284" class="idref" href="#H2:284"><span class="id" title="binder">Applicative</span></a> <a id="H2:284" class="idref" href="#H2:284"><span class="id" title="binder">G</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b:288" class="idref" href="#b:288"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:285" class="idref" href="#A:285"><span class="id" title="binder">A</span></a> <a id="B:286" class="idref" href="#B:286"><span class="id" title="binder">B</span></a> <a id="C:287" class="idref" href="#C:287"><span class="id" title="binder">C</span></a>) (<a id="f:289" class="idref" href="#f:289"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#A:285"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#G:280"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:286"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Theory.Batch.html#G:280"><span class="id" title="variable">G</span></a>) (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:288"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:288"><span class="id" title="variable">b</span></a>)) <a class="idref" href="Tealeaves.Theory.Batch.html#f:289"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:288"><span class="id" title="variable">b</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#G:280"><span class="id" title="variable">G</span></a>) (<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#f:289"><span class="id" title="variable">f</span></a>) <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Theory.Batch.html#b:288"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents_rw2"><span class="id" title="lemma">Batch_contents_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="tactic">at</span> 2. <span class="comment">(*&nbsp;hidden&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#traverse_Vector_vcons"><span class="id" title="lemma">traverse_Vector_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_rw2"><span class="id" title="lemma">runBatch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Backwards.html#forwards_ap"><span class="id" title="lemma">forwards_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b'</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>, <a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a>, <a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_repr2" class="idref" href="#runBatch_repr2"><span class="id" title="lemma">runBatch_repr2</span></a> `{<a id="H2:294" class="idref" href="#H2:294"><span class="id" title="binder">Applicative</span></a> <a id="H2:294" class="idref" href="#H2:294"><span class="id" title="binder">G</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b:298" class="idref" href="#b:298"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:295" class="idref" href="#A:295"><span class="id" title="binder">A</span></a> <a id="B:296" class="idref" href="#B:296"><span class="id" title="binder">B</span></a> <a id="C:297" class="idref" href="#C:297"><span class="id" title="binder">C</span></a>) (<a id="f:299" class="idref" href="#f:299"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#A:295"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#G:290"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:296"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#G:290"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#f:299"><span class="id" title="variable">f</span></a> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Theory.Batch.html#b:298"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Theory.Batch.html#G:290"><span class="id" title="variable">G</span></a>) (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:298"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := (<a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#G:290"><span class="id" title="variable">G</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:298"><span class="id" title="variable">b</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#f:299"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:298"><span class="id" title="variable">b</span></a>))).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">change_left</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <span class="id" title="var">G</span>) (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <span class="id" title="var">G</span>) (<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <span class="id" title="var">f</span>) (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <span class="id" title="var">b</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Theory.Batch.html#runBatch_repr1"><span class="id" title="lemma">runBatch_repr1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_spec"><span class="id" title="lemma">runBatch_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_spec"><span class="id" title="lemma">runBatch_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">change_left</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <span class="id" title="var">G</span>) <a class="idref" href="Tealeaves.Functors.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> (<a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <span class="id" title="var">G</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <span class="id" title="var">f</span><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>) <span class="id" title="var">b</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Backwards.html#traverse_double_backwards"><span class="id" title="lemma">traverse_double_backwards</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction"><span class="id" title="section">deconstruction</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab724"></a><h1 class="section">Deconstructing <code>Batch A B C</code> with an extrinsic approach</h1>

</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Functors.Option.html#"><span class="id" title="library">Functors.Option</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="deconstruction_extrinsic" class="idref" href="#deconstruction_extrinsic"><span class="id" title="section">deconstruction_extrinsic</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Batch_to_makeFn" class="idref" href="#Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> {<a id="A:300" class="idref" href="#A:300"><span class="id" title="binder">A</span></a> <a id="B:301" class="idref" href="#B:301"><span class="id" title="binder">B</span></a> <a id="C:302" class="idref" href="#C:302"><span class="id" title="binder">C</span></a>} (<a id="b:303" class="idref" href="#b:303"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:300"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:301"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:302"><span class="id" title="variable">C</span></a>) (<a id="l:304" class="idref" href="#l:304"><span class="id" title="binder">l</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:301"><span class="id" title="variable">B</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:302"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Theory.Batch.html#b:303"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Theory.Batch.html#l:304"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#l:304"><span class="id" title="variable">l</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">b'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a>  <span class="id" title="var">b'</span>) (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn:305"><span class="id" title="definition">Batch_to_makeFn</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">bs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="basic0" class="idref" href="#basic0"><span class="id" title="lemma">basic0</span></a> {<a id="A:308" class="idref" href="#A:308"><span class="id" title="binder">A</span></a> <a id="B:309" class="idref" href="#B:309"><span class="id" title="binder">B</span></a> <a id="C:310" class="idref" href="#C:310"><span class="id" title="binder">C</span></a> <a id="C':311" class="idref" href="#C':311"><span class="id" title="binder">C'</span></a>} (<a id="b:312" class="idref" href="#b:312"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:308"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:309"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:310"><span class="id" title="variable">C</span></a>) (<a id="l:313" class="idref" href="#l:313"><span class="id" title="binder">l</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:309"><span class="id" title="variable">B</span></a>) (<a id="f:314" class="idref" href="#f:314"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#C:310"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C':311"><span class="id" title="variable">C'</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#f:314"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:312"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#l:313"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#f:314"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:312"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Theory.Batch.html#l:313"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">a0</span> <span class="id" title="var">into</span> <span class="id" title="var">b'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<span class="id" title="var">f</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a> <span class="id" title="var">b'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Abort</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_to_makeFn_rw11" class="idref" href="#Batch_to_makeFn_rw11"><span class="id" title="lemma">Batch_to_makeFn_rw11</span></a> {<a id="A:315" class="idref" href="#A:315"><span class="id" title="binder">A</span></a> <a id="B:316" class="idref" href="#B:316"><span class="id" title="binder">B</span></a> <a id="C:317" class="idref" href="#C:317"><span class="id" title="binder">C</span></a>}: <span class="id" title="keyword">∀</span> <a id="c:318" class="idref" href="#c:318"><span class="id" title="binder">c</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:315"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:316"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:317"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:318"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:318"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_to_makeFn_rw12" class="idref" href="#Batch_to_makeFn_rw12"><span class="id" title="lemma">Batch_to_makeFn_rw12</span></a> {<a id="A:319" class="idref" href="#A:319"><span class="id" title="binder">A</span></a> <a id="B:320" class="idref" href="#B:320"><span class="id" title="binder">B</span></a> <a id="C:321" class="idref" href="#C:321"><span class="id" title="binder">C</span></a>} <a id="b':322" class="idref" href="#b':322"><span class="id" title="binder">b'</span></a> <a id="l:323" class="idref" href="#l:323"><span class="id" title="binder">l</span></a>: <span class="id" title="keyword">∀</span> <a id="c:324" class="idref" href="#c:324"><span class="id" title="binder">c</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> (@<a class="idref" href="Tealeaves.Functors.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:319"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:320"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:321"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:324"><span class="id" title="variable">c</span></a>) (<a class="idref" href="Tealeaves.Theory.Batch.html#b':322"><span class="id" title="variable">b'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#l:323"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_to_makeFn_rw21" class="idref" href="#Batch_to_makeFn_rw21"><span class="id" title="lemma">Batch_to_makeFn_rw21</span></a> {<a id="A:325" class="idref" href="#A:325"><span class="id" title="binder">A</span></a> <a id="B:326" class="idref" href="#B:326"><span class="id" title="binder">B</span></a> <a id="C:327" class="idref" href="#C:327"><span class="id" title="binder">C</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:328" class="idref" href="#b:328"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:325"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:326"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#B:326"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:327"><span class="id" title="variable">C</span></a>)) (<a id="a:329" class="idref" href="#a:329"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#A:325"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#b:328"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a:329"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_to_makeFn_rw22" class="idref" href="#Batch_to_makeFn_rw22"><span class="id" title="lemma">Batch_to_makeFn_rw22</span></a> {<a id="A:330" class="idref" href="#A:330"><span class="id" title="binder">A</span></a> <a id="B:331" class="idref" href="#B:331"><span class="id" title="binder">B</span></a> <a id="C:332" class="idref" href="#C:332"><span class="id" title="binder">C</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:333" class="idref" href="#b:333"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:330"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:331"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#B:331"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:332"><span class="id" title="variable">C</span></a>)) (<a id="a:334" class="idref" href="#a:334"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Theory.Batch.html#A:330"><span class="id" title="variable">A</span></a>) (<a id="l:335" class="idref" href="#l:335"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:331"><span class="id" title="variable">B</span></a>) (<a id="b':336" class="idref" href="#b':336"><span class="id" title="binder">b'</span></a> : <a class="idref" href="Tealeaves.Theory.Batch.html#B:331"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> (<a class="idref" href="Tealeaves.Theory.Batch.html#b:333"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#a:334"><span class="id" title="variable">a</span></a>) (<a class="idref" href="Tealeaves.Theory.Batch.html#l:335"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b':336"><span class="id" title="variable">b'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:333"><span class="id" title="variable">b</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#l:335"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b':336"><span class="id" title="variable">b'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_unit"><span class="id" title="lemma">List.rev_unit</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap3"><span class="id" title="lemma">ap3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="basic1" class="idref" href="#basic1"><span class="id" title="lemma">basic1</span></a> {<a id="A:337" class="idref" href="#A:337"><span class="id" title="binder">A</span></a> <a id="B:338" class="idref" href="#B:338"><span class="id" title="binder">B</span></a> <a id="C:339" class="idref" href="#C:339"><span class="id" title="binder">C</span></a>} (<a id="b:340" class="idref" href="#b:340"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#A:337"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:338"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#C:339"><span class="id" title="variable">C</span></a>) (<a id="l:341" class="idref" href="#l:341"><span class="id" title="binder">l</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#B:338"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#l:341"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:340"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="c:342" class="idref" href="#c:342"><span class="id" title="binder">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#Batch_to_makeFn"><span class="id" title="definition">Batch_to_makeFn</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#b:340"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#l:341"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Theory.Batch.html#c:342"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <span class="id" title="var">l</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <span class="id" title="var">l</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_length"><span class="id" title="lemma">List.rev_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.List.html#S_uncons"><span class="id" title="lemma">S_uncons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span> <span class="id" title="var">pf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_involutive"><span class="id" title="lemma">List.rev_involutive</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_unit"><span class="id" title="lemma">List.rev_unit</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_app_distr"><span class="id" title="lemma">List.rev_app_distr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">c</span> <span class="id" title="var">b0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pf</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">pf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Abort</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Lemma&nbsp;Batch_repr&nbsp;{A&nbsp;C}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;forall&nbsp;(b:&nbsp;Batch&nbsp;A&nbsp;A&nbsp;C),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Batch_to_makeFn&nbsp;b&nbsp;(List.rev&nbsp;(Batch_to_list&nbsp;b))&nbsp;=&nbsp;Some&nbsp;(extract_Batch&nbsp;b).<br/>
&nbsp;&nbsp;Proof.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;induction&nbsp;b.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;reflexivity.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;rewrite&nbsp;Batch_to_list_rw2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(forall&nbsp;{A&nbsp;B&nbsp;C}&nbsp;(b:&nbsp;Batch&nbsp;A&nbsp;B&nbsp;(B&nbsp;-&gt;&nbsp;C))&nbsp;(a:&nbsp;A)&nbsp;(l&nbsp;:&nbsp;list&nbsp;B)&nbsp;(b':&nbsp;B),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Batch_to_makeFn&nbsp;(b&nbsp;⧆&nbsp;a)&nbsp;(l&nbsp;++&nbsp;b'&nbsp;::&nbsp;nil)&nbsp;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Batch_to_makeFn&nbsp;b&nbsp;(List.rev&nbsp;l)&nbsp;&lt;⋆&gt;&nbsp;pure&nbsp;b').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;intros.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Batch_to_makeFn_rw22.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reflexivity.&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;List.rev_app_distr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbn.<br/>
&nbsp;&nbsp;Qed.<br/>
&nbsp;&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Theory.Batch.html#deconstruction_extrinsic"><span class="id" title="section">deconstruction_extrinsic</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
