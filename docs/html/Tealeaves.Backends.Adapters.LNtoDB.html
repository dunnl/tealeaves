<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Tealeaves.Backends.Adapters.LNtoDB</h1>

<div class="code">
<span class="comment">(*|<br/>
##############################<br/>
Translating&nbsp;between&nbsp;locally&nbsp;nameless&nbsp;and&nbsp;de&nbsp;Bruijn&nbsp;indices<br/>
##############################<br/>
<br/>
We&nbsp;reason&nbsp;about&nbsp;a&nbsp;translation&nbsp;between&nbsp;syntax&nbsp;with&nbsp;de&nbsp;Bruijn&nbsp;indices<br/>
and&nbsp;locally&nbsp;nameless&nbsp;variables.&nbsp;This&nbsp;consists&nbsp;of&nbsp;a&nbsp;function&nbsp;which,<br/>
given&nbsp;a&nbsp;locally&nbsp;closed&nbsp;term&nbsp;t,&nbsp;outputs&nbsp;a&nbsp;term&nbsp;of&nbsp;the&nbsp;same&nbsp;shape&nbsp;whose<br/>
leaves&nbsp;are&nbsp;de&nbsp;Bruijn&nbsp;indices&nbsp;and&nbsp;a&nbsp;"key":&nbsp;some&nbsp;arbitrary&nbsp;permutation<br/>
of&nbsp;the&nbsp;names&nbsp;of&nbsp;free&nbsp;variables&nbsp;in&nbsp;t.&nbsp;Another&nbsp;function&nbsp;accepts&nbsp;a&nbsp;key<br/>
and&nbsp;a&nbsp;de&nbsp;Bruijn&nbsp;term&nbsp;and&nbsp;computes&nbsp;a&nbsp;locally&nbsp;nameless&nbsp;term&nbsp;of&nbsp;the&nbsp;same<br/>
shape.&nbsp;The&nbsp;two&nbsp;functions&nbsp;are&nbsp;shown&nbsp;to&nbsp;be&nbsp;inverses.<br/>
<br/>
..&nbsp;contents::&nbsp;Table&nbsp;of&nbsp;Contents&nbsp;:depth:&nbsp;2<br/>
<br/>
============================<br/>
Imports&nbsp;and&nbsp;setup<br/>
============================<br/>
<br/>
Since&nbsp;we&nbsp;are&nbsp;using&nbsp;the&nbsp;Kleisli&nbsp;typeclass&nbsp;hierarchy,&nbsp;we&nbsp;import&nbsp;modules<br/>
under&nbsp;the&nbsp;namespaces&nbsp;``Classes.Kleisli``&nbsp;and&nbsp;``Theory.Kleisli.``<br/>
|*)</span><br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.LN.html#"><span class="id" title="library">Backends.LN</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.DB.DB.html#"><span class="id" title="library">Backends.DB.DB</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#"><span class="id" title="library">Backends.Adapters.Key</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Option.html#"><span class="id" title="library">Functors.Option</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Backends.LN.html#Notations"><span class="id" title="module">LN.Notations</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">Variables</span> <span class="id" title="var">W</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat_scope</span>.<br/>

<br/>
<span class="comment">(*|<br/>
============================<br/>
Translation&nbsp;operations<br/>
============================<br/>
|*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="toDB_loc" class="idref" href="#toDB_loc"><span class="id" title="definition">toDB_loc</span></a> (<a id="k:1" class="idref" href="#k:1"><span class="id" title="binder">k</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>) '<a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">(</span></a><a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">depth</span></a><a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">,</span></a> <a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">l</span></a><a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">)</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#l:2"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Backends.LN.LN.html#Bd"><span class="id" title="constructor">Bd</span></a> <span class="id" title="var">n</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="ix:6" class="idref" href="#ix:6"><span class="id" title="binder">ix</span></a> ⇒ <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#ix:6"><span class="id" title="variable">ix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:3"><span class="id" title="variable">depth</span></a>) (<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_lookup_atom"><span class="id" title="definition">key_lookup_atom</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:1"><span class="id" title="variable">k</span></a> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="toLN_loc" class="idref" href="#toLN_loc"><span class="id" title="definition">toLN_loc</span></a> (<a id="k:7" class="idref" href="#k:7"><span class="id" title="binder">k</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>) '<a id="pat:10" class="idref" href="#pat:10"><span class="id" title="binder">(</span></a><a id="pat:10" class="idref" href="#pat:10"><span class="id" title="binder">depth</span></a><a id="pat:10" class="idref" href="#pat:10"><span class="id" title="binder">,</span></a> <a id="pat:10" class="idref" href="#pat:10"><span class="id" title="binder">ix</span></a><a id="pat:10" class="idref" href="#pat:10"><span class="id" title="binder">)</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tealeaves.Backends.DB.DB.html#bound"><span class="id" title="definition">bound</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#ix:8"><span class="id" title="variable">ix</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:9"><span class="id" title="variable">depth</span></a> <a class="idref" href="Tealeaves.Classes.EqDec_eq.html#a6e843c62e1ac2a74737b7a9f636e026"><span class="id" title="notation">==</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Tealeaves.Backends.LN.LN.html#Bd"><span class="id" title="constructor">Bd</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#ix:8"><span class="id" title="variable">ix</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>) <a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_lookup_index"><span class="id" title="definition">key_lookup_index</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:7"><span class="id" title="variable">k</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#ix:8"><span class="id" title="variable">ix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:9"><span class="id" title="variable">depth</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="toLNkey_list" class="idref" href="#toLNkey_list"><span class="id" title="definition">toLNkey_list</span></a> (<a id="l:11" class="idref" href="#l:11"><span class="id" title="binder">l</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>): <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#l:11"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;| (<a class="idref" href="Tealeaves.Backends.LN.LN.html#Bd"><span class="id" title="constructor">Bd</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">rest</span>) ⇒ <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLNkey_list:12"><span class="id" title="definition">toLNkey_list</span></a> <span class="id" title="var">rest</span><br/>
&nbsp;&nbsp;| (<a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">rest</span>) ⇒ <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_insert_atom"><span class="id" title="definition">key_insert_atom</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLNkey_list:12"><span class="id" title="definition">toLNkey_list</span></a> <span class="id" title="var">rest</span>) <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*|<br/>
============================<br/>
Simplification&nbsp;support<br/>
============================<br/>
|*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="toDB_loc_rw1" class="idref" href="#toDB_loc_rw1"><span class="id" title="lemma">toDB_loc_rw1</span></a> (<a id="k:14" class="idref" href="#k:14"><span class="id" title="binder">k</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>) (<a id="depth:15" class="idref" href="#depth:15"><span class="id" title="binder">depth</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:16" class="idref" href="#n:16"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc"><span class="id" title="definition">toDB_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:14"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:15"><span class="id" title="variable">depth</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#Bd"><span class="id" title="constructor">Bd</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:16"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:16"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="toDB_loc_rw2" class="idref" href="#toDB_loc_rw2"><span class="id" title="lemma">toDB_loc_rw2</span></a> (<a id="k:17" class="idref" href="#k:17"><span class="id" title="binder">k</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>) (<a id="depth:18" class="idref" href="#depth:18"><span class="id" title="binder">depth</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="x:19" class="idref" href="#x:19"><span class="id" title="binder">x</span></a>: <a class="idref" href="Tealeaves.Backends.LN.Atom.html#atom"><span class="id" title="abbreviation">atom</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc"><span class="id" title="definition">toDB_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:17"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:18"><span class="id" title="variable">depth</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:19"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="ix:20" class="idref" href="#ix:20"><span class="id" title="binder">ix</span></a> ⇒ <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#ix:20"><span class="id" title="variable">ix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:18"><span class="id" title="variable">depth</span></a>) (<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_lookup_atom"><span class="id" title="definition">key_lookup_atom</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:17"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:19"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*|<br/>
============================<br/>
Properties&nbsp;of&nbsp;toLNkey<br/>
============================<br/>
|*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="toLNkey_unique" class="idref" href="#toLNkey_unique"><span class="id" title="lemma">toLNkey_unique</span></a>: <span class="id" title="keyword">∀</span> <a id="l:21" class="idref" href="#l:21"><span class="id" title="binder">l</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#unique"><span class="id" title="definition">unique</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLNkey_list"><span class="id" title="definition">toLNkey_list</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#l:21"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">x</span>|<span class="id" title="var">n</span>] <span class="id" title="var">rest</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_insert_unique"><span class="id" title="lemma">key_insert_unique</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="toLNkey_bijection" class="idref" href="#toLNkey_bijection"><span class="id" title="lemma">toLNkey_bijection</span></a>: <span class="id" title="keyword">∀</span> <a id="l:22" class="idref" href="#l:22"><span class="id" title="binder">l</span></a> <a id="ix:23" class="idref" href="#ix:23"><span class="id" title="binder">ix</span></a> <a id="a:24" class="idref" href="#a:24"><span class="id" title="binder">a</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_lookup_index"><span class="id" title="definition">key_lookup_index</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLNkey_list"><span class="id" title="definition">toLNkey_list</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#l:22"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#ix:23"><span class="id" title="variable">ix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#a:24"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_lookup_atom"><span class="id" title="definition">key_lookup_atom</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLNkey_list"><span class="id" title="definition">toLNkey_list</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#l:22"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#a:24"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#ix:23"><span class="id" title="variable">ix</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_bijection"><span class="id" title="lemma">key_bijection</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLNkey_unique"><span class="id" title="lemma">toLNkey_unique</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="comment">(*|<br/>
============================<br/>
Global&nbsp;operations<br/>
============================<br/>
|*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="toDB_from_key" class="idref" href="#toDB_from_key"><span class="id" title="definition">toDB_from_key</span></a><br/>
&nbsp;&nbsp;`{<a id="Mapdt_inst:26" class="idref" href="#Mapdt_inst:26"><span class="id" title="binder">Mapdt_inst</span></a>: <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#Mapdt"><span class="id" title="class">Mapdt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a id="T:25" class="idref" href="#T:25"><span class="id" title="binder">T</span></a>} (<a id="k:27" class="idref" href="#k:27"><span class="id" title="binder">k</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>): <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:25"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:25"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#mapdt"><span class="id" title="definition">mapdt</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>) (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc"><span class="id" title="definition">toDB_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:27"><span class="id" title="variable">k</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="toLN_from_key" class="idref" href="#toLN_from_key"><span class="id" title="definition">toLN_from_key</span></a><br/>
&nbsp;&nbsp;`{<a id="Mapdt_inst:29" class="idref" href="#Mapdt_inst:29"><span class="id" title="binder">Mapdt_inst</span></a>: <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#Mapdt"><span class="id" title="class">Mapdt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a id="T:28" class="idref" href="#T:28"><span class="id" title="binder">T</span></a>} (<a id="k:30" class="idref" href="#k:30"><span class="id" title="binder">k</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>): <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:28"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:28"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#mapdt"><span class="id" title="definition">mapdt</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>) (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_loc"><span class="id" title="definition">toLN_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:30"><span class="id" title="variable">k</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="toLNkey" class="idref" href="#toLNkey"><span class="id" title="definition">toLNkey</span></a><br/>
&nbsp;&nbsp;`{<a id="Traverse_inst:32" class="idref" href="#Traverse_inst:32"><span class="id" title="binder">Traverse_inst</span></a>: <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#Traverse"><span class="id" title="class">Traverse</span></a> <a id="T:31" class="idref" href="#T:31"><span class="id" title="binder">T</span></a>} (<a id="t:33" class="idref" href="#t:33"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:31"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>): <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLNkey_list"><span class="id" title="definition">toLNkey_list</span></a> (<a class="idref" href="Tealeaves.Misc.List.html#tolist"><span class="id" title="definition">tolist</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:33"><span class="id" title="variable">t</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="toDB" class="idref" href="#toDB"><span class="id" title="definition">toDB</span></a><br/>
&nbsp;&nbsp;`{<a id="Traverse_inst:35" class="idref" href="#Traverse_inst:35"><span class="id" title="binder">Traverse_inst</span></a>: <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#Traverse"><span class="id" title="class">Traverse</span></a> <a id="T:34" class="idref" href="#T:34"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;`{<a id="Mapdt_inst:36" class="idref" href="#Mapdt_inst:36"><span class="id" title="binder">Mapdt_inst</span></a>: <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#Mapdt"><span class="id" title="class">Mapdt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:34"><span class="id" title="variable">T</span></a>} (<a id="t:37" class="idref" href="#t:37"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:34"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:34"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_from_key"><span class="id" title="definition">toDB_from_key</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLNkey"><span class="id" title="definition">toLNkey</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:37"><span class="id" title="variable">t</span></a>) <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:37"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="translate" class="idref" href="#translate"><span class="id" title="section">translate</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">ToBatch_Traverse</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="ret_inst:39" class="idref" href="#ret_inst:39"><span class="id" title="binder">ret_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#Return"><span class="id" title="class">Return</span></a> <a id="T:38" class="idref" href="#T:38"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Map_T_inst:40" class="idref" href="#Map_T_inst:40"><span class="id" title="binder">Map_T_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Functor.html#Map"><span class="id" title="class">Map</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Mapd_T_inst:41" class="idref" href="#Mapd_T_inst:41"><span class="id" title="binder">Mapd_T_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedFunctor.html#Mapd"><span class="id" title="class">Mapd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Traverse_T_inst:42" class="idref" href="#Traverse_T_inst:42"><span class="id" title="binder">Traverse_T_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#Traverse"><span class="id" title="class">Traverse</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Bind_T_inst:43" class="idref" href="#Bind_T_inst:43"><span class="id" title="binder">Bind_T_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#Bind"><span class="id" title="class">Bind</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Mapdt_T_inst:44" class="idref" href="#Mapdt_T_inst:44"><span class="id" title="binder">Mapdt_T_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#Mapdt"><span class="id" title="class">Mapdt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Bindd_T_inst:45" class="idref" href="#Bindd_T_inst:45"><span class="id" title="binder">Bindd_T_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedMonad.html#Bindd"><span class="id" title="class">Bindd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Bindt_T_inst:46" class="idref" href="#Bindt_T_inst:46"><span class="id" title="binder">Bindt_T_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableMonad.html#Bindt"><span class="id" title="class">Bindt</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Binddt_T_inst:47" class="idref" href="#Binddt_T_inst:47"><span class="id" title="binder">Binddt_T_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableMonad.html#Binddt"><span class="id" title="class">Binddt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Map_Binddt0:48" class="idref" href="#Compat_Map_Binddt0:48"><span class="id" title="binder">!</span></a> <a id="Compat_Map_Binddt0:48" class="idref" href="#Compat_Map_Binddt0:48"><span class="id" title="binder">Compat_Map_Binddt</span></a> <a id="Compat_Map_Binddt0:48" class="idref" href="#Compat_Map_Binddt0:48"><span class="id" title="binder">nat</span></a> <a id="Compat_Map_Binddt0:48" class="idref" href="#Compat_Map_Binddt0:48"><span class="id" title="binder">T</span></a> <a id="Compat_Map_Binddt0:48" class="idref" href="#Compat_Map_Binddt0:48"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Mapd_Binddt0:49" class="idref" href="#Compat_Mapd_Binddt0:49"><span class="id" title="binder">!</span></a> <a id="Compat_Mapd_Binddt0:49" class="idref" href="#Compat_Mapd_Binddt0:49"><span class="id" title="binder">Compat_Mapd_Binddt</span></a> <a id="Compat_Mapd_Binddt0:49" class="idref" href="#Compat_Mapd_Binddt0:49"><span class="id" title="binder">nat</span></a> <a id="Compat_Mapd_Binddt0:49" class="idref" href="#Compat_Mapd_Binddt0:49"><span class="id" title="binder">T</span></a> <a id="Compat_Mapd_Binddt0:49" class="idref" href="#Compat_Mapd_Binddt0:49"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Traverse_Binddt0:50" class="idref" href="#Compat_Traverse_Binddt0:50"><span class="id" title="binder">!</span></a> <a id="Compat_Traverse_Binddt0:50" class="idref" href="#Compat_Traverse_Binddt0:50"><span class="id" title="binder">Compat_Traverse_Binddt</span></a> <a id="Compat_Traverse_Binddt0:50" class="idref" href="#Compat_Traverse_Binddt0:50"><span class="id" title="binder">nat</span></a> <a id="Compat_Traverse_Binddt0:50" class="idref" href="#Compat_Traverse_Binddt0:50"><span class="id" title="binder">T</span></a> <a id="Compat_Traverse_Binddt0:50" class="idref" href="#Compat_Traverse_Binddt0:50"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Bind_Binddt0:51" class="idref" href="#Compat_Bind_Binddt0:51"><span class="id" title="binder">!</span></a> <a id="Compat_Bind_Binddt0:51" class="idref" href="#Compat_Bind_Binddt0:51"><span class="id" title="binder">Compat_Bind_Binddt</span></a> <a id="Compat_Bind_Binddt0:51" class="idref" href="#Compat_Bind_Binddt0:51"><span class="id" title="binder">nat</span></a> <a id="Compat_Bind_Binddt0:51" class="idref" href="#Compat_Bind_Binddt0:51"><span class="id" title="binder">T</span></a> <a id="Compat_Bind_Binddt0:51" class="idref" href="#Compat_Bind_Binddt0:51"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Mapdt_Binddt0:52" class="idref" href="#Compat_Mapdt_Binddt0:52"><span class="id" title="binder">!</span></a> <a id="Compat_Mapdt_Binddt0:52" class="idref" href="#Compat_Mapdt_Binddt0:52"><span class="id" title="binder">Compat_Mapdt_Binddt</span></a> <a id="Compat_Mapdt_Binddt0:52" class="idref" href="#Compat_Mapdt_Binddt0:52"><span class="id" title="binder">nat</span></a> <a id="Compat_Mapdt_Binddt0:52" class="idref" href="#Compat_Mapdt_Binddt0:52"><span class="id" title="binder">T</span></a> <a id="Compat_Mapdt_Binddt0:52" class="idref" href="#Compat_Mapdt_Binddt0:52"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Bindd_Binddt0:53" class="idref" href="#Compat_Bindd_Binddt0:53"><span class="id" title="binder">!</span></a> <a id="Compat_Bindd_Binddt0:53" class="idref" href="#Compat_Bindd_Binddt0:53"><span class="id" title="binder">Compat_Bindd_Binddt</span></a> <a id="Compat_Bindd_Binddt0:53" class="idref" href="#Compat_Bindd_Binddt0:53"><span class="id" title="binder">nat</span></a> <a id="Compat_Bindd_Binddt0:53" class="idref" href="#Compat_Bindd_Binddt0:53"><span class="id" title="binder">T</span></a> <a id="Compat_Bindd_Binddt0:53" class="idref" href="#Compat_Bindd_Binddt0:53"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Bindt_Binddt0:54" class="idref" href="#Compat_Bindt_Binddt0:54"><span class="id" title="binder">!</span></a> <a id="Compat_Bindt_Binddt0:54" class="idref" href="#Compat_Bindt_Binddt0:54"><span class="id" title="binder">Compat_Bindt_Binddt</span></a> <a id="Compat_Bindt_Binddt0:54" class="idref" href="#Compat_Bindt_Binddt0:54"><span class="id" title="binder">nat</span></a> <a id="Compat_Bindt_Binddt0:54" class="idref" href="#Compat_Bindt_Binddt0:54"><span class="id" title="binder">T</span></a> <a id="Compat_Bindt_Binddt0:54" class="idref" href="#Compat_Bindt_Binddt0:54"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Monad_inst:55" class="idref" href="#Monad_inst:55"><span class="id" title="binder">Monad_inst</span></a> : ! <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableMonad.html#DecoratedTraversableMonad"><span class="id" title="class">DecoratedTraversableMonad</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Map_U_inst:57" class="idref" href="#Map_U_inst:57"><span class="id" title="binder">Map_U_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Functor.html#Map"><span class="id" title="class">Map</span></a> <a id="U:56" class="idref" href="#U:56"><span class="id" title="binder">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Mapd_U_inst:58" class="idref" href="#Mapd_U_inst:58"><span class="id" title="binder">Mapd_U_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedFunctor.html#Mapd"><span class="id" title="class">Mapd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#U:56"><span class="id" title="variable">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Traverse_U_inst:59" class="idref" href="#Traverse_U_inst:59"><span class="id" title="binder">Traverse_U_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#Traverse"><span class="id" title="class">Traverse</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#U:56"><span class="id" title="variable">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Bind_U_inst:60" class="idref" href="#Bind_U_inst:60"><span class="id" title="binder">Bind_U_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#Bind"><span class="id" title="class">Bind</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#U:56"><span class="id" title="variable">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Mapdt_U_inst:61" class="idref" href="#Mapdt_U_inst:61"><span class="id" title="binder">Mapdt_U_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#Mapdt"><span class="id" title="class">Mapdt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#U:56"><span class="id" title="variable">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Bindd_U_inst:62" class="idref" href="#Bindd_U_inst:62"><span class="id" title="binder">Bindd_U_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedMonad.html#Bindd"><span class="id" title="class">Bindd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#U:56"><span class="id" title="variable">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Bindt_U_inst:63" class="idref" href="#Bindt_U_inst:63"><span class="id" title="binder">Bindt_U_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableMonad.html#Bindt"><span class="id" title="class">Bindt</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#U:56"><span class="id" title="variable">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Binddt_U_inst:64" class="idref" href="#Binddt_U_inst:64"><span class="id" title="binder">Binddt_U_inst</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableMonad.html#Binddt"><span class="id" title="class">Binddt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#U:56"><span class="id" title="variable">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Map_Binddt1:65" class="idref" href="#Compat_Map_Binddt1:65"><span class="id" title="binder">!</span></a> <a id="Compat_Map_Binddt1:65" class="idref" href="#Compat_Map_Binddt1:65"><span class="id" title="binder">Compat_Map_Binddt</span></a> <a id="Compat_Map_Binddt1:65" class="idref" href="#Compat_Map_Binddt1:65"><span class="id" title="binder">nat</span></a> <a id="Compat_Map_Binddt1:65" class="idref" href="#Compat_Map_Binddt1:65"><span class="id" title="binder">T</span></a> <a id="Compat_Map_Binddt1:65" class="idref" href="#Compat_Map_Binddt1:65"><span class="id" title="binder">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Mapd_Binddt1:66" class="idref" href="#Compat_Mapd_Binddt1:66"><span class="id" title="binder">!</span></a> <a id="Compat_Mapd_Binddt1:66" class="idref" href="#Compat_Mapd_Binddt1:66"><span class="id" title="binder">Compat_Mapd_Binddt</span></a> <a id="Compat_Mapd_Binddt1:66" class="idref" href="#Compat_Mapd_Binddt1:66"><span class="id" title="binder">nat</span></a> <a id="Compat_Mapd_Binddt1:66" class="idref" href="#Compat_Mapd_Binddt1:66"><span class="id" title="binder">T</span></a> <a id="Compat_Mapd_Binddt1:66" class="idref" href="#Compat_Mapd_Binddt1:66"><span class="id" title="binder">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Traverse_Binddt1:67" class="idref" href="#Compat_Traverse_Binddt1:67"><span class="id" title="binder">!</span></a> <a id="Compat_Traverse_Binddt1:67" class="idref" href="#Compat_Traverse_Binddt1:67"><span class="id" title="binder">Compat_Traverse_Binddt</span></a> <a id="Compat_Traverse_Binddt1:67" class="idref" href="#Compat_Traverse_Binddt1:67"><span class="id" title="binder">nat</span></a> <a id="Compat_Traverse_Binddt1:67" class="idref" href="#Compat_Traverse_Binddt1:67"><span class="id" title="binder">T</span></a> <a id="Compat_Traverse_Binddt1:67" class="idref" href="#Compat_Traverse_Binddt1:67"><span class="id" title="binder">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Bind_Binddt1:68" class="idref" href="#Compat_Bind_Binddt1:68"><span class="id" title="binder">!</span></a> <a id="Compat_Bind_Binddt1:68" class="idref" href="#Compat_Bind_Binddt1:68"><span class="id" title="binder">Compat_Bind_Binddt</span></a> <a id="Compat_Bind_Binddt1:68" class="idref" href="#Compat_Bind_Binddt1:68"><span class="id" title="binder">nat</span></a> <a id="Compat_Bind_Binddt1:68" class="idref" href="#Compat_Bind_Binddt1:68"><span class="id" title="binder">T</span></a> <a id="Compat_Bind_Binddt1:68" class="idref" href="#Compat_Bind_Binddt1:68"><span class="id" title="binder">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Mapdt_Binddt1:69" class="idref" href="#Compat_Mapdt_Binddt1:69"><span class="id" title="binder">!</span></a> <a id="Compat_Mapdt_Binddt1:69" class="idref" href="#Compat_Mapdt_Binddt1:69"><span class="id" title="binder">Compat_Mapdt_Binddt</span></a> <a id="Compat_Mapdt_Binddt1:69" class="idref" href="#Compat_Mapdt_Binddt1:69"><span class="id" title="binder">nat</span></a> <a id="Compat_Mapdt_Binddt1:69" class="idref" href="#Compat_Mapdt_Binddt1:69"><span class="id" title="binder">T</span></a> <a id="Compat_Mapdt_Binddt1:69" class="idref" href="#Compat_Mapdt_Binddt1:69"><span class="id" title="binder">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Bindd_Binddt1:70" class="idref" href="#Compat_Bindd_Binddt1:70"><span class="id" title="binder">!</span></a> <a id="Compat_Bindd_Binddt1:70" class="idref" href="#Compat_Bindd_Binddt1:70"><span class="id" title="binder">Compat_Bindd_Binddt</span></a> <a id="Compat_Bindd_Binddt1:70" class="idref" href="#Compat_Bindd_Binddt1:70"><span class="id" title="binder">nat</span></a> <a id="Compat_Bindd_Binddt1:70" class="idref" href="#Compat_Bindd_Binddt1:70"><span class="id" title="binder">T</span></a> <a id="Compat_Bindd_Binddt1:70" class="idref" href="#Compat_Bindd_Binddt1:70"><span class="id" title="binder">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_Bindt_Binddt1:71" class="idref" href="#Compat_Bindt_Binddt1:71"><span class="id" title="binder">!</span></a> <a id="Compat_Bindt_Binddt1:71" class="idref" href="#Compat_Bindt_Binddt1:71"><span class="id" title="binder">Compat_Bindt_Binddt</span></a> <a id="Compat_Bindt_Binddt1:71" class="idref" href="#Compat_Bindt_Binddt1:71"><span class="id" title="binder">nat</span></a> <a id="Compat_Bindt_Binddt1:71" class="idref" href="#Compat_Bindt_Binddt1:71"><span class="id" title="binder">T</span></a> <a id="Compat_Bindt_Binddt1:71" class="idref" href="#Compat_Bindt_Binddt1:71"><span class="id" title="binder">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Module_inst:72" class="idref" href="#Module_inst:72"><span class="id" title="binder">Module_inst</span></a> : ! <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableMonad.html#DecoratedTraversableRightPreModule"><span class="id" title="class">DecoratedTraversableRightPreModule</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#U:56"><span class="id" title="variable">U</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">unit</span> := <a class="idref" href="Tealeaves.Misc.NaturalNumbers.html#Monoid_unit_zero"><span class="id" title="instance">Monoid_unit_zero</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">op</span> := <a class="idref" href="Tealeaves.Misc.NaturalNumbers.html#Monoid_op_plus"><span class="id" title="instance">Monoid_op_plus</span></a>)}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="ToSubset_T:73" class="idref" href="#ToSubset_T:73"><span class="id" title="binder">ToSubset_T</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#ToSubset"><span class="id" title="class">ToSubset</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#T:38"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="ToSubset_U:74" class="idref" href="#ToSubset_U:74"><span class="id" title="binder">ToSubset_U</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#ToSubset"><span class="id" title="class">ToSubset</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#U:56"><span class="id" title="variable">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_ToSubset_Traverse0:75" class="idref" href="#Compat_ToSubset_Traverse0:75"><span class="id" title="binder">!</span></a> <a id="Compat_ToSubset_Traverse0:75" class="idref" href="#Compat_ToSubset_Traverse0:75"><span class="id" title="binder">Compat_ToSubset_Traverse</span></a> <a id="Compat_ToSubset_Traverse0:75" class="idref" href="#Compat_ToSubset_Traverse0:75"><span class="id" title="binder">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_ToSubset_Traverse1:76" class="idref" href="#Compat_ToSubset_Traverse1:76"><span class="id" title="binder">!</span></a> <a id="Compat_ToSubset_Traverse1:76" class="idref" href="#Compat_ToSubset_Traverse1:76"><span class="id" title="binder">Compat_ToSubset_Traverse</span></a> <a id="Compat_ToSubset_Traverse1:76" class="idref" href="#Compat_ToSubset_Traverse1:76"><span class="id" title="binder">U</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_ToBatch_Traverse0:77" class="idref" href="#Compat_ToBatch_Traverse0:77"><span class="id" title="binder">!</span></a> <a id="Compat_ToBatch_Traverse0:77" class="idref" href="#Compat_ToBatch_Traverse0:77"><span class="id" title="binder">Compat_ToBatch_Traverse</span></a> <a id="Compat_ToBatch_Traverse0:77" class="idref" href="#Compat_ToBatch_Traverse0:77"><span class="id" title="binder">(</span></a><a id="Compat_ToBatch_Traverse0:77" class="idref" href="#Compat_ToBatch_Traverse0:77"><span class="id" title="binder">T</span></a> <a id="Compat_ToBatch_Traverse0:77" class="idref" href="#Compat_ToBatch_Traverse0:77"><span class="id" title="binder">:=</span></a> <a id="Compat_ToBatch_Traverse0:77" class="idref" href="#Compat_ToBatch_Traverse0:77"><span class="id" title="binder">T</span></a><a id="Compat_ToBatch_Traverse0:77" class="idref" href="#Compat_ToBatch_Traverse0:77"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="Compat_ToBatch_Traverse1:78" class="idref" href="#Compat_ToBatch_Traverse1:78"><span class="id" title="binder">!</span></a> <a id="Compat_ToBatch_Traverse1:78" class="idref" href="#Compat_ToBatch_Traverse1:78"><span class="id" title="binder">Compat_ToBatch_Traverse</span></a> <a id="Compat_ToBatch_Traverse1:78" class="idref" href="#Compat_ToBatch_Traverse1:78"><span class="id" title="binder">(</span></a><a id="Compat_ToBatch_Traverse1:78" class="idref" href="#Compat_ToBatch_Traverse1:78"><span class="id" title="binder">T</span></a> <a id="Compat_ToBatch_Traverse1:78" class="idref" href="#Compat_ToBatch_Traverse1:78"><span class="id" title="binder">:=</span></a> <a id="Compat_ToBatch_Traverse1:78" class="idref" href="#Compat_ToBatch_Traverse1:78"><span class="id" title="binder">U</span></a><a id="Compat_ToBatch_Traverse1:78" class="idref" href="#Compat_ToBatch_Traverse1:78"><span class="id" title="binder">)</span></a>}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab918"></a><h2 class="section">Boring admitted lemmas</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lc_bound" class="idref" href="#lc_bound"><span class="id" title="lemma">lc_bound</span></a>: <span class="id" title="keyword">∀</span> <a id="t:79" class="idref" href="#t:79"><span class="id" title="binder">t</span></a> <a id="e:80" class="idref" href="#e:80"><span class="id" title="binder">e</span></a> <a id="n:81" class="idref" href="#n:81"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.LN.LN.html#LC"><span class="id" title="definition">LC</span></a> (<span class="id" title="var">U</span> := <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#translate.U"><span class="id" title="variable">U</span></a>) <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:79"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#e:80"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#Bd"><span class="id" title="constructor">Bd</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:81"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedContainerFunctor.html#934c3c4b89b2e961cbebf444fa26bd90"><span class="id" title="notation">∈</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedContainerFunctor.html#934c3c4b89b2e961cbebf444fa26bd90"><span class="id" title="notation">d</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:79"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.DB.DB.html#bound"><span class="id" title="definition">bound</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:81"><span class="id" title="variable">n</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#e:80"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">HLC</span> <span class="id" title="var">Hin</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LC"><span class="id" title="definition">LC</span></a>, <a class="idref" href="Tealeaves.Backends.LN.LN.html#LCn"><span class="id" title="definition">LCn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HLC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">HLC</span> <span class="id" title="var">e</span> (<a class="idref" href="Tealeaves.Backends.LN.LN.html#Bd"><span class="id" title="constructor">Bd</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.LN.LN.html#lc_loc"><span class="id" title="definition">lc_loc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HLC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <span class="id" title="keyword">with</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">PeanoNat.Nat.leb_le</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="bound_in_plus" class="idref" href="#bound_in_plus"><span class="id" title="lemma">bound_in_plus</span></a>: <span class="id" title="keyword">∀</span> <a id="n:82" class="idref" href="#n:82"><span class="id" title="binder">n</span></a> <a id="depth:83" class="idref" href="#depth:83"><span class="id" title="binder">depth</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.DB.DB.html#bound"><span class="id" title="definition">bound</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:82"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:83"><span class="id" title="variable">depth</span></a>) <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:83"><span class="id" title="variable">depth</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">depth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.Compare_dec.html#leb_iff_conv"><span class="id" title="lemma">Compare_dec.leb_iff_conv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="toDB_Fr" class="idref" href="#toDB_Fr"><span class="id" title="lemma">toDB_Fr</span></a>: <span class="id" title="keyword">∀</span> (<a id="n:84" class="idref" href="#n:84"><span class="id" title="binder">n</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="a:85" class="idref" href="#a:85"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Backends.LN.Atom.html#atom"><span class="id" title="abbreviation">atom</span></a>) (<a id="k:86" class="idref" href="#k:86"><span class="id" title="binder">k</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#a:85"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:86"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="ix:87" class="idref" href="#ix:87"><span class="id" title="binder">ix</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc"><span class="id" title="definition">toDB_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:86"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:84"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#a:85"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#ix:87"><span class="id" title="variable">ix</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc"><span class="id" title="definition">toDB_loc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lookup</span> <span class="id" title="var">atom</span> <span class="id" title="var">a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">key</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_key_lookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab919"></a><h2 class="section">Supporting lemmas</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="whole_key" class="idref" href="#whole_key"><span class="id" title="definition">whole_key</span></a> (<a id="t:88" class="idref" href="#t:88"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#translate.U"><span class="id" title="variable">U</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>) (<a id="k:89" class="idref" href="#k:89"><span class="id" title="binder">k</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="x:90" class="idref" href="#x:90"><span class="id" title="binder">x</span></a> : <a class="idref" href="Tealeaves.Backends.LN.Atom.html#atom"><span class="id" title="abbreviation">atom</span></a>, <a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:90"><span class="id" title="variable">x</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:88"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:90"><span class="id" title="variable">x</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:89"><span class="id" title="variable">k</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab920"></a><h2 class="section">LN to DB to LN</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="to_DB_from_key_total" class="idref" href="#to_DB_from_key_total"><span class="id" title="lemma">to_DB_from_key_total</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:91" class="idref" href="#t:91"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#translate.U"><span class="id" title="variable">U</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>) (<a id="k:92" class="idref" href="#k:92"><span class="id" title="binder">k</span></a> : <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#whole_key"><span class="id" title="definition">whole_key</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:91"><span class="id" title="variable">t</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:92"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="t':93" class="idref" href="#t':93"><span class="id" title="binder">t'</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#translate.U"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_from_key"><span class="id" title="definition">toDB_from_key</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:92"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:91"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t':93"><span class="id" title="variable">t'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_from_key"><span class="id" title="definition">toDB_from_key</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.DecoratedTraversableFunctor.html#mapdt_through_runBatch"><span class="id" title="lemma">mapdt_through_runBatch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#whole_key"><span class="id" title="definition">whole_key</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#element_of"><span class="id" title="definition">element_of</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.TraversableFunctor.html#tosubset_through_runBatch2"><span class="id" title="lemma">tosubset_through_runBatch2</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Adapters.KleisliToCoalgebraic.DecoratedTraversableFunctor.html#toBatch6_toBatch"><span class="id" title="lemma">toBatch6_toBatch</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="Tealeaves.Classes.Coalgebraic.DecoratedTraversableFunctor.html#toBatch6"><span class="id" title="definition">toBatch6</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">cbv</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_rw2"><span class="id" title="lemma">runBatch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span>: (<span class="id" title="keyword">∀</span> <a id="x:95" class="idref" href="#x:95"><span class="id" title="binder">x</span></a> : <a class="idref" href="Tealeaves.Backends.LN.Atom.html#atom"><span class="id" title="abbreviation">atom</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> (@<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="keyword">Type</span> <span class="id" title="keyword">Type</span> (<a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="Tealeaves.Functors.Constant.html#Map_const"><span class="id" title="instance">Map_const</span></a> (<a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="Tealeaves.Functors.Constant.html#Mult_const"><span class="id" title="instance">Mult_const</span></a> (<a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (@<a class="idref" href="Tealeaves.Misc.Subset.html#Monoid_op_subset"><span class="id" title="instance">Monoid_op_subset</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="Tealeaves.Functors.Constant.html#Pure_const"><span class="id" title="instance">Pure_const</span></a> (<a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (@<a class="idref" href="Tealeaves.Misc.Subset.html#Monoid_unit_subset"><span class="id" title="instance">Monoid_unit_subset</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> <a class="idref" href="Tealeaves.Misc.Subset.html#Notations.::tealeaves_scope:'subset'"><span class="id" title="notation">subset</span></a> <a class="idref" href="Tealeaves.Functors.Subset.html#Return_subset"><span class="id" title="instance">Return_subset</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="Tealeaves.Functors.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>) <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="Tealeaves.Classes.Kleisli.Comonad.html#extract"><span class="id" title="definition">extract</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#prod"><span class="id" title="inductive">prod</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a class="idref" href="Tealeaves.Functors.Reader.html#Extract_reader"><span class="id" title="instance">Extract_reader</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>) <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:94"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:94"><span class="id" title="variable">x</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <span class="id" title="var">k</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hin</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hyp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span> <span class="id" title="var">Hfeq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">depth</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_Fr"><span class="id" title="lemma">toDB_Fr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">e</span> <span class="id" title="var">depth</span> <span class="id" title="var">a</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">H_a_in_k</span>: <span class="id" title="var">a</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">e</span> <span class="id" title="var">H_a_in_k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ix</span> <span class="id" title="var">Hixeq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hixeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LN_DB_roundtrip_loc1" class="idref" href="#LN_DB_roundtrip_loc1"><span class="id" title="lemma">LN_DB_roundtrip_loc1</span></a>: <span class="id" title="keyword">∀</span> <a id="k:96" class="idref" href="#k:96"><span class="id" title="binder">k</span></a> <a id="depth:97" class="idref" href="#depth:97"><span class="id" title="binder">depth</span></a> <a id="x:98" class="idref" href="#x:98"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:98"><span class="id" title="variable">x</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:96"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_loc"><span class="id" title="definition">toLN_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:96"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:97"><span class="id" title="variable">depth</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="ix:99" class="idref" href="#ix:99"><span class="id" title="binder">ix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#ix:99"><span class="id" title="variable">ix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:97"><span class="id" title="variable">depth</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_lookup_atom"><span class="id" title="definition">key_lookup_atom</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:96"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:98"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:98"><span class="id" title="variable">x</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lookup</span> <span class="id" title="var">atom</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">key</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_key_lookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> ?<span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>, <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_loc"><span class="id" title="definition">toLN_loc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#bound_in_plus"><span class="id" title="lemma">bound_in_plus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">depth</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">depth</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">n</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_bijection1"><span class="id" title="lemma">key_bijection1</span></a> <span class="id" title="var">x</span> <span class="id" title="var">k</span> <span class="id" title="var">n</span> <span class="id" title="var">H_key_lookup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LN_DB_roundtrip_loc" class="idref" href="#LN_DB_roundtrip_loc"><span class="id" title="lemma">LN_DB_roundtrip_loc</span></a>: <span class="id" title="keyword">∀</span> <a id="t:100" class="idref" href="#t:100"><span class="id" title="binder">t</span></a> <a id="k:101" class="idref" href="#k:101"><span class="id" title="binder">k</span></a> <a id="depth:102" class="idref" href="#depth:102"><span class="id" title="binder">depth</span></a> <a id="l:103" class="idref" href="#l:103"><span class="id" title="binder">l</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.LN.LN.html#LC"><span class="id" title="definition">LC</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:100"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#whole_key"><span class="id" title="definition">whole_key</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:100"><span class="id" title="variable">t</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:101"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:102"><span class="id" title="variable">depth</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#l:103"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedContainerFunctor.html#934c3c4b89b2e961cbebf444fa26bd90"><span class="id" title="notation">∈</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedContainerFunctor.html#934c3c4b89b2e961cbebf444fa26bd90"><span class="id" title="notation">d</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:100"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_loc"><span class="id" title="definition">toLN_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:101"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">⋆6</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc"><span class="id" title="definition">toDB_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:101"><span class="id" title="variable">k</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">depth</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">l</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>) <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#l:103"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hlc</span> <span class="id" title="var">Hwhole</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#kc6_spec"><span class="id" title="lemma">kc6_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#whole_key"><span class="id" title="definition">whole_key</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwhole</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span>|<span class="id" title="var">n</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc_rw2"><span class="id" title="lemma">toDB_loc_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_lookup_atom"><span class="id" title="definition">key_lookup_atom</span></a> <span class="id" title="var">k</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedContainerFunctor.html#ind_implies_in"><span class="id" title="lemma">ind_implies_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hwhole</span> <span class="id" title="var">x</span> <span class="id" title="var">Hin</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#LN_DB_roundtrip_loc1"><span class="id" title="lemma">LN_DB_roundtrip_loc1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc_rw1"><span class="id" title="lemma">toDB_loc_rw1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> ?<span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_loc"><span class="id" title="definition">toLN_loc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#lc_bound"><span class="id" title="lemma">lc_bound</span></a> <span class="id" title="var">t</span> <span class="id" title="var">depth</span> <span class="id" title="var">n</span> <span class="id" title="var">Hlc</span> <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LN_DB_roundtrip" class="idref" href="#LN_DB_roundtrip"><span class="id" title="lemma">LN_DB_roundtrip</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:104" class="idref" href="#t:104"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#translate.U"><span class="id" title="variable">U</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#LN"><span class="id" title="inductive">LN</span></a>) (<a id="k:105" class="idref" href="#k:105"><span class="id" title="binder">k</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key"><span class="id" title="definition">key</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:106" class="idref" href="#x:106"><span class="id" title="binder">x</span></a> : <a class="idref" href="Tealeaves.Backends.LN.Atom.html#atom"><span class="id" title="abbreviation">atom</span></a>, <a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:106"><span class="id" title="variable">x</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:104"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#x:106"><span class="id" title="variable">x</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:105"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.LN.LN.html#LC"><span class="id" title="definition">LC</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:104"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>) (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_from_key"><span class="id" title="definition">toLN_from_key</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:105"><span class="id" title="variable">k</span></a>) (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_from_key"><span class="id" title="definition">toDB_from_key</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:105"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:104"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:104"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_from_key"><span class="id" title="definition">toLN_from_key</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_from_key"><span class="id" title="definition">toDB_from_key</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">t</span> <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableMonad.html#mapdt_mapdt"><span class="id" title="lemma">mapdt_mapdt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">t</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>) <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Theory.DecoratedTraversableFunctor.html#mapdt_respectful_pure"><span class="id" title="lemma">mapdt_respectful_pure</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">G</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#LN_DB_roundtrip_loc"><span class="id" title="lemma">LN_DB_roundtrip_loc</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab921"></a><h2 class="section">DB to LN to DB</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="DB_LN_roundtrip_loc1" class="idref" href="#DB_LN_roundtrip_loc1"><span class="id" title="lemma">DB_LN_roundtrip_loc1</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:107" class="idref" href="#t:107"><span class="id" title="binder">t</span></a>:<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#translate.U"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="k:108" class="idref" href="#k:108"><span class="id" title="binder">k</span></a> <a id="gap:109" class="idref" href="#gap:109"><span class="id" title="binder">gap</span></a> <a id="depth:110" class="idref" href="#depth:110"><span class="id" title="binder">depth</span></a> (<a id="n:111" class="idref" href="#n:111"><span class="id" title="binder">n</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#unique"><span class="id" title="definition">unique</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:108"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.DB.DB.html#cl_at"><span class="id" title="definition">cl_at</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#gap:109"><span class="id" title="variable">gap</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:107"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#contains_ix_upto"><span class="id" title="definition">contains_ix_upto</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#gap:109"><span class="id" title="variable">gap</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:108"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.DB.DB.html#bound"><span class="id" title="definition">bound</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:111"><span class="id" title="variable">n</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:110"><span class="id" title="variable">depth</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:110"><span class="id" title="variable">depth</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:111"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedContainerFunctor.html#934c3c4b89b2e961cbebf444fa26bd90"><span class="id" title="notation">∈</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedContainerFunctor.html#934c3c4b89b2e961cbebf444fa26bd90"><span class="id" title="notation">d</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:107"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc"><span class="id" title="definition">toDB_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:108"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:110"><span class="id" title="variable">depth</span></a>) (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Backends.LN.LN.html#Fr"><span class="id" title="constructor">Fr</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_lookup_index"><span class="id" title="definition">key_lookup_index</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:108"><span class="id" title="variable">k</span></a> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:111"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:110"><span class="id" title="variable">depth</span></a>))) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:111"><span class="id" title="variable">n</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Huniq</span> <span class="id" title="var">Hclosed</span> <span class="id" title="var">Hcont</span> <span class="id" title="var">Hbound</span> <span class="id" title="var">Helt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_loc"><span class="id" title="definition">toLN_loc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hcont_minus</span>: <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#contains_ix_upto"><span class="id" title="definition">contains_ix_upto</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">depth</span>) <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> <span class="id" title="var">Hbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.Key.html#contains_ix_upto"><span class="id" title="definition">contains_ix_upto</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;assert&nbsp;(n&nbsp;-&nbsp;depth&nbsp;&lt;=&nbsp;gap).*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.DB.DB.html#cl_at"><span class="id" title="definition">cl_at</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hclosed</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hclosed</span> <span class="id" title="var">depth</span> <span class="id" title="var">n</span> <span class="id" title="var">Helt</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Helt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.DB.DB.html#cl_at_loc"><span class="id" title="definition">cl_at_loc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hclosed</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.DB.DB.html#bound_within"><span class="id" title="definition">bound_within</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hclosed</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">PeanoNat.Nat.ltb_lt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hclosed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.DB.DB.html#bound"><span class="id" title="definition">bound</span></a>, <a class="idref" href="Tealeaves.Backends.DB.DB.html#bound_within"><span class="id" title="definition">bound_within</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbound</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb_ge"><span class="id" title="lemma">PeanoNat.Nat.ltb_ge</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbound</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">depth</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <span class="id" title="keyword">with</span> <span class="id" title="var">depth</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbound</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_lookup_ix_Some2"><span class="id" title="lemma">key_lookup_ix_Some2</span></a> <span class="id" title="var">k</span> (<span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a><span class="id" title="var">depth</span>) <span class="id" title="var">Hcont_minus</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">Halookup</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Halookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> ?<span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> ?<span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#key_bijection2"><span class="id" title="lemma">key_bijection2</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Halookup</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Halookup</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Halookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> ?<span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">depth</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">depth</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">n</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="DB_LN_roundtrip_loc" class="idref" href="#DB_LN_roundtrip_loc"><span class="id" title="lemma">DB_LN_roundtrip_loc</span></a>: <span class="id" title="keyword">∀</span> (<a id="t:112" class="idref" href="#t:112"><span class="id" title="binder">t</span></a>:<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#translate.U"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="k:113" class="idref" href="#k:113"><span class="id" title="binder">k</span></a> <a id="gap:114" class="idref" href="#gap:114"><span class="id" title="binder">gap</span></a> <a id="depth:115" class="idref" href="#depth:115"><span class="id" title="binder">depth</span></a> (<a id="n:116" class="idref" href="#n:116"><span class="id" title="binder">n</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#unique"><span class="id" title="definition">unique</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:113"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.DB.DB.html#cl_at"><span class="id" title="definition">cl_at</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#gap:114"><span class="id" title="variable">gap</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:112"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#contains_ix_upto"><span class="id" title="definition">contains_ix_upto</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#gap:114"><span class="id" title="variable">gap</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:113"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#depth:115"><span class="id" title="variable">depth</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:116"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedContainerFunctor.html#934c3c4b89b2e961cbebf444fa26bd90"><span class="id" title="notation">∈</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedContainerFunctor.html#934c3c4b89b2e961cbebf444fa26bd90"><span class="id" title="notation">d</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:112"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_loc"><span class="id" title="definition">toDB_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:113"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">⋆6</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_loc"><span class="id" title="definition">toLN_loc</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:113"><span class="id" title="variable">k</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">depth</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">n</span></a><a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#cd9e9d6ab98bea9a2f6b006aeacc29ab"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>) <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#n:116"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Huniq</span> <span class="id" title="var">Hclosed</span> <span class="id" title="var">Hcont</span> <span class="id" title="var">Helt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Pure_compose"><span class="id" title="instance">Pure_compose</span></a> @<a class="idref" href="Tealeaves.Functors.Option.html#Pure_option"><span class="id" title="instance">Pure_option</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableFunctor.html#kc6_spec"><span class="id" title="lemma">kc6_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_loc"><span class="id" title="definition">toLN_loc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bound_induction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#DB_LN_roundtrip_loc1"><span class="id" title="lemma">DB_LN_roundtrip_loc1</span></a> <span class="id" title="var">t</span> <span class="id" title="var">k</span> <span class="id" title="var">gap</span> <span class="id" title="var">depth</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Huniq</span> <span class="id" title="var">Hclosed</span> <span class="id" title="var">Hcont</span> <span class="id" title="var">Hbound</span> <span class="id" title="var">Helt</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="DB_LN_roundtrip" class="idref" href="#DB_LN_roundtrip"><span class="id" title="lemma">DB_LN_roundtrip</span></a>: <span class="id" title="keyword">∀</span> <a id="k:117" class="idref" href="#k:117"><span class="id" title="binder">k</span></a> <a id="gap:118" class="idref" href="#gap:118"><span class="id" title="binder">gap</span></a> (<a id="t:119" class="idref" href="#t:119"><span class="id" title="binder">t</span></a>: <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#translate.U"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#unique"><span class="id" title="definition">unique</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:117"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.DB.DB.html#cl_at"><span class="id" title="definition">cl_at</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#gap:118"><span class="id" title="variable">gap</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:119"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Backends.Adapters.Key.html#contains_ix_upto"><span class="id" title="definition">contains_ix_upto</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#gap:118"><span class="id" title="variable">gap</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:117"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>) (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_from_key"><span class="id" title="definition">toDB_from_key</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:117"><span class="id" title="variable">k</span></a>) (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_from_key"><span class="id" title="definition">toLN_from_key</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#k:117"><span class="id" title="variable">k</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:119"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#t:119"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toLN_from_key"><span class="id" title="definition">toLN_from_key</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#toDB_from_key"><span class="id" title="definition">toDB_from_key</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">t</span> <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.DecoratedTraversableMonad.html#mapdt_mapdt"><span class="id" title="lemma">mapdt_mapdt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">t</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>) <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Theory.DecoratedTraversableFunctor.html#mapdt_respectful_pure"><span class="id" title="lemma">mapdt_respectful_pure</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">G</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#DB_LN_roundtrip_loc"><span class="id" title="lemma">DB_LN_roundtrip_loc</span></a> <span class="id" title="var">t</span> <span class="id" title="var">k</span> <span class="id" title="var">gap</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Backends.Adapters.LNtoDB.html#translate"><span class="id" title="section">translate</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
