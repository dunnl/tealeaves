<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Tealeaves.Examples.STLC.SyntaxCategorical</h1>

<div class="code">
<span class="comment">(*|<br/>
##############################<br/>
Formalizing&nbsp;STLC&nbsp;with&nbsp;Tealeaves<br/>
##############################<br/>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br/>
Algebraic&nbsp;presentation<br/>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br/>
<br/>
This&nbsp;file&nbsp;gives&nbsp;a&nbsp;tutorial&nbsp;on&nbsp;proving&nbsp;the&nbsp;decorated&nbsp;traversable&nbsp;monad<br/>
laws&nbsp;the&nbsp;for&nbsp;the&nbsp;syntax&nbsp;of&nbsp;the&nbsp;simply-typed&nbsp;lambda&nbsp;calculus&nbsp;(STLC).<br/>
<br/>
..&nbsp;contents::&nbsp;Table&nbsp;of&nbsp;Contents<br/>
&nbsp;&nbsp;&nbsp;:depth:&nbsp;2<br/>
<br/>
============================<br/>
Imports&nbsp;and&nbsp;setup<br/>
============================<br/>
<br/>
Since&nbsp;we&nbsp;are&nbsp;using&nbsp;the&nbsp;algebraic&nbsp;typeclass&nbsp;hierarchy,&nbsp;we&nbsp;import&nbsp;modules&nbsp;under<br/>
the&nbsp;namespaces&nbsp;``Classes.Algebraic``&nbsp;and&nbsp;``Theory.Algebraic.``<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedTraversableMonad.html#"><span class="id" title="library">Classes.Categorical.DecoratedTraversableMonad</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Monoid.html#"><span class="id" title="library">Classes.Monoid</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Misc.NaturalNumbers.html#"><span class="id" title="library">Misc.NaturalNumbers</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#Notations"><span class="id" title="module">Categorical.TraversableFunctor.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ListNotations"><span class="id" title="module">List.ListNotations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Misc.Strength.html#Notations"><span class="id" title="module">Strength.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#Notations"><span class="id" title="module">Monoid.Notations</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">All</span> <span class="id" title="keyword">Variables</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Set</span> <span class="id" title="keyword">Implicit</span> <span class="id" title="var">Arguments</span>.<br/>

<br/>
<span class="comment">(*|<br/>
=====================<br/>
Language&nbsp;Definition<br/>
=====================<br/>
<br/>
The&nbsp;first&nbsp;step&nbsp;with&nbsp;Tealeaves&nbsp;is&nbsp;to&nbsp;define&nbsp;the&nbsp;syntax&nbsp;of&nbsp;the<br/>
language.&nbsp;We&nbsp;take&nbsp;a&nbsp;type&nbsp;``base_typ``&nbsp;of&nbsp;types&nbsp;we&nbsp;consider&nbsp;primitive<br/>
(a/k/a&nbsp;atomic).&nbsp;The&nbsp;set&nbsp;of&nbsp;simple&nbsp;types&nbsp;is&nbsp;built&nbsp;up&nbsp;by&nbsp;forming&nbsp;arrows<br/>
between&nbsp;types,&nbsp;starting&nbsp;with&nbsp;base&nbsp;types.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;STLC&nbsp;is&nbsp;defined<br/>
with&nbsp;three&nbsp;constructors&nbsp;as&nbsp;usual.<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Parameter</span> <a id="base_typ" class="idref" href="#base_typ"><span class="id" title="axiom">base_typ</span></a> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="typ" class="idref" href="#typ"><span class="id" title="inductive">typ</span></a> :=<br/>
| <a id="base" class="idref" href="#base"><span class="id" title="constructor">base</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#base_typ"><span class="id" title="axiom">base_typ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ:2"><span class="id" title="inductive">typ</span></a><br/>
| <a id="arr" class="idref" href="#arr"><span class="id" title="constructor">arr</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ:2"><span class="id" title="inductive">typ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ:2"><span class="id" title="inductive">typ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ:2"><span class="id" title="inductive">typ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#base"><span class="id" title="constructor">base</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#base"><span class="id" title="constructor">:</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#base"><span class="id" title="constructor">base_typ</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#base"><span class="id" title="constructor">&gt;-&gt;</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#base"><span class="id" title="constructor">typ</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;we&nbsp;give&nbsp;more&nbsp;informative&nbsp;names&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">Lam</span></span>'s&nbsp;arguments<br/>
&nbsp;than&nbsp;Coq&nbsp;would&nbsp;infer&nbsp;otherwise&nbsp;*)</span><br/>
<span class="id" title="keyword">Inductive</span> <a id="term" class="idref" href="#term"><span class="id" title="inductive">term</span></a> (<a id="A:4" class="idref" href="#A:4"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) :=<br/>
| <a id="Var" class="idref" href="#Var"><span class="id" title="constructor">Var</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:4"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term:5"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:4"><span class="id" title="variable">A</span></a><br/>
| <a id="Lam" class="idref" href="#Lam"><span class="id" title="constructor">Lam</span></a> : <span class="id" title="keyword">∀</span> (<a id="X:7" class="idref" href="#X:7"><span class="id" title="binder">X</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ"><span class="id" title="inductive">typ</span></a>) (<a id="t:8" class="idref" href="#t:8"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term:5"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:4"><span class="id" title="variable">A</span></a>), <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term:5"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:4"><span class="id" title="variable">A</span></a><br/>
| <a id="Ap" class="idref" href="#Ap"><span class="id" title="constructor">Ap</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term:5"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:4"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term:5"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:4"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term:5"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:4"><span class="id" title="variable">A</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="Notations" class="idref" href="#Notations"><span class="id" title="module">Notations</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="2c8166c7722c7d0335d04aeebfd2bff1" class="idref" href="#2c8166c7722c7d0335d04aeebfd2bff1"><span class="id" title="notation">&quot;</span></a>'λ' X ⋅ body" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">X</span> <span class="id" title="var">body</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 45) : <span class="id" title="var">tealeaves_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="5a7b1d2c9be9fd84bb9b154a7deb9d0d" class="idref" href="#5a7b1d2c9be9fd84bb9b154a7deb9d0d"><span class="id" title="notation">&quot;</span></a>[ t1 ] [ t2 ]" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40) : <span class="id" title="var">tealeaves_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="b3149f06f0d1c8d9b2b912a411674b05" class="idref" href="#b3149f06f0d1c8d9b2b912a411674b05"><span class="id" title="notation">&quot;</span></a>A ⟹ B" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#arr"><span class="id" title="constructor">arr</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40) : <span class="id" title="var">tealeaves_scope</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Notations"><span class="id" title="module">Notations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Notations"><span class="id" title="module">Notations</span></a>.<br/>

<br/>
<span class="comment">(*|<br/>
For&nbsp;convenience,&nbsp;we&nbsp;define&nbsp;an&nbsp;extremely&nbsp;rudimentary&nbsp;Ltac&nbsp;tactic&nbsp;that<br/>
will&nbsp;solve&nbsp;the&nbsp;most&nbsp;trivial&nbsp;inductive&nbsp;steps&nbsp;automatically.&nbsp;Namely,<br/>
they&nbsp;will&nbsp;attempt&nbsp;to&nbsp;solve&nbsp;a&nbsp;goal&nbsp;in&nbsp;one&nbsp;step&nbsp;by&nbsp;rewriting&nbsp;with&nbsp;the<br/>
hypotheses&nbsp;in&nbsp;context&nbsp;(up&nbsp;to&nbsp;two&nbsp;times),&nbsp;then&nbsp;calling&nbsp;``reflexivity``.<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">basic</span> <span class="id" title="var">t</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>;<br/>
&nbsp;&nbsp;[ <span class="id" title="tactic">reflexivity</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">H</span> : <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>; <span class="id" title="tactic">reflexivity</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">H</span> : <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>; <span class="id" title="tactic">reflexivity</span> ].<br/>

<br/>
<span class="comment">(*|<br/>
=====================<br/>
Functor&nbsp;instances<br/>
=====================<br/>
<br/>
Plain&nbsp;Functor&nbsp;instance<br/>
========================<br/>
<br/>
Note&nbsp;that&nbsp;our&nbsp;datatype&nbsp;``term``&nbsp;is&nbsp;parameterized&nbsp;by&nbsp;a&nbsp;single&nbsp;type<br/>
variable.&nbsp;The&nbsp;first&nbsp;thing&nbsp;we&nbsp;must&nbsp;show&nbsp;is&nbsp;that&nbsp;``term``&nbsp;is&nbsp;actually<br/>
*functor*&nbsp;in&nbsp;this&nbsp;type&nbsp;argument.<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="map_term" class="idref" href="#map_term"><span class="id" title="definition">map_term</span></a> {<a id="A:9" class="idref" href="#A:9"><span class="id" title="binder">A</span></a> <a id="B:10" class="idref" href="#B:10"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:11" class="idref" href="#f:11"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:9"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#B:10"><span class="id" title="variable">B</span></a>) (<a id="t:12" class="idref" href="#t:12"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:9"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#B:10"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:12"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:11"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">X</span> <span class="id" title="var">t</span> ⇒ <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">X</span> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term:13"><span class="id" title="definition">map_term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:11"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:12"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> ⇒ <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term:13"><span class="id" title="definition">map_term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:11"><span class="id" title="variable">f</span></a> <span class="id" title="var">t1</span>) (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term:13"><span class="id" title="definition">map_term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:11"><span class="id" title="variable">f</span></a> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Map_term" class="idref" href="#Map_term"><span class="id" title="instance">Map_term</span></a> : <a class="idref" href="Tealeaves.Classes.Functor.html#Map"><span class="id" title="class">Map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term"><span class="id" title="definition">map_term</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="map_id" class="idref" href="#map_id"><span class="id" title="lemma">map_id</span></a> : <span class="id" title="keyword">∀</span> <a id="A:15" class="idref" href="#A:15"><span class="id" title="binder">A</span></a>, <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:15"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">transparent</span> <span class="id" title="var">tcs</span>. <span class="id" title="var">basic</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="map_map" class="idref" href="#map_map"><span class="id" title="lemma">map_map</span></a> : <span class="id" title="keyword">∀</span> <a id="A:16" class="idref" href="#A:16"><span class="id" title="binder">A</span></a> <a id="B:17" class="idref" href="#B:17"><span class="id" title="binder">B</span></a> <a id="C:18" class="idref" href="#C:18"><span class="id" title="binder">C</span></a> (<a id="f:19" class="idref" href="#f:19"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:16"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#B:17"><span class="id" title="variable">B</span></a>) (<a id="g:20" class="idref" href="#g:20"><span class="id" title="binder">g</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#B:17"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#C:18"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#g:20"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:19"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#g:20"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:19"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">transparent</span> <span class="id" title="var">tcs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">basic</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Functor_term" class="idref" href="#Functor_term"><span class="id" title="instance">Functor_term</span></a> : <a class="idref" href="Tealeaves.Classes.Functor.html#Functor"><span class="id" title="class">Functor</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_id"><span class="id" title="method">fun_map_id</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_id"><span class="id" title="lemma">map_id</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_map"><span class="id" title="lemma">map_map</span></a>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="comment">(*|<br/>
Rewriting&nbsp;rules&nbsp;for&nbsp;``map``<br/>
-----------------------------<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="map_term_rewrite" class="idref" href="#map_term_rewrite"><span class="id" title="section">map_term_rewrite</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="f:23" class="idref" href="#f:23"><span class="id" title="binder">f</span></a> : <a id="A:21" class="idref" href="#A:21"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="B:22" class="idref" href="#B:22"><span class="id" title="binder">B</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="map_term_ap" class="idref" href="#map_term_ap"><span class="id" title="lemma">map_term_ap</span></a> : <span class="id" title="keyword">∀</span> (<a id="t1:24" class="idref" href="#t1:24"><span class="id" title="binder">t1</span></a> <a id="t2:25" class="idref" href="#t2:25"><span class="id" title="binder">t2</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term_rewrite.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term_rewrite.f"><span class="id" title="variable">f</span></a> (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term_rewrite.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t1:24"><span class="id" title="variable">t1</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t2:25"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term_rewrite.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term_rewrite.f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t1:24"><span class="id" title="variable">t1</span></a>) (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term_rewrite.f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t2:25"><span class="id" title="variable">t2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term_rewrite"><span class="id" title="section">map_term_rewrite</span></a>.<br/>

<br/>
<span class="comment">(*|<br/>
Decorated&nbsp;Functor&nbsp;instance<br/>
===========================<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="dec_term" class="idref" href="#dec_term"><span class="id" title="definition">dec_term</span></a> {<a id="A:26" class="idref" href="#A:26"><span class="id" title="binder">A</span></a>} (<a id="t:27" class="idref" href="#t:27"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:26"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:26"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:27"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Monoid.html#118a0ae73788a324a953caf13a2d25ca"><span class="id" title="notation">Ƶ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> τ <span class="id" title="var">t</span> ⇒ <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> τ (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_term:28"><span class="id" title="definition">dec_term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:27"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> ⇒ <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_term:28"><span class="id" title="definition">dec_term</span></a> <span class="id" title="var">t1</span>) (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_term:28"><span class="id" title="definition">dec_term</span></a> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Decorate_term" class="idref" href="#Decorate_term"><span class="id" title="instance">Decorate_term</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#Decorate"><span class="id" title="class">Decorate</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_term"><span class="id" title="definition">dec_term</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="dec_natural" class="idref" href="#dec_natural"><span class="id" title="lemma">dec_natural</span></a> : <span class="id" title="keyword">∀</span> <a id="A:30" class="idref" href="#A:30"><span class="id" title="binder">A</span></a> <a id="B:31" class="idref" href="#B:31"><span class="id" title="binder">B</span></a> (<a id="f:32" class="idref" href="#f:32"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:30"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#B:31"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:32"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:32"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> -[<span class="id" title="var">shift</span>]. <span class="id" title="var">fequal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec_helper_1"><span class="id" title="lemma">dec_helper_1</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="var">fequal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="Tealeaves.Classes.Functor.html#Natural"><span class="id" title="class">Natural</span></a> (@<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Compose.html#Functor_compose"><span class="id" title="instance">Functor_compose</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_natural"><span class="id" title="lemma">dec_natural</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="dec_extract" class="idref" href="#dec_extract"><span class="id" title="lemma">dec_extract</span></a> : <span class="id" title="keyword">∀</span> <a id="A:33" class="idref" href="#A:33"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) (<a class="idref" href="Tealeaves.Classes.Kleisli.Comonad.html#extract"><span class="id" title="definition">extract</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:33"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> -[<span class="id" title="var">shift</span>]. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec_helper_2"><span class="id" title="lemma">dec_helper_2</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="var">fequal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="dec_dec" class="idref" href="#dec_dec"><span class="id" title="lemma">dec_dec</span></a> : <span class="id" title="keyword">∀</span> <a id="A:34" class="idref" href="#A:34"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.Comonad.html#cojoin"><span class="id" title="definition">cojoin</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:34"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> -[<span class="id" title="var">shift</span>]. <span class="id" title="var">fequal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec_helper_3"><span class="id" title="lemma">dec_helper_3</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="DecoratedFunctor_term" class="idref" href="#DecoratedFunctor_term"><span class="id" title="instance">DecoratedFunctor_term</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#DecoratedFunctor"><span class="id" title="class">DecoratedFunctor</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_dec"><span class="id" title="lemma">dec_dec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_extract"><span class="id" title="lemma">dec_extract</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*|<br/>
Rewriting&nbsp;rules&nbsp;for&nbsp;``dec``<br/>
-----------------------------<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="dec_term_rewrite" class="idref" href="#dec_term_rewrite"><span class="id" title="section">dec_term_rewrite</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="f:37" class="idref" href="#f:37"><span class="id" title="binder">f</span></a> : <a id="A:35" class="idref" href="#A:35"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="B:36" class="idref" href="#B:36"><span class="id" title="binder">B</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dec_term1" class="idref" href="#dec_term1"><span class="id" title="lemma">dec_term1</span></a> : <span class="id" title="keyword">∀</span> (<a id="x:38" class="idref" href="#x:38"><span class="id" title="binder">x</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_term_rewrite.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#x:38"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#x:38"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dec_term21" class="idref" href="#dec_term21"><span class="id" title="lemma">dec_term21</span></a> : <span class="id" title="keyword">∀</span> (<a id="X:39" class="idref" href="#X:39"><span class="id" title="binder">X</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ"><span class="id" title="inductive">typ</span></a>) (<a id="t:40" class="idref" href="#t:40"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_term_rewrite.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:39"><span class="id" title="variable">X</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:40"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:39"><span class="id" title="variable">X</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:40"><span class="id" title="variable">t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dec_term22" class="idref" href="#dec_term22"><span class="id" title="lemma">dec_term22</span></a> : <span class="id" title="keyword">∀</span> (<a id="X:41" class="idref" href="#X:41"><span class="id" title="binder">X</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ"><span class="id" title="inductive">typ</span></a>) (<a id="t:42" class="idref" href="#t:42"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_term_rewrite.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:41"><span class="id" title="variable">X</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:42"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:41"><span class="id" title="variable">X</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:42"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dec_term3" class="idref" href="#dec_term3"><span class="id" title="lemma">dec_term3</span></a> : <span class="id" title="keyword">∀</span> (<a id="t1:43" class="idref" href="#t1:43"><span class="id" title="binder">t1</span></a> <a id="t2:44" class="idref" href="#t2:44"><span class="id" title="binder">t2</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_term_rewrite.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t1:43"><span class="id" title="variable">t1</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t2:44"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t1:43"><span class="id" title="variable">t1</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t2:44"><span class="id" title="variable">t2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_term_rewrite"><span class="id" title="section">dec_term_rewrite</span></a>.<br/>

<br/>
<span class="comment">(*|<br/>
Traversable&nbsp;Functor&nbsp;instance<br/>
==============================<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Notations"><span class="id" title="module">Applicative.Notations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="dist_term" class="idref" href="#dist_term"><span class="id" title="definition">dist_term</span></a> `{<a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">Map</span></a> <a id="H:46" class="idref" href="#H:46"><span class="id" title="binder">F</span></a>} `{<a id="H0:47" class="idref" href="#H0:47"><span class="id" title="binder">Pure</span></a> <a id="H0:47" class="idref" href="#H0:47"><span class="id" title="binder">F</span></a>} `{<a id="H1:48" class="idref" href="#H1:48"><span class="id" title="binder">Mult</span></a> <a id="H1:48" class="idref" href="#H1:48"><span class="id" title="binder">F</span></a>} {<a id="A:49" class="idref" href="#A:49"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:50" class="idref" href="#t:50"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#F:45"><span class="id" title="variable">F</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:49"><span class="id" title="variable">A</span></a>)) : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#F:45"><span class="id" title="variable">F</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:49"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:50"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:49"><span class="id" title="variable">A</span></a>) <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">X</span> <span class="id" title="var">t</span> ⇒ <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term:51"><span class="id" title="definition">dist_term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:50"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> ⇒ <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:49"><span class="id" title="variable">A</span></a>)<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term:51"><span class="id" title="definition">dist_term</span></a> <span class="id" title="var">t1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term:51"><span class="id" title="definition">dist_term</span></a> <span class="id" title="var">t2</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#ApplicativeDist"><span class="id" title="class">ApplicativeDist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term"><span class="id" title="definition">dist_term</span></a>.<br/>

<br/>
<span class="comment">(*|<br/>
Rewriting&nbsp;rules&nbsp;for&nbsp;``dist``<br/>
-----------------------------<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="term_dist_rewrite" class="idref" href="#term_dist_rewrite"><span class="id" title="section">term_dist_rewrite</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H2:57" class="idref" href="#H2:57"><span class="id" title="binder">Applicative</span></a> <a id="H2:57" class="idref" href="#H2:57"><span class="id" title="binder">G</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> (<a id="term_dist_rewrite.A" class="idref" href="#term_dist_rewrite.A"><span class="id" title="variable">A</span></a> : <span class="id" title="keyword">Type</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_term_var_1" class="idref" href="#dist_term_var_1"><span class="id" title="lemma">dist_term_var_1</span></a> : <span class="id" title="keyword">∀</span> (<a id="x:59" class="idref" href="#x:59"><span class="id" title="binder">x</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#x:59"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#x:59"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_term_var_2" class="idref" href="#dist_term_var_2"><span class="id" title="lemma">dist_term_var_2</span></a> : <span class="id" title="keyword">∀</span> (<a id="x:60" class="idref" href="#x:60"><span class="id" title="binder">x</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#x:60"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#x:60"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_term_lam_1" class="idref" href="#dist_term_lam_1"><span class="id" title="lemma">dist_term_lam_1</span></a> : <span class="id" title="keyword">∀</span> (<a id="X:61" class="idref" href="#X:61"><span class="id" title="binder">X</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ"><span class="id" title="inductive">typ</span></a>) (<a id="t:62" class="idref" href="#t:62"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:61"><span class="id" title="variable">X</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:62"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:61"><span class="id" title="variable">X</span></a>) <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:62"><span class="id" title="variable">t</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_term_lam_2" class="idref" href="#dist_term_lam_2"><span class="id" title="lemma">dist_term_lam_2</span></a> : <span class="id" title="keyword">∀</span> (<a id="X:63" class="idref" href="#X:63"><span class="id" title="binder">X</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ"><span class="id" title="inductive">typ</span></a>) (<a id="t:64" class="idref" href="#t:64"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:63"><span class="id" title="variable">X</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:64"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:63"><span class="id" title="variable">X</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:64"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_term_ap_1" class="idref" href="#dist_term_ap_1"><span class="id" title="lemma">dist_term_ap_1</span></a> : <span class="id" title="keyword">∀</span> (<a id="t1:65" class="idref" href="#t1:65"><span class="id" title="binder">t1</span></a> <a id="t2:66" class="idref" href="#t2:66"><span class="id" title="binder">t2</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t1:65"><span class="id" title="variable">t1</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t2:66"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>)<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t1:65"><span class="id" title="variable">t1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t2:66"><span class="id" title="variable">t2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_term_ap_2" class="idref" href="#dist_term_ap_2"><span class="id" title="lemma">dist_term_ap_2</span></a> : <span class="id" title="keyword">∀</span> (<a id="t1:67" class="idref" href="#t1:67"><span class="id" title="binder">t1</span></a> <a id="t2:68" class="idref" href="#t2:68"><span class="id" title="binder">t2</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t1:67"><span class="id" title="variable">t1</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t2:68"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.A"><span class="id" title="variable">A</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t1:67"><span class="id" title="variable">t1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#0c61d814eb957f5c7288668d24a48d19"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t2:68"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_ap_1"><span class="id" title="lemma">dist_term_ap_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term_dist_rewrite"><span class="id" title="section">term_dist_rewrite</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="dist_term_properties" class="idref" href="#dist_term_properties"><span class="id" title="section">dist_term_properties</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H2:73" class="idref" href="#H2:73"><span class="id" title="binder">Applicative</span></a> <a id="H2:73" class="idref" href="#H2:73"><span class="id" title="binder">G</span></a>}.<br/>

<br/>
<span class="comment">(*|<br/>
Naturality&nbsp;of&nbsp;``dist``<br/>
-----------------------------<br/>
|*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_natural_term" class="idref" href="#dist_natural_term"><span class="id" title="lemma">dist_natural_term</span></a> : <span class="id" title="keyword">∀</span> `(<a id="f:76" class="idref" href="#f:76"><span class="id" title="binder">f</span></a> : <a id="A:74" class="idref" href="#A:74"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="B:75" class="idref" href="#B:75"><span class="id" title="binder">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_properties.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:76"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_properties.G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_properties.G"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_properties.G"><span class="id" title="variable">G</span></a>) <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:76"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.Compose.html#Map_compose"><span class="id" title="instance">Map_compose</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> 2(<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_properties.G"><span class="id" title="variable">G</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> 2(<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_ap_2"><span class="id" title="lemma">dist_term_ap_2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term_ap"><span class="id" title="lemma">map_term_ap</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_ap_2"><span class="id" title="lemma">dist_term_ap_2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHt1</span>, &lt;- <span class="id" title="var">IHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_properties.G"><span class="id" title="variable">G</span></a> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_properties.G"><span class="id" title="variable">G</span></a> <span class="id" title="var">t1</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="dist_Natural_term" class="idref" href="#dist_Natural_term"><span class="id" title="instance">dist_Natural_term</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#Natural"><span class="id" title="class">Natural</span></a> (@<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_natural_term"><span class="id" title="lemma">dist_natural_term</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*|<br/>
Traversal&nbsp;laws<br/>
-----------------------------<br/>
|*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_unit_term" class="idref" href="#dist_unit_term"><span class="id" title="lemma">dist_unit_term</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:77" class="idref" href="#A:77"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<span class="id" title="keyword">fun</span> <a id="A:78" class="idref" href="#A:78"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:78"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:77"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt1</span>, <span class="id" title="var">IHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Set</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_linear_term" class="idref" href="#dist_linear_term"><span class="id" title="lemma">dist_linear_term</span></a> : <span class="id" title="keyword">∀</span> `{<a id="H6:83" class="idref" href="#H6:83"><span class="id" title="binder">Applicative</span></a> <a id="H6:83" class="idref" href="#H6:83"><span class="id" title="binder">G1</span></a>} `{<a id="H10:88" class="idref" href="#H10:88"><span class="id" title="binder">Applicative</span></a> <a id="H10:88" class="idref" href="#H10:88"><span class="id" title="binder">G2</span></a>} (<a id="A:89" class="idref" href="#A:89"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G1:79"><span class="id" title="variable">G1</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G2:84"><span class="id" title="variable">G2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G1:79"><span class="id" title="variable">G1</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G2:84"><span class="id" title="variable">G2</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G1:79"><span class="id" title="variable">G1</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G2:84"><span class="id" title="variable">G2</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:89"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">a</span> <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G1</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <span class="id" title="var">G1</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#fa652b8c8091f60ed5a3b127754ad981"><span class="id" title="notation">○</span></a> <span class="id" title="var">G2</span>) (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">X</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <span class="id" title="var">G1</span>) (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <span class="id" title="var">G2</span>) (@<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">A</span> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_ap_2"><span class="id" title="lemma">dist_term_ap_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_ap_2"><span class="id" title="lemma">dist_term_ap_2</span></a> (<span class="id" title="var">G</span> := <span class="id" title="var">G1</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#fa652b8c8091f60ed5a3b127754ad981"><span class="id" title="notation">○</span></a> <span class="id" title="var">G2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> ((<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G1</span> <span class="id" title="var">t1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_compose2"><span class="id" title="lemma">ap_compose2</span></a> <span class="id" title="var">G2</span> <span class="id" title="var">G1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt1</span>, <span class="id" title="var">IHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G1</span> <span class="id" title="var">t1</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <span class="id" title="var">G1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>. <span class="id" title="var">ext</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Unset</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dist_morph_term" class="idref" href="#dist_morph_term"><span class="id" title="lemma">dist_morph_term</span></a> : <span class="id" title="keyword">∀</span> `{<a id="H9:99" class="idref" href="#H9:99"><span class="id" title="binder">ApplicativeMorphism</span></a> <a id="H9:99" class="idref" href="#H9:99"><span class="id" title="binder">G1</span></a> <a id="H9:99" class="idref" href="#H9:99"><span class="id" title="binder">G2</span></a> <a id="H9:99" class="idref" href="#H9:99"><span class="id" title="binder">ϕ</span></a>} <a id="A:100" class="idref" href="#A:100"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G2:91"><span class="id" title="variable">G2</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#6307173c42738e6c23cde203c5054f29"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:100"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#6307173c42738e6c23cde203c5054f29"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:100"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G1:90"><span class="id" title="variable">G1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#appmor_natural"><span class="id" title="method">appmor_natural</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#appmor_natural"><span class="id" title="method">appmor_natural</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#map_term_ap"><span class="id" title="lemma">map_term_ap</span></a>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_ap_2"><span class="id" title="lemma">dist_term_ap_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_ap_2"><span class="id" title="lemma">dist_term_ap_2</span></a>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_morphism_1"><span class="id" title="lemma">ap_morphism_1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">appmor_natural</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_term_properties"><span class="id" title="section">dist_term_properties</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="TraversableFunctor_term" class="idref" href="#TraversableFunctor_term"><span class="id" title="instance">TraversableFunctor_term</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#TraversableFunctor"><span class="id" title="class">TraversableFunctor</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist_natural"><span class="id" title="method">dist_natural</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_Natural_term"><span class="id" title="instance">dist_Natural_term</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist_morph"><span class="id" title="method">dist_morph</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_morph_term"><span class="id" title="lemma">dist_morph_term</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist_linear"><span class="id" title="method">dist_linear</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_linear_term"><span class="id" title="lemma">dist_linear_term</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist_unit"><span class="id" title="method">dist_unit</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dist_unit_term"><span class="id" title="lemma">dist_unit_term</span></a>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="comment">(*|<br/>
Decorated-Traversable&nbsp;Functor&nbsp;instance<br/>
=======================================<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="dtfun_compat_term1" class="idref" href="#dtfun_compat_term1"><span class="id" title="lemma">dtfun_compat_term1</span></a> : <span class="id" title="keyword">∀</span> `{<a id="H2:105" class="idref" href="#H2:105"><span class="id" title="binder">Applicative</span></a> <a id="H2:105" class="idref" href="#H2:105"><span class="id" title="binder">G</span></a>} (<a id="X:106" class="idref" href="#X:106"><span class="id" title="binder">X</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#typ"><span class="id" title="inductive">typ</span></a>) {<a id="A:107" class="idref" href="#A:107"><span class="id" title="binder">A</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:106"><span class="id" title="variable">X</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">δ</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">term</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">G</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">A</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">A</span></a><a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G:101"><span class="id" title="variable">G</span></a>) (<a class="idref" href="Tealeaves.Misc.Product.html#curry"><span class="id" title="definition">curry</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) 1 <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#X:106"><span class="id" title="variable">X</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">δ</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">term</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">G</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>). <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="dtfun_compat_term" class="idref" href="#dtfun_compat_term"><span class="id" title="lemma">dtfun_compat_term</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<span class="id" title="keyword">∀</span> `{<a id="H2:112" class="idref" href="#H2:112"><span class="id" title="binder">Applicative</span></a> <a id="H2:112" class="idref" href="#H2:112"><span class="id" title="binder">G</span></a>} {<a id="A:113" class="idref" href="#A:113"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G:108"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Misc.Strength.html#strength"><span class="id" title="definition">strength</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G:108"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:113"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G:108"><span class="id" title="variable">G</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G:108"><span class="id" title="variable">G</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">a</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> 2(<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">do</span> 2 (<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reassociate</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Categorical.Writer.html#incr_spec"><span class="id" title="lemma">incr_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.Categorical.Writer.html#strength_shift1"><span class="id" title="lemma">strength_shift1</span></a> (<span class="id" title="var">W</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>); <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> ?<span class="id" title="var">f</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <span class="id" title="var">G</span>) <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> ((<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Misc.Strength.html#8319486a697349ec48617741566c6caf"><span class="id" title="notation">σ</span></a> <a class="idref" href="Tealeaves.Misc.Strength.html#8319486a697349ec48617741566c6caf"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Misc.Strength.html#8319486a697349ec48617741566c6caf"><span class="id" title="notation">F</span></a> <a class="idref" href="Tealeaves.Misc.Strength.html#8319486a697349ec48617741566c6caf"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tealeaves.Misc.Strength.html#8319486a697349ec48617741566c6caf"><span class="id" title="notation">G</span></a><a class="idref" href="Tealeaves.Misc.Strength.html#8319486a697349ec48617741566c6caf"><span class="id" title="notation">)</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">t</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_compose_in_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Classes.Functor.html#natural"><span class="id" title="method">natural</span></a> (<span class="id" title="var">ϕ</span> := @<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">_</span> <span class="id" title="var">G</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">δ</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">term</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">G</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">t</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">δ</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">term</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">G</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">t</span></a>) <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.Compose.html#Map_compose"><span class="id" title="instance">Map_compose</span></a>; <span class="id" title="tactic">rewrite</span> 2(<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>. <span class="id" title="var">ext</span> <span class="id" title="var">t'</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">t'</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Categorical.Writer.html#incr_spec"><span class="id" title="lemma">incr_spec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt1</span>, <span class="id" title="var">IHt2</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure_ap_map"><span class="id" title="lemma">pure_ap_map</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>). <span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">δ</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">term</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">G</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#9263a77e734c94f2b051f8ed56661316"><span class="id" title="notation">t1</span></a>) <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> : <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedTraversableFunctor.html#DecoratedTraversableFunctor"><span class="id" title="class">DecoratedTraversableFunctor</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedTraversableFunctor.html#dtfun_compat"><span class="id" title="method">dtfun_compat</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dtfun_compat_term"><span class="id" title="lemma">dtfun_compat_term</span></a> |}.<br/>

<br/>
<span class="comment">(*|<br/>
=====================<br/>
Monad&nbsp;instances<br/>
=====================<br/>
<br/>
Plain&nbsp;Monad&nbsp;instance<br/>
=====================<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="join_term" class="idref" href="#join_term"><span class="id" title="definition">join_term</span></a> {<a id="A:114" class="idref" href="#A:114"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="t:115" class="idref" href="#t:115"><span class="id" title="binder">t</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:114"><span class="id" title="variable">A</span></a>)) : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:114"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:115"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">t'</span> ⇒ <span class="id" title="var">t'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">X</span> <span class="id" title="var">t</span> ⇒ <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Lam"><span class="id" title="constructor">Lam</span></a> <span class="id" title="var">X</span> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#join_term:116"><span class="id" title="definition">join_term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#t:115"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> ⇒ <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Ap"><span class="id" title="constructor">Ap</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#join_term:116"><span class="id" title="definition">join_term</span></a> <span class="id" title="var">t1</span>) (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#join_term:116"><span class="id" title="definition">join_term</span></a> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Ret_term" class="idref" href="#Ret_term"><span class="id" title="instance">Ret_term</span></a> : <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#Return"><span class="id" title="class">Return</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Join_term" class="idref" href="#Join_term"><span class="id" title="instance">Join_term</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#Join"><span class="id" title="class">Join</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#join_term"><span class="id" title="definition">join_term</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="ret_natural" class="idref" href="#ret_natural"><span class="id" title="lemma">ret_natural</span></a> : <span class="id" title="keyword">∀</span> <a id="A:118" class="idref" href="#A:118"><span class="id" title="binder">A</span></a> <a id="B:119" class="idref" href="#B:119"><span class="id" title="binder">B</span></a> (<a id="f:120" class="idref" href="#f:120"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:118"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#B:119"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:120"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>)  <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:120"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="join_natural" class="idref" href="#join_natural"><span class="id" title="lemma">join_natural</span></a> : <span class="id" title="keyword">∀</span> <a id="A:121" class="idref" href="#A:121"><span class="id" title="binder">A</span></a> <a id="B:122" class="idref" href="#B:122"><span class="id" title="binder">B</span></a> (<a id="f:123" class="idref" href="#f:123"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:121"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#B:122"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:123"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#f:123"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">transparent</span> <span class="id" title="var">tcs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">basic</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="Tealeaves.Classes.Functor.html#Natural"><span class="id" title="class">Natural</span></a> (@<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#ret_natural"><span class="id" title="lemma">ret_natural</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="Tealeaves.Classes.Functor.html#Natural"><span class="id" title="class">Natural</span></a> (@<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#join_natural"><span class="id" title="lemma">join_natural</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="join_ret" class="idref" href="#join_ret"><span class="id" title="lemma">join_ret</span></a> : <span class="id" title="keyword">∀</span> <a id="A:124" class="idref" href="#A:124"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:124"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="join_map_ret" class="idref" href="#join_map_ret"><span class="id" title="lemma">join_map_ret</span></a> : <span class="id" title="keyword">∀</span> <a id="A:125" class="idref" href="#A:125"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) (<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:125"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">transparent</span> <span class="id" title="var">tcs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="var">basic</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="join_join" class="idref" href="#join_join"><span class="id" title="lemma">join_join</span></a> : <span class="id" title="keyword">∀</span> <a id="A:126" class="idref" href="#A:126"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:126"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">transparent</span> <span class="id" title="var">tcs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="var">basic</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Monad_term" class="idref" href="#Monad_term"><span class="id" title="instance">Monad_term</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#Monad"><span class="id" title="class">Monad</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#mon_join_ret"><span class="id" title="method">mon_join_ret</span></a> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#join_ret"><span class="id" title="lemma">join_ret</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#mon_join_map_ret"><span class="id" title="method">mon_join_map_ret</span></a> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#join_map_ret"><span class="id" title="lemma">join_map_ret</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#mon_join_join"><span class="id" title="method">mon_join_join</span></a> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#join_join"><span class="id" title="lemma">join_join</span></a> |}.<br/>

<br/>
<span class="comment">(*|<br/>
Decorated&nbsp;Monad&nbsp;instance<br/>
===========================<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="dec_ret" class="idref" href="#dec_ret"><span class="id" title="lemma">dec_ret</span></a> : <span class="id" title="keyword">∀</span> <a id="A:127" class="idref" href="#A:127"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:127"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <a class="idref" href="Tealeaves.Classes.Monoid.html#118a0ae73788a324a953caf13a2d25ca"><span class="id" title="notation">Ƶ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="dec_join" class="idref" href="#dec_join"><span class="id" title="lemma">dec_join</span></a> : <span class="id" title="keyword">∀</span> <a id="A:128" class="idref" href="#A:128"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#A:128"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#dec"><span class="id" title="definition">dec</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> -[<span class="id" title="var">shift</span>]. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedFunctor.html#shift_zero"><span class="id" title="lemma">shift_zero</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> -[<span class="id" title="var">shift</span>]. <span class="id" title="var">fequal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.DecoratedMonad.html#dec_helper_4"><span class="id" title="lemma">dec_helper_4</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="DecoratedMonad_term" class="idref" href="#DecoratedMonad_term"><span class="id" title="instance">DecoratedMonad_term</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedMonad.html#DecoratedMonad"><span class="id" title="class">DecoratedMonad</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_ret"><span class="id" title="lemma">dec_ret</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#dec_join"><span class="id" title="lemma">dec_join</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*|<br/>
Traversable&nbsp;Monad&nbsp;instance<br/>
==============================<br/>
|*)</span><br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="trvmon_ret_term" class="idref" href="#trvmon_ret_term"><span class="id" title="lemma">trvmon_ret_term</span></a> `{<a id="H2:133" class="idref" href="#H2:133"><span class="id" title="binder">Applicative</span></a> <a id="H2:133" class="idref" href="#H2:133"><span class="id" title="binder">G</span></a>} :<br/>
&nbsp;&nbsp;`(<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G:129"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G:129"><span class="id" title="variable">G</span></a> <span class="id" title="var">A</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.Monad.html#ret"><span class="id" title="definition">ret</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Categories.TraversableFunctor.html#"><span class="id" title="library">Categories.TraversableFunctor</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Set</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>
<span class="id" title="keyword">Theorem</span> <a id="trvmon_join_term" class="idref" href="#trvmon_join_term"><span class="id" title="lemma">trvmon_join_term</span></a> `{<a id="H2:139" class="idref" href="#H2:139"><span class="id" title="binder">Applicative</span></a> <a id="H2:139" class="idref" href="#H2:139"><span class="id" title="binder">G</span></a>} :<br/>
&nbsp;&nbsp;`(<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G:135"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>)) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a>) <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#G:135"><span class="id" title="variable">G</span></a> (<span class="id" title="var">A</span> := <span class="id" title="var">A</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ext</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#join"><span class="id" title="definition">join</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#Var"><span class="id" title="constructor">Var</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">A</span>)) <span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_id"><span class="id" title="method">fun_map_id</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#join_ret"><span class="id" title="lemma">join_ret</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Categories.TraversableFunctor.html#Dist_compose"><span class="id" title="instance">Dist_compose</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G</span>) <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt1</span>, <span class="id" title="var">IHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Categories.TraversableFunctor.html#Dist_compose"><span class="id" title="instance">Dist_compose</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>. <span class="id" title="var">compose</span> <span class="id" title="var">near</span> ((<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G</span>) <span class="id" title="var">t1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> ((<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.TraversableFunctor.html#dist"><span class="id" title="definition">dist</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> <span class="id" title="var">G</span>) <span class="id" title="var">t1</span>))) <span class="id" title="var">on</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Set</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="TraversableMonad_term" class="idref" href="#TraversableMonad_term"><span class="id" title="instance">TraversableMonad_term</span></a> : <a class="idref" href="Tealeaves.Classes.Categorical.TraversableMonad.html#TraversableMonad"><span class="id" title="class">TraversableMonad</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Tealeaves.Classes.Categorical.TraversableMonad.html#trvmon_ret"><span class="id" title="method">trvmon_ret</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#trvmon_ret_term"><span class="id" title="lemma">trvmon_ret_term</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.TraversableMonad.html#trvmon_join"><span class="id" title="method">trvmon_join</span></a> := @<a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#trvmon_join_term"><span class="id" title="lemma">trvmon_join_term</span></a>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="comment">(*|<br/>
Decorated-Traversable&nbsp;Monad&nbsp;instance<br/>
=======================================<br/>
<br/>
Our&nbsp;hard&nbsp;work&nbsp;has&nbsp;paid&nbsp;off---a&nbsp;DTM&nbsp;is&nbsp;defined&nbsp;as&nbsp;the&nbsp;combination&nbsp;of&nbsp;the&nbsp;typeclass&nbsp;instances&nbsp;we&nbsp;have<br/>
given&nbsp;so&nbsp;far,&nbsp;so&nbsp;we&nbsp;can&nbsp;let&nbsp;Coq&nbsp;infer&nbsp;the&nbsp;DTM&nbsp;instance&nbsp;for&nbsp;us.<br/>
|*)</span><br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> : <a class="idref" href="Tealeaves.Classes.Categorical.DecoratedTraversableMonad.html#DecoratedTraversableMonad"><span class="id" title="class">DecoratedTraversableMonad</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="Tealeaves.Examples.STLC.SyntaxCategorical.html#term"><span class="id" title="inductive">term</span></a> := {}.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
