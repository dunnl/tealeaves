<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.21.2: https://docutils.sourceforge.io/" />
<title>Multifunctor.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.16.0+0.16.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves <span class="kn">Require Export</span>
  Classes.Functor
  Functors.Writer.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves.Categories <span class="kn">Require Export</span>
  TypeFamily.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Product.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> TypeFamily.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Generalizable Variables</span> <span class="nf">A</span> B C F G.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">assume_some_index_type</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{ix : Index}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Type</span> (k : K).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** * Multisorted functors *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">MultisortedFunctor_operation</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      (<span class="nv">F</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">MMap</span> : <span class="kt">Type</span> :=
      mmap : <span class="kr">forall</span> {<span class="nv">A</span> <span class="nv">B</span>}, (A -k-&gt; B) -&gt; F A -&gt; F B.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">MultisortedFunctor_operation</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Multifunctor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      (<span class="nv">F</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
      `{MMap F}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">MultisortedFunctor</span> :=
      { mfun_mmap_id :
          `(mmap F kid = @id (F A));
        mfun_mmap_mmap : <span class="kr">forall</span> `(f : A -k-&gt; B) `(g : B -k-&gt; C),
            mmap F g ‚àò mmap F f = mmap F (g ‚óª f);
      }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Multifunctor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Natural transformations *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">MultisortedNatural</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      `{MultisortedFunctor F}
      `{MultisortedFunctor G}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">MultisortedNatural</span> (<span class="nv">Œ∑</span> : F ‚áí G) :=
      mnaturality : <span class="kr">forall</span> {<span class="nv">A</span> <span class="nv">B</span>} (<span class="nv">f</span> : K -&gt; A -&gt; B),
        mmap G f ‚àò Œ∑ A = Œ∑ B ‚àò mmap F f.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">MultisortedNatural</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Identity multisorted functors at some &lt;&lt;k : K&gt;&gt; *)</span>
  <span class="sd">(** For each &lt;&lt;k : K&gt;&gt; one obtains a K-sorted functor whose object</span>
<span class="sd">        map is the identity operation and whose &lt;&lt;mmap&gt;&gt; treats</span>
<span class="sd">        values &lt;&lt;a : A&gt;&gt; as if tagged by &lt;&lt;k : K&gt;&gt;. *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">MultisortedFunctor_identity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      (<span class="nv">k</span> : K).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">#[<span class="kn">global</span>] <span class="kn">Instance</span> <span class="nf">MMap_I_k</span> : MMap (<span class="kr">fun</span> <span class="nv">A</span> =&gt; A) :=
      <span class="kr">fun</span> `(f : A -k-&gt; B) =&gt; f k.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">#[<span class="kn">global</span>, program] <span class="kn">Instance</span> <span class="nf">MultisortedFunctor_I_k</span> :
      @MultisortedFunctor (<span class="kr">fun</span> <span class="nv">A</span> =&gt; A) MMap_I_k.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">MultisortedFunctor_identity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Composition with ordinary functors *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[<span class="kn">global</span>] <span class="kn">Instance</span> <span class="nf">MMap_compose_Map</span>
   `{MMap F2} `{Map F1} : MMap (F2 ‚àò F1) :=
    <span class="kr">fun</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">f</span> =&gt; mmap F2 (<span class="kr">fun</span> (<span class="nv">k</span> : K) (<span class="nv">a</span> : F1 A) =&gt; map (F := F1) (f k) a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">MultisortedFunctor_compose_Functor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      `{MultisortedFunctor F} `{Functor G}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk0"><span class="kn">Lemma</span> <span class="nf">mmap_id_compose_map</span> : <span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>),
        mmap (F ‚àò G) kid = @id (F (G A)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>, mmap (F ‚àò G) kid = id</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>, mmap (F ‚àò G) kid = id</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap (F ‚àò G) kid = id</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk3">ext x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap (F ‚àò G) kid x = id x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk4"><span class="nb">cbv</span> <span class="kr">in</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F (G A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap (F ‚àò G) kid x = id x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk5">unfold_ops @MMap_compose_Map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F (G A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map (kid k) a) x = id x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk6"><span class="nb">change</span> (<span class="kr">fun</span> (<span class="nv">k</span> : K) (<span class="nv">a</span> : G A) =&gt; map (F := G) (kid k) a)
        <span class="kr">with</span> (<span class="kr">fun</span> (<span class="nv">_</span> : K) (<span class="nv">a</span> : G A) =&gt; map (F := G) id a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F (G A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (<span class="kr">fun</span> (<span class="nv">_</span> : K) (<span class="nv">a</span> : G A) =&gt; map id a) x = id x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (fun_map_id), (mfun_mmap_id F).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk7"><span class="kn">Lemma</span> <span class="nf">mmap_mmap_compose_map</span> : <span class="kr">forall</span> `(f : A -k-&gt; B) `(g : B -k-&gt; C),
        mmap (F ‚àò G) g ‚àò mmap (F ‚àò G) f = mmap (F ‚àò G) (g ‚óª f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -k-&gt; B) (<span class="nv">C</span> : <span class="kt">Type</span>)
  (<span class="nv">g</span> : B -k-&gt; C),
mmap (F ‚àò G) g ‚àò mmap (F ‚àò G) f = mmap (F ‚àò G) (g ‚óª f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -k-&gt; B) (<span class="nv">C</span> : <span class="kt">Type</span>)
  (<span class="nv">g</span> : B -k-&gt; C),
mmap (F ‚àò G) g ‚àò mmap (F ‚àò G) f = mmap (F ‚àò G) (g ‚óª f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk9">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap (F ‚àò G) g ‚àò mmap (F ‚àò G) f = mmap (F ‚àò G) (g ‚óª f)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chka">ext t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mmap (F ‚àò G) g ‚àò mmap (F ‚àò G) f) t =
mmap (F ‚àò G) (g ‚óª f) t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chkb"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap (F ‚óã G) g (mmap (F ‚óã G) f t) =
mmap (F ‚óã G) (g ‚óª f) t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chkc">unfold_ops @MMap_compose_Map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G B) =&gt; map (g k) a)
  (mmap F (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map (f k) a) t) =
mmap F (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map ((g ‚óª f) k) a) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chkd">compose near t on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mmap F (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G B) =&gt; map (g k) a)
 ‚àò mmap F (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map (f k) a)) t =
mmap F (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map ((g ‚óª f) k) a) t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chke"><span class="nb">rewrite</span> (mfun_mmap_mmap F).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F
  ((<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G B) =&gt; map (g k) a)
   ‚óª (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map (f k) a)) t =
mmap F (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map ((g ‚óª f) k) a) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chkf">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G B) =&gt; map (g k) a)
‚óª (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map (f k) a) =
(<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map ((g ‚óª f) k) a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk10">ext k x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>G A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G B) =&gt; map (g k) a)
 ‚óª (<span class="kr">fun</span> <span class="nv">k</span> (<span class="nv">a</span> : G A) =&gt; map (f k) a)) k x =
map ((g ‚óª f) k) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk11"><span class="nb">unfold</span> vec_compose, compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>G A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (g k) (map (f k) x) = map (g k ‚óã f k) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk12">compose near x on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>map_instance</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Functor G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -k-&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -k-&gt; C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>(F ‚àò G) A</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>G A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map (g k) ‚àò map (f k)) x = map (g k ‚óã f k) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (fun_map_map).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">#[<span class="kn">global</span>] <span class="kn">Instance</span> <span class="nf">MultisortedFunctor_compose_Functor</span> :
      MultisortedFunctor (F ‚àò G) :=
      {| mfun_mmap_id := mmap_id_compose_map;
         mfun_mmap_mmap := @mmap_mmap_compose_map;
      |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">MultisortedFunctor_compose_Functor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Tensorial strength *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">tensorial_strength</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      (<span class="nv">F</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
      `{MultisortedFunctor F}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">mstrength</span> {<span class="nv">B</span> <span class="nv">A</span>} : B * F A -&gt; F (B * A) :=
      <span class="kr">fun</span> &#39;(b, x) =&gt; mmap F (<span class="kr">fun</span> <span class="nv">k</span> =&gt; pair b) x.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk13"><span class="kn">Lemma</span> <span class="nf">strength_extract</span> {<span class="nv">W</span> : <span class="kt">Type</span>} {<span class="nv">A</span> : <span class="kt">Type</span>} :
      mmap F (const (extract (W := (W √ó)))) ‚àò mstrength (B:=W) (A:=A) =
      extract (W := (W √ó)) (A := F A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>W, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (const extract) ‚àò mstrength = extract</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk14"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>W, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (const extract) ‚àò mstrength = extract</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk15"><span class="nb">unfold</span> mstrength.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>W, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (const extract)
‚àò (<span class="kr">fun</span> &#39;(b, x) =&gt; mmap F (<span class="kr">fun</span> <span class="nv">_</span> : K =&gt; pair b) x) =
extract</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk16">ext [w t].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>W, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>F A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mmap F (const extract)
 ‚àò (<span class="kr">fun</span> &#39;(b, x) =&gt; mmap F (<span class="kr">fun</span> <span class="nv">_</span> : K =&gt; pair b) x))
  (w, t) = extract (w, t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk17"><span class="nb">unfold</span> compose; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>W, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>F A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (const extract)
  (mmap F (<span class="kr">fun</span> <span class="nv">_</span> : K =&gt; pair w) t) = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk18">compose near t on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>W, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>F A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mmap F (const extract) ‚àò mmap F (<span class="kr">fun</span> <span class="nv">_</span> : K =&gt; pair w))
  t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (mfun_mmap_mmap F), (mfun_mmap_id F).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">tensorial_strength</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** * Single-sorted maps, [mapk] *)</span>
  <span class="sd">(******************************************************************************)</span>

  <span class="sd">(** ** Identity and composition laws for [mapk] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">mapk</span> {<span class="nv">A</span>} <span class="nv">F</span> `{! MMap F} : K -&gt; (A -&gt; A) -&gt; F A -&gt; F A :=
    <span class="kr">fun</span> <span class="nv">k</span> <span class="nv">f</span> =&gt; mmap F (tgt k f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">F</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
    `{MultisortedFunctor F}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk19"><span class="kn">Lemma</span> <span class="nf">mapk_id</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">A</span>,
      mapk F k id = @id (F A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>, mapk F k id = id</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk1a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>, mapk F k id = id</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk1b">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mapk F k id = id</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk1c"><span class="nb">unfold</span> mapk.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (tgt k id) = id</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> tgt_id, (mfun_mmap_id F).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk1d"><span class="kn">Lemma</span> <span class="nf">mapk_mapk_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> `(f : A -&gt; A) `(g : A -&gt; A),
      mapk F k g ‚àò mapk F k f = mapk F k (g ‚àò f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : A -&gt; A),
mapk F k g ‚àò mapk F k f = mapk F k (g ‚àò f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk1e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : A -&gt; A),
mapk F k g ‚àò mapk F k f = mapk F k (g ‚àò f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk1f">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>A -&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mapk F k g ‚àò mapk F k f = mapk F k (g ‚àò f)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk20"><span class="nb">unfold</span> mapk.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>A -&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (tgt k g) ‚àò mmap F (tgt k f) =
mmap F (tgt k (g ‚àò f))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (mfun_mmap_mmap F), tgt_tgt_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk21"><span class="kn">Lemma</span> <span class="nf">mapk_mapk_neq</span> : <span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> `(f : A -&gt; A) `(g : A -&gt; A),
      k1 &lt;&gt; k2 -&gt; mapk F k2 g ‚àò mapk F k1 f = mapk F k1 f ‚àò mapk F k2 g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : A -&gt; A),
k1 &lt;&gt; k2 -&gt;
mapk F k2 g ‚àò mapk F k1 f = mapk F k1 f ‚àò mapk F k2 g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk22"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : A -&gt; A),
k1 &lt;&gt; k2 -&gt;
mapk F k2 g ‚àò mapk F k1 f = mapk F k1 f ‚àò mapk F k2 g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk23">introv p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>A -&gt; A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(k1 &lt;&gt; k2)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mapk F k2 g ‚àò mapk F k1 f = mapk F k1 f ‚àò mapk F k2 g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk24"><span class="nb">unfold</span> mapk.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>A -&gt; A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(k1 &lt;&gt; k2)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (tgt k2 g) ‚àò mmap F (tgt k1 f) =
mmap F (tgt k1 f) ‚àò mmap F (tgt k2 g)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="multifunctor-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="multifunctor-v-chk25"><span class="nb">rewrite</span> <span class="mi">2</span>(mfun_mmap_mmap F).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MMap F</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultisortedFunctor F</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>A -&gt; A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(k1 &lt;&gt; k2)%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mmap F (tgt k2 g ‚óª tgt k1 f) =
mmap F (tgt k1 f ‚óª tgt k2 g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> tgt_tgt_neq; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">assume_some_index_type</span>.</span></span></pre>
</div>
</div></body>
</html>
