<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.21.2: https://docutils.sourceforge.io/" />
<title>Multisorted locally nameless infrastructure</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.16.0+0.16.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document" id="multisorted-locally-nameless-infrastructure">
<h1 class="title">Multisorted locally nameless infrastructure</h1>
<h2 class="subtitle" id="basic-properties-of-operations">Basic properties of operations</h2>

<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves.Backends.LN <span class="kn">Require Import</span>
  Atom AtomSet.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves.Misc <span class="kn">Require Import</span>
  NaturalNumbers.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves.Theory <span class="kn">Require Import</span>
  DecoratedTraversableMonad <span class="c">(* Mostly for the imports *)</span>
  Multisorted.DecoratedTraversableMonad.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span>
  Product.Notations
  Monoid.Notations
  List.ListNotations
  Subset.Notations
  Kleisli.Monad.Notations
  Kleisli.Comonad.Notations
  ContainerFunctor.Notations
  DecoratedMonad.Notations
  DecoratedContainerFunctor.Notations
  DecoratedTraversableMonad.Notations
  LN.AtomSet.Notations
  DecoratedTraversableMonad.Notations
  Functors.Multisorted.Batch.Notations
  Theory.Container.Notations
  Categories.TypeFamily.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Open Scope</span> nat_scope. <span class="c">(* Let &lt;&lt;x + y&gt;&gt; be addition, not sum type. *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Open Scope</span> set_scope. <span class="c">(* Don&#39;t confuse with Functors/Subset.v *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Generalizable Variable</span> <span class="nf">T</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Binders contexts **)</span>
<span class="sd">(** We assume that binder contexts are lists of tagged values of type</span>
<span class="sd">    &lt;&lt;unit&gt;&gt;, which are just tags themselves. *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">operations_on_context</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{Index}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">countk</span> (<span class="nv">j</span> : K) (<span class="nv">l</span> : list K) : nat :=
    <span class="kr">match</span> l <span class="kr">with</span>
    | nil =&gt; <span class="mi">0</span>
    | cons k rest =&gt;
      (<span class="kr">if</span> j == k <span class="kr">then</span> <span class="mi">1</span> <span class="kr">else</span> <span class="mi">0</span>) + countk j rest
    <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk0"><span class="kn">Lemma</span> <span class="nf">countk_nil</span> : <span class="kr">forall</span> <span class="nv">j</span>, countk j nil = <span class="mi">0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">j</span> : K, countk j [] = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">j</span> : K, countk j [] = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2"><span class="kn">Lemma</span> <span class="nf">countk_one_eq</span> : <span class="kr">forall</span> <span class="nv">j</span>, countk j [j] = <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">j</span> : K, countk j [j] = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">j</span> : K, countk j [j] = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk j [j] = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> j == j <span class="kr">then</span> <span class="mi">1</span> <span class="kr">else</span> <span class="mi">0</span>) + <span class="mi">0</span> = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values j <span class="kn">and</span> j.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6"><span class="kn">Lemma</span> <span class="nf">countk_one_neq</span> : <span class="kr">forall</span> <span class="nv">j</span> <span class="nv">k</span>, j &lt;&gt; k -&gt; countk j [k] = <span class="mi">0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">j</span> <span class="nv">k</span> : K, j &lt;&gt; k -&gt; countk j [k] = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">j</span> <span class="nv">k</span> : K, j &lt;&gt; k -&gt; countk j [k] = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk8"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk j [k] = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk9"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> j == k <span class="kr">then</span> <span class="mi">1</span> <span class="kr">else</span> <span class="mi">0</span>) + <span class="mi">0</span> = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values j <span class="kn">and</span> k.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka"><span class="kn">Lemma</span> <span class="nf">countk_cons_eq</span> : <span class="kr">forall</span> <span class="nv">j</span> <span class="nv">l</span>, countk j (j :: l) = S (countk j l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">j</span> : K) (<span class="nv">l</span> : list K),
countk j (j :: l) = S (countk j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">j</span> : K) (<span class="nv">l</span> : list K),
countk j (j :: l) = S (countk j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk j (j :: l) = S (countk j l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> j == j <span class="kr">then</span> <span class="mi">1</span> <span class="kr">else</span> <span class="mi">0</span>) + countk j l =
S (countk j l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values j <span class="kn">and</span> j.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke"><span class="kn">Lemma</span> <span class="nf">countk_cons_neq</span> : <span class="kr">forall</span> <span class="nv">j</span> <span class="nv">k</span> <span class="nv">l</span>, j &lt;&gt; k -&gt; countk j (k :: l) = countk j l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">j</span> <span class="nv">k</span> : K) (<span class="nv">l</span> : list K),
j &lt;&gt; k -&gt; countk j (k :: l) = countk j l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">j</span> <span class="nv">k</span> : K) (<span class="nv">l</span> : list K),
j &lt;&gt; k -&gt; countk j (k :: l) = countk j l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk10"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk j (k :: l) = countk j l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk11"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> j == k <span class="kr">then</span> <span class="mi">1</span> <span class="kr">else</span> <span class="mi">0</span>) + countk j l = countk j l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values j <span class="kn">and</span> k.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk12"><span class="kn">Lemma</span> <span class="nf">countk_app</span> : <span class="kr">forall</span> <span class="nv">j</span> <span class="nv">l1</span> <span class="nv">l2</span>, countk j (l1 ++ l2) = countk j l1 + countk j l2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">j</span> : K) (<span class="nv">l1</span> <span class="nv">l2</span> : list K),
countk j (l1 ++ l2) = countk j l1 + countk j l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk13"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">j</span> : K) (<span class="nv">l1</span> <span class="nv">l2</span> : list K),
countk j (l1 ++ l2) = countk j l1 + countk j l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk14"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk j (l1 ++ l2) = countk j l1 + countk j l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk15"><span class="nb">induction</span> l1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk j ([] ++ l2) = countk j [] + countk j l2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk16" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j, a</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>countk j (l1 ++ l2) = countk j l1 + countk j l2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk16"><hr></label><div class="goal-conclusion">countk j ((a :: l1) ++ l2) =
countk j (a :: l1) + countk j l2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk17">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk j ([] ++ l2) = countk j [] + countk j l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk18">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j, a</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>countk j (l1 ++ l2) = countk j l1 + countk j l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk j ((a :: l1) ++ l2) =
countk j (a :: l1) + countk j l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk19"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>j, a</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>countk j (l1 ++ l2) = countk j l1 + countk j l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> j == a <span class="kr">then</span> <span class="mi">1</span> <span class="kr">else</span> <span class="mi">0</span>) + countk j (l1 ++ l2) =
(<span class="kr">if</span> j == a <span class="kr">then</span> <span class="mi">1</span> <span class="kr">else</span> <span class="mi">0</span>) + countk j l1 + countk j l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a"><span class="nb">compare</span> values j <span class="kn">and</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>countk a (l1 ++ l2) = countk a l1 + countk a l2</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> + countk a (l1 ++ l2) =
<span class="mi">1</span> + countk a l1 + countk a l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> IHl1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">operations_on_context</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Locally nameless variables *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">LN</span> :=
| Fr : atom -&gt; LN
| Bd : nat -&gt; LN.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b"><span class="kn">Theorem</span> <span class="nf">eq_dec_LN</span> : <span class="kr">forall</span> <span class="nv">l1</span> <span class="nv">l2</span> : LN, {l1 = l2} + {l1 &lt;&gt; l2}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l1</span> <span class="nv">l2</span> : LN, {l1 = l2} + {l1 &lt;&gt; l2}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l1</span> <span class="nv">l2</span> : LN, {l1 = l2} + {l1 &lt;&gt; l2}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d"><span class="bp">decide equality</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{a = a0} + {a &lt;&gt; a0}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk1e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n, n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1e"><hr></label><div class="goal-conclusion">{n = n0} + {n &lt;&gt; n0}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{a = a0} + {a &lt;&gt; a0}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values a <span class="kn">and</span> a0; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk20">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n, n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{n = n0} + {n &lt;&gt; n0}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values n <span class="kn">and</span> n0; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">EqDec_LN</span> : EquivDec.EqDec LN eq := eq_dec_LN.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk21"><span class="kn">Lemma</span> <span class="nf">compare_to_atom</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">l</span> (<span class="nv">P</span> : LN -&gt; <span class="kt">Prop</span>),
    P (Fr x) -&gt;
    (<span class="kr">forall</span> <span class="nv">a</span> : atom, a &lt;&gt; x -&gt; P (Fr a)) -&gt;
    (<span class="kr">forall</span> <span class="nv">n</span> : nat, P (Bd n)) -&gt;
    P l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : atom) (<span class="nv">l</span> : LN) (<span class="nv">P</span> : LN -&gt; <span class="kt">Prop</span>),
P (Fr x) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : atom, a &lt;&gt; x -&gt; P (Fr a)) -&gt;
(<span class="kr">forall</span> <span class="nv">n</span> : nat, P (Bd n)) -&gt; P l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk22"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : atom) (<span class="nv">l</span> : LN) (<span class="nv">P</span> : LN -&gt; <span class="kt">Prop</span>),
P (Fr x) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : atom, a &lt;&gt; x -&gt; P (Fr a)) -&gt;
(<span class="kr">forall</span> <span class="nv">n</span> : nat, P (Bd n)) -&gt; P l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk23">introv case1 case2 case3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>LN -&gt; <span class="kt">Prop</span></span></span></span><br><span><var>case1</var><span class="hyp-type"><b>: </b><span>P (Fr x)</span></span></span><br><span><var>case2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : atom, a &lt;&gt; x -&gt; P (Fr a)</span></span></span><br><span><var>case3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat, P (Bd n)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk24"><span class="nb">destruct</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>LN -&gt; <span class="kt">Prop</span></span></span></span><br><span><var>case1</var><span class="hyp-type"><b>: </b><span>P (Fr x)</span></span></span><br><span><var>case2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : atom, a &lt;&gt; x -&gt; P (Fr a)</span></span></span><br><span><var>case3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat, P (Bd n)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk25" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>LN -&gt; <span class="kt">Prop</span></span></span></span><br><span><var>case1</var><span class="hyp-type"><b>: </b><span>P (Fr x)</span></span></span><br><span><var>case2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : atom, a &lt;&gt; x -&gt; P (Fr a)</span></span></span><br><span><var>case3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat, P (Bd n)</span></span></span><br></div><label class="goal-separator" for="ln-v-chk25"><hr></label><div class="goal-conclusion">P (Bd n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk26">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>LN -&gt; <span class="kt">Prop</span></span></span></span><br><span><var>case1</var><span class="hyp-type"><b>: </b><span>P (Fr x)</span></span></span><br><span><var>case2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : atom, a &lt;&gt; x -&gt; P (Fr a)</span></span></span><br><span><var>case3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat, P (Bd n)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk27">destruct_eq_args x a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>LN -&gt; <span class="kt">Prop</span></span></span></span><br><span><var>case1</var><span class="hyp-type"><b>: </b><span>P (Fr x)</span></span></span><br><span><var>case2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : atom, a &lt;&gt; x -&gt; P (Fr a)</span></span></span><br><span><var>case3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat, P (Bd n)</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; a</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk28">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>LN -&gt; <span class="kt">Prop</span></span></span></span><br><span><var>case1</var><span class="hyp-type"><b>: </b><span>P (Fr x)</span></span></span><br><span><var>case2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : atom, a &lt;&gt; x -&gt; P (Fr a)</span></span></span><br><span><var>case3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat, P (Bd n)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Tactic Notation</span> <span class="s2">&quot;compare&quot;</span> <span class="kp">constr</span>(l) <span class="s2">&quot;to&quot;</span> <span class="s2">&quot;atom&quot;</span> <span class="kp">constr</span>(x) :=
  (<span class="nb">induction</span> l <span class="nb">using</span> (compare_to_atom x)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Syntax operations for locally nameless *)</span>
<span class="sd">(******************************************************************************)</span>

<span class="sd">(** ** Local operations *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">local_operations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{Index}
    `{MReturn T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Types</span> (<span class="nv">x</span> : atom) (<span class="nv">k</span> : K).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">free_loc</span> : LN -&gt; list atom :=
    <span class="kr">fun</span> <span class="nv">l</span> =&gt; <span class="kr">match</span> l <span class="kr">with</span>
          | Fr x =&gt; cons x List.nil
          | _ =&gt; List.nil
          <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">subst_loc</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN) : LN -&gt; T k LN :=
    <span class="kr">fun</span> <span class="nv">l</span> =&gt; <span class="kr">match</span> l <span class="kr">with</span>
          | Fr y =&gt;
            <span class="kr">if</span> x == y <span class="kr">then</span> u <span class="kr">else</span> mret T k (Fr y)
          | Bd n =&gt;
            mret T k (Bd n)
          <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">open_loc</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) : list K * LN -&gt; T k LN :=
    <span class="kr">fun</span> &#39;(w, l) =&gt;
      <span class="kr">match</span> l <span class="kr">with</span>
      | Fr x =&gt; mret T k (Fr x)
      | Bd n =&gt;
        <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
        | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
        | Eq =&gt; u
        | Lt =&gt; mret T k (Bd n)
        <span class="kr">end</span>
      <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">is_opened</span> : list K * (K * LN) -&gt; <span class="kt">Prop</span> :=
    <span class="kr">fun</span> &#39;(w, (k, l)) =&gt;
      <span class="kr">match</span> l <span class="kr">with</span>
      | Fr y =&gt; <span class="kt">False</span>
      | Bd n =&gt; n = countk k w
      <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">close_loc</span> <span class="nv">k</span> <span class="nv">x</span> : list K * LN -&gt; LN :=
    <span class="kr">fun</span> &#39;(w, l) =&gt;
      <span class="kr">match</span> l <span class="kr">with</span>
      | Fr y =&gt;
        <span class="kr">if</span> x == y <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr y
      | Bd n =&gt;
        <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
        | Gt =&gt; Bd (S n)
        | Eq =&gt; Bd (S n)
        | Lt =&gt; Bd n
        <span class="kr">end</span>
      <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** To define local closure we will take &lt;&lt;n = 0&gt;&gt;, but we can also</span>
<span class="sd">      consider more notions like ``local closure within a gap of 1</span>
<span class="sd">      binder,&#39;&#39; which is useful for backend reasoning. **)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lc_loc</span> <span class="nv">k</span> (<span class="nv">gap</span> : nat) : list K * LN -&gt; <span class="kt">Prop</span> :=
    <span class="kr">fun</span> &#39;(w, l) =&gt;
      <span class="kr">match</span> l <span class="kr">with</span>
      | Fr x =&gt; <span class="kt">True</span>
      | Bd n =&gt; n &lt; (countk k w) + gap
      <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">local_operations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Lifted operations *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">LocallyNamelessOperations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
      `{MultiDecoratedTraversablePreModule (list K) T U
          (mn_op := Monoid_op_list)
          (mn_unit := Monoid_unit_list)}
    `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">open</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) : U LN -&gt; U LN  :=
    kbindd U k (open_loc k u).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">close</span> <span class="nv">k</span> <span class="nv">x</span> : U LN -&gt; U LN :=
    kmapd U k (close_loc k x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">subst</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN) : U LN -&gt; U LN :=
    kbind U k (subst_loc k x u).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">free</span> : K -&gt; U LN -&gt; list atom :=
    <span class="kr">fun</span> <span class="nv">k</span> <span class="nv">t</span> =&gt; bind (T := list) free_loc (toklist U k t).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">LCn</span> <span class="nv">k</span> (<span class="nv">gap</span> : nat) : U LN -&gt; <span class="kt">Prop</span> :=
    <span class="kr">fun</span> <span class="nv">t</span> =&gt; <span class="kr">forall</span> (<span class="nv">w</span> : list K) (<span class="nv">l</span> : LN),
        (w, (k, l)) ‚ààmd t -&gt; lc_loc k gap (w, l).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">LC</span> <span class="nv">k</span> : U LN -&gt; <span class="kt">Prop</span> :=
    LCn k <span class="mi">0</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">FV</span> : K -&gt; U LN -&gt; AtomSet.t :=
    <span class="kr">fun</span> <span class="nv">k</span> <span class="nv">t</span> =&gt; LN.AtomSet.atoms (free k t).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">scoped</span> : K -&gt; U LN -&gt; AtomSet.t -&gt; <span class="kt">Prop</span> :=
    <span class="kr">fun</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">Œ≥</span> =&gt; FV k t ‚äÜ Œ≥.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">LocallyNamelessOperations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Notations for operations *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">Notations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;t &#39;{ k | x ~&gt; u }&quot;</span> := (<span class="nb">subst</span> _ k x u t) (<span class="kn">at level</span> <span class="mi">35</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;t &#39;( k | u )&quot;</span> := (open _ k u t) (<span class="kn">at level</span> <span class="mi">35</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;&#39;[ k | x ] t&quot;</span> := (close _ k x t) (<span class="kn">at level</span> <span class="mi">35</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;( x , y , z )&quot;</span> := (pair x (pair y z)) : tealeaves_multi_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Notations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">test_notations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
    `{MultiDecoratedTraversablePreModule (list K) T U (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
    `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">k</span> <span class="nv">j</span> : K)
    (<span class="nv">t1</span> : T k LN)
    (<span class="nv">t2</span> : T j LN)
    (<span class="nv">u</span> : U LN)
    (<span class="nv">x</span> : atom)
    (<span class="nv">n</span> : nat).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk29"><span class="kn">Check</span> u &#39;{ k | x ~&gt; t1}.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">u &#39;{ k | x ~&gt; t1}
     : U LN</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a"><span class="kn">Check</span> u &#39;(k | t1).</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">u &#39;( k | t1)
     : U LN</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b"><span class="kn">Check</span> &#39;[k | x] u.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">&#39;[ k | x] u
     : U LN</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c"><span class="kn">Check</span> u &#39;{j | x ~&gt; t2}.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">u &#39;{ j | x ~&gt; t2}
     : U LN</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d"><span class="kn">Check</span> u &#39;(j | t2).</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">u &#39;( j | t2)
     : U LN</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e"><span class="kn">Check</span> &#39;[j | x] u.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">&#39;[ j | x] u
     : U LN</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f"><span class="kn">Fail</span> <span class="kn">Check</span> u &#39;{j | x ~&gt; t1}.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">The command has indeed failed <span class="kr">with</span> message:
In environment
U : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>
ix : Index
T : K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span>
MReturn0 : MReturn T
MBind0 : MBind (list K) T U
H : <span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)
H0 : MultiDecoratedTraversablePreModule (list K) T U
MultiDecoratedTraversableMonad0 : MultiDecoratedTraversableMonad
                                    (list K) T
k, j : K
t1 : T k LN
t2 : T j LN
u : U LN
x : atom
n : nat
Unable to <span class="nb">unify</span> <span class="s2">&quot;T k LN&quot;</span> <span class="kr">with</span> <span class="s2">&quot;?T j LN&quot;</span>
(cannot <span class="nb">unify</span> <span class="s2">&quot;k&quot;</span> <span class="kn">and</span> <span class="s2">&quot;j&quot;</span>).</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk30"><span class="kn">Fail</span> <span class="kn">Check</span> u &#39;(j | t1).</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">The command has indeed failed <span class="kr">with</span> message:
In environment
U : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>
ix : Index
T : K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span>
MReturn0 : MReturn T
MBind0 : MBind (list K) T U
H : <span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)
H0 : MultiDecoratedTraversablePreModule (list K) T U
MultiDecoratedTraversableMonad0 : MultiDecoratedTraversableMonad
                                    (list K) T
k, j : K
t1 : T k LN
t2 : T j LN
u : U LN
x : atom
n : nat
Unable to <span class="nb">unify</span> <span class="s2">&quot;T k LN&quot;</span> <span class="kr">with</span> <span class="s2">&quot;?T j LN&quot;</span>
(cannot <span class="nb">unify</span> <span class="s2">&quot;k&quot;</span> <span class="kn">and</span> <span class="s2">&quot;j&quot;</span>).</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">test_notations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Notations.</span></span></pre><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">operations_specifications</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
    `{MultiDecoratedTraversablePreModule (list K) T U (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
    `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Types</span> (<span class="nv">l</span> : LN) (<span class="nv">w</span> : list K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Identity and equality lemmas for operations *)</span>
  <span class="sd">(******************************************************************************)</span>

  <span class="sd">(** *** For [open] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk31"><span class="kn">Lemma</span> <span class="nf">open_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN),
      (<span class="kr">forall</span> (<span class="nv">w</span> : list K) (<span class="nv">l</span> : LN), (w, (k, l)) ‚ààmd t -&gt; open_loc k u1 (w, l) = open_loc k u2 (w, l)) -&gt;
      t &#39;(k | u1) = t &#39;(k | u2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN),
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t -&gt;
 open_loc k u1 (w, l) = open_loc k u2 (w, l)) -&gt;
t &#39;( k | u1) = t &#39;( k | u2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk32"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN),
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t -&gt;
 open_loc k u1 (w, l) = open_loc k u2 (w, l)) -&gt;
t &#39;( k | u1) = t &#39;( k | u2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk33">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt;
open_loc k u1 (w, l) = open_loc k u2 (w, l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;( k | u1) = t &#39;( k | u2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk34"><span class="nb">unfold</span> open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt;
open_loc k u1 (w, l) = open_loc k u2 (w, l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k (open_loc k u1) t =
kbindd U k (open_loc k u2) t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk35"><span class="nb">apply</span> kbindd_respectful.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt;
open_loc k u1 (w, l) = open_loc k u2 (w, l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w</span> (<span class="nv">a</span> : LN),
(w, k, a) ‚ààmd t -&gt;
open_loc k u1 (w, a) = open_loc k u2 (w, a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk36"><span class="kn">Lemma</span> <span class="nf">open_id</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">u</span>,
      (<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, (k, l)) ‚ààmd t -&gt; open_loc k u (w, l) = mret T k l) -&gt;
      t &#39;(k | u) = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t -&gt; open_loc k u (w, l) = mret T k l) -&gt;
t &#39;( k | u) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk37"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t -&gt; open_loc k u (w, l) = mret T k l) -&gt;
t &#39;( k | u) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk38"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt;
open_loc k u (w, l) = mret T k l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;( k | u) = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk39"><span class="nb">unfold</span> open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt;
open_loc k u (w, l) = mret T k l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k (open_loc k u) t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> (kbindd_respectful_id k).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** For [subst] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a"><span class="kn">Lemma</span> <span class="nf">subst_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">u1</span> <span class="nv">u2</span>,
      (<span class="kr">forall</span> <span class="nv">l</span>, (k, l) ‚ààm t -&gt; subst_loc k x u1 l = subst_loc k x u2 l) -&gt;
      t &#39;{k | x ~&gt; u1} = t &#39;{k | x ~&gt; u2}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> <span class="nv">x</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN),
(<span class="kr">forall</span> <span class="nv">l</span>,
 (k, l) ‚ààm t -&gt;
 subst_loc k x u1 l = subst_loc k x u2 l) -&gt;
t &#39;{ k | x ~&gt; u1} = t &#39;{ k | x ~&gt; u2}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> <span class="nv">x</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN),
(<span class="kr">forall</span> <span class="nv">l</span>,
 (k, l) ‚ààm t -&gt;
 subst_loc k x u1 l = subst_loc k x u2 l) -&gt;
t &#39;{ k | x ~&gt; u1} = t &#39;{ k | x ~&gt; u2}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span>,
(k, l) ‚ààm t -&gt;
subst_loc k x u1 l = subst_loc k x u2 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;{ k | x ~&gt; u1} = t &#39;{ k | x ~&gt; u2}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span>,
(k, l) ‚ààm t -&gt;
subst_loc k x u1 l = subst_loc k x u2 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind U k (subst_loc k x u1) t =
kbind U k (subst_loc k x u2) t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e"><span class="nb">apply</span> kbind_respectful.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span>,
(k, l) ‚ààm t -&gt;
subst_loc k x u1 l = subst_loc k x u2 l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : LN,
(k, a) ‚ààm t -&gt; subst_loc k x u1 a = subst_loc k x u2 a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f"><span class="kn">Lemma</span> <span class="nf">subst_id</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">u</span>,
      (<span class="kr">forall</span> <span class="nv">l</span>, (k, l) ‚ààm t -&gt; subst_loc k x u l = mret T k l) -&gt;
      t &#39;{k | x ~&gt; u} = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN),
(<span class="kr">forall</span> <span class="nv">l</span>,
 (k, l) ‚ààm t -&gt; subst_loc k x u l = mret T k l) -&gt;
t &#39;{ k | x ~&gt; u} = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk40"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN),
(<span class="kr">forall</span> <span class="nv">l</span>,
 (k, l) ‚ààm t -&gt; subst_loc k x u l = mret T k l) -&gt;
t &#39;{ k | x ~&gt; u} = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk41"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span>,
(k, l) ‚ààm t -&gt; subst_loc k x u l = mret T k l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;{ k | x ~&gt; u} = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk42"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span>,
(k, l) ‚ààm t -&gt; subst_loc k x u l = mret T k l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind U k (subst_loc k x u) t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> kbind_respectful_id.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** For [close] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk43"><span class="kn">Lemma</span> <span class="nf">close_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
      (<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, (k, l)) ‚ààmd t -&gt; close_loc k x (w, l) = close_loc k y (w, l)) -&gt;
      &#39;[k | x] t = &#39;[k | y] t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t -&gt;
 close_loc k x (w, l) = close_loc k y (w, l)) -&gt;
&#39;[ k | x] t = &#39;[ k | y] t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk44"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t -&gt;
 close_loc k x (w, l) = close_loc k y (w, l)) -&gt;
&#39;[ k | x] t = &#39;[ k | y] t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk45"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt;
close_loc k x (w, l) = close_loc k y (w, l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">&#39;[ k | x] t = &#39;[ k | y] t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk46"><span class="nb">unfold</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt;
close_loc k x (w, l) = close_loc k y (w, l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kmapd U k (close_loc k x) t =
kmapd U k (close_loc k y) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> (kmapd_respectful).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk47"><span class="kn">Lemma</span> <span class="nf">close_id</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
      (<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, (k, l)) ‚ààmd t -&gt; close_loc k x (w, l) = l) -&gt;
      &#39;[k | x] t = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> <span class="nv">x</span>,
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t -&gt; close_loc k x (w, l) = l) -&gt;
&#39;[ k | x] t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk48"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">t</span> <span class="nv">x</span>,
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t -&gt; close_loc k x (w, l) = l) -&gt;
&#39;[ k | x] t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk49"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt; close_loc k x (w, l) = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">&#39;[ k | x] t = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a"><span class="nb">unfold</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt; close_loc k x (w, l) = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kmapd U k (close_loc k x) t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> (kmapd_respectful_id).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Context-sensitive LN analysis of operations *)</span>
  <span class="sd">(******************************************************************************)</span>

  <span class="sd">(** *** For [open] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b"><span class="kn">Lemma</span> <span class="nf">inmd_open_iff_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">u</span> <span class="nv">t</span>,
      (w, (k, l)) ‚ààmd t &#39;(k | u) &lt;-&gt; <span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
        (w1, (k, l1)) ‚ààmd t /\ (w2, (k, l)) ‚ààmd open_loc k u (w1, l1) /\ w = w1 ‚óè w2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> <span class="nv">w</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span>,
(w, k, l) ‚ààmd t &#39;( k | u) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> <span class="nv">w</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span>,
(w, k, l) ‚ààmd t &#39;( k | u) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd t &#39;( k | u) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e"><span class="nb">unfold</span> open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd kbindd U k (open_loc k u) t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (inmd_kbindd_eq_iff U).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f"><span class="kn">Lemma</span> <span class="nf">inmd_open_neq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">u</span> <span class="nv">t</span>,
      k &lt;&gt; j -&gt;
      (w, (k, l)) ‚ààmd t &#39;(j | u) &lt;-&gt; (w, (k, l)) ‚ààmd t \/ <span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
          (w1, (j, l1)) ‚ààmd t /\ (w2, (k, l)) ‚ààmd open_loc j u (w1, l1) /\ w = w1 ‚óè w2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> <span class="nv">w</span> (<span class="nv">u</span> : T j LN) <span class="nv">t</span>,
k &lt;&gt; j -&gt;
(w, k, l) ‚ààmd t &#39;( j | u) &lt;-&gt;
(w, k, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc j u (w1, l1) /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk50"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> <span class="nv">w</span> (<span class="nv">u</span> : T j LN) <span class="nv">t</span>,
k &lt;&gt; j -&gt;
(w, k, l) ‚ààmd t &#39;( j | u) &lt;-&gt;
(w, k, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc j u (w1, l1) /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk51"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd t &#39;( j | u) &lt;-&gt;
(w, k, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc j u (w1, l1) /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk52"><span class="nb">unfold</span> open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd kbindd U j (open_loc j u) t &lt;-&gt;
(w, k, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc j u (w1, l1) /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (inmd_kbindd_neq_iff U); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** For [close] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk53"><span class="kn">Lemma</span> <span class="nf">inmd_close_iff_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">x</span> <span class="nv">t</span>,
      (w, (k, l)) ‚ààmd &#39;[k | x] t &lt;-&gt; <span class="kr">exists</span> <span class="nv">l1</span>,
        (w, (k, l1)) ‚ààmd t /\ l = close_loc k x (w, l1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> <span class="nv">w</span> <span class="nv">x</span> <span class="nv">t</span>,
(w, k, l) ‚ààmd &#39;[ k | x] t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk54"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> <span class="nv">w</span> <span class="nv">x</span> <span class="nv">t</span>,
(w, k, l) ‚ààmd &#39;[ k | x] t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk55"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd &#39;[ k | x] t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk56"><span class="nb">unfold</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd kmapd U k (close_loc k x) t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk57"><span class="nb">rewrite</span> (inmd_kmapd_eq_iff U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">a1</span> : LN,
   (w, k, a1) ‚ààmd t /\ l = close_loc k x (w, a1)) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk58"><span class="kn">Lemma</span> <span class="nf">inmd_close_neq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">x</span> <span class="nv">t</span>,
      j &lt;&gt; k -&gt;
      (w, (k, l)) ‚ààmd &#39;[j | x] t &lt;-&gt; (w, (k, l)) ‚ààmd t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> <span class="nv">w</span> <span class="nv">x</span> <span class="nv">t</span>,
j &lt;&gt; k -&gt;
(w, k, l) ‚ààmd &#39;[ j | x] t &lt;-&gt; (w, k, l) ‚ààmd t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk59"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> <span class="nv">w</span> <span class="nv">x</span> <span class="nv">t</span>,
j &lt;&gt; k -&gt;
(w, k, l) ‚ààmd &#39;[ j | x] t &lt;-&gt; (w, k, l) ‚ààmd t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd &#39;[ j | x] t &lt;-&gt; (w, k, l) ‚ààmd t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5b"><span class="nb">unfold</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd kmapd U j (close_loc j x) t &lt;-&gt;
(w, k, l) ‚ààmd t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (inmd_kmapd_neq_iff U).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** For [subst] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5c"><span class="kn">Lemma</span> <span class="nf">inmd_subst_iff_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> <span class="nv">l</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
      (w, (k, l)) ‚ààmd t &#39;{k | x ~&gt; u} &lt;-&gt; <span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
        (w1, (k, l1)) ‚ààmd t /\ (w2, (k, l)) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">w</span> <span class="nv">l</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
(w, k, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">w</span> <span class="nv">l</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
(w, k, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5f"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd kbind U k (subst_loc k x u) t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (inmd_kbind_eq_iff U).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk60"><span class="kn">Lemma</span> <span class="nf">inmd_subst_neq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">w</span> <span class="nv">l</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
      k &lt;&gt; j -&gt;
      (w, (k, l)) ‚ààmd t &#39;{j | x ~&gt; u} &lt;-&gt; (w, (k, l)) ‚ààmd t \/ <span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
        (w1, (j, l1)) ‚ààmd t /\ (w2, (k, l)) ‚ààmd subst_loc j x u l1 /\ w = w1 ‚óè w2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">w</span> <span class="nv">l</span> (<span class="nv">u</span> : T j LN) <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(w, k, l) ‚ààmd t &#39;{ j | x ~&gt; u} &lt;-&gt;
(w, k, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd subst_loc j x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk61"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">w</span> <span class="nv">l</span> (<span class="nv">u</span> : T j LN) <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(w, k, l) ‚ààmd t &#39;{ j | x ~&gt; u} &lt;-&gt;
(w, k, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd subst_loc j x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk62"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd t &#39;{ j | x ~&gt; u} &lt;-&gt;
(w, k, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd subst_loc j x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk63"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd kbind U j (subst_loc j x u) t &lt;-&gt;
(w, k, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd subst_loc j x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (inmd_kbind_neq_iff U); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Context-agnostic LN analysis of operations *)</span>
  <span class="sd">(******************************************************************************)</span>

  <span class="sd">(** *** For [open] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk64"><span class="kn">Lemma</span> <span class="nf">in_open_eq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">u</span> <span class="nv">t</span>,
      (k, l) ‚ààm t &#39;(k | u) &lt;-&gt; <span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
        (w1, (k, l1)) ‚ààmd t /\ (k, l) ‚ààm open_loc k u (w1, l1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span>,
(k, l) ‚ààm t &#39;( k | u) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (k, l) ‚ààm open_loc k u (w1, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk65"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span>,
(k, l) ‚ààm t &#39;( k | u) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (k, l) ‚ààm open_loc k u (w1, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk66"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm t &#39;( k | u) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (k, l) ‚ààm open_loc k u (w1, l1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk67"><span class="nb">unfold</span> open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm kbindd U k (open_loc k u) t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (k, l) ‚ààm open_loc k u (w1, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_kbindd_eq_iff U).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk68"><span class="kn">Lemma</span> <span class="nf">in_open_neq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">l</span> <span class="nv">u</span> <span class="nv">t</span>,
      k &lt;&gt; j -&gt;
      (k, l) ‚ààm t &#39;(j | u) &lt;-&gt; (k, l) ‚ààm t \/ <span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
          (w1, (j, l1)) ‚ààmd t /\ (k, l) ‚ààm open_loc j u (w1, l1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> (<span class="nv">u</span> : T j LN) <span class="nv">t</span>,
k &lt;&gt; j -&gt;
(k, l) ‚ààm t &#39;( j | u) &lt;-&gt;
(k, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (k, l) ‚ààm open_loc j u (w1, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk69"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> (<span class="nv">u</span> : T j LN) <span class="nv">t</span>,
k &lt;&gt; j -&gt;
(k, l) ‚ààm t &#39;( j | u) &lt;-&gt;
(k, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (k, l) ‚ààm open_loc j u (w1, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm t &#39;( j | u) &lt;-&gt;
(k, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (k, l) ‚ààm open_loc j u (w1, l1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6b"><span class="nb">unfold</span> open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm kbindd U j (open_loc j u) t &lt;-&gt;
(k, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (k, l) ‚ààm open_loc j u (w1, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_kbindd_neq_iff U); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** For [close] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6c"><span class="kn">Lemma</span> <span class="nf">in_close_eq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">t</span>,
      (k, l) ‚ààm &#39;[k | x] t &lt;-&gt; <span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
        (w, (k, l1)) ‚ààmd t /\ l = close_loc k x (w, l1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> <span class="nv">x</span> <span class="nv">t</span>,
(k, l) ‚ààm &#39;[ k | x] t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> <span class="nv">x</span> <span class="nv">t</span>,
(k, l) ‚ààm &#39;[ k | x] t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm &#39;[ k | x] t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6f"><span class="nb">unfold</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm kmapd U k (close_loc k x) t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_kmapd_eq_iff U).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk70"><span class="kn">Lemma</span> <span class="nf">in_close_neq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">t</span>,
      k &lt;&gt; j -&gt;
      (k, l) ‚ààm &#39;[j | x] t &lt;-&gt; (k, l) ‚ààm t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> <span class="nv">x</span> <span class="nv">t</span>,
k &lt;&gt; j -&gt; (k, l) ‚ààm &#39;[ j | x] t &lt;-&gt; (k, l) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk71"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> <span class="nv">x</span> <span class="nv">t</span>,
k &lt;&gt; j -&gt; (k, l) ‚ààm &#39;[ j | x] t &lt;-&gt; (k, l) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk72"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm &#39;[ j | x] t &lt;-&gt; (k, l) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk73"><span class="nb">unfold</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm kmapd U j (close_loc j x) t &lt;-&gt; (k, l) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_kmapd_neq_iff U); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** For [subst] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk74"><span class="kn">Lemma</span> <span class="nf">in_subst_eq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
      (k, l) ‚ààm t &#39;{k | x ~&gt; u} &lt;-&gt; <span class="kr">exists</span> <span class="nv">l1</span>,
        (k, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc k x u l1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
(k, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk75"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">l</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
(k, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk76"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk77"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm kbind U k (subst_loc k x u) t &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_kbind_eq_iff U).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk78"><span class="kn">Lemma</span> <span class="nf">in_subst_neq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">l</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
      j &lt;&gt; k -&gt;
      (k, l) ‚ààm t &#39;{j | x ~&gt; u} &lt;-&gt; (k, l) ‚ààm t \/ <span class="kr">exists</span> <span class="nv">l1</span>,
          (j, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc j x u l1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> (<span class="nv">u</span> : T j LN) <span class="nv">t</span> <span class="nv">x</span>,
j &lt;&gt; k -&gt;
(k, l) ‚ààm t &#39;{ j | x ~&gt; u} &lt;-&gt;
(k, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (j, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc j x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk79"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) <span class="nv">l</span> (<span class="nv">u</span> : T j LN) <span class="nv">t</span> <span class="nv">x</span>,
j &lt;&gt; k -&gt;
(k, l) ‚ààm t &#39;{ j | x ~&gt; u} &lt;-&gt;
(k, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (j, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc j x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk7a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm t &#39;{ j | x ~&gt; u} &lt;-&gt;
(k, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (j, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc j x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk7b"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm kbind U j (subst_loc j x u) t &lt;-&gt;
(k, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (j, l1) ‚ààm t /\ (k, l) ‚ààm subst_loc j x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_kbind_neq_iff U).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">operations_specifications</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

<span class="sd">(** * Specifications for &lt;&lt;free&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">operations_specifications</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Characterizations for [free] and [FV] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">characterize_free</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      {<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>}
      `{MultiDecoratedTraversablePreModule (list K) T U (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
      `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk7c">#[local] <span class="kn">Instance</span>: Compat_ToSubset_Tolist list.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Compat_ToSubset_Tolist list</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk7d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Compat_ToSubset_Tolist list</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk7e"><span class="nb">unfold</span> Compat_ToSubset_Tolist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">@tosubset list ToSubset_list =
@tosubset list ToSubset_Tolist</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk7f"><span class="nb">unfold</span> tosubset, ToSubset_list.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">l</span> : list A) (<span class="nv">a</span> : A) =&gt; List.In a l) =
ToSubset_Tolist</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk80"><span class="nb">unfold</span> ToSubset_Tolist, ToSubset_list.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">l</span> : list A) (<span class="nv">a</span> : A) =&gt; List.In a l) =
(<span class="kr">fun</span> <span class="nv">A</span> : <span class="kt">Type</span> =&gt; tosubset ‚àò tolist)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk81"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">l</span> : list A) (<span class="nv">a</span> : A) =&gt; List.In a l) =
(<span class="kr">fun</span> <span class="nv">A</span> : <span class="kt">Type</span> =&gt; tosubset ‚óã tolist)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk82">ext A l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; List.In a l) = tosubset (tolist l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk83"><span class="nb">rewrite</span> Tolist_list_id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; List.In a l) = tosubset (id l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk84"><span class="nb">unfold</span> tosubset.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; List.In a l) =
(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; List.In a (id l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk85"><span class="kn">Theorem</span> <span class="nf">in_free_iff</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
        x ‚àà free U k t &lt;-&gt; (k, Fr x) ‚ààm t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
x ‚àà free U k t &lt;-&gt; (k, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk86"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
x ‚àà free U k t &lt;-&gt; (k, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk87"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t &lt;-&gt; (k, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk88"><span class="nb">unfold</span> free.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà bind free_loc (toklist U k t) &lt;-&gt; (k, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk89"><span class="nb">replace</span> (x ‚àà bind free_loc (toklist U k t)) <span class="kr">with</span>
        (x ‚àà tolist (bind free_loc (toklist U k t))) <span class="bp">by</span>
        <span class="bp">now</span> (<span class="nb">rewrite</span> Tolist_list_id).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà tolist (bind free_loc (toklist U k t)) &lt;-&gt;
(k, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk8a"><span class="nb">rewrite</span> &lt;- in_iff_in_tolist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà bind free_loc (toklist U k t) &lt;-&gt; (k, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk8b"><span class="nb">rewrite</span> in_bind_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">a</span> : LN, a ‚àà toklist U k t /\ x ‚àà free_loc a) &lt;-&gt;
(k, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk8c"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">a</span> : LN, a ‚àà toklist U k t /\ x ‚àà free_loc a) -&gt;
(k, Fr x) ‚ààm t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk8d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><label class="goal-separator" for="ln-v-chk8d"><hr></label><div class="goal-conclusion">(k, Fr x) ‚ààm t -&gt;
<span class="kr">exists</span> <span class="nv">a</span> : LN, a ‚àà toklist U k t /\ x ‚àà free_loc a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk8e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">a</span> : LN, a ‚àà toklist U k t /\ x ‚àà free_loc a) -&gt;
(k, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk8f"><span class="nb">intros</span> [l [lin xin]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>l ‚àà toklist U k t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free_loc l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk90"><span class="nb">rewrite</span> in_iff_in_toklist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>l ‚àà toklist U k t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free_loc l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk91"><span class="nb">destruct</span> l <span class="kr">as</span> [a|n].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>Fr a ‚àà toklist U k t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free_loc (Fr a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk92" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>Bd n ‚àà toklist U k t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free_loc (Bd n)</span></span></span><br></div><label class="goal-separator" for="ln-v-chk92"><hr></label><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk93">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>Fr a ‚àà toklist U k t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free_loc (Fr a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk94"><span class="nb">cbv</span> <span class="kr">in</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>Fr a ‚àà toklist U k t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>a = x \/ <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk95"><span class="nb">destruct</span> xin <span class="kr">as</span> [?|[]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>Fr a ‚àà toklist U k t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk96"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>Fr x ‚àà toklist U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk97"><span class="nb">cbn</span> <span class="kr">in</span> lin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>Fr x ‚àà toklist U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk98">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>Bd n ‚àà toklist U k t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free_loc (Bd n)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk99"><span class="nb">cbv</span> <span class="kr">in</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>Bd n ‚àà toklist U k t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> xin <span class="kr">as</span> [].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk9a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr x) ‚ààm t -&gt;
<span class="kr">exists</span> <span class="nv">a</span> : LN, a ‚àà toklist U k t /\ x ‚àà free_loc a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk9b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">a</span> : LN, a ‚àà toklist U k t /\ x ‚àà free_loc a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk9c"><span class="kr">exists</span> (<span class="nv">Fr</span> <span class="nv">x</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x ‚àà toklist U k t /\ x ‚àà free_loc (Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk9d"><span class="nb">rewrite</span> &lt;- (in_iff_in_toklist).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr x) ‚ààm t /\ x ‚àà free_loc (Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk9e"><span class="nb">split</span>; [<span class="bp">assumption</span>| ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free_loc (Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk9f"><span class="nb">cbv</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = x \/ <span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka0"><span class="kn">Corollary</span> <span class="nf">free_iff_FV</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
        x ‚àà free U k t &lt;-&gt; x `<span class="kr">in</span>` FV U k t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
x ‚àà free U k t &lt;-&gt; x `<span class="kr">in</span>` FV U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
x ‚àà free U k t &lt;-&gt; x `<span class="kr">in</span>` FV U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t &lt;-&gt; x `<span class="kr">in</span>` FV U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka3"><span class="nb">unfold</span> FV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t &lt;-&gt; x `<span class="kr">in</span>` atoms (free U k t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka4"><span class="nb">rewrite</span> &lt;- in_atoms_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t &lt;-&gt; x ‚àà free U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">characterize_free</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** [free] variables after &lt;&lt;open&gt;&gt;/&lt;&lt;close&gt;&gt;/&lt;&lt;subst&gt;&gt; *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
    `{MultiDecoratedTraversablePreModule (list K) T U (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
    `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** After [open] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka5"><span class="kn">Lemma</span> <span class="nf">free_open_eq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
      x ‚àà free U k (t &#39;(k | u)) &lt;-&gt; <span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
        (w, (k, l1)) ‚ààmd t /\ x ‚àà free (T k) k (open_loc k u (w, l1)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">u</span> : T k LN) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
x ‚àà free U k (t &#39;( k | u)) &lt;-&gt;
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   x ‚àà free (T k) k (open_loc k u (w, l1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">u</span> : T k LN) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
x ‚àà free U k (t &#39;( k | u)) &lt;-&gt;
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   x ‚àà free (T k) k (open_loc k u (w, l1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka7"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k (t &#39;( k | u)) &lt;-&gt;
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   x ‚àà free (T k) k (open_loc k u (w, l1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka8"><span class="nb">rewrite</span> in_free_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr x) ‚ààm t &#39;( k | u) &lt;-&gt;
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   x ‚àà free (T k) k (open_loc k u (w, l1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka9"><span class="nb">setoid_rewrite</span> in_free_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr x) ‚ààm t &#39;( k | u) &lt;-&gt;
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   (k, Fr x) ‚ààm open_loc k u (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> in_open_eq_iff.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkaa"><span class="kn">Lemma</span> <span class="nf">free_open_neq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
      k &lt;&gt; j -&gt;
      x ‚àà free U j (t &#39;(k | u)) &lt;-&gt; x ‚àà free U j t \/ <span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
          (w, (k, l1)) ‚ààmd t /\ x ‚àà free (T k) j (open_loc k u (w, l1)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) (<span class="nv">u</span> : T k LN) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
k &lt;&gt; j -&gt;
x ‚àà free U j (t &#39;( k | u)) &lt;-&gt;
x ‚àà free U j t \/
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   x ‚àà free (T k) j (open_loc k u (w, l1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkab"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) (<span class="nv">u</span> : T k LN) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
k &lt;&gt; j -&gt;
x ‚àà free U j (t &#39;( k | u)) &lt;-&gt;
x ‚àà free U j t \/
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   x ‚àà free (T k) j (open_loc k u (w, l1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkac"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j (t &#39;( k | u)) &lt;-&gt;
x ‚àà free U j t \/
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   x ‚àà free (T k) j (open_loc k u (w, l1)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkad"><span class="nb">rewrite</span> <span class="mi">2</span>(in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm t &#39;( k | u) &lt;-&gt;
(j, Fr x) ‚ààm t \/
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   x ‚àà free (T k) j (open_loc k u (w, l1)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkae"><span class="nb">setoid_rewrite</span> in_free_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm t &#39;( k | u) &lt;-&gt;
(j, Fr x) ‚ààm t \/
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\
   (j, Fr x) ‚ààm open_loc k u (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> in_open_neq_iff; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** After [close] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkaf"><span class="kn">Lemma</span> <span class="nf">free_close_eq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
      y ‚àà free U k (&#39;[k | x] t) &lt;-&gt; <span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
        (w, (k, l1)) ‚ààmd t /\ Fr y = close_loc k x (w, l1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (&#39;[ k | x] t) &lt;-&gt;
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (&#39;[ k | x] t) &lt;-&gt;
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb1"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k (&#39;[ k | x] t) &lt;-&gt;
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb2"><span class="nb">rewrite</span> in_free_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm &#39;[ k | x] t &lt;-&gt;
(<span class="kr">exists</span> (<span class="nv">w</span> : list K) (<span class="nv">l1</span> : LN),
   (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_close_eq_iff U).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb3"><span class="kn">Lemma</span> <span class="nf">free_close_neq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">x</span>,
      k &lt;&gt; j -&gt;
      x ‚àà free U j (&#39;[k | x] t) &lt;-&gt; x ‚àà free U j t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
k &lt;&gt; j -&gt;
x ‚àà free U j (&#39;[ k | x] t) &lt;-&gt; x ‚àà free U j t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> <span class="nv">j</span> : K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom),
k &lt;&gt; j -&gt;
x ‚àà free U j (&#39;[ k | x] t) &lt;-&gt; x ‚àà free U j t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb5"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j (&#39;[ k | x] t) &lt;-&gt; x ‚àà free U j t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb6"><span class="nb">rewrite</span> <span class="mi">2</span>(in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm &#39;[ k | x] t &lt;-&gt; (j, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_close_neq_iff U); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** For [subst] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb7"><span class="kn">Lemma</span> <span class="nf">free_subst_eq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
      y ‚àà free U k (t &#39;{k | x ~&gt; u}) &lt;-&gt; <span class="kr">exists</span> <span class="nv">l1</span>,
        (k, l1) ‚ààm t /\ y ‚àà free (T k) k (subst_loc k x u l1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">u</span> : T k LN) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\
   y ‚àà free (T k) k (subst_loc k x u l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">u</span> : T k LN) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\
   y ‚àà free (T k) k (subst_loc k x u l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\
   y ‚àà free (T k) k (subst_loc k x u l1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkba"><span class="nb">rewrite</span> (in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\
   y ‚àà free (T k) k (subst_loc k x u l1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkbb"><span class="nb">setoid_rewrite</span> (in_free_iff (U := T k)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\ (k, Fr y) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_subst_eq_iff U).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkbc"><span class="kn">Lemma</span> <span class="nf">free_subst_neq_iff</span> : <span class="kr">forall</span> <span class="nv">j</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
      k &lt;&gt; j -&gt;
      y ‚àà free U j (t &#39;{k | x ~&gt; u}) &lt;-&gt; y ‚àà free U j t \/ <span class="kr">exists</span> <span class="nv">l1</span>,
        (k, l1) ‚ààm t /\ y ‚àà free (T k) j (subst_loc k x u l1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">j</span> <span class="nv">k</span> : K) (<span class="nv">u</span> : T k LN) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
k &lt;&gt; j -&gt;
y ‚àà free U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U j t \/
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\
   y ‚àà free (T k) j (subst_loc k x u l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkbd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">j</span> <span class="nv">k</span> : K) (<span class="nv">u</span> : T k LN) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
k &lt;&gt; j -&gt;
y ‚àà free U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U j t \/
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\
   y ‚àà free (T k) j (subst_loc k x u l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkbe"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U j t \/
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\
   y ‚àà free (T k) j (subst_loc k x u l1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkbf"><span class="nb">rewrite</span> <span class="mi">2</span>(in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(j, Fr y) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\
   y ‚àà free (T k) j (subst_loc k x u l1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc0"><span class="nb">setoid_rewrite</span> (in_free_iff (U := T k)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(j, Fr y) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span> : LN,
   (k, l1) ‚ààm t /\ (j, Fr y) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (in_subst_neq_iff); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">operations_specifications</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Lemmas for local reasoning *)</span>
<span class="sd">(** The following lemmas govern the behavior of the &lt;&lt;*_loc&gt;&gt; operations of</span>
<span class="sd">      the locally nameless library. These are put into a hint database</span>
<span class="sd">      &lt;&lt;tea_local&gt;&gt; to use with &lt;&lt;autorewrite&gt;&gt;. Since &lt;&lt;autorewrite&gt;&gt; tries the</span>
<span class="sd">      first unifying lemma (even if this generates absurd side conditions), we</span>
<span class="sd">      use &lt;&lt;Hint Rewrite ... using ...&gt;&gt; clauses and typically prefer</span>
<span class="sd">      &lt;&lt;autorewrite*&gt;&gt;, which only uses hints whose side conditions are</span>
<span class="sd">      discharged by the associated tactic. *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Create HintDb</span> tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">locally_nameless_local</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
    `{MultiDecoratedTraversablePreModule (list K) T U (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
    `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Types</span> (<span class="nv">l</span> : LN) (<span class="nv">w</span> : list K) (<span class="nv">t</span> : U LN) (<span class="nv">x</span> : atom) (<span class="nv">j</span> <span class="nv">k</span> : K) (<span class="nv">n</span> : nat).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Lemmas for proving (in)equalities between leaves *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc1"><span class="kn">Lemma</span> <span class="nf">Fr_injective</span> : <span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
      (Fr x = Fr y) &lt;-&gt; (x = y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : atom, Fr x = Fr y &lt;-&gt; x = y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : atom, Fr x = Fr y &lt;-&gt; x = y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc3"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x = Fr y &lt;-&gt; x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc4"><span class="nb">split</span>; <span class="nb">intro</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>Fr x = Fr y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chkc5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><label class="goal-separator" for="ln-v-chkc5"><hr></label><div class="goal-conclusion">Fr x = Fr y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc6"><span class="bp">now</span> <span class="nb">injection</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x = Fr y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc7"><span class="kn">Lemma</span> <span class="nf">Fr_injective_not_iff</span> : <span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
      (Fr x &lt;&gt; Fr y) &lt;-&gt; (x &lt;&gt; y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : atom, Fr x &lt;&gt; Fr y &lt;-&gt; x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : atom, Fr x &lt;&gt; Fr y &lt;-&gt; x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; Fr y &lt;-&gt; x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkca"><span class="nb">split</span>; <span class="nb">intro</span> hyp; <span class="bp">contradict</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x = Fr y</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chkcb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>Fr x = Fr y</span></span></span><br></div><label class="goal-separator" for="ln-v-chkcb"><hr></label><div class="goal-conclusion">x = y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkcc"><span class="bp">now</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>Fr x = Fr y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">injection</span> hyp.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkcd"><span class="kn">Lemma</span> <span class="nf">Fr_injective_not</span> : <span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
      x &lt;&gt; y -&gt; ~ (Fr x = Fr y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : atom, x &lt;&gt; y -&gt; Fr x &lt;&gt; Fr y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkce"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : atom, x &lt;&gt; y -&gt; Fr x &lt;&gt; Fr y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkcf"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; Fr y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> Fr_injective.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd0"><span class="kn">Lemma</span> <span class="nf">B_neq_Fr</span> : <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">x</span>,
      (Bd n = Fr x) = <span class="kt">False</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">x</span>, (Bd n = Fr x) = <span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">x</span>, (Bd n = Fr x) = <span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd2">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Bd n = Fr x) = <span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd3">propext.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Bd n = Fr x -&gt; <span class="kt">False</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chkd4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><label class="goal-separator" for="ln-v-chkd4"><hr></label><div class="goal-conclusion"><span class="kt">False</span> -&gt; Bd n = Fr x</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd5"><span class="bp">discriminate</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span> -&gt; Bd n = Fr x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd6"><span class="kn">Lemma</span> <span class="nf">prod_K_not_iff</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) <span class="nv">A</span> (<span class="nv">x</span> <span class="nv">y</span> : A),
      ((k, x) &lt;&gt; (k, y)) &lt;-&gt; (x &lt;&gt; y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> : A),
(k, x) &lt;&gt; (k, y) &lt;-&gt; x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> : A),
(k, x) &lt;&gt; (k, y) &lt;-&gt; x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd8"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, x) &lt;&gt; (k, y) &lt;-&gt; x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd9"><span class="nb">split</span>; <span class="nb">intro</span> hyp; <span class="bp">contradict</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, x) = (k, y)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chkda" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(k, x) = (k, y)</span></span></span><br></div><label class="goal-separator" for="ln-v-chkda"><hr></label><div class="goal-conclusion">x = y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkdb"><span class="bp">now</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(k, x) = (k, y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">injection</span> hyp.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkdc"><span class="kn">Lemma</span> <span class="nf">ninf_in_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">l</span> (<span class="nv">t</span> : U LN),
      ~ x ‚àà free U k t -&gt;
      (k, l) ‚ààm t -&gt; Fr x &lt;&gt; l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">l</span> <span class="nv">t</span>,
~ x ‚àà free U k t -&gt; (k, l) ‚ààm t -&gt; Fr x &lt;&gt; l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkdd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">l</span> <span class="nv">t</span>,
~ x ‚àà free U k t -&gt; (k, l) ‚ààm t -&gt; Fr x &lt;&gt; l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkde">introv hyp1 hyp2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkdf"><span class="nb">rewrite</span> in_free_iff <span class="kr">in</span> hyp1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>~ (k, Fr x) ‚ààm t</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke0"><span class="nb">destruct</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>~ (k, Fr x) ‚ààm t</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(k, Fr a) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; Fr a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chke1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>~ (k, Fr x) ‚ààm t</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br></div><label class="goal-separator" for="ln-v-chke1"><hr></label><div class="goal-conclusion">Fr x &lt;&gt; Bd n</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>~ (k, Fr x) ‚ààm t</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(k, Fr a) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; Fr a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke3"><span class="nb">injection</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>~ (k, Fr x) ‚ààm t</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(k, Fr a) ‚ààm t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Fr x = Fr a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = a -&gt; <span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke4"><span class="nb">intros</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>~ (k, Fr a) ‚ààm t</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(k, Fr a) ‚ààm t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Fr a = Fr a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>~ (k, Fr x) ‚ààm t</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; Bd n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">discriminate</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke6"><span class="kn">Lemma</span> <span class="nf">neq_symmetry</span> : <span class="kr">forall</span> <span class="nv">X</span> (<span class="nv">x</span> <span class="nv">y</span> : X),
      (x &lt;&gt; y) = (y &lt;&gt; x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> : X), (x &lt;&gt; y) = (y &lt;&gt; x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> : X), (x &lt;&gt; y) = (y &lt;&gt; x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke8"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x &lt;&gt; y) = (y &lt;&gt; x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">propext; <span class="nb">intro</span> hyp; <span class="bp">contradict</span> hyp; <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** [subst_loc] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke9"><span class="kn">Lemma</span> <span class="nf">subst_loc_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span>,
      subst_loc k x u (Fr x) = u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>, subst_loc k x u (Fr x) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkea"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>, subst_loc k x u (Fr x) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkeb"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x u (Fr x) = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkec"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == x <span class="kr">then</span> u <span class="kr">else</span> mret T k (Fr x)) = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">compare</span> values x <span class="kn">and</span> x.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chked"><span class="kn">Lemma</span> <span class="nf">subst_loc_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
      y &lt;&gt; x -&gt;
      subst_loc k x u (Fr y) = mret T k (Fr y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y &lt;&gt; x -&gt; subst_loc k x u (Fr y) = mret T k (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkee"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y &lt;&gt; x -&gt; subst_loc k x u (Fr y) = mret T k (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkef"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x u (Fr y) = mret T k (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf0"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == y <span class="kr">then</span> u <span class="kr">else</span> mret T k (Fr y)) =
mret T k (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">compare</span> values x <span class="kn">and</span> y.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf1"><span class="kn">Lemma</span> <span class="nf">subst_loc_b</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">n</span>,
      subst_loc k x u (Bd n) = mret T k (Bd n).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> <span class="nv">n</span>,
subst_loc k x u (Bd n) = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> <span class="nv">n</span>,
subst_loc k x u (Bd n) = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf3"><span class="kn">Lemma</span> <span class="nf">subst_loc_fr_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
      Fr x &lt;&gt; l -&gt;
      subst_loc k x u l = mret T k l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
Fr x &lt;&gt; l -&gt; subst_loc k x u l = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
Fr x &lt;&gt; l -&gt; subst_loc k x u l = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf5">introv neq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr x &lt;&gt; l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x u l = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf6"><span class="nb">unfold</span> subst_loc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr x &lt;&gt; l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> l <span class="kr">with</span>
| Fr y =&gt; <span class="kr">if</span> x == y <span class="kr">then</span> u <span class="kr">else</span> mret T k (Fr y)
| Bd n =&gt; mret T k (Bd n)
<span class="kr">end</span> = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> l <span class="kr">as</span> [a|?]; [<span class="nb">compare</span> values x <span class="kn">and</span> a | <span class="bp">reflexivity</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf7"><span class="kn">Lemma</span> <span class="nf">subst_in_mret_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">l</span> <span class="nv">u</span>,
      (mret T k l) &#39;{k | x ~&gt; u} = subst_loc k x u l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">l</span> (<span class="nv">u</span> : T k LN),
mret T k l &#39;{ k | x ~&gt; u} = subst_loc k x u l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">l</span> (<span class="nv">u</span> : T k LN),
mret T k l &#39;{ k | x ~&gt; u} = subst_loc k x u l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k l &#39;{ k | x ~&gt; u} = subst_loc k x u l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkfa"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind (T k) k (subst_loc k x u) (mret T k l) =
subst_loc k x u l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> kbind_comp_mret_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkfb"><span class="kn">Lemma</span> <span class="nf">subst_in_mret_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">x</span> <span class="nv">l</span> <span class="nv">u</span>,
      j &lt;&gt; k -&gt;
      (mret T k l) &#39;{j | x ~&gt; u} = mret T k l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">x</span> <span class="nv">l</span> (<span class="nv">u</span> : T j LN),
j &lt;&gt; k -&gt; mret T k l &#39;{ j | x ~&gt; u} = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkfc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">x</span> <span class="nv">l</span> (<span class="nv">u</span> : T j LN),
j &lt;&gt; k -&gt; mret T k l &#39;{ j | x ~&gt; u} = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkfd"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k l &#39;{ j | x ~&gt; u} = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkfe"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind (T k) j (subst_loc j x u) (mret T k l) =
mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> kbind_comp_mret_neq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** [open_loc] *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkff"><span class="kn">Lemma</span> <span class="nf">open_loc_lt</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">w</span> <span class="nv">n</span>,
      n &lt; countk k w -&gt;
      open_loc k u (w, Bd n) = mret T k (Bd n).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">n</span>,
n &lt; countk k w -&gt;
open_loc k u (w, Bd n) = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk100"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">n</span>,
n &lt; countk k w -&gt;
open_loc k u (w, Bd n) = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk101">introv ineq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineq</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, Bd n) = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk102"><span class="nb">unfold</span> open_loc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineq</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk103"><span class="kn">Lemma</span> <span class="nf">open_loc_gt</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">n</span> <span class="nv">w</span>,
      n &gt; countk k w -&gt;
      open_loc k u (w, Bd n) = mret T k (Bd (n - <span class="mi">1</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">n</span> <span class="nv">w</span>,
n &gt; countk k w -&gt;
open_loc k u (w, Bd n) = mret T k (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk104"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">n</span> <span class="nv">w</span>,
n &gt; countk k w -&gt;
open_loc k u (w, Bd n) = mret T k (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk105">introv ineq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineq</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, Bd n) = mret T k (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk106"><span class="nb">unfold</span> open_loc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineq</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk107"><span class="kn">Lemma</span> <span class="nf">open_loc_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> <span class="nv">u</span>,
      open_loc k u (w, Bd (countk k w)) = u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> (<span class="nv">u</span> : T k LN),
open_loc k u (w, Bd (countk k w)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk108"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> (<span class="nv">u</span> : T k LN),
open_loc k u (w, Bd (countk k w)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk109">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, Bd (countk k w)) = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk10a"><span class="nb">unfold</span> open_loc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> (countk k w) (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd (countk k w))
| Gt =&gt; mret T k (Bd (countk k w - <span class="mi">1</span>))
<span class="kr">end</span> = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals (countk k w) <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk10b"><span class="kn">Lemma</span> <span class="nf">open_loc_atom</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">w</span> <span class="nv">x</span>,
      open_loc k u (w, Fr x) = mret T k (Fr x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">x</span>,
open_loc k u (w, Fr x) = mret T k (Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk10c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">x</span>,
open_loc k u (w, Fr x) = mret T k (Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">locally_nameless_local</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Tactics for local reasoning *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Tactic Notation</span> <span class="s2">&quot;unfold_monoid&quot;</span> :=
  <span class="kp">repeat</span> <span class="nb">unfold</span> monoid_op, Monoid_op_list, Monoid_op_list,
  monoid_unit, Monoid_unit_list, Monoid_unit_list <span class="kr">in</span> *.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span> @prod_K_not_iff : tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Rewrite rules for expressions of the form &lt;&lt;x ‚àà mret T y&gt;&gt; *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span>
     @in_mret_iff @in_mret_eq_iff
     @inmd_mret_iff @inmd_mret_eq_iff <span class="nb">using</span> <span class="nb">typeclasses eauto</span> : tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Rewrite rules for simplifying expressions involving equalities between leaves *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span>
     Fr_injective Fr_injective_not_iff B_neq_Fr : tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Solve goals of the form &lt;&lt;Fr x &lt;&gt; Fr y&gt;&gt; by using &lt;&lt;x &lt;&gt; y&gt;&gt; *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span>
 Fr_injective_not : tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span>
     @subst_loc_eq @subst_in_mret_eq
     <span class="nb">using</span> <span class="nb">typeclasses eauto</span> : tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span>
     @subst_loc_neq @subst_loc_b @subst_loc_fr_neq @subst_in_mret_neq
     <span class="nb">using</span> <span class="kp">first</span> [ <span class="nb">typeclasses eauto</span> | <span class="nb">auto</span> ] : tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span>
     @open_loc_lt @open_loc_gt
     <span class="nb">using</span> <span class="kp">first</span> [ <span class="nb">typeclasses eauto</span> | <span class="nb">auto</span> ] : tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Rewrite</span>
     @open_loc_eq @open_loc_atom
     <span class="nb">using</span> <span class="nb">typeclasses eauto</span> : tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Tactic Notation</span> <span class="s2">&quot;simpl_local&quot;</span> := (autorewrite* <span class="kr">with</span> tea_local).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Metatheory for the &lt;&lt;subst&gt;&gt; operation *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">subst_metatheory</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">fix_dtm</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      (<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
      `{MultiDecoratedTraversablePreModule (list K) T U (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
      `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Types</span>
             (<span class="nv">k</span> : K) (<span class="nv">j</span> : K)
             (<span class="nv">l</span> : LN) (<span class="nv">p</span> : LN)
             (<span class="nv">x</span> : atom) (<span class="nv">t</span> : U LN)
             (<span class="nv">w</span> : list K) (<span class="nv">n</span> : nat).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** LN analysis with contexts *)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk10d"><span class="kn">Lemma</span> <span class="nf">inmd_subst_loc_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">j</span> <span class="nv">p</span> <span class="nv">u</span> <span class="nv">x</span>,
        (w, (j, p)) ‚ààmd subst_loc k x u l &lt;-&gt;
        l &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ l = p \/ <span class="c">(* l is not replaced *)</span>
        l = Fr x /\ (w, (j, p)) ‚ààmd u. <span class="c">(* l is replaced *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">j</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
(w, j, p) ‚ààmd subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk10e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">j</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
(w, j, p) ‚ààmd subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk10f">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, p) ‚ààmd subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk110"><span class="nb">compare</span> l to atom x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, p) ‚ààmd subst_loc k x u (Fr x) &lt;-&gt;
Fr x &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Fr x = p \/
Fr x = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk111" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk111"><hr></label><div class="goal-conclusion">(w, j, p) ‚ààmd subst_loc k x u (Fr a) &lt;-&gt;
Fr a &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Fr a = p \/
Fr a = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk112" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="ln-v-chk112"><hr></label><div class="goal-conclusion">(w, j, p) ‚ààmd subst_loc k x u (Bd n) &lt;-&gt;
Bd n &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Bd n = p \/
Bd n = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk113">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, p) ‚ààmd subst_loc k x u (Fr x) &lt;-&gt;
Fr x &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Fr x = p \/
Fr x = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk114"><span class="nb">rewrite</span> subst_loc_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, p) ‚ààmd u &lt;-&gt;
Fr x &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Fr x = p \/
Fr x = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">clear</span>; <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk115">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, p) ‚ààmd subst_loc k x u (Fr a) &lt;-&gt;
Fr a &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Fr a = p \/
Fr a = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk116"><span class="nb">rewrite</span> subst_loc_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, p) ‚ààmd mret T k (Fr a) &lt;-&gt;
Fr a &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Fr a = p \/
Fr a = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk117"><span class="nb">rewrite</span> inmd_mret_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">w = ∆µ /\ k = j /\ Fr a = p &lt;-&gt;
Fr a &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Fr a = p \/
Fr a = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk118"><span class="nb">rewrite</span> Fr_injective.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">w = ∆µ /\ k = j /\ Fr a = p &lt;-&gt;
a &lt;&gt; x /\ k = j /\ w = ∆µ /\ Fr a = p \/
a = x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk119">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, p) ‚ààmd subst_loc k x u (Bd n) &lt;-&gt;
Bd n &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Bd n = p \/
Bd n = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk11a"><span class="nb">rewrite</span> subst_loc_b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, p) ‚ààmd mret T k (Bd n) &lt;-&gt;
Bd n &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Bd n = p \/
Bd n = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk11b"><span class="nb">rewrite</span> inmd_mret_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">w = ∆µ /\ k = j /\ Bd n = p &lt;-&gt;
Bd n &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ Bd n = p \/
Bd n = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk11c"><span class="nb">rewrite</span> B_neq_Fr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">w = ∆µ /\ k = j /\ Bd n = p &lt;-&gt;
~ <span class="kt">False</span> /\ k = j /\ w = ∆µ /\ Bd n = p \/
<span class="kt">False</span> /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk11d"><span class="kn">Corollary</span> <span class="nf">inmd_subst_loc_iff_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">p</span> <span class="nv">u</span> <span class="nv">x</span>,
        (w, (k, p)) ‚ààmd subst_loc k x u l &lt;-&gt;
        l &lt;&gt; Fr x /\ w = ∆µ /\ l = p \/
        l = Fr x /\ (w, (k, p)) ‚ààmd u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
(w, k, p) ‚ààmd subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, k, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk11e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
(w, k, p) ‚ààmd subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, k, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk11f">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, p) ‚ààmd subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, k, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk120"><span class="nb">rewrite</span> inmd_subst_loc_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l &lt;&gt; Fr x /\ k = k /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, k, p) ‚ààmd u &lt;-&gt;
l &lt;&gt; Fr x /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, k, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk121"><span class="nb">clear</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l &lt;&gt; Fr x /\ k = k /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, k, p) ‚ààmd u &lt;-&gt;
l &lt;&gt; Fr x /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, k, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk122"><span class="kn">Corollary</span> <span class="nf">inmd_subst_loc_iff_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">j</span> <span class="nv">p</span> <span class="nv">u</span> <span class="nv">x</span>,
        k &lt;&gt; j -&gt;
        (w, (j, p)) ‚ààmd subst_loc k x u l &lt;-&gt;
        l = Fr x /\ (w, (j, p)) ‚ààmd u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">j</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(w, j, p) ‚ààmd subst_loc k x u l &lt;-&gt;
l = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk123"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">w</span> <span class="nv">j</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(w, j, p) ‚ààmd subst_loc k x u l &lt;-&gt;
l = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk124">introv neq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, p) ‚ààmd subst_loc k x u l &lt;-&gt;
l = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk125"><span class="nb">rewrite</span> inmd_subst_loc_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l &lt;&gt; Fr x /\ k = j /\ w = ∆µ /\ l = p \/
l = Fr x /\ (w, j, p) ‚ààmd u &lt;-&gt;
l = Fr x /\ (w, j, p) ‚ààmd u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk126"><span class="kn">Theorem</span> <span class="nf">inmd_subst_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">w</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        <span class="c">(* &lt;&lt;l&gt;&gt; occurs in the result of a &lt;&lt;subst&gt;&gt; IFF *)</span>
        (w, j, l) ‚ààmd t &#39;{k | x ~&gt; u} &lt;-&gt;
        <span class="c">(* &lt;&lt;l&gt;&gt; is an occurrence in &lt;&lt;t&gt;&gt; not of the same sort as the &lt;&lt;subst&gt;&gt; OR *)</span>
        k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
        <span class="c">(* &lt;&lt;l&gt;&gt; is an occurrence of the same sort but not an occurrence of &lt;&lt;x&gt;&gt; OR *)</span>
        k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
        <span class="c">(* &lt;&lt;x&gt;&gt; occurs and &lt;&lt;l&gt;&gt; is the any LN in a substituted &lt;&lt;u&gt;&gt; *)</span>
        <span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> : list K, (w1, k, Fr x) ‚ààmd t /\ (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">w</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(w, j, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk127"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">w</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(w, j, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk128"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk129"><span class="nb">compare</span> values k <span class="kn">and</span> j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t &#39;{ j | x ~&gt; u} &lt;-&gt;
j &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk12a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><label class="goal-separator" for="ln-v-chk12a"><hr></label><div class="goal-conclusion">(w, j, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk12b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t &#39;{ j | x ~&gt; u} &lt;-&gt;
j &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk12c"><span class="nb">rewrite</span> (inmd_subst_iff_eq U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc j x u l1 /\ w = w1 ‚óè w2) &lt;-&gt;
j &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk12d"><span class="nb">setoid_rewrite</span> (inmd_subst_loc_iff_eq j).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
    l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2) &lt;-&gt;
j &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk12e"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
    l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2) -&gt;
j &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk12f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk12f"><hr></label><div class="goal-conclusion">j &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2) -&gt;
<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ 
  w = w1 ‚óè w2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk130">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
    l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2) -&gt;
j &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk131"><span class="nb">intros</span> [l&#39; [n1 [n2 conditions]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>conditions</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t /\
(n2 &lt;&gt; Fr x /\ n1 = ∆µ /\ n2 = l \/
 n2 = Fr x /\ (n1, j, l) ‚ààmd u) /\
w = l&#39; ‚óè n1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk132"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>conditions</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t /\
(n2 &lt;&gt; Fr x /\ n1 = ∆µ /\ n2 = l \/
 n2 = Fr x /\ (n1, j, l) ‚ààmd u) /\
w = l&#39; ‚óè n1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk133"><span class="nb">destruct</span> conditions <span class="kr">as</span> [c1 [[c2|c2] c3]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>n2 &lt;&gt; Fr x /\ n1 = ∆µ /\ n2 = l</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span>w = l&#39; ‚óè n1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk134" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>n2 = Fr x /\ (n1, j, l) ‚ààmd u</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span>w = l&#39; ‚óè n1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk134"><hr></label><div class="goal-conclusion">j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk135">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>n2 &lt;&gt; Fr x /\ n1 = ∆µ /\ n2 = l</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span>w = l&#39; ‚óè n1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk136"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>n2 &lt;&gt; Fr x /\ n1 = ∆µ /\ n2 = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (l&#39; ‚óè n1, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ l&#39; ‚óè n1 = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk137"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>n2 &lt;&gt; Fr x /\ n1 = ∆µ /\ n2 = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (l&#39; ‚óè n1, j, l) ‚ààmd t /\ l &lt;&gt; Fr x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk138">destructs c2; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (l&#39; ‚óè ∆µ, j, l) ‚ààmd t /\ l &lt;&gt; Fr x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk139"><span class="nb">rewrite</span> monoid_id_l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (l&#39;, j, l) ‚ààmd t /\ l &lt;&gt; Fr x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk13a">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>n2 = Fr x /\ (n1, j, l) ‚ààmd u</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span>w = l&#39; ‚óè n1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk13b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>n2 = Fr x /\ (n1, j, l) ‚ààmd u</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span>w = l&#39; ‚óè n1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk13c"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>n2 = Fr x /\ (n1, j, l) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = j /\ (l&#39; ‚óè n1, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ l&#39; ‚óè n1 = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk13d"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, n2) ‚ààmd t</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>n2 = Fr x /\ (n1, j, l) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
  (w1, j, Fr x) ‚ààmd t /\
  (w2, j, l) ‚ààmd u /\ l&#39; ‚óè n1 = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk13e">destructs c2; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>l', n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>(l&#39;, j, Fr x) ‚ààmd t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(n1, j, l) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
  (w1, j, Fr x) ‚ààmd t /\
  (w2, j, l) ‚ààmd u /\ l&#39; ‚óè n1 = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk13f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
j = j /\ (w, j, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, j, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2) -&gt;
<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk140"><span class="nb">intros</span> [[contra ?] | [ [? [in_t neq]] | hyp ] ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; j</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk141" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs, H1</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk141"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ 
  w = w1 ‚óè w2</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk142" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
  (w1, j, Fr x) ‚ààmd t /\
  (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk142"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ 
  w = w1 ‚óè w2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk143">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; j</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk144">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs, H1</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk145" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
  (w1, j, Fr x) ‚ààmd t /\
  (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk145"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ 
  w = w1 ‚óè w2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk146">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs, H1</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk147"><span class="kr">exists</span> <span class="nv">w</span> (<span class="nv">∆µ</span> : list K) <span class="nv">l</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs, H1</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t /\
(l &lt;&gt; Fr x /\ ∆µ = ∆µ /\ l = l \/
 l = Fr x /\ (∆µ, j, l) ‚ààmd u) /\ w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk148"><span class="nb">rewrite</span> monoid_id_l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs, H1</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t /\
(l &lt;&gt; Fr x /\ ∆µ = ∆µ /\ l = l \/
 l = Fr x /\ (∆µ, j, l) ‚ààmd u) /\ w = w</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>...</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk149">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
  (w1, j, Fr x) ‚ààmd t /\
  (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk14a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
  (w1, j, Fr x) ‚ààmd t /\
  (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk14b"><span class="nb">destruct</span> hyp <span class="kr">as</span> [w1 [w2 ?]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w1, j, Fr x) ‚ààmd t /\
(w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (l1 &lt;&gt; Fr x /\ w2 = ∆µ /\ l1 = l \/
   l1 = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk14c"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> (<span class="nv">Fr</span> <span class="nv">x</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w1, j, Fr x) ‚ààmd t /\
(w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w1, j, Fr x) ‚ààmd t /\
(Fr x &lt;&gt; Fr x /\ w2 = ∆µ /\ Fr x = l \/
 Fr x = Fr x /\ (w2, j, l) ‚ààmd u) /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk14d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk14e"><span class="nb">rewrite</span> (inmd_subst_neq_iff U)...</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2) &lt;-&gt;
k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk14f"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2) -&gt;
k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk150" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><label class="goal-separator" for="ln-v-chk150"><hr></label><div class="goal-conclusion">k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2) -&gt;
(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk151">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2) -&gt;
k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk152"><span class="nb">intros</span> [? | [n1 [n2 [p [in_t in_local]]]]]...</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(n1, k, p) ‚ààmd t</span></span></span><br><span><var>in_local</var><span class="hyp-type"><b>: </b><span>(n2, j, l) ‚ààmd subst_loc k x u p /\
w = n1 ‚óè n2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk153"><span class="nb">rewrite</span> (inmd_subst_loc_iff_neq k) <span class="kr">in</span> in_local...</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(n1, k, p) ‚ààmd t</span></span></span><br><span><var>in_local</var><span class="hyp-type"><b>: </b><span>(p = Fr x /\ (n2, j, l) ‚ààmd u) /\
w = n1 ‚óè n2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk154"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(n1, k, p) ‚ààmd t</span></span></span><br><span><var>in_local</var><span class="hyp-type"><b>: </b><span>(p = Fr x /\ (n2, j, l) ‚ààmd u) /\
w = n1 ‚óè n2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk155"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(n1, k, p) ‚ààmd t</span></span></span><br><span><var>in_local</var><span class="hyp-type"><b>: </b><span>(p = Fr x /\ (n2, j, l) ‚ààmd u) /\
w = n1 ‚óè n2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
  (w1, k, Fr x) ‚ààmd t /\
  (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk156"><span class="kr">exists</span> <span class="nv">n1</span> <span class="nv">n2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(n1, k, p) ‚ààmd t</span></span></span><br><span><var>in_local</var><span class="hyp-type"><b>: </b><span>(p = Fr x /\ (n2, j, l) ‚ààmd u) /\
w = n1 ‚óè n2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(n1, k, Fr x) ‚ààmd t /\ (n2, j, l) ‚ààmd u /\ w = n1 ‚óè n2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> in_local <span class="kr">as</span> [[? ?] ?]; <span class="nb">subst</span>...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk157">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2) -&gt;
(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk158"><span class="nb">intros</span> [[? ?] | [[? ?] | [w1 [w2 rest]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk159" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k = j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk159"><hr></label><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk15a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>rest</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr x) ‚ààmd t /\
(w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk15a"><hr></label><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk15b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk15c">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k = j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk15d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>rest</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr x) ‚ààmd t /\
(w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk15d"><hr></label><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk15e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k = j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk15f">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>rest</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr x) ‚ààmd t /\
(w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk160">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>rest</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr x) ‚ààmd t /\
(w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk161"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>rest</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr x) ‚ààmd t /\
(w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, k, l1) ‚ààmd t /\
  (w2, j, l) ‚ààmd subst_loc k x u l1 /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk162"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> (<span class="nv">Fr</span> <span class="nv">x</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>rest</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr x) ‚ààmd t /\
(w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w1, k, Fr x) ‚ààmd t /\
(w2, j, l) ‚ààmd subst_loc k x u (Fr x) /\ w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">simpl_local...</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk163"><span class="kn">Corollary</span> <span class="nf">inmd_subst_iff_eq&#39;</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        (w, k, l) ‚ààmd t &#39;{k | x ~&gt; u} &lt;-&gt;
        (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
        <span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> : list K, (w1, k, Fr x) ‚ààmd t /\ (w2, k, l) ‚ààmd u /\ w = w1 ‚óè w2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(w, k, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
(w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, k, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk164"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(w, k, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
(w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, k, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk165"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
(w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, k, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk166"><span class="nb">rewrite</span> inmd_subst_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; k /\ (w, k, l) ‚ààmd t \/
k = k /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, k, l) ‚ààmd u /\ w = w1 ‚óè w2) &lt;-&gt;
(w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, k, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk167"><span class="kn">Corollary</span> <span class="nf">inmd_subst_iff_neq&#39;</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">w</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        k &lt;&gt; j -&gt;
        (w, j, l) ‚ààmd t &#39;{k | x ~&gt; u} &lt;-&gt;
        (w, j, l) ‚ààmd t \/
        <span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> : list K, (w1, k, Fr x) ‚ààmd t /\ (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">w</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(w, j, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk168"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">w</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(w, j, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk169"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, j, l) ‚ààmd t &#39;{ k | x ~&gt; u} &lt;-&gt;
(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk16a"><span class="nb">rewrite</span> inmd_subst_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (w, j, l) ‚ààmd t \/
k = j /\ (w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2) &lt;-&gt;
(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** LN analysis without contexts *)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk16b"><span class="kn">Lemma</span> <span class="nf">in_subst_loc_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">j</span> <span class="nv">p</span> <span class="nv">u</span> <span class="nv">x</span>,
        (j, p) ‚ààm subst_loc k x u l &lt;-&gt;
        l &lt;&gt; Fr x /\ k = j /\ l = p \/
        l = Fr x /\ (j, p) ‚ààm u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">j</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
(j, p) ‚ààm subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ k = j /\ l = p \/ l = Fr x /\ (j, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk16c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">j</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
(j, p) ‚ààm subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ k = j /\ l = p \/ l = Fr x /\ (j, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk16d">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, p) ‚ààm subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ k = j /\ l = p \/ l = Fr x /\ (j, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> l to atom x; autorewrite* <span class="kr">with</span> tea_local; <span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk16e"><span class="kn">Corollary</span> <span class="nf">in_subst_loc_iff_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">p</span> <span class="nv">u</span> <span class="nv">x</span>,
        (k, p) ‚ààm subst_loc k x u l &lt;-&gt;
        l &lt;&gt; Fr x /\ l = p \/
        l = Fr x /\ (k, p) ‚ààm u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
(k, p) ‚ààm subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ l = p \/ l = Fr x /\ (k, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk16f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
(k, p) ‚ààm subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ l = p \/ l = Fr x /\ (k, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk170">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l, p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, p) ‚ààm subst_loc k x u l &lt;-&gt;
l &lt;&gt; Fr x /\ l = p \/ l = Fr x /\ (k, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> in_subst_loc_iff; <span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk171"><span class="kn">Corollary</span> <span class="nf">in_subst_loc_iff_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">j</span> <span class="nv">p</span> <span class="nv">u</span> <span class="nv">x</span>,
        k &lt;&gt; j -&gt;
        (j, p) ‚ààm subst_loc k x u l &lt;-&gt;
        l = Fr x /\ (j, p) ‚ààm u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">j</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(j, p) ‚ààm subst_loc k x u l &lt;-&gt;
l = Fr x /\ (j, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk172"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span> <span class="nv">j</span> <span class="nv">p</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(j, p) ‚ààm subst_loc k x u l &lt;-&gt;
l = Fr x /\ (j, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk173">introv neq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, p) ‚ààm subst_loc k x u l &lt;-&gt;
l = Fr x /\ (j, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk174"><span class="nb">rewrite</span> in_subst_loc_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l &lt;&gt; Fr x /\ k = j /\ l = p \/ l = Fr x /\ (j, p) ‚ààm u &lt;-&gt;
l = Fr x /\ (j, p) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk175"><span class="kn">Theorem</span> <span class="nf">in_subst_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        <span class="c">(* &lt;&lt;l&gt;&gt; occurs in the result of a &lt;&lt;subst&gt;&gt; IFF *)</span>
        (j, l) ‚ààm t &#39;{k | x ~&gt; u} &lt;-&gt;
        <span class="c">(* &lt;&lt;l&gt;&gt; is an occurrence in &lt;&lt;t&gt;&gt; not of the same sort as the &lt;&lt;subst&gt;&gt; OR *)</span>
        k &lt;&gt; j /\ (j, l) ‚ààm t \/
        <span class="c">(* &lt;&lt;l&gt;&gt; is an occurrence of the same sort but not an occurrence of &lt;&lt;x&gt;&gt; OR *)</span>
        k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
        <span class="c">(* &lt;&lt;x&gt;&gt; occurs and &lt;&lt;l&gt;&gt; is the any LN in a substituted &lt;&lt;u&gt;&gt; *)</span>
        (k, Fr x) ‚ààm t /\ (j, l) ‚ààm u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(j, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk176"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(j, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk177"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk178">destruct_eq_args k j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t &#39;{ j | x ~&gt; u} &lt;-&gt;
j &lt;&gt; j /\ (j, l) ‚ààm t \/
j = j /\ (j, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk179" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><label class="goal-separator" for="ln-v-chk179"><hr></label><div class="goal-conclusion">(j, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk17a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t &#39;{ j | x ~&gt; u} &lt;-&gt;
j &lt;&gt; j /\ (j, l) ‚ààm t \/
j = j /\ (j, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk17b"><span class="nb">rewrite</span> (in_subst_eq_iff U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">l1</span>,
   (j, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc j x u l1) &lt;-&gt;
j &lt;&gt; j /\ (j, l) ‚ààm t \/
j = j /\ (j, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk17c"><span class="nb">setoid_rewrite</span> (in_subst_loc_iff_eq).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">l1</span>,
   (j, l1) ‚ààm t /\
   (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)) &lt;-&gt;
j &lt;&gt; j /\ (j, l) ‚ààm t \/
j = j /\ (j, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk17d"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">l1</span>,
   (j, l1) ‚ààm t /\
   (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)) -&gt;
j &lt;&gt; j /\ (j, l) ‚ààm t \/
j = j /\ (j, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk17e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk17e"><hr></label><div class="goal-conclusion">j &lt;&gt; j /\ (j, l) ‚ààm t \/
j = j /\ (j, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u -&gt;
<span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk17f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">l1</span>,
   (j, l1) ‚ààm t /\
   (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)) -&gt;
j &lt;&gt; j /\ (j, l) ‚ààm t \/
j = j /\ (j, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk180"><span class="nb">intros</span> [? [?  in_sub]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, x0) ‚ààm t</span></span></span><br><span><var>in_sub</var><span class="hyp-type"><b>: </b><span>x0 &lt;&gt; Fr x /\ x0 = l \/
x0 = Fr x /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j &lt;&gt; j /\ (j, l) ‚ààm t \/
j = j /\ (j, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> in_sub <span class="kr">as</span> [[? heq] | [heq ?]]; <span class="nb">subst</span>...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk181">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j &lt;&gt; j /\ (j, l) ‚ààm t \/
j = j /\ (j, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u -&gt;
<span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk182"><span class="nb">intros</span> [[contra ?] | [ [? [in_t neq]] | ? ] ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; j</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk183" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs, H1</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk183"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk184" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><label class="goal-separator" for="ln-v-chk184"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk185">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; j</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk186">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs, H1</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk187" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><label class="goal-separator" for="ln-v-chk187"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk188">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs, H1</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">l</span>...</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk189">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk18a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (j, l1) ‚ààm t /\
  (l1 &lt;&gt; Fr x /\ l1 = l \/ l1 = Fr x /\ (j, l) ‚ààm u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk18b"><span class="kr">exists</span> (<span class="nv">Fr</span> <span class="nv">x</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>j = j</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm t /\
(Fr x &lt;&gt; Fr x /\ Fr x = l \/
 Fr x = Fr x /\ (j, l) ‚ààm u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk18c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk18d"><span class="nb">rewrite</span> (in_subst_neq_iff U); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1) &lt;-&gt;
k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk18e"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1) -&gt;
k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk18f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><label class="goal-separator" for="ln-v-chk18f"><hr></label><div class="goal-conclusion">k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u -&gt;
(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk190">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1) -&gt;
k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk191"><span class="nb">intros</span> [? | [p [in_t in_local]] ]; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(k, p) ‚ààm t</span></span></span><br><span><var>in_local</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm subst_loc k x u p</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk192"><span class="nb">rewrite</span> in_subst_loc_iff_neq <span class="kr">in</span> in_local; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(k, p) ‚ààm t</span></span></span><br><span><var>in_local</var><span class="hyp-type"><b>: </b><span>p = Fr x /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk193"><span class="nb">destruct</span> in_local <span class="kr">as</span> [? ?]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk194">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u -&gt;
(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk195"><span class="nb">intros</span> [[? ?] | [[? ?] | ?]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk196" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k = j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t /\ l &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk196"><hr></label><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk197" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><label class="goal-separator" for="ln-v-chk197"><hr></label><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk198">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk199">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k = j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t /\ l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk19a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><label class="goal-separator" for="ln-v-chk19a"><hr></label><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk19b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k = j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t /\ l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk19c">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk19d">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/
(<span class="kr">exists</span> <span class="nv">l1</span>,
   (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk19e"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l1</span>,
  (k, l1) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u l1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk19f"><span class="kr">exists</span> (<span class="nv">Fr</span> <span class="nv">x</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr x) ‚ààm t /\ (j, l) ‚ààm subst_loc k x u (Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">simpl_local...</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a0"><span class="kn">Corollary</span> <span class="nf">in_subst_iff_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        (k, l) ‚ààm t &#39;{k | x ~&gt; u} &lt;-&gt;
        (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
        (k, Fr x) ‚ààm t /\ (k, l) ‚ààm u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (k, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a1"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (k, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (k, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a3"><span class="nb">rewrite</span> in_subst_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; k /\ (k, l) ‚ààm t \/
k = k /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (k, l) ‚ààm u &lt;-&gt;
(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (k, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a4"><span class="kn">Corollary</span> <span class="nf">in_subst_iff_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        k &lt;&gt; j -&gt;
        (j, l) ‚ààm t &#39;{k | x ~&gt; u} &lt;-&gt;
        (j, l) ‚ààm t \/
        (k, Fr x) ‚ààm t /\ (j, l) ‚ààm u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(j, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(j, l) ‚ààm t \/ (k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a5"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(j, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(j, l) ‚ààm t \/ (k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a6"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(j, l) ‚ààm t \/ (k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a7"><span class="nb">rewrite</span> in_subst_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u &lt;-&gt;
(j, l) ‚ààm t \/ (k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Free variables after substitution *)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a8"><span class="kn">Corollary</span> <span class="nf">in_free_subst_iff_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
        y ‚àà free U k (t &#39;{k | x ~&gt; u}) &lt;-&gt;
        y ‚àà free U k t /\ y &lt;&gt; x \/ x ‚àà free U k t /\ y ‚àà free (T k) k u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U k t /\ y &lt;&gt; x \/
x ‚àà free U k t /\ y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U k t /\ y &lt;&gt; x \/
x ‚àà free U k t /\ y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1aa"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U k t /\ y &lt;&gt; x \/
x ‚àà free U k t /\ y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ab"><span class="kp">repeat</span> <span class="nb">rewrite</span> (in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(k, Fr y) ‚ààm t /\ y &lt;&gt; x \/
(k, Fr x) ‚ààm t /\ (k, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ac"><span class="nb">rewrite</span> in_subst_iff_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ Fr y &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (k, Fr y) ‚ààm u &lt;-&gt;
(k, Fr y) ‚ààm t /\ y &lt;&gt; x \/
(k, Fr x) ‚ààm t /\ (k, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> simpl_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ad" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ad"><span class="kn">Corollary</span> <span class="nf">in_FV_subst_iff_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
        y `<span class="kr">in</span>` FV U k (t &#39;{k | x ~&gt; u}) &lt;-&gt;
        y `<span class="kr">in</span>` FV U k t /\ y &lt;&gt; x \/
        x `<span class="kr">in</span>` FV U k t /\ y `<span class="kr">in</span>` FV (T k) k u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">y</span> : AtomSet.elt),
y `<span class="kr">in</span>` FV U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y `<span class="kr">in</span>` FV U k t /\ y &lt;&gt; x \/
x `<span class="kr">in</span>` FV U k t /\ y `<span class="kr">in</span>` FV (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ae"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">y</span> : AtomSet.elt),
y `<span class="kr">in</span>` FV U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y `<span class="kr">in</span>` FV U k t /\ y &lt;&gt; x \/
x `<span class="kr">in</span>` FV U k t /\ y `<span class="kr">in</span>` FV (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1af"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y `<span class="kr">in</span>` FV U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y `<span class="kr">in</span>` FV U k t /\ y &lt;&gt; x \/
x `<span class="kr">in</span>` FV U k t /\ y `<span class="kr">in</span>` FV (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b0"><span class="kp">repeat</span> <span class="nb">rewrite</span> &lt;- (free_iff_FV).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U k t /\ y &lt;&gt; x \/
x ‚àà free U k t /\ y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> in_free_subst_iff_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b1"><span class="kn">Corollary</span> <span class="nf">in_free_subst_iff_neq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
        k &lt;&gt; j -&gt;
        y ‚àà free U j (t &#39;{k | x ~&gt; u}) &lt;-&gt;
        y ‚àà free U j t \/ x ‚àà free U k t /\ y ‚àà free (T k) j u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
k &lt;&gt; j -&gt;
y ‚àà free U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U j t \/ x ‚àà free U k t /\ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
k &lt;&gt; j -&gt;
y ‚àà free U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U j t \/ x ‚àà free U k t /\ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b3"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U j t \/ x ‚àà free U k t /\ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b4"><span class="kp">repeat</span> <span class="nb">rewrite</span> (in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t &#39;{ k | x ~&gt; u} &lt;-&gt;
(j, Fr y) ‚ààm t \/ (k, Fr x) ‚ààm t /\ (j, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b5"><span class="nb">rewrite</span> in_subst_iff_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t \/ (k, Fr x) ‚ààm t /\ (j, Fr y) ‚ààm u &lt;-&gt;
(j, Fr y) ‚ààm t \/ (k, Fr x) ‚ààm t /\ (j, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b6"><span class="kn">Corollary</span> <span class="nf">in_FV_subst_iff_neq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
        k &lt;&gt; j -&gt;
        y `<span class="kr">in</span>` FV U j (t &#39;{k | x ~&gt; u}) &lt;-&gt;
        y `<span class="kr">in</span>` FV U j t \/
        x `<span class="kr">in</span>` FV U k t /\ y `<span class="kr">in</span>` FV (T k) j u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">y</span> : AtomSet.elt),
k &lt;&gt; j -&gt;
y `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y `<span class="kr">in</span>` FV U j t \/
x `<span class="kr">in</span>` FV U k t /\ y `<span class="kr">in</span>` FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">y</span> : AtomSet.elt),
k &lt;&gt; j -&gt;
y `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y `<span class="kr">in</span>` FV U j t \/
x `<span class="kr">in</span>` FV U k t /\ y `<span class="kr">in</span>` FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b8"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y `<span class="kr">in</span>` FV U j t \/
x `<span class="kr">in</span>` FV U k t /\ y `<span class="kr">in</span>` FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b9"><span class="kp">repeat</span> <span class="nb">rewrite</span> &lt;- (free_iff_FV).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt;
y ‚àà free U j t \/ x ‚àà free U k t /\ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto using</span> in_free_subst_iff_neq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Upper and lower bounds for leaves after substitution *)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ba"><span class="kn">Corollary</span> <span class="nf">in_subst_upper</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        (j, l) ‚ààm t &#39;{k | x ~&gt; u} -&gt;
        (j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(j, l) ‚ààm t &#39;{ k | x ~&gt; u} -&gt;
(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1bb"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(j, l) ‚ààm t &#39;{ k | x ~&gt; u} -&gt;
(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1bc">introv hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t &#39;{ k | x ~&gt; u}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1bd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1bd"><span class="nb">rewrite</span> in_subst_iff <span class="kr">in</span> hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j /\ (j, l) ‚ààm t \/
k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/
(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1be"><span class="nb">destruct</span> hin <span class="kr">as</span> [[hyp1 hyp2] | [hyp | hyp] ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk1bf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1bf"><hr></label><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk1c0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1c0"><hr></label><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c2"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c3"><span class="nb">split</span>; [<span class="bp">assumption</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) &lt;&gt; (k, Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">injection</span>...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>k = j /\ (k, l) ‚ààm t /\ l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c5">destructs hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k = j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c6"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (j, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c7"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (j, Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c8"><span class="nb">split</span>; [<span class="bp">assumption</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) &lt;&gt; (j, Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">injection</span>...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1c9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t /\ (j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ca" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ca"><span class="kn">Corollary</span> <span class="nf">in_subst_upper_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        (k, l) ‚ààm t &#39;{k | x ~&gt; u} -&gt;
        (k, l) ‚ààm t /\ l &lt;&gt; Fr x \/ (k, l) ‚ààm u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t &#39;{ k | x ~&gt; u} -&gt;
(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/ (k, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1cb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t &#39;{ k | x ~&gt; u} -&gt;
(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/ (k, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1cc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1cc">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t &#39;{ k | x ~&gt; u}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/ (k, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1cd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1cd"><span class="nb">apply</span> in_subst_upper <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t /\ (k, l) &lt;&gt; (k, Fr x) \/
(k, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/ (k, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ce">autorewrite* <span class="kr">with</span> tea_local <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/ (k, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm t /\ l &lt;&gt; Fr x \/ (k, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1cf"><span class="kn">Corollary</span> <span class="nf">in_subst_upper_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        k &lt;&gt; j -&gt;
        (j, l) ‚ààm t &#39;{k | x ~&gt; u} -&gt;
        (j, l) ‚ààm t \/ (j, l) ‚ààm u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(j, l) ‚ààm t &#39;{ k | x ~&gt; u} -&gt;
(j, l) ‚ààm t \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(j, l) ‚ààm t &#39;{ k | x ~&gt; u} -&gt;
(j, l) ‚ààm t \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d1">introv neq hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t &#39;{ k | x ~&gt; u}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d2"><span class="nb">apply</span> in_subst_upper <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(j, l) ‚ààm t /\ (j, l) &lt;&gt; (k, Fr x) \/
(j, l) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, l) ‚ààm t \/ (j, l) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d3"><span class="kn">Corollary</span> <span class="nf">in_free_subst_upper</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
        y ‚àà free U j (t &#39;{k | x ~&gt; u}) -&gt;
        (y ‚àà free U j t /\ j &lt;&gt; k) \/ (y ‚àà free U k t /\ y &lt;&gt; x /\ k = j) \/ y ‚àà free (T k) j u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U j (t &#39;{ k | x ~&gt; u}) -&gt;
y ‚àà free U j t /\ j &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = j \/
y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U j (t &#39;{ k | x ~&gt; u}) -&gt;
y ‚àà free U j t /\ j &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = j \/
y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d5"><span class="nb">setoid_rewrite</span> (in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
(j, Fr y) ‚ààm t &#39;{ k | x ~&gt; u} -&gt;
(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d6">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm t &#39;{ k | x ~&gt; u}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d7"><span class="nb">apply</span> in_subst_upper <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm t /\ (j, Fr y) &lt;&gt; (k, Fr x) \/
(j, Fr y) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d8"><span class="nb">destruct</span> hyp <span class="kr">as</span> [hyp | hyp].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm t /\ (j, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk1d9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm u</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1d9"><hr></label><div class="goal-conclusion">(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1da">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm t /\ (j, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1db"><span class="nb">destruct</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1dc"><span class="nb">compare</span> values j <span class="kn">and</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ k &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = k \/ (k, Fr y) ‚ààm u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk1dd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1dd"><hr></label><div class="goal-conclusion">(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1de">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ k &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = k \/ (k, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1df"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = k \/ (k, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e0"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = k</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e1">splits; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y &lt;&gt; x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span> contra; <span class="nb">subst</span>; <span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, Fr y) &lt;&gt; (k, Fr x)</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t /\ j &lt;&gt; k \/
(k, Fr y) ‚ààm t /\ y &lt;&gt; x /\ k = j \/ (j, Fr y) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> in_subst_upper.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e4"><span class="kn">Corollary</span> <span class="nf">in_free_subst_upper_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
        y ‚àà free U k (t &#39;{k | x ~&gt; u}) -&gt;
        (y ‚àà free U k t /\ y &lt;&gt; x) \/ y ‚àà free (T k) k u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (t &#39;{ k | x ~&gt; u}) -&gt;
y ‚àà free U k t /\ y &lt;&gt; x \/ y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (t &#39;{ k | x ~&gt; u}) -&gt;
y ‚àà free U k t /\ y &lt;&gt; x \/ y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e6">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k (t &#39;{ k | x ~&gt; u})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k t /\ y &lt;&gt; x \/ y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e7"><span class="nb">apply</span> in_free_subst_upper <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ k &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = k \/
y ‚àà free (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k t /\ y &lt;&gt; x \/ y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e8"><span class="kn">Corollary</span> <span class="nf">in_free_subst_upper_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
        k &lt;&gt; j -&gt;
        y ‚àà free U j (t &#39;{k | x ~&gt; u}) -&gt;
        y ‚àà free U j t \/ y ‚àà free (T k) j u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
k &lt;&gt; j -&gt;
y ‚àà free U j (t &#39;{ k | x ~&gt; u}) -&gt;
y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
k &lt;&gt; j -&gt;
y ‚àà free U j (t &#39;{ k | x ~&gt; u}) -&gt;
y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ea" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ea">introv neq hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j (t &#39;{ k | x ~&gt; u})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1eb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1eb"><span class="nb">apply</span> in_free_subst_upper <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j t /\ j &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = j \/
y ‚àà free (T k) j u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ec" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ec"><span class="kn">Corollary</span> <span class="nf">FV_subst_upper</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
        y `<span class="kr">in</span>` FV U j (t &#39;{k | x ~&gt; u}) -&gt;
        k = j /\ y `<span class="kr">in</span>` (FV U k t \\ {{x}} ‚à™ FV (T k) j u)%<span class="nb">set</span> \/
        k &lt;&gt; j /\ y `<span class="kr">in</span>` (FV U j t ‚à™ FV (T k) j u)%<span class="nb">set</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">y</span> : AtomSet.elt),
y `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u}) -&gt;
k = j /\ y `<span class="kr">in</span>` (FV U k t \\ {{x}} ‚à™ FV (T k) j u) \/
k &lt;&gt; j /\ y `<span class="kr">in</span>` (FV U j t ‚à™ FV (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ed"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">y</span> : AtomSet.elt),
y `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u}) -&gt;
k = j /\ y `<span class="kr">in</span>` (FV U k t \\ {{x}} ‚à™ FV (T k) j u) \/
k &lt;&gt; j /\ y `<span class="kr">in</span>` (FV U j t ‚à™ FV (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ee" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ee"><span class="nb">setoid_rewrite</span> AtomSet.union_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">y</span> : AtomSet.elt),
y `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u}) -&gt;
k = j /\
(y `<span class="kr">in</span>` (FV U k t \\ {{x}}) \/ y `<span class="kr">in</span>` FV (T k) j u) \/
k &lt;&gt; j /\ (y `<span class="kr">in</span>` FV U j t \/ y `<span class="kr">in</span>` FV (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ef"><span class="nb">setoid_rewrite</span> AtomSet.diff_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">y</span> : AtomSet.elt),
y `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u}) -&gt;
k = j /\
(y `<span class="kr">in</span>` FV U k t /\ y `notin` {{x}} \/
 y `<span class="kr">in</span>` FV (T k) j u) \/
k &lt;&gt; j /\ (y `<span class="kr">in</span>` FV U j t \/ y `<span class="kr">in</span>` FV (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1f0"><span class="nb">setoid_rewrite</span> &lt;- free_iff_FV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">y</span> : AtomSet.elt),
y ‚àà free U j (t &#39;{ k | x ~&gt; u}) -&gt;
k = j /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) j u) \/
k &lt;&gt; j /\ (y ‚àà free U j t \/ y ‚àà free (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1f1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1f1">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j (t &#39;{ k | x ~&gt; u})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) j u) \/
k &lt;&gt; j /\ (y ‚àà free U j t \/ y ‚àà free (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1f2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1f2"><span class="nb">apply</span> in_free_subst_upper <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j t /\ j &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = j \/
y ‚àà free (T k) j u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) j u) \/
k &lt;&gt; j /\ (y ‚àà free U j t \/ y ‚àà free (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1f3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1f3"><span class="nb">compare</span> values j <span class="kn">and</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ k &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = k \/
y ‚àà free (T k) k u</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u) \/
k &lt;&gt; k /\ (y ‚àà free U k t \/ y ‚àà free (T k) k u)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk1f4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j t /\ j &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = j \/
y ‚àà free (T k) j u</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1f4"><hr></label><div class="goal-conclusion">k = j /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) j u) \/
k &lt;&gt; j /\ (y ‚àà free U j t \/ y ‚àà free (T k) j u)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1f5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1f5">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ k &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = k \/
y ‚àà free (T k) k u</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u) \/
k &lt;&gt; k /\ (y ‚àà free U k t \/ y ‚àà free (T k) k u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1f6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1f6"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ k &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = k \/
y ‚àà free (T k) k u</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1f7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1f7"><span class="nb">destruct</span> hyp <span class="kr">as</span> [hyp | [hyp | hyp]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ k &lt;&gt; k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk1f8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1f8"><hr></label><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk1f9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free (T k) k u</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1f9"><hr></label><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1fa" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1fa">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ k &lt;&gt; k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1fb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1fb"><span class="nb">split</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ k &lt;&gt; k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k t /\ y `notin` {{x}} \/
y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1fc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1fc">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk1fd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free (T k) k u</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1fd"><hr></label><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1fe" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1fe">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1ff" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1ff"><span class="nb">split</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k t /\ y `notin` {{x}} \/
y ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk200" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk200"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k t /\ y `notin` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk201" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk201"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk202" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><label class="goal-separator" for="ln-v-chk202"><hr></label><div class="goal-conclusion">y `notin` {{x}}</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk203" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk203"><span class="nb">intuition</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = k</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y `notin` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk204" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk204">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free (T k) k u</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk205" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk205">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free (T k) k u</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = k /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) k u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk206" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk206">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j t /\ j &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = j \/
y ‚àà free (T k) j u</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\
(y ‚àà free U k t /\ y `notin` {{x}} \/
 y ‚àà free (T k) j u) \/
k &lt;&gt; j /\ (y ‚àà free U j t \/ y ‚àà free (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk207" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk207"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j t /\ j &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = j \/
y ‚àà free (T k) j u</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k &lt;&gt; j /\ (y ‚àà free U j t \/ y ‚àà free (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk208" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk208"><span class="nb">split</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j t /\ j &lt;&gt; k \/
y ‚àà free U k t /\ y &lt;&gt; x /\ k = j \/
y ‚àà free (T k) j u</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk209" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk209"><span class="nb">destruct</span> hyp <span class="kr">as</span> [hyp | [hyp | hyp]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j t /\ j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk20a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = j</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk20a"><hr></label><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk20b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free (T k) j u</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk20b"><hr></label><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk20c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk20c">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U j t /\ j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk20d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk20d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = j</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk20e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free (T k) j u</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk20e"><hr></label><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk20f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk20f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free U k t /\ y &lt;&gt; x /\ k = j</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk210">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free (T k) j u</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk211" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk211">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>y ‚àà free (T k) j u</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j t \/ y ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk212"><span class="kn">Corollary</span> <span class="nf">FV_subst_upper_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">x</span>,
        FV U k (t &#39;{k | x ~&gt; u}) ‚äÜ
                (FV U k t \\ {{x}} ‚à™ FV (T k) k u).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
FV U k (t &#39;{ k | x ~&gt; u})
‚äÜ FV U k t \\ {{x}} ‚à™ FV (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk213" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk213"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
FV U k (t &#39;{ k | x ~&gt; u})
‚äÜ FV U k t \\ {{x}} ‚à™ FV (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk214" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk214"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k (t &#39;{ k | x ~&gt; u})
‚äÜ FV U k t \\ {{x}} ‚à™ FV (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk215"><span class="nb">intros</span> a hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>a `<span class="kr">in</span>` FV U k (t &#39;{ k | x ~&gt; u})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` (FV U k t \\ {{x}} ‚à™ FV (T k) k u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk216" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk216"><span class="nb">apply</span> FV_subst_upper <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>k = k /\
a `<span class="kr">in</span>` (FV U k t \\ {{x}} ‚à™ FV (T k) k u) \/
k &lt;&gt; k /\ a `<span class="kr">in</span>` (FV U k t ‚à™ FV (T k) k u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` (FV U k t \\ {{x}} ‚à™ FV (T k) k u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk217" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk217"><span class="kn">Corollary</span> <span class="nf">scoped_subst_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> <span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span>,
        scoped U k t Œ≥1 -&gt;
        scoped (T k) k u Œ≥2 -&gt;
        scoped U k (t &#39;{k | x ~&gt; u}) (Œ≥1 \\ {{x}} ‚à™ Œ≥2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : AtomSet.t),
scoped U k t Œ≥1 -&gt;
scoped (T k) k u Œ≥2 -&gt;
scoped U k (t &#39;{ k | x ~&gt; u}) (Œ≥1 \\ {{x}} ‚à™ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk218" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk218"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : AtomSet.t),
scoped U k t Œ≥1 -&gt;
scoped (T k) k u Œ≥2 -&gt;
scoped U k (t &#39;{ k | x ~&gt; u}) (Œ≥1 \\ {{x}} ‚à™ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk219">introv St Su.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>scoped U k t Œ≥1</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>scoped (T k) k u Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped U k (t &#39;{ k | x ~&gt; u}) (Œ≥1 \\ {{x}} ‚à™ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk21a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk21a"><span class="nb">unfold</span> scoped <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>FV U k t ‚äÜ Œ≥1</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>FV (T k) k u ‚äÜ Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k (t &#39;{ k | x ~&gt; u}) ‚äÜ Œ≥1 \\ {{x}} ‚à™ Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk21b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk21b"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>FV U k t ‚äÜ Œ≥1</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>FV (T k) k u ‚äÜ Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k (t &#39;{ k | x ~&gt; u}) ‚äÜ <span class="nl">?y</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk21c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>FV U k t ‚äÜ Œ≥1</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>FV (T k) k u ‚äÜ Œ≥2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk21c"><hr></label><div class="goal-conclusion"><span class="nl">?y</span> ‚äÜ Œ≥1 \\ {{x}} ‚à™ Œ≥2</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk21d"><span class="nb">apply</span> FV_subst_upper_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>FV U k t ‚äÜ Œ≥1</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>FV (T k) k u ‚äÜ Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k t \\ {{x}} ‚à™ FV (T k) k u ‚äÜ Œ≥1 \\ {{x}} ‚à™ Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk21e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk21e"><span class="kn">Corollary</span> <span class="nf">FV_subst_upper_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">x</span>,
        k &lt;&gt; j -&gt;
        FV U j (t &#39;{k | x ~&gt; u}) ‚äÜ
                (FV U j t ‚à™ FV (T k) j u).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
k &lt;&gt; j -&gt;
FV U j (t &#39;{ k | x ~&gt; u}) ‚äÜ FV U j t ‚à™ FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk21f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk21f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
k &lt;&gt; j -&gt;
FV U j (t &#39;{ k | x ~&gt; u}) ‚äÜ FV U j t ‚à™ FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk220" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk220"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U j (t &#39;{ k | x ~&gt; u}) ‚äÜ FV U j t ‚à™ FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk221" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk221"><span class="nb">intros</span> a hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>a `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` (FV U j t ‚à™ FV (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk222" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk222"><span class="nb">apply</span> FV_subst_upper <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>k = j /\
a `<span class="kr">in</span>` (FV U k t \\ {{x}} ‚à™ FV (T k) j u) \/
k &lt;&gt; j /\ a `<span class="kr">in</span>` (FV U j t ‚à™ FV (T k) j u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` (FV U j t ‚à™ FV (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk223" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk223"><span class="kn">Corollary</span> <span class="nf">scoped_subst_neq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">j</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span>,
        j &lt;&gt; k -&gt;
        scoped U k t Œ≥1 -&gt;
        scoped (T j) k u Œ≥2 -&gt;
        scoped U k (t &#39;{j | x ~&gt; u}) (Œ≥1 ‚à™ Œ≥2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">j</span> <span class="nv">k</span> (<span class="nv">u</span> : T j LN) <span class="nv">x</span> (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : AtomSet.t),
j &lt;&gt; k -&gt;
scoped U k t Œ≥1 -&gt;
scoped (T j) k u Œ≥2 -&gt;
scoped U k (t &#39;{ j | x ~&gt; u}) (Œ≥1 ‚à™ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk224" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk224"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">j</span> <span class="nv">k</span> (<span class="nv">u</span> : T j LN) <span class="nv">x</span> (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : AtomSet.t),
j &lt;&gt; k -&gt;
scoped U k t Œ≥1 -&gt;
scoped (T j) k u Œ≥2 -&gt;
scoped U k (t &#39;{ j | x ~&gt; u}) (Œ≥1 ‚à™ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk225" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk225">introv St Su.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>scoped U k t Œ≥1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped (T j) k u Œ≥2 -&gt;
scoped U k (t &#39;{ j | x ~&gt; u}) (Œ≥1 ‚à™ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk226"><span class="nb">unfold</span> scoped <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>FV U k t ‚äÜ Œ≥1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV (T j) k u ‚äÜ Œ≥2 -&gt;
FV U k (t &#39;{ j | x ~&gt; u}) ‚äÜ Œ≥1 ‚à™ Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk227"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>FV U k t ‚äÜ Œ≥1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV (T j) k u ‚äÜ Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k (t &#39;{ j | x ~&gt; u}) ‚äÜ <span class="nl">?y</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk228" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>FV U k t ‚äÜ Œ≥1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV (T j) k u ‚äÜ Œ≥2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk228"><hr></label><div class="goal-conclusion"><span class="nl">?y</span> ‚äÜ Œ≥1 ‚à™ Œ≥2</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk229" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk229"><span class="nb">apply</span> FV_subst_upper_neq; <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>j, k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>AtomSet.t</span></span></span><br><span><var>St</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>Su</var><span class="hyp-type"><b>: </b><span>FV U k t ‚äÜ Œ≥1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV (T j) k u ‚äÜ Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k t ‚à™ FV (T j) k u ‚äÜ Œ≥1 ‚à™ Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk22a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk22a"><span class="kn">Corollary</span> <span class="nf">in_subst_lower_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        (k, l) ‚ààm t /\ l &lt;&gt; Fr x -&gt;
        (k, l) ‚ààm t &#39;{k | x ~&gt; u}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t /\ l &lt;&gt; Fr x -&gt; (k, l) ‚ààm t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk22b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk22b"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t /\ l &lt;&gt; Fr x -&gt; (k, l) ‚ààm t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">rewrite</span> in_subst_iff...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk22c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk22c"><span class="kn">Corollary</span> <span class="nf">in_subst_lower_neq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">l</span> <span class="nv">x</span>,
        k &lt;&gt; j -&gt;
        (j, l) ‚ààm t -&gt;
        (j, l) ‚ààm t &#39;{k | x ~&gt; u}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt; (j, l) ‚ààm t -&gt; (j, l) ‚ààm t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk22d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk22d"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt; (j, l) ‚ààm t -&gt; (j, l) ‚ààm t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">rewrite</span> in_subst_iff...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk22e"><span class="kn">Corollary</span> <span class="nf">in_free_subst_lower_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> <span class="nv">y</span>,
        y ‚àà free U k t /\ y &lt;&gt; x -&gt;
        y ‚àà free U k (t &#39;{k | x ~&gt; u}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k t /\ y &lt;&gt; x -&gt;
y ‚àà free U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk22f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k t /\ y &lt;&gt; x -&gt;
y ‚àà free U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk230" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk230"><span class="nb">setoid_rewrite</span> (in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
(k, Fr y) ‚ààm t /\ y &lt;&gt; x -&gt;
(k, Fr y) ‚ààm t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk231" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk231"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t /\ y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk232" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk232"><span class="nb">apply</span> in_subst_lower_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t /\ y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ Fr y &lt;&gt; Fr x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> simpl_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk233" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk233"><span class="kn">Corollary</span> <span class="nf">in_free_subst_lower_neq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
        k &lt;&gt; j -&gt;
        y ‚àà free U j t -&gt;
        y ‚àà free U j (t &#39;{k | x ~&gt; u}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
k &lt;&gt; j -&gt;
y ‚àà free U j t -&gt; y ‚àà free U j (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk234" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk234"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
k &lt;&gt; j -&gt;
y ‚àà free U j t -&gt; y ‚àà free U j (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk235" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk235"><span class="nb">setoid_rewrite</span> (in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
k &lt;&gt; j -&gt;
(j, Fr y) ‚ààm t -&gt; (j, Fr y) ‚ààm t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk236" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk236"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(j, Fr y) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr y) ‚ààm t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> in_subst_lower_neq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk237" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk237"><span class="kn">Corollary</span> <span class="nf">FV_subst_lower_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
        FV U k t \\ {{ x }} ‚äÜ FV U k (t &#39;{k | x ~&gt; u}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
FV U k t \\ {{x}} ‚äÜ FV U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk238" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk238"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
FV U k t \\ {{x}} ‚äÜ FV U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk239" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk239">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k t \\ {{x}} ‚äÜ FV U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk23a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk23a"><span class="nb">intro</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` (FV U k t \\ {{x}}) -&gt;
a `<span class="kr">in</span>` FV U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk23b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk23b"><span class="nb">rewrite</span> AtomSet.diff_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` FV U k t /\ a `notin` {{x}} -&gt;
a `<span class="kr">in</span>` FV U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk23c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk23c"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">rewrite</span> &lt;- (free_iff_FV).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U k t /\ a `notin` {{x}} -&gt;
a ‚àà free U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk23d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk23d"><span class="nb">intros</span> [? ?].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àà free U k t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a `notin` {{x}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk23e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk23e"><span class="nb">apply</span> in_free_subst_lower_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àà free U k t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a `notin` {{x}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U k t /\ a &lt;&gt; x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk23f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk23f"><span class="kn">Corollary</span> <span class="nf">FV_subst_lower_eq_alt</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
        FV U k t ‚äÜ FV U k (t &#39;{k | x ~&gt; u}) ‚à™ {{ x }}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
FV U k t ‚äÜ FV U k (t &#39;{ k | x ~&gt; u}) ‚à™ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk240" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk240"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
FV U k t ‚äÜ FV U k (t &#39;{ k | x ~&gt; u}) ‚à™ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk241" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk241">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k t ‚äÜ FV U k (t &#39;{ k | x ~&gt; u}) ‚à™ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk242" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk242"><span class="nb">intro</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` FV U k t -&gt;
a `<span class="kr">in</span>` (FV U k (t &#39;{ k | x ~&gt; u}) ‚à™ {{x}})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk243" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk243"><span class="nb">rewrite</span> AtomSet.union_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` FV U k t -&gt;
a `<span class="kr">in</span>` FV U k (t &#39;{ k | x ~&gt; u}) \/ a `<span class="kr">in</span>` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk244" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk244"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">rewrite</span> &lt;- (free_iff_FV).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U k t -&gt;
a ‚àà free U k (t &#39;{ k | x ~&gt; u}) \/ a `<span class="kr">in</span>` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk245" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk245">destruct_eq_args a x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t -&gt;
x ‚àà free U k (t &#39;{ k | x ~&gt; u}) \/ x `<span class="kr">in</span>` {{x}}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk246" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; a</span></span></span><br></div><label class="goal-separator" for="ln-v-chk246"><hr></label><div class="goal-conclusion">a ‚àà free U k t -&gt;
a ‚àà free U k (t &#39;{ k | x ~&gt; u}) \/ a `<span class="kr">in</span>` {{x}}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk247" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk247">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t -&gt;
x ‚àà free U k (t &#39;{ k | x ~&gt; u}) \/ x `<span class="kr">in</span>` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk248" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk248"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `<span class="kr">in</span>` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk249" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk249">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U k t -&gt;
a ‚àà free U k (t &#39;{ k | x ~&gt; u}) \/ a `<span class="kr">in</span>` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk24a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk24a"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; a</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto using</span> in_free_subst_lower_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk24b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk24b"><span class="kn">Corollary</span> <span class="nf">FV_subst_lower_neq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">x</span>,
        k &lt;&gt; j -&gt;
        FV U j t ‚äÜ
                FV U j (t &#39;{k | x ~&gt; u}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
k &lt;&gt; j -&gt; FV U j t ‚äÜ FV U j (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk24c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk24c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
k &lt;&gt; j -&gt; FV U j t ‚äÜ FV U j (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk24d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk24d">introv neq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U j t ‚äÜ FV U j (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk24e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk24e"><span class="nb">intro</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` FV U j t -&gt; a `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk24f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk24f"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">rewrite</span> &lt;- (free_iff_FV).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U j t -&gt; a ‚àà free U j (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> in_free_subst_lower_neq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Substitution of fresh variables *)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk250" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk250"><span class="kn">Theorem</span> <span class="nf">subst_fresh</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">u</span>,
        ~ x ‚àà free U k t -&gt;
        t &#39;{k | x ~&gt; u} = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN),
~ x ‚àà free U k t -&gt; t &#39;{ k | x ~&gt; u} = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk251" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk251"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN),
~ x ‚àà free U k t -&gt; t &#39;{ k | x ~&gt; u} = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk252" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk252"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;{ k | x ~&gt; u} = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk253" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk253"><span class="nb">apply</span> (subst_id U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l</span>,
(k, l) ‚ààm t -&gt; subst_loc k x u l = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk254" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk254"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x u l = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk255" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk255"><span class="nb">assert</span> (Fr x &lt;&gt; l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk256" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Fr x &lt;&gt; l</span></span></span><br></div><label class="goal-separator" for="ln-v-chk256"><hr></label><div class="goal-conclusion">subst_loc k x u l = mret T k l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk257" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk257"><span class="nb">eapply</span> (ninf_in_neq U); <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Fr x &lt;&gt; l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x u l = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> simpl_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk258" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk258"><span class="kn">Corollary</span> <span class="nf">subst_fresh_set</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">u</span>,
        ~ x `<span class="kr">in</span>` FV U k t -&gt;
        t &#39;{k | x ~&gt; u} = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN),
x `notin` FV U k t -&gt; t &#39;{ k | x ~&gt; u} = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk259" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk259"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN),
x `notin` FV U k t -&gt; t &#39;{ k | x ~&gt; u} = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk25a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk25a"><span class="nb">setoid_rewrite</span> &lt;- free_iff_FV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN),
~ x ‚àà free U k t -&gt; t &#39;{ k | x ~&gt; u} = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> subst_fresh.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk25b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk25b"><span class="kn">Theorem</span> <span class="nf">free_subst_fresh</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">x</span>,
        ~ x ‚àà free U k t -&gt;
        free U j (t &#39;{k | x ~&gt; u}) = free U j t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
~ x ‚àà free U k t -&gt;
free U j (t &#39;{ k | x ~&gt; u}) = free U j t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk25c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk25c"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
~ x ‚àà free U k t -&gt;
free U j (t &#39;{ k | x ~&gt; u}) = free U j t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk25d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk25d">introv <span class="kp">fresh</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">free U j (t &#39;{ k | x ~&gt; u}) = free U j t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk25e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk25e"><span class="nb">replace</span> (t &#39;{k | x ~&gt; u}) <span class="kr">with</span> t...</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t = t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> subst_fresh...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk25f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk25f"><span class="kn">Corollary</span> <span class="nf">free_subst_fresh_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span>,
        ~ x ‚àà free U k t -&gt;
        free U k (t &#39;{k | x ~&gt; u}) = free U k t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
~ x ‚àà free U k t -&gt;
free U k (t &#39;{ k | x ~&gt; u}) = free U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk260" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk260"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
~ x ‚àà free U k t -&gt;
free U k (t &#39;{ k | x ~&gt; u}) = free U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk261" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk261">introv <span class="kp">fresh</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">free U k (t &#39;{ k | x ~&gt; u}) = free U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk262" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk262"><span class="nb">replace</span> (t &#39;{k | x ~&gt; u}) <span class="kr">with</span> t; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t = t &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> subst_fresh.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk263" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk263"><span class="kn">Corollary</span> <span class="nf">FV_subst_fresh</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">x</span>,
        ~ x `<span class="kr">in</span>` FV U k t -&gt;
        FV U j (t &#39;{k | x ~&gt; u}) [=] FV U j t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x `notin` FV U k t -&gt;
FV U j (t &#39;{ k | x ~&gt; u}) [=] FV U j t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk264" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk264"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x `notin` FV U k t -&gt;
FV U j (t &#39;{ k | x ~&gt; u}) [=] FV U j t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk265" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk265">introv <span class="kp">fresh</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U j (t &#39;{ k | x ~&gt; u}) [=] FV U j t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk266" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk266"><span class="nb">intro</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y `<span class="kr">in</span>` FV U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt; y `<span class="kr">in</span>` FV U j t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk267" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk267"><span class="nb">rewrite</span> &lt;- ?(free_iff_FV) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U j (t &#39;{ k | x ~&gt; u}) &lt;-&gt; y ‚àà free U j t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> free_subst_fresh.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk268" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk268"><span class="kn">Corollary</span> <span class="nf">FV_subst_fresh_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span>,
        ~ x `<span class="kr">in</span>` FV U k t -&gt;
        FV U k (t &#39;{k | x ~&gt; u}) [=] FV U k t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x `notin` FV U k t -&gt;
FV U k (t &#39;{ k | x ~&gt; u}) [=] FV U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk269" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk269"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x `notin` FV U k t -&gt;
FV U k (t &#39;{ k | x ~&gt; u}) [=] FV U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk26a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk26a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k (t &#39;{ k | x ~&gt; u}) [=] FV U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> FV_subst_fresh; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">fix_dtm</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Composing substitutions *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">fix_dtm</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      (<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
      `{MultiDecoratedTraversablePreModule (list K) T U (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
      `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Types</span>
             (<span class="nv">k</span> : K) (<span class="nv">j</span> : K)
             (<span class="nv">l</span> : LN) (<span class="nv">p</span> : LN)
             (<span class="nv">x</span> : atom) (<span class="nv">t</span> : U LN)
             (<span class="nv">w</span> : list K) (<span class="nv">n</span> : nat).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk26b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk26b"><span class="kn">Lemma</span> <span class="nf">subst_subst_neq_loc</span> : <span class="kr">forall</span> <span class="nv">j</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) (<span class="nv">x1</span> <span class="nv">x2</span> : atom),
        k1 &lt;&gt; k2 -&gt;
        ~ x1 ‚àà free (T k2) k1 u2 -&gt;
        <span class="nb">subst</span> (T j) k2 x2 u2 ‚àò btg k1 (subst_loc k1 x1 u1) j =
        <span class="nb">subst</span> (T j) k1 x1 (<span class="nb">subst</span> (T k1) k2 x2 u2 u1) ‚àò btg k2 (subst_loc k2 x2 u2) j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">j</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x1</span> <span class="nv">x2</span>,
k1 &lt;&gt; k2 -&gt;
~ x1 ‚àà free (T k2) k1 u2 -&gt;
<span class="nb">subst</span> (T j) k2 x2 u2 ‚àò btg k1 (subst_loc k1 x1 u1) j =
<span class="nb">subst</span> (T j) k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2})
‚àò btg k2 (subst_loc k2 x2 u2) j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk26c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk26c"><span class="kn">Proof with</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">j</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x1</span> <span class="nv">x2</span>,
k1 &lt;&gt; k2 -&gt;
~ x1 ‚àà free (T k2) k1 u2 -&gt;
<span class="nb">subst</span> (T j) k2 x2 u2 ‚àò btg k1 (subst_loc k1 x1 u1) j =
<span class="nb">subst</span> (T j) k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2})
‚àò btg k2 (subst_loc k2 x2 u2) j</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk26d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk26d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j, k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">subst</span> (T j) k2 x2 u2 ‚àò btg k1 (subst_loc k1 x1 u1) j =
<span class="nb">subst</span> (T j) k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2})
‚àò btg k2 (subst_loc k2 x2 u2) j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk26e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk26e">ext l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j, k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="nb">subst</span> (T j) k2 x2 u2 ‚àò btg k1 (subst_loc k1 x1 u1) j)
  l =
(<span class="nb">subst</span> (T j) k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2})
 ‚àò btg k2 (subst_loc k2 x2 u2) j) l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk26f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk26f"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j, k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btg k1 (subst_loc k1 x1 u1) j l &#39;{ k2 | x2 ~&gt; u2} =
btg k2 (subst_loc k2 x2 u2) j l &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk270" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk270"><span class="nb">compare</span> j to both of { k1 k2 }.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btg k1 (subst_loc k1 x1 u1) k1 l &#39;{ k2 | x2 ~&gt; u2} =
btg k2 (subst_loc k2 x2 u2) k1 l &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk271" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk271"><hr></label><div class="goal-conclusion">btg k1 (subst_loc k1 x1 u1) k2 l &#39;{ k2 | x2 ~&gt; u2} =
btg k2 (subst_loc k2 x2 u2) k2 l &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk272" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j, k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs1</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk272"><hr></label><div class="goal-conclusion">btg k1 (subst_loc k1 x1 u1) j l &#39;{ k2 | x2 ~&gt; u2} =
btg k2 (subst_loc k2 x2 u2) j l &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk273" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk273">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btg k1 (subst_loc k1 x1 u1) k1 l &#39;{ k2 | x2 ~&gt; u2} =
btg k2 (subst_loc k2 x2 u2) k1 l &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk274" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk274"><span class="kp">do</span> <span class="mi">2</span> simpl_tgt_fallback.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k1 x1 u1 l &#39;{ k2 | x2 ~&gt; u2} =
mret T k1 l &#39;{ k1 | x1 ~&gt; u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk275" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk275">simpl_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k1 x1 u1 l &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2}) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk276" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk276"><span class="nb">compare</span> l to atom x1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k1 x1 u1 (Fr x1) &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2}) (Fr x1)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk277" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk277"><hr></label><div class="goal-conclusion">subst_loc k1 x1 u1 (Fr a) &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2}) (Fr a)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk278" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="ln-v-chk278"><hr></label><div class="goal-conclusion">subst_loc k1 x1 u1 (Bd n) &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2}) (Bd n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk279" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk279">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k1 x1 u1 (Fr x1) &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2}) (Fr x1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> <span class="mi">2</span>(subst_loc_eq)...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk27a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk27a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k1 x1 u1 (Fr a) &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2}) (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk27b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk27b"><span class="nb">rewrite</span> subst_loc_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k1 (Fr a) &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2}) (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> simpl_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk27c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk27c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k1 x1 u1 (Bd n) &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2}) (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk27d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk27d"><span class="nb">rewrite</span> subst_loc_b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k1 (Bd n) &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k1 x1 (u1 &#39;{ k2 | x2 ~&gt; u2}) (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> simpl_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk27e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk27e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btg k1 (subst_loc k1 x1 u1) k2 l &#39;{ k2 | x2 ~&gt; u2} =
btg k2 (subst_loc k2 x2 u2) k2 l &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk27f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk27f">simpl_tgt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k2 l &#39;{ k2 | x2 ~&gt; u2} =
subst_loc k2 x2 u2 l &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk280" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk280">simpl_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x2 u2 l =
subst_loc k2 x2 u2 l &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk281" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk281"><span class="nb">compare</span> l to atom x2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x2 u2 (Fr x2) =
subst_loc k2 x2 u2 (Fr x2) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk282" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk282"><hr></label><div class="goal-conclusion">subst_loc k2 x2 u2 (Fr a) =
subst_loc k2 x2 u2 (Fr a) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk283" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="ln-v-chk283"><hr></label><div class="goal-conclusion">subst_loc k2 x2 u2 (Bd n) =
subst_loc k2 x2 u2 (Bd n) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk284" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk284">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x2 u2 (Fr x2) =
subst_loc k2 x2 u2 (Fr x2) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk285" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk285">simpl_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u2 = u2 &#39;{ k1 | x1 ~&gt; u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> (subst_fresh (T k2))...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk286" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk286">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x2 u2 (Fr a) =
subst_loc k2 x2 u2 (Fr a) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">simpl_local...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk287" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk287">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x2 u2 (Bd n) =
subst_loc k2 x2 u2 (Bd n) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">simpl_local...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk288" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk288">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j, k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs1</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btg k1 (subst_loc k1 x1 u1) j l &#39;{ k2 | x2 ~&gt; u2} =
btg k2 (subst_loc k2 x2 u2) j l &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk289" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk289">simpl_tgt_fallback.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>j, k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs1</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T j l &#39;{ k2 | x2 ~&gt; u2} =
mret T j l &#39;{ k1 | x1 ~&gt; u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="kp">do</span> <span class="mi">2</span> (<span class="nb">rewrite</span> subst_in_mret_neq; <span class="nb">auto</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk28a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk28a"><span class="kn">Theorem</span> <span class="nf">subst_subst_neq</span> : <span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> <span class="nv">u1</span> <span class="nv">u2</span> <span class="nv">t</span> (<span class="nv">x1</span> <span class="nv">x2</span> : atom),
        k1 &lt;&gt; k2 -&gt;
        ~ x1 ‚àà free (T k2) k1 u2 -&gt;
        t &#39;{k1 | x1 ~&gt; u1} &#39;{k2 | x2 ~&gt; u2} =
        t &#39;{k2 | x2 ~&gt; u2} &#39;{k1 | x1 ~&gt; u1 &#39;{k2 | x2 ~&gt; u2} }.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
k1 &lt;&gt; k2 -&gt;
~ x1 ‚àà free (T k2) k1 u2 -&gt;
(t &#39;{ k1 | x1 ~&gt; u1}) &#39;{ k2 | x2 ~&gt; u2} =
(t &#39;{ k2 | x2 ~&gt; u2}) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk28b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk28b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
k1 &lt;&gt; k2 -&gt;
~ x1 ‚àà free (T k2) k1 u2 -&gt;
(t &#39;{ k1 | x1 ~&gt; u1}) &#39;{ k2 | x2 ~&gt; u2} =
(t &#39;{ k2 | x2 ~&gt; u2}) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk28c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk28c"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(t &#39;{ k1 | x1 ~&gt; u1}) &#39;{ k2 | x2 ~&gt; u2} =
(t &#39;{ k2 | x2 ~&gt; u2}) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk28d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk28d"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind U k2 (subst_loc k2 x2 u2)
  (kbind U k1 (subst_loc k1 x1 u1) t) =
kbind U k1
  (subst_loc k1 x1
     (kbind (T k1) k2 (subst_loc k2 x2 u2) u1))
  (kbind U k2 (subst_loc k2 x2 u2) t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk28e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk28e">compose near t on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(kbind U k2 (subst_loc k2 x2 u2)
 ‚àò kbind U k1 (subst_loc k1 x1 u1)) t =
kbind U k1
  (subst_loc k1 x1
     (kbind (T k1) k2 (subst_loc k2 x2 u2) u1))
  (kbind U k2 (subst_loc k2 x2 u2) t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk28f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk28f">compose near t on <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(kbind U k2 (subst_loc k2 x2 u2)
 ‚àò kbind U k1 (subst_loc k1 x1 u1)) t =
(kbind U k1
   (subst_loc k1 x1
      (kbind (T k1) k2 (subst_loc k2 x2 u2) u1))
 ‚àò kbind U k2 (subst_loc k2 x2 u2)) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk290" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk290"><span class="nb">unfold</span> kbind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mbind U (btg k2 (subst_loc k2 x2 u2))
 ‚àò mbind U (btg k1 (subst_loc k1 x1 u1))) t =
(mbind U
   (btg k1
      (subst_loc k1 x1
         (mbind (T k1) (btg k2 (subst_loc k2 x2 u2))
            u1)))
 ‚àò mbind U (btg k2 (subst_loc k2 x2 u2))) t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk291" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk291"><span class="nb">rewrite</span> <span class="mi">2</span>(mbind_mbind U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbind U
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   mbind (T k) (btg k2 (subst_loc k2 x2 u2))
   ‚óã btg k1 (subst_loc k1 x1 u1) k) t =
mbind U
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   mbind (T k)
     (btg k1
        (subst_loc k1 x1
           (mbind (T k1) (btg k2 (subst_loc k2 x2 u2))
              u1))) ‚óã btg k2 (subst_loc k2 x2 u2) k) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk292" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk292">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">k</span> =&gt;
 mbind (T k) (btg k2 (subst_loc k2 x2 u2))
 ‚óã btg k1 (subst_loc k1 x1 u1) k) =
(<span class="kr">fun</span> <span class="nv">k</span> =&gt;
 mbind (T k)
   (btg k1
      (subst_loc k1 x1
         (mbind (T k1) (btg k2 (subst_loc k2 x2 u2))
            u1))) ‚óã btg k2 (subst_loc k2 x2 u2) k)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk293" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk293">ext j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbind (T j) (btg k2 (subst_loc k2 x2 u2))
‚óã btg k1 (subst_loc k1 x1 u1) j =
mbind (T j)
  (btg k1
     (subst_loc k1 x1
        (mbind (T k1) (btg k2 (subst_loc k2 x2 u2)) u1)))
‚óã btg k2 (subst_loc k2 x2 u2) j</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> subst_subst_neq_loc.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk294" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk294"><span class="kn">Lemma</span> <span class="nf">subst_subst_eq_local</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u1</span> <span class="nv">u2</span> <span class="nv">x1</span> <span class="nv">x2</span>,
        ~ x1 ‚àà free (T k) k u2 -&gt;
        x1 &lt;&gt; x2 -&gt;
        <span class="nb">subst</span> (T k) k x2 u2 ‚àò subst_loc k x1 u1 =
        <span class="nb">subst</span> (T k) k x1 (<span class="nb">subst</span> (T k) k x2 u2 u1) ‚àò subst_loc k x2 u2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">x1</span> <span class="nv">x2</span>,
~ x1 ‚àà free (T k) k u2 -&gt;
x1 &lt;&gt; x2 -&gt;
<span class="nb">subst</span> (T k) k x2 u2 ‚àò subst_loc k x1 u1 =
<span class="nb">subst</span> (T k) k x1 (u1 &#39;{ k | x2 ~&gt; u2})
‚àò subst_loc k x2 u2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk295" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk295"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">x1</span> <span class="nv">x2</span>,
~ x1 ‚àà free (T k) k u2 -&gt;
x1 &lt;&gt; x2 -&gt;
<span class="nb">subst</span> (T k) k x2 u2 ‚àò subst_loc k x1 u1 =
<span class="nb">subst</span> (T k) k x1 (u1 &#39;{ k | x2 ~&gt; u2})
‚àò subst_loc k x2 u2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk296" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk296"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">subst</span> (T k) k x2 u2 ‚àò subst_loc k x1 u1 =
<span class="nb">subst</span> (T k) k x1 (u1 &#39;{ k | x2 ~&gt; u2})
‚àò subst_loc k x2 u2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk297" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk297">ext l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="nb">subst</span> (T k) k x2 u2 ‚àò subst_loc k x1 u1) l =
(<span class="nb">subst</span> (T k) k x1 (u1 &#39;{ k | x2 ~&gt; u2})
 ‚àò subst_loc k x2 u2) l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk298" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk298"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x1 u1 l &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 l &#39;{ k | x1 ~&gt; u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk299" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk299"><span class="nb">compare</span> l to atom x1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x1 u1 (Fr x1) &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 (Fr x1) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk29a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk29a"><hr></label><div class="goal-conclusion">subst_loc k x1 u1 (Fr a) &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 (Fr a) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk29b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="ln-v-chk29b"><hr></label><div class="goal-conclusion">subst_loc k x1 u1 (Bd n) &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 (Bd n) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk29c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk29c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x1 u1 (Fr x1) &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 (Fr x1) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> subst_loc_eq, subst_loc_neq,
        subst_in_mret_eq, subst_loc_eq...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk29d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk29d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x1 u1 (Fr a) &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 (Fr a) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk29e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk29e"><span class="nb">rewrite</span> subst_loc_neq...</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 (Fr a) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk29f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk29f"><span class="nb">compare</span> values x2 <span class="kn">and</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; a</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) &#39;{ k | a ~&gt; u2} =
subst_loc k a u2 (Fr a) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | a ~&gt; u2}}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk2a0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>x2 &lt;&gt; a</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk2a0"><hr></label><div class="goal-conclusion">mret T k (Fr a) &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 (Fr a) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; a</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) &#39;{ k | a ~&gt; u2} =
subst_loc k a u2 (Fr a) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | a ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> subst_in_mret_eq, subst_loc_eq, (subst_fresh (T k))...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x1</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>x2 &lt;&gt; a</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 (Fr a) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> subst_loc_neq, <span class="mi">2</span>(subst_in_mret_eq), <span class="mi">2</span>(subst_loc_neq)...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x1 u1 (Bd n) &#39;{ k | x2 ~&gt; u2} =
subst_loc k x2 u2 (Bd n) &#39;{ k | x1 ~&gt;
u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> <span class="mi">2</span>(subst_loc_b), <span class="mi">2</span>(subst_in_mret_eq), <span class="mi">2</span>(subst_loc_b)...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a4"><span class="kn">Theorem</span> <span class="nf">subst_subst_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u1</span> <span class="nv">u2</span> <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
        ~ x1 ‚àà free (T k) k u2 -&gt;
        x1 &lt;&gt; x2 -&gt;
        t &#39;{k | x1 ~&gt; u1} &#39;{k | x2 ~&gt; u2} =
        t &#39;{k | x2 ~&gt; u2} &#39;{k | x1 ~&gt; u1 &#39;{k | x2 ~&gt; u2} }.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
~ x1 ‚àà free (T k) k u2 -&gt;
x1 &lt;&gt; x2 -&gt;
(t &#39;{ k | x1 ~&gt; u1}) &#39;{ k | x2 ~&gt; u2} =
(t &#39;{ k | x2 ~&gt; u2}) &#39;{ k | x1 ~&gt; u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a5"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
~ x1 ‚àà free (T k) k u2 -&gt;
x1 &lt;&gt; x2 -&gt;
(t &#39;{ k | x1 ~&gt; u1}) &#39;{ k | x2 ~&gt; u2} =
(t &#39;{ k | x2 ~&gt; u2}) &#39;{ k | x1 ~&gt; u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a6"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(t &#39;{ k | x1 ~&gt; u1}) &#39;{ k | x2 ~&gt; u2} =
(t &#39;{ k | x2 ~&gt; u2}) &#39;{ k | x1 ~&gt; u1 &#39;{ k | x2 ~&gt; u2}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a7"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind U k (subst_loc k x2 u2)
  (kbind U k (subst_loc k x1 u1) t) =
kbind U k
  (subst_loc k x1
     (kbind (T k) k (subst_loc k x2 u2) u1))
  (kbind U k (subst_loc k x2 u2) t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a8">compose near t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(kbind U k (subst_loc k x2 u2)
 ‚àò kbind U k (subst_loc k x1 u1)) t =
(kbind U k
   (subst_loc k x1
      (kbind (T k) k (subst_loc k x2 u2) u1))
 ‚àò kbind U k (subst_loc k x2 u2)) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a9"><span class="nb">rewrite</span> <span class="mi">2</span>(kbind_kbind U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind U k (subst_loc k x2 u2 ‚ãÜkm subst_loc k x1 u1) t =
kbind U k
  (subst_loc k x1
     (kbind (T k) k (subst_loc k x2 u2) u1)
   ‚ãÜkm subst_loc k x2 u2) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2aa" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2aa">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x2 u2 ‚ãÜkm subst_loc k x1 u1 =
subst_loc k x1 (kbind (T k) k (subst_loc k x2 u2) u1)
‚ãÜkm subst_loc k x2 u2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> subst_subst_eq_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Commuting two substitutions *)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ab" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ab"><span class="kn">Corollary</span> <span class="nf">subst_subst_comm_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u1</span> <span class="nv">u2</span> <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
        x1 &lt;&gt; x2 -&gt;
        ~ x1 ‚àà free (T k) k u2 -&gt;
        ~ x2 ‚àà free (T k) k u1 -&gt;
        t &#39;{k | x1 ~&gt; u1} &#39;{k | x2 ~&gt; u2} =
        t &#39;{k | x2 ~&gt; u2} &#39;{k | x1 ~&gt; u1}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
x1 &lt;&gt; x2 -&gt;
~ x1 ‚àà free (T k) k u2 -&gt;
~ x2 ‚àà free (T k) k u1 -&gt;
(t &#39;{ k | x1 ~&gt; u1}) &#39;{ k | x2 ~&gt; u2} =
(t &#39;{ k | x2 ~&gt; u2}) &#39;{ k | x1 ~&gt; u1}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ac" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ac"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
x1 &lt;&gt; x2 -&gt;
~ x1 ‚àà free (T k) k u2 -&gt;
~ x2 ‚àà free (T k) k u1 -&gt;
(t &#39;{ k | x1 ~&gt; u1}) &#39;{ k | x2 ~&gt; u2} =
(t &#39;{ k | x2 ~&gt; u2}) &#39;{ k | x1 ~&gt; u1}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ad" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ad"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>~ x2 ‚àà free (T k) k u1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(t &#39;{ k | x1 ~&gt; u1}) &#39;{ k | x2 ~&gt; u2} =
(t &#39;{ k | x2 ~&gt; u2}) &#39;{ k | x1 ~&gt; u1}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ae" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ae"><span class="nb">rewrite</span> subst_subst_eq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x1 &lt;&gt; x2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k) k u2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>~ x2 ‚àà free (T k) k u1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(t &#39;{ k | x2 ~&gt; u2}) &#39;{ k | x1 ~&gt; u1 &#39;{ k | x2 ~&gt; u2}} =
(t &#39;{ k | x2 ~&gt; u2}) &#39;{ k | x1 ~&gt; u1}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> (subst_fresh (T k)); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2af" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2af"><span class="kn">Corollary</span> <span class="nf">subst_subst_comm_neq</span> : <span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> <span class="nv">u1</span> <span class="nv">u2</span> <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
        k1 &lt;&gt; k2 -&gt;
        ~ x1 ‚àà free (T k2) k1 u2 -&gt;
        ~ x2 ‚àà free (T k1) k2 u1 -&gt;
        t &#39;{k1 | x1 ~&gt; u1} &#39;{k2 | x2 ~&gt; u2} =
        t &#39;{k2 | x2 ~&gt; u2} &#39;{k1 | x1 ~&gt; u1}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
k1 &lt;&gt; k2 -&gt;
~ x1 ‚àà free (T k2) k1 u2 -&gt;
~ x2 ‚àà free (T k1) k2 u1 -&gt;
(t &#39;{ k1 | x1 ~&gt; u1}) &#39;{ k2 | x2 ~&gt; u2} =
(t &#39;{ k2 | x2 ~&gt; u2}) &#39;{ k1 | x1 ~&gt; u1}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">t</span> <span class="nv">x1</span> <span class="nv">x2</span>,
k1 &lt;&gt; k2 -&gt;
~ x1 ‚àà free (T k2) k1 u2 -&gt;
~ x2 ‚àà free (T k1) k2 u1 -&gt;
(t &#39;{ k1 | x1 ~&gt; u1}) &#39;{ k2 | x2 ~&gt; u2} =
(t &#39;{ k2 | x2 ~&gt; u2}) &#39;{ k1 | x1 ~&gt; u1}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b1"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>~ x2 ‚àà free (T k1) k2 u1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(t &#39;{ k1 | x1 ~&gt; u1}) &#39;{ k2 | x2 ~&gt; u2} =
(t &#39;{ k2 | x2 ~&gt; u2}) &#39;{ k1 | x1 ~&gt; u1}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b2"><span class="nb">rewrite</span> subst_subst_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>~ x1 ‚àà free (T k2) k1 u2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>~ x2 ‚àà free (T k1) k2 u1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(t &#39;{ k2 | x2 ~&gt; u2}) &#39;{ k1 | x1 ~&gt;
u1 &#39;{ k2 | x2 ~&gt; u2}} =
(t &#39;{ k2 | x2 ~&gt; u2}) &#39;{ k1 | x1 ~&gt; u1}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> (subst_fresh (T k1)); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Local closure is preserved by substitution *)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b3"><span class="kn">Theorem</span> <span class="nf">subst_lc_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
        LC U k t -&gt;
        LC (T k) k u -&gt;
        LC U k (<span class="nb">subst</span> U k x u t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
LC U k t -&gt; LC (T k) k u -&gt; LC U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
LC U k t -&gt; LC (T k) k u -&gt; LC U k (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b5"><span class="nb">unfold</span> LC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
LCn U k <span class="mi">0</span> t -&gt;
LCn (T k) k <span class="mi">0</span> u -&gt; LCn U k <span class="mi">0</span> (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b6">introv lct lcu hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) k <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t &#39;{ k | x ~&gt; u}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b7"><span class="nb">rewrite</span> (inmd_subst_iff_eq&#39; U) <span class="kr">in</span> hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) k <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t /\ l &lt;&gt; Fr x \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, k, l) ‚ààmd u /\ w = w1 ‚óè w2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b8"><span class="nb">destruct</span> hin <span class="kr">as</span> [[? ?] | [n1 [n2 [h1 [h2 h3]]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) k <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (w, l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk2b9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) k <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, k, l) ‚ààmd u</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = n1 ‚óè n2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk2b9"><hr></label><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (w, l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ba" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ba">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) k <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2bb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2bb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) k <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, k, l) ‚ààmd u</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = n1 ‚óè n2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2bc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2bc"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) k <span class="mi">0</span> u</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, k, l) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (n1 ‚óè n2, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2bd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2bd"><span class="nb">specialize</span> (lcu n2 l h2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (n2, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, k, l) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (n1 ‚óè n2, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2be" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2be"><span class="nb">unfold</span> lc_loc <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> l <span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n =&gt; n &lt; countk k n2 + <span class="mi">0</span>
<span class="kr">end</span></span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, k, l) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> l <span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n =&gt; n &lt; countk k (n1 ‚óè n2) + <span class="mi">0</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2bf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2bf"><span class="nb">destruct</span> l; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n &lt; countk k n2 + <span class="mi">0</span></span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, k, Bd n) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &lt; countk k (n1 ‚óè n2) + <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c0">unfold_monoid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n &lt; countk k n2 + <span class="mi">0</span></span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, k, Bd n) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &lt; countk k (n1 ++ n2) + <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c1"><span class="nb">rewrite</span> countk_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n &lt; countk k n2 + <span class="mi">0</span></span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, k, Bd n) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &lt; countk k n1 + countk k n2 + <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c2"><span class="kn">Theorem</span> <span class="nf">subst_lc_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
        k &lt;&gt; j -&gt;
        LC U j t -&gt;
        LC (T k) j u -&gt;
        LC U j (<span class="nb">subst</span> U k x u t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
LC U j t -&gt; LC (T k) j u -&gt; LC U j (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
LC U j t -&gt; LC (T k) j u -&gt; LC U j (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c4"><span class="nb">unfold</span> LC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
LCn U j <span class="mi">0</span> t -&gt;
LCn (T k) j <span class="mi">0</span> u -&gt; LCn U j <span class="mi">0</span> (t &#39;{ k | x ~&gt; u})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c5">introv neq lct lcu hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) j <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t &#39;{ k | x ~&gt; u}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc j <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c6"><span class="nb">rewrite</span> (inmd_subst_iff_neq&#39; U) <span class="kr">in</span> hin; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) j <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span>,
   (w1, k, Fr x) ‚ààmd t /\
   (w2, j, l) ‚ààmd u /\ w = w1 ‚óè w2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc j <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c7"><span class="nb">destruct</span> hin <span class="kr">as</span> [? | [n1 [n2 [h1 [h2 h3]]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) j <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc j <span class="mi">0</span> (w, l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk2c8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) j <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, j, l) ‚ààmd u</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = n1 ‚óè n2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk2c8"><hr></label><div class="goal-conclusion">lc_loc j <span class="mi">0</span> (w, l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) j <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc j <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ca" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ca">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) j <span class="mi">0</span> u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, j, l) ‚ààmd u</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = n1 ‚óè n2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc j <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2cb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2cb"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LCn (T k) j <span class="mi">0</span> u</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n1, n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, j, l) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc j <span class="mi">0</span> (n1 ‚óè n2, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2cc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2cc"><span class="nb">specialize</span> (lcu n2 l h2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>lc_loc j <span class="mi">0</span> (n2, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, j, l) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc j <span class="mi">0</span> (n1 ‚óè n2, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2cd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2cd"><span class="nb">unfold</span> lc_loc <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> l <span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n =&gt; n &lt; countk j n2 + <span class="mi">0</span>
<span class="kr">end</span></span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, j, l) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> l <span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n =&gt; n &lt; countk j (n1 ‚óè n2) + <span class="mi">0</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ce" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ce"><span class="nb">destruct</span> l; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n &lt; countk j n2 + <span class="mi">0</span></span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, j, Bd n) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &lt; countk j (n1 ‚óè n2) + <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2cf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2cf">unfold_monoid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n &lt; countk j n2 + <span class="mi">0</span></span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, j, Bd n) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &lt; countk j (n1 ++ n2) + <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d0"><span class="nb">rewrite</span> countk_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n &lt; countk j n2 + <span class="mi">0</span></span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(n1, k, Fr x) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(n2, j, Bd n) ‚ààmd u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &lt; countk j n1 + countk j n2 + <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Decompose substitution into closing/opening *)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d1"><span class="kn">Lemma</span> <span class="nf">subst_spec_local</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
        subst_loc k x u l =
        open_loc k u (w, (close_loc k x) (w, l)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
subst_loc k x u l =
open_loc k u (w, close_loc k x (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
subst_loc k x u l =
open_loc k u (w, close_loc k x (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d3">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x u l =
open_loc k u (w, close_loc k x (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d4"><span class="nb">compare</span> l to atom x; autorewrite* <span class="kr">with</span> tea_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u = open_loc k u (w, close_loc k x (w, Fr x))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk2d5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk2d5"><hr></label><div class="goal-conclusion">mret T k (Fr a) =
open_loc k u (w, close_loc k x (w, Fr a))</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk2d6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="ln-v-chk2d6"><hr></label><div class="goal-conclusion">mret T k (Bd n) =
open_loc k u (w, close_loc k x (w, Bd n))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u = open_loc k u (w, close_loc k x (w, Fr x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d8"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u =
<span class="kr">match</span> (<span class="kr">if</span> x == x <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr x) <span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; u
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d9"><span class="nb">compare</span> values x <span class="kn">and</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u =
<span class="kr">match</span> Nat.<span class="nb">compare</span> (countk k w) (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd (countk k w))
| Gt =&gt; mret T k (Bd (countk k w - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2da" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2da"><span class="nb">unfold</span> id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u =
<span class="kr">match</span> Nat.<span class="nb">compare</span> (countk k w) (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd (countk k w))
| Gt =&gt; mret T k (Bd (countk k w - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals (countk k w) <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2db" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2db">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) =
open_loc k u (w, close_loc k x (w, Fr a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2dc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2dc"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) =
<span class="kr">match</span> (<span class="kr">if</span> x == a <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr a) <span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; u
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values x <span class="kn">and</span> a. <span class="c">(* todo fix fragile names *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2dd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2dd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd n) =
open_loc k u (w, close_loc k x (w, Bd n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2de" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2de"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd n) =
<span class="kr">match</span>
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
  | Lt =&gt; Bd n
  | _ =&gt; Bd (S n)
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; u
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2df" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2df"><span class="nb">unfold</span> id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd n) =
<span class="kr">match</span>
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
  | Lt =&gt; Bd n
  | _ =&gt; Bd (S n)
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; u
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e0"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd (countk k w)) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> (S (countk k w)) (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd (S (countk k w)))
| Gt =&gt; mret T k (Bd (S (countk k w) - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk2e1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk2e1"><hr></label><div class="goal-conclusion">mret T k (Bd n) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> (S n) (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd (S n))
| Gt =&gt; mret T k (Bd (S n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e2"><span class="nb">compare</span> naturals (Datatypes.S (countk k w)) <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd n) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> (S n) (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd (S n))
| Gt =&gt; mret T k (Bd (S n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">compare</span> naturals (Datatypes.S n) <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e3"><span class="kn">Theorem</span> <span class="nf">subst_spec</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">u</span> <span class="nv">t</span>,
        t &#39;{k | x ~&gt; u} = (&#39;[k | x] t) &#39;(k | u).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span>,
t &#39;{ k | x ~&gt; u} = (&#39;[ k | x] t) &#39;( k | u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span>,
t &#39;{ k | x ~&gt; u} = (&#39;[ k | x] t) &#39;( k | u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e5"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;{ k | x ~&gt; u} = (&#39;[ k | x] t) &#39;( k | u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e6">compose near t on <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;{ k | x ~&gt; u} = (open U k u ‚àò close U k x) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e7"><span class="nb">unfold</span> open, close, <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind U k (subst_loc k x u) t =
(kbindd U k (open_loc k u) ‚àò kmapd U k (close_loc k x))
  t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e8"><span class="nb">rewrite</span> (kbindd_kmapd U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind U k (subst_loc k x u) t =
kbindd U k
  (<span class="kr">fun</span> &#39;(w, a) =&gt;
   open_loc k u (w, close_loc k x (w, a))) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e9"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k
  (<span class="kr">fun</span> &#39;(w, a) =&gt;
   open_loc k u (w, close_loc k x (w, a))) t =
kbind U k (subst_loc k x u) t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ea" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ea"><span class="nb">apply</span> (kbindd_respectful_kbind k).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w</span> (<span class="nv">a</span> : LN),
(w, k, a) ‚ààmd t -&gt;
open_loc k u (w, close_loc k x (w, a)) =
subst_loc k x u a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2eb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2eb"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x u a =
open_loc k u (w, close_loc k x (w, a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> subst_spec_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Substitution when &lt;&lt;u&gt;&gt; is a LN **)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">subst_loc_LN</span> <span class="nv">k</span> <span class="nv">x</span> (<span class="nv">u</span> : LN) : LN -&gt; LN :=
      <span class="kr">fun</span> <span class="nv">l</span> =&gt; <span class="kr">match</span> l <span class="kr">with</span>
            | Fr y =&gt; <span class="kr">if</span> x == y <span class="kr">then</span> u <span class="kr">else</span> Fr y
            | Bd n =&gt; Bd n
            <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ec" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ec"><span class="kn">Theorem</span> <span class="nf">subst_by_LN_spec</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">l</span>,
        <span class="nb">subst</span> U k x (mret T k l) = kmap U k (subst_loc_LN k x l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">l</span>,
<span class="nb">subst</span> U k x (mret T k l) =
kmap U k (subst_loc_LN k x l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ed" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ed"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">l</span>,
<span class="nb">subst</span> U k x (mret T k l) =
kmap U k (subst_loc_LN k x l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ee" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ee"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">subst</span> U k x (mret T k l) =
kmap U k (subst_loc_LN k x l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ef" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ef"><span class="nb">unfold</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind U k (subst_loc k x (mret T k l)) =
kmap U k (subst_loc_LN k x l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f0">ext t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind U k (subst_loc k x (mret T k l)) t =
kmap U k (subst_loc_LN k x l) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f1"><span class="nb">apply</span> kbind_respectful_kmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : LN,
(k, a) ‚ààm t -&gt;
subst_loc k x (mret T k l) a =
mret T k (subst_loc_LN k x l a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f2"><span class="nb">intros</span> l&#39; Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(k, l&#39;) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x (mret T k l) l&#39; =
mret T k (subst_loc_LN k x l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f3"><span class="nb">destruct</span> l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(k, Fr a) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x (mret T k l) (Fr a) =
mret T k (subst_loc_LN k x l (Fr a))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk2f4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br></div><label class="goal-separator" for="ln-v-chk2f4"><hr></label><div class="goal-conclusion">subst_loc k x (mret T k l) (Bd n) =
mret T k (subst_loc_LN k x l (Bd n))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(k, Fr a) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x (mret T k l) (Fr a) =
mret T k (subst_loc_LN k x l (Fr a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f6"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(k, Fr a) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == a <span class="kr">then</span> mret T k l <span class="kr">else</span> mret T k (Fr a)) =
mret T k (<span class="kr">if</span> x == a <span class="kr">then</span> l <span class="kr">else</span> Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values x <span class="kn">and</span> a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x (mret T k l) (Bd n) =
mret T k (subst_loc_LN k x l (Bd n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Substitution by the same variable is the identity *)</span>
    <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f8"><span class="kn">Theorem</span> <span class="nf">subst_same</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span>,
        t &#39;{k | x ~&gt; mret T k (Fr x)} = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span>, t &#39;{ k | x ~&gt; mret T k (Fr x)} = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span>, t &#39;{ k | x ~&gt; mret T k (Fr x)} = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2fa" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2fa"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;{ k | x ~&gt; mret T k (Fr x)} = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2fb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2fb"><span class="nb">apply</span> (subst_id U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l</span>,
(k, l) ‚ààm t -&gt;
subst_loc k x (mret T k (Fr x)) l = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2fc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2fc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k x (mret T k (Fr x)) l = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> l to atom x; <span class="bp">now</span> simpl_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">fix_dtm</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">subst_metatheory</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Metatheory for &lt;&lt;close&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">close_metatheory</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
    `{MultiDecoratedTraversablePreModule (list K) T U (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
    `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Types</span>
           (<span class="nv">k</span> : K) (<span class="nv">j</span> : K)
           (<span class="nv">l</span> : LN) (<span class="nv">p</span> : LN)
           (<span class="nv">x</span> : atom) (<span class="nv">t</span> : U LN)
           (<span class="nv">w</span> : list K) (<span class="nv">n</span> : nat).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Free variables after variable closing *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2fd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2fd"><span class="kn">Lemma</span> <span class="nf">in_free_close_iff_loc_1</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> <span class="nv">l</span> <span class="nv">t</span> <span class="nv">x</span>  <span class="nv">y</span>,
      (w, k, l) ‚ààmd t -&gt;
      Fr y = close_loc k x (w, l) -&gt;
      (k, Fr y) ‚ààm t /\ x &lt;&gt; y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> <span class="nv">l</span> <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
(w, k, l) ‚ààmd t -&gt;
Fr y = close_loc k x (w, l) -&gt;
(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2fe" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2fe"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">w</span> <span class="nv">l</span> <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
(w, k, l) ‚ààmd t -&gt;
Fr y = close_loc k x (w, l) -&gt;
(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2ff" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2ff">introv lin heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Fr y = close_loc k x (w, l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk300" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk300"><span class="nb">destruct</span> l <span class="kr">as</span> [la | ln].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>la</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr la) ‚ààmd t</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Fr y = close_loc k x (w, Fr la)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk301" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ln</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd ln) ‚ààmd t</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Fr y = close_loc k x (w, Bd ln)</span></span></span><br></div><label class="goal-separator" for="ln-v-chk301"><hr></label><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk302" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk302">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>la</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr la) ‚ààmd t</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Fr y = close_loc k x (w, Fr la)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk303" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk303"><span class="nb">cbn</span> <span class="kr">in</span> heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>la</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr la) ‚ààmd t</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Fr y =
(<span class="kr">if</span> x == la <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr la)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk304" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk304">destruct_eq_args x la.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>la</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr la) ‚ààmd t</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; la</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Fr y = Fr la</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>la &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk305" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk305">inverts heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>la</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr la) ‚ààmd t</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; la</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>la &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr la) ‚ààm t /\ x &lt;&gt; la</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> (inmd_implies_in U) <span class="kr">in</span> lin.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk306" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk306">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ln</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd ln) ‚ààmd t</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Fr y = close_loc k x (w, Bd ln)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk307" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk307"><span class="nb">cbn</span> <span class="kr">in</span> heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ln</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd ln) ‚ààmd t</span></span></span><br><span><var>heq</var><span class="hyp-type"><b>: </b><span>Fr y =
<span class="kr">match</span> Nat.<span class="nb">compare</span> ln (countk k w) <span class="kr">with</span>
| Lt =&gt; Bd ln
| _ =&gt; Bd (S ln)
<span class="kr">end</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">compare_nats_args ln (countk k w); <span class="bp">discriminate</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk308" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk308"><span class="kn">Lemma</span> <span class="nf">in_free_close_iff_loc_2</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">y</span>,
      x &lt;&gt; y -&gt;
      (k, Fr y) ‚ààm t -&gt;
      <span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t /\ Fr y = close_loc k x (w, l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
x &lt;&gt; y -&gt;
(k, Fr y) ‚ààm t -&gt;
<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l</span>,
  (w, k, l) ‚ààmd t /\ Fr y = close_loc k x (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk309" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk309"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
x &lt;&gt; y -&gt;
(k, Fr y) ‚ààm t -&gt;
<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l</span>,
  (w, k, l) ‚ààmd t /\ Fr y = close_loc k x (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk30a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk30a">introv neq yin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>yin</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l</span>,
  (w, k, l) ‚ààmd t /\ Fr y = close_loc k x (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk30b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk30b"><span class="nb">apply</span> (inmd_iff_in U) <span class="kr">in</span> yin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>yin</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w</span>, (w, k, Fr y) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l</span>,
  (w, k, l) ‚ààmd t /\ Fr y = close_loc k x (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk30c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk30c"><span class="nb">destruct</span> yin <span class="kr">as</span> [w yin].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>yin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr y) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l</span>,
  (w, k, l) ‚ààmd t /\ Fr y = close_loc k x (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk30d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk30d"><span class="kr">exists</span> <span class="nv">w</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>yin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr y) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">l</span>,
  (w, k, l) ‚ààmd t /\ Fr y = close_loc k x (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk30e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk30e"><span class="kr">exists</span> (<span class="nv">Fr</span> <span class="nv">y</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>yin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr y) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, Fr y) ‚ààmd t /\ Fr y = close_loc k x (w, Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk30f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk30f"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>yin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr y) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, Fr y) ‚ààmd t /\
Fr y = (<span class="kr">if</span> x == y <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values x <span class="kn">and</span> y.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk310" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk310"><span class="kn">Theorem</span> <span class="nf">in_free_close_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
      y ‚àà free U k (&#39;[k | x] t) &lt;-&gt; y ‚àà free U k t /\ x &lt;&gt; y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (&#39;[ k | x] t) &lt;-&gt;
y ‚àà free U k t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk311" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk311"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
y ‚àà free U k (&#39;[ k | x] t) &lt;-&gt;
y ‚àà free U k t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk312" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk312">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k (&#39;[ k | x] t) &lt;-&gt;
y ‚àà free U k t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk313" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk313"><span class="nb">rewrite</span> (free_close_eq_iff U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1)) &lt;-&gt;
y ‚àà free U k t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk314" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk314"><span class="nb">rewrite</span> (in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1)) &lt;-&gt;
(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk315" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk315"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1)) -&gt;
(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk316" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><label class="goal-separator" for="ln-v-chk316"><hr></label><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y -&gt;
<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
  (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk317" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk317">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1)) -&gt;
(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk318" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk318">introv [? [? [? ?] ] ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(x0, k, x1) ‚ààmd t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Fr y = close_loc k x (x0, x1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> in_free_close_iff_loc_1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk319" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk319">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, Fr y) ‚ààm t /\ x &lt;&gt; y -&gt;
<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
  (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk31a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk31a"><span class="nb">intros</span> [? ?].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
  (w, k, l1) ‚ààmd t /\ Fr y = close_loc k x (w, l1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> in_free_close_iff_loc_2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk31b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk31b"><span class="kn">Corollary</span> <span class="nf">in_free_close_iff_1</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
      y &lt;&gt; x -&gt;
      y ‚àà free U k (&#39;[k | x] t) &lt;-&gt; y ‚àà free U k t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
y &lt;&gt; x -&gt;
y ‚àà free U k (&#39;[ k | x] t) &lt;-&gt; y ‚àà free U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk31c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk31c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
y &lt;&gt; x -&gt;
y ‚àà free U k (&#39;[ k | x] t) &lt;-&gt; y ‚àà free U k t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk31d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk31d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k (&#39;[ k | x] t) &lt;-&gt; y ‚àà free U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk31e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk31e"><span class="nb">rewrite</span> in_free_close_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà free U k t /\ x &lt;&gt; y &lt;-&gt; y ‚àà free U k t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk31f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk31f"><span class="kn">Corollary</span> <span class="nf">FV_close</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
      FV U k (&#39;[k | x] t) [=] FV U k t \\ {{ x }}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
FV U k (&#39;[ k | x] t) [=] FV U k t \\ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk320" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk320"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
FV U k (&#39;[ k | x] t) [=] FV U k t \\ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk321" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk321">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k (&#39;[ k | x] t) [=] FV U k t \\ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk322" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk322"><span class="nb">intro</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` FV U k (&#39;[ k | x] t) &lt;-&gt;
a `<span class="kr">in</span>` (FV U k t \\ {{x}})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk323" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk323"><span class="nb">rewrite</span> AtomSet.diff_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` FV U k (&#39;[ k | x] t) &lt;-&gt;
a `<span class="kr">in</span>` FV U k t /\ a `notin` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk324" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk324"><span class="nb">rewrite</span> &lt;- <span class="mi">2</span>(free_iff_FV).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U k (&#39;[ k | x] t) &lt;-&gt;
a ‚àà free U k t /\ a `notin` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk325" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk325"><span class="nb">rewrite</span> in_free_close_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U k t /\ x &lt;&gt; a &lt;-&gt;
a ‚àà free U k t /\ a `notin` {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk326" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk326"><span class="kn">Corollary</span> <span class="nf">nin_free_close</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
      ~ (x ‚àà free U k (&#39;[k | x] t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>, ~ x ‚àà free U k (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk327" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk327"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>, ~ x ‚àà free U k (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk328" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk328">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ x ‚àà free U k (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk329" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk329"><span class="nb">rewrite</span> in_free_close_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ (x ‚àà free U k t /\ x &lt;&gt; x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk32a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk32a"><span class="kn">Corollary</span> <span class="nf">nin_FV_close</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
      ~ (x `<span class="kr">in</span>` FV U k (&#39;[k | x] t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>, x `notin` FV U k (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk32b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk32b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>, x `notin` FV U k (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk32c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk32c">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `notin` FV U k (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk32d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk32d"><span class="nb">rewrite</span> &lt;- free_iff_FV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ x ‚àà free U k (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> nin_free_close.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Variable closing and local closure *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk32e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk32e"><span class="kn">Theorem</span> <span class="nf">close_lc_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
      LC U k t -&gt;
      LCn U k <span class="mi">1</span> (close U k x t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>, LC U k t -&gt; LCn U k <span class="mi">1</span> (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk32f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk32f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>, LC U k t -&gt; LCn U k <span class="mi">1</span> (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk330" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk330"><span class="nb">unfold</span> LC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>, LCn U k <span class="mi">0</span> t -&gt; LCn U k <span class="mi">1</span> (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk331" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk331">introv lct hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd &#39;[ k | x] t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">1</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk332" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk332"><span class="nb">rewrite</span> (inmd_close_iff_eq U) <span class="kr">in</span> hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">l1</span>,
  (w, k, l1) ‚ààmd t /\ l = close_loc k x (w, l1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">1</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk333" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk333"><span class="nb">destruct</span> hin <span class="kr">as</span> [l1 [? ?]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l, l1</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, l1) ‚ààmd t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>l = close_loc k x (w, l1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">1</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk334" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk334"><span class="nb">compare</span> l1 to atom x; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Fr x) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">1</span> (w, close_loc k x (w, Fr x))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk335" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk335"><hr></label><div class="goal-conclusion">lc_loc k <span class="mi">1</span> (w, close_loc k x (w, Fr a))</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk336" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br></div><label class="goal-separator" for="ln-v-chk336"><hr></label><div class="goal-conclusion">lc_loc k <span class="mi">1</span> (w, close_loc k x (w, Bd n))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk337" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk337">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Fr x) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">1</span> (w, close_loc k x (w, Fr x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk338" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk338"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Fr x) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> (<span class="kr">if</span> x == x <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr x) <span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n =&gt; n &lt; countk k w + <span class="mi">1</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk339" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk339"><span class="nb">compare</span> values x <span class="kn">and</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Fr x) ‚ààmd t</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk k w &lt; countk k w + <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">unfold_monoid; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk33a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk33a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">1</span> (w, close_loc k x (w, Fr a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk33b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk33b"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> (<span class="kr">if</span> x == a <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr a) <span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n =&gt; n &lt; countk k w + <span class="mi">1</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values x <span class="kn">and</span> a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk33c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk33c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">1</span> (w, close_loc k x (w, Bd n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk33d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk33d"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
  | Lt =&gt; Bd n
  | _ =&gt; Bd (S n)
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n =&gt; n &lt; countk k w + <span class="mi">1</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk33e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk33e"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd (countk k w)) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (countk k w) &lt; countk k w + <span class="mi">1</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk33f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk33f"><hr></label><div class="goal-conclusion">S n &lt; countk k w + <span class="mi">1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk340" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk340">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd (countk k w)) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (countk k w) &lt; countk k w + <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk341" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk341"><span class="nb">specialize</span> (lct w (Bd (countk k w)) <span class="kp">ltac</span>:(<span class="bp">assumption</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w, Bd (countk k w))</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd (countk k w)) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (countk k w) &lt; countk k w + <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk342" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk342"><span class="nb">cbn</span> <span class="kr">in</span> lct.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>countk k w &lt; countk k w + <span class="mi">0</span></span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd (countk k w)) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (countk k w) &lt; countk k w + <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> unfold_monoid; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk343" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk343">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U k <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S n &lt; countk k w + <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk344" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk344"><span class="nb">specialize</span> (lct w (Bd n) <span class="kp">ltac</span>:(<span class="bp">assumption</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w, Bd n)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S n &lt; countk k w + <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk345" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk345"><span class="nb">cbn</span> <span class="kr">in</span> lct.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w + <span class="mi">0</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S n &lt; countk k w + <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> unfold_monoid; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk346" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk346"><span class="kn">Theorem</span> <span class="nf">close_lc_neq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">x</span>,
      k &lt;&gt; j -&gt;
      LC U j t -&gt;
      LC U j (close U k x t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt; LC U j t -&gt; LC U j (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk347" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk347"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt; LC U j t -&gt; LC U j (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk348" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk348"><span class="nb">unfold</span> LC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt; LCn U j <span class="mi">0</span> t -&gt; LCn U j <span class="mi">0</span> (&#39;[ k | x] t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk349" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk349">introv neq lct hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>LCn U j <span class="mi">0</span> t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, j, l) ‚ààmd &#39;[ k | x] t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc j <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> (inmd_close_neq_iff U) <span class="kr">in</span> hin; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">close_metatheory</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Metatheory for &lt;&lt;open&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">open_metatheory</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
    `{MultiDecoratedTraversablePreModule (list K) T U (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
    `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Types</span>
           (<span class="nv">k</span> : K) (<span class="nv">j</span> : K)
           (<span class="nv">l</span> : LN) (<span class="nv">p</span> : LN)
           (<span class="nv">x</span> : atom) (<span class="nv">t</span> : U LN)
           (<span class="nv">w</span> : list K) (<span class="nv">n</span> : nat).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Upper and lower bounds on free variables after opening *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk34a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk34a"><span class="kn">Lemma</span> <span class="nf">free_open_upper_local</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
      (k, l) ‚ààm t -&gt;
      x ‚àà free (T k) j (open_loc k u (w, l)) -&gt;
      k = j /\ l = Fr x /\ x ‚àà free U j t \/
      x ‚àà free (T k) j u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t -&gt;
x ‚àà free (T k) j (open_loc k u (w, l)) -&gt;
k = j /\ l = Fr x /\ x ‚àà free U j t \/
x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk34b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk34b"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t -&gt;
x ‚àà free (T k) j (open_loc k u (w, l)) -&gt;
k = j /\ l = Fr x /\ x ‚àà free U j t \/
x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk34c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk34c">introv lin xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free (T k) j (open_loc k u (w, l))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\ l = Fr x /\ x ‚àà free U j t \/
x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk34d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk34d"><span class="nb">rewrite</span> in_free_iff <span class="kr">in</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm open_loc k u (w, l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\ l = Fr x /\ x ‚àà free U j t \/
x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk34e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk34e"><span class="nb">rewrite</span> <span class="mi">2</span>(in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm open_loc k u (w, l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\ l = Fr x /\ (j, Fr x) ‚ààm t \/ (j, Fr x) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk34f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk34f"><span class="nb">destruct</span> l <span class="kr">as</span> [y | n].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>y, x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm open_loc k u (w, Fr y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\ Fr y = Fr x /\ (j, Fr x) ‚ààm t \/
(j, Fr x) ‚ààm u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk350" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm open_loc k u (w, Bd n)</span></span></span><br></div><label class="goal-separator" for="ln-v-chk350"><hr></label><div class="goal-conclusion">k = j /\ Bd n = Fr x /\ (j, Fr x) ‚ààm t \/
(j, Fr x) ‚ààm u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk351" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk351">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>y, x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm open_loc k u (w, Fr y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\ Fr y = Fr x /\ (j, Fr x) ‚ààm t \/
(j, Fr x) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk352" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk352"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>y, x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm open_loc k u (w, Fr y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\ Fr y = Fr x /\ (j, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk353" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk353"><span class="nb">autorewrite with</span> tea_local <span class="kr">in</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>y, x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Fr y) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>k = j /\ y = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\ Fr y = Fr x /\ (j, Fr x) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">inverts xin...</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk354" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk354">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm open_loc k u (w, Bd n)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k = j /\ Bd n = Fr x /\ (j, Fr x) ‚ààm t \/
(j, Fr x) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk355" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk355"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm open_loc k u (w, Bd n)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk356" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk356"><span class="nb">cbn</span> <span class="kr">in</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x)
‚ààm <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
   | Eq =&gt; u
   | Lt =&gt; mret T k (Bd n)
   | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
   <span class="kr">end</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk357" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk357"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm mret T k (Bd n)</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk358" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd (countk k w)) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br></div><label class="goal-separator" for="ln-v-chk358"><hr></label><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk359" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm mret T k (Bd (n - <span class="mi">1</span>))</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk359"><hr></label><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk35a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk35a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm mret T k (Bd n)</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk35b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk35b"><span class="bp">contradict</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ (j, Fr x) ‚ààm mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk35c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk35c">simpl_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ (k = j /\ <span class="kt">False</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk35d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk35d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd (countk k w)) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk35e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm mret T k (Bd (n - <span class="mi">1</span>))</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk35e"><hr></label><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk35f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk35f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd (countk k w)) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk360" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk360">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm mret T k (Bd (n - <span class="mi">1</span>))</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk361" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk361">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(j, Fr x) ‚ààm mret T k (Bd (n - <span class="mi">1</span>))</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j, Fr x) ‚ààm u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk362" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk362"><span class="bp">contradict</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ (j, Fr x) ‚ààm mret T k (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk363" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk363">simpl_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, Bd n) ‚ààm t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ (k = j /\ <span class="kt">False</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk364" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk364"><span class="kn">Corollary</span> <span class="nf">free_open_upper_local_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
      (k, l) ‚ààm t -&gt;
      x ‚àà free (T k) k (open_loc k u (w, l)) -&gt;
      x ‚àà free U k t \/ x ‚àà free (T k) k u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t -&gt;
x ‚àà free (T k) k (open_loc k u (w, l)) -&gt;
x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk365" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk365"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
(k, l) ‚ààm t -&gt;
x ‚àà free (T k) k (open_loc k u (w, l)) -&gt;
x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk366" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk366">introv lin xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free (T k) k (open_loc k u (w, l))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk367" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk367"><span class="nb">apply</span> free_open_upper_local
      <span class="kr">with</span> (t:=t) <span class="kr">in</span> xin; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>k = k /\ l = Fr x /\ x ‚àà free U k t \/
x ‚àà free (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk368" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk368"><span class="kn">Corollary</span> <span class="nf">free_open_upper_local_neq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
      k &lt;&gt; j -&gt;
      (k, l) ‚ààm t -&gt;
      x ‚àà free (T k) j (open_loc k u (w, l)) -&gt;
      x ‚àà free (T k) j u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(k, l) ‚ààm t -&gt;
x ‚àà free (T k) j (open_loc k u (w, l)) -&gt;
x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk369" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk369"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
(k, l) ‚ààm t -&gt;
x ‚àà free (T k) j (open_loc k u (w, l)) -&gt;
x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk36a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk36a">introv neq lin xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free (T k) j (open_loc k u (w, l))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk36b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk36b"><span class="nb">apply</span> free_open_upper_local
      <span class="kr">with</span> (t:=t) <span class="kr">in</span> xin; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>k = j /\ l = Fr x /\ x ‚àà free U j t \/
x ‚àà free (T k) j u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk36c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk36c"><span class="kn">Theorem</span> <span class="nf">free_open_upper</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
      x ‚àà free U j (t &#39;(k | u)) -&gt;
      x ‚àà free U j t \/ x ‚àà free (T k) j u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x ‚àà free U j (t &#39;( k | u)) -&gt;
x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk36d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk36d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x ‚àà free U j (t &#39;( k | u)) -&gt;
x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk36e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk36e">introv xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U j (t &#39;( k | u))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk36f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk36f"><span class="nb">compare</span> values j <span class="kn">and</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U k (t &#39;( k | u))</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk370" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U j (t &#39;( k | u))</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk370"><hr></label><div class="goal-conclusion">x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk371" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk371">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U k (t &#39;( k | u))</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk372" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk372"><span class="nb">rewrite</span> (free_open_eq_iff U) <span class="kr">in</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
  (w, k, l1) ‚ààmd t /\
  x ‚àà free (T k) k (open_loc k u (w, l1))</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk373" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk373"><span class="nb">destruct</span> xin <span class="kr">as</span> [w [l [hin ?]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free (T k) k (open_loc k u (w, l))</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk374" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk374"><span class="nb">eapply</span> (inmd_implies_in U) <span class="kr">in</span> hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free (T k) k (open_loc k u (w, l))</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> free_open_upper_local_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk375" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk375">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U j (t &#39;( k | u))</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk376" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk376"><span class="nb">rewrite</span> (free_open_neq_iff U) <span class="kr">in</span> xin; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U j t \/
(<span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
   (w, k, l1) ‚ààmd t /\
   x ‚àà free (T k) j (open_loc k u (w, l1)))</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk377" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk377"><span class="nb">destruct</span> xin <span class="kr">as</span>  [? |  [w [l [hin ?]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free U j t</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk378" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free (T k) j (open_loc k u (w, l))</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk378"><hr></label><div class="goal-conclusion">x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk379" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk379"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free (T k) j (open_loc k u (w, l))</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk37a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk37a"><span class="nb">apply</span> (inmd_implies_in U) <span class="kr">in</span> hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free (T k) j (open_loc k u (w, l))</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j t \/ x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk37b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk37b"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free (T k) j (open_loc k u (w, l))</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> free_open_upper_local_neq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk37c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk37c"><span class="kn">Corollary</span> <span class="nf">FV_open_upper</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN),
      FV U j (t &#39;(k | u)) ‚äÜ FV U j t ‚à™ FV (T k) j u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN),
FV U j (t &#39;( k | u)) ‚äÜ FV U j t ‚à™ FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk37d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk37d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN),
FV U j (t &#39;( k | u)) ‚äÜ FV U j t ‚à™ FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk37e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk37e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U j (t &#39;( k | u)) ‚äÜ FV U j t ‚à™ FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk37f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk37f"><span class="nb">intro</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` FV U j (t &#39;( k | u)) -&gt;
a `<span class="kr">in</span>` (FV U j t ‚à™ FV (T k) j u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk380" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk380"><span class="nb">rewrite</span> AtomSet.union_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` FV U j (t &#39;( k | u)) -&gt;
a `<span class="kr">in</span>` FV U j t \/ a `<span class="kr">in</span>` FV (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk381" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk381"><span class="kp">repeat</span> <span class="nb">rewrite</span> &lt;- (free_iff_FV).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U j (t &#39;( k | u)) -&gt;
a ‚àà free U j t \/ a ‚àà free (T k) j u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto using</span> free_open_upper.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk382" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk382"><span class="kn">Corollary</span> <span class="nf">free_open_upper_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
      x ‚àà free U k (t &#39;(k | u)) -&gt;
      x ‚àà free U k t \/ x ‚àà free (T k) k u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x ‚àà free U k (t &#39;( k | u)) -&gt;
x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk383" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk383"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x ‚àà free U k (t &#39;( k | u)) -&gt;
x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk384" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk384"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free U k (t &#39;( k | u))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k t \/ x ‚àà free (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto using</span> free_open_upper.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk385" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk385"><span class="kn">Corollary</span> <span class="nf">FV_open_upper_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN),
      FV U k (t &#39;(k | u)) ‚äÜ FV U k t ‚à™ FV (T k) k u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN),
FV U k (t &#39;( k | u)) ‚äÜ FV U k t ‚à™ FV (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk386" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk386"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN),
FV U k (t &#39;( k | u)) ‚äÜ FV U k t ‚à™ FV (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk387" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk387"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k (t &#39;( k | u)) ‚äÜ FV U k t ‚à™ FV (T k) k u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> FV_open_upper.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk388" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk388"><span class="kn">Theorem</span> <span class="nf">free_open_lower</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span> <span class="nv">x</span>,
      x ‚àà free U j t -&gt;
      x ‚àà free U j (t &#39;(k | u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x ‚àà free U j t -&gt; x ‚àà free U j (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk389" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk389"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x ‚àà free U j t -&gt; x ‚àà free U j (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk38a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk38a">introv xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U j t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk38b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk38b"><span class="nb">compare</span> values j <span class="kn">and</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U k t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k (t &#39;( k | u))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk38c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U j t</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk38c"><hr></label><div class="goal-conclusion">x ‚àà free U j (t &#39;( k | u))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk38d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk38d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U k t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk38e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk38e"><span class="nb">rewrite</span> (in_free_iff) <span class="kr">in</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(k, Fr x) ‚ààm t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk38f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk38f"><span class="nb">rewrite</span> (inmd_iff_in U) <span class="kr">in</span> xin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w</span>, (w, k, Fr x) ‚ààmd t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk390" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk390"><span class="nb">destruct</span> xin <span class="kr">as</span> [w xin].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr x) ‚ààmd t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk391" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk391"><span class="nb">rewrite</span> (free_open_eq_iff U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr x) ‚ààmd t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
  (w, k, l1) ‚ààmd t /\
  x ‚àà free (T k) k (open_loc k u (w, l1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk392" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk392"><span class="nb">setoid_rewrite</span> (in_free_iff).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr x) ‚ààmd t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w</span> <span class="nv">l1</span>,
  (w, k, l1) ‚ààmd t /\
  (k, Fr x) ‚ààm open_loc k u (w, l1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk393" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk393"><span class="kr">exists</span> <span class="nv">w</span> (<span class="nv">Fr</span> <span class="nv">x</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr x) ‚ààmd t</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k = k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, Fr x) ‚ààmd t /\
(k, Fr x) ‚ààm open_loc k u (w, Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">autorewrite with</span> tea_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk394" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk394">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>xin</var><span class="hyp-type"><b>: </b><span>x ‚àà free U j t</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U j (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> (free_open_neq_iff U); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk395" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk395"><span class="kn">Theorem</span> <span class="nf">free_open_lower_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span>,
      x ‚àà free U k t -&gt;
      x ‚àà free U k (t &#39;(k | u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x ‚àà free U k t -&gt; x ‚àà free U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk396" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk396"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span>,
x ‚àà free U k t -&gt; x ‚àà free U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk397" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk397"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà free U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto using</span> free_open_lower.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk398" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk398"><span class="kn">Corollary</span> <span class="nf">FV_open_lower</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">u</span>,
      FV U j t ‚äÜ FV U j (t &#39;(k | u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN),
FV U j t ‚äÜ FV U j (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk399" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk399"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">j</span> (<span class="nv">u</span> : T k LN),
FV U j t ‚äÜ FV U j (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk39a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk39a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U j t ‚äÜ FV U j (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk39b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk39b"><span class="nb">intro</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a `<span class="kr">in</span>` FV U j t -&gt; a `<span class="kr">in</span>` FV U j (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk39c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk39c"><span class="nb">rewrite</span> &lt;- <span class="mi">2</span>(free_iff_FV).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AtomSet.elt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà free U j t -&gt; a ‚àà free U j (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> free_open_lower.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk39d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk39d"><span class="kn">Corollary</span> <span class="nf">FV_open_lower_eq</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> <span class="nv">u</span>,
      FV U k t ‚äÜ FV U k (t &#39;(k | u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN),
FV U k t ‚äÜ FV U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk39e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk39e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN),
FV U k t ‚äÜ FV U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk39f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk39f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV U k t ‚äÜ FV U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> FV_open_lower.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Opening a locally closed term is the identity *)</span>
  <span class="sd">(**************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a0"><span class="kn">Lemma</span> <span class="nf">open_lc_local</span> : <span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span>,
      lc_loc k <span class="mi">0</span> (w, l) -&gt;
      open_loc k u (w, l) = mret T k l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span>,
lc_loc k <span class="mi">0</span> (w, l) -&gt; open_loc k u (w, l) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">w</span> <span class="nv">l</span>,
lc_loc k <span class="mi">0</span> (w, l) -&gt; open_loc k u (w, l) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a2">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w, l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, l) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a3"><span class="nb">destruct</span> l <span class="kr">as</span> [a | n].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w, Fr a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, Fr a) = mret T k (Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk3a4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w, Bd n)</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3a4"><hr></label><div class="goal-conclusion">open_loc k u (w, Bd n) = mret T k (Bd n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w, Fr a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, Fr a) = mret T k (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w, Bd n)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, Bd n) = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a7"><span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w + <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w); unfold_monoid; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a8"><span class="kn">Lemma</span> <span class="nf">open_lc</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">u</span>,
      LC U k t -&gt;
      t &#39;(k | u) = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN), LC U k t -&gt; t &#39;( k | u) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN), LC U k t -&gt; t &#39;( k | u) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3aa" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3aa">introv lc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;( k | u) = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ab" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ab"><span class="nb">apply</span> (open_id U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t -&gt; open_loc k u (w, l) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ac" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ac">introv lin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, l) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ad" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ad"><span class="nb">specialize</span> (lc _ _ lin).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w, l)</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, l) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> l; <span class="nb">auto using</span> open_lc_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Opening followed by substitution *)</span>
  <span class="sd">(**************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ae" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ae"><span class="kn">Lemma</span> <span class="nf">subst_open_eq_loc</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u1</span> <span class="nv">u2</span> <span class="nv">x</span>,
      LC (T k) k u2 -&gt;
      <span class="nb">subst</span> (T k) k x u2 ‚àò open_loc k u1 =
      open_loc k (u1 &#39;{k | x ~&gt; u2}) ‚ãÜkdm (subst_loc k x u2 ‚àò snd).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">x</span>,
LC (T k) k u2 -&gt;
<span class="nb">subst</span> (T k) k x u2 ‚àò open_loc k u1 =
open_loc k (u1 &#39;{ k | x ~&gt; u2})
‚ãÜkdm (subst_loc k x u2 ‚àò snd)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3af" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3af"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">x</span>,
LC (T k) k u2 -&gt;
<span class="nb">subst</span> (T k) k x u2 ‚àò open_loc k u1 =
open_loc k (u1 &#39;{ k | x ~&gt; u2})
‚ãÜkdm (subst_loc k x u2 ‚àò snd)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b0">introv lcu2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">subst</span> (T k) k x u2 ‚àò open_loc k u1 =
open_loc k (u1 &#39;{ k | x ~&gt; u2})
‚ãÜkdm (subst_loc k x u2 ‚àò snd)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b1">ext [w l].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="nb">subst</span> (T k) k x u2 ‚àò open_loc k u1) (w, l) =
(open_loc k (u1 &#39;{ k | x ~&gt; u2})
 ‚ãÜkdm (subst_loc k x u2 ‚àò snd)) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b2"><span class="nb">unfold</span> compose_kdm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="nb">subst</span> (T k) k x u2 ‚àò open_loc k u1) (w, l) =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚àò incr w)
  ((subst_loc k x u2 ‚àò snd) (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b3"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u1 (w, l) &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (subst_loc k x u2 (snd (w, l)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b4"><span class="nb">compare</span> l to atom x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u1 (w, Fr x) &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (subst_loc k x u2 (snd (w, Fr x)))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk3b5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3b5"><hr></label><div class="goal-conclusion">open_loc k u1 (w, Fr a) &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (subst_loc k x u2 (snd (w, Fr a)))</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk3b6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3b6"><hr></label><div class="goal-conclusion">open_loc k u1 (w, Bd n) &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (subst_loc k x u2 (snd (w, Bd n)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u1 (w, Fr x) &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (subst_loc k x u2 (snd (w, Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b8"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr x) &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (<span class="kr">if</span> x == x <span class="kr">then</span> u2 <span class="kr">else</span> mret T k (Fr x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b9">simpl_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u2 =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (<span class="kr">if</span> x == x <span class="kr">then</span> u2 <span class="kr">else</span> mret T k (Fr x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ba" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ba"><span class="nb">compare</span> values x <span class="kn">and</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u2 =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w) u2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3bb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3bb"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w) u2 = u2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3bc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3bc"><span class="nb">apply</span> kbindd_respectful_id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w0</span> (<span class="nv">a</span> : LN),
(w0, k, a) ‚ààmd u2 -&gt;
open_loc k (u1 &#39;{ k | x ~&gt; u2}) (incr w (w0, a)) =
mret T k a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3bd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3bd"><span class="nb">intros</span> ? [?|?] hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w0, k, Fr a) ‚ààmd u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (u1 &#39;{ k | x ~&gt; u2}) (incr w (w0, Fr a)) =
mret T k (Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk3be" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w0, k, Bd n) ‚ààmd u2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3be"><hr></label><div class="goal-conclusion">open_loc k (u1 &#39;{ k | x ~&gt; u2}) (incr w (w0, Bd n)) =
mret T k (Bd n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3bf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3bf">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w0, k, Fr a) ‚ààmd u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (u1 &#39;{ k | x ~&gt; u2}) (incr w (w0, Fr a)) =
mret T k (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">trivial</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w0, k, Bd n) ‚ààmd u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (u1 &#39;{ k | x ~&gt; u2}) (incr w (w0, Bd n)) =
mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c1"><span class="nb">specialize</span> (lcu2 _ _ hin).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w0, Bd n)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w0, k, Bd n) ‚ààmd u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (u1 &#39;{ k | x ~&gt; u2}) (incr w (w0, Bd n)) =
mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c2"><span class="nb">cbn</span> <span class="kr">in</span> lcu2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w0 + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w0, k, Bd n) ‚ààmd u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (u1 &#39;{ k | x ~&gt; u2}) (incr w (w0, Bd n)) =
mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c3"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w0 + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w0, k, Bd n) ‚ààmd u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k (w ‚óè w0)) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c4">unfold_monoid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w0 + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w0, k, Bd n) ‚ààmd u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k (w ++ w0)) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c5"><span class="nb">rewrite</span> countk_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w0</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w0 + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w0, k, Bd n) ‚ààmd u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w + countk k w0) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w + countk k w0).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u1 (w, Fr a) &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (subst_loc k x u2 (snd (w, Fr a)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c7"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (<span class="kr">if</span> x == a <span class="kr">then</span> u2 <span class="kr">else</span> mret T k (Fr a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c8">simpl_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (<span class="kr">if</span> x == a <span class="kr">then</span> u2 <span class="kr">else</span> mret T k (Fr a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c9"><span class="nb">compare</span> values x <span class="kn">and</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; a</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (mret T k (Fr a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (kbindd_comp_mret_eq).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="c">(* &lt;&lt;&lt; TODO standardize this lemma *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ca" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ca">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u1 (w, Bd n) &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (subst_loc k x u2 (snd (w, Bd n)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3cb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3cb"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; u1
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> &#39;{ k | x ~&gt; u2} =
kbindd (T k) k
  (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚óã incr w)
  (mret T k (Bd n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3cc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3cc"><span class="nb">rewrite</span> (kbindd_comp_mret_eq).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; u1
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> &#39;{ k | x ~&gt; u2} =
open_loc k (u1 &#39;{ k | x ~&gt; u2}) (incr w (∆µ, Bd n))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3cd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3cd"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w); <span class="nb">cbn</span>; simpl_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd n) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k (w ‚óè ∆µ)) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk3ce" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3ce"><hr></label><div class="goal-conclusion">u1 &#39;{ k | x ~&gt; u2} =
<span class="kr">match</span> Nat.<span class="nb">compare</span> (countk k w) (countk k (w ‚óè ∆µ)) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd (countk k w))
| Gt =&gt; mret T k (Bd (countk k w - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk3cf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3cf"><hr></label><div class="goal-conclusion">mret T k (Bd (n - <span class="mi">1</span>)) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k (w ‚óè ∆µ)) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd n) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k (w ‚óè ∆µ)) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d1"><span class="nb">rewrite</span> monoid_id_l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd n) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u1 &#39;{ k | x ~&gt; u2} =
<span class="kr">match</span> Nat.<span class="nb">compare</span> (countk k w) (countk k (w ‚óè ∆µ)) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd (countk k w))
| Gt =&gt; mret T k (Bd (countk k w - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d3"><span class="nb">rewrite</span> monoid_id_l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u1 &#39;{ k | x ~&gt; u2} =
<span class="kr">match</span> Nat.<span class="nb">compare</span> (countk k w) (countk k w) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd (countk k w))
| Gt =&gt; mret T k (Bd (countk k w - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d4"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u1 &#39;{ k | x ~&gt; u2} =
<span class="kr">match</span> Nat.<span class="nb">compare</span> (countk k w) (countk k w) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd (countk k w))
| Gt =&gt; mret T k (Bd (countk k w - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals (countk k w) <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d5">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd (n - <span class="mi">1</span>)) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k (w ‚óè ∆µ)) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d6"><span class="nb">rewrite</span> monoid_id_l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd (n - <span class="mi">1</span>)) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d7"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lcu2</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd (n - <span class="mi">1</span>)) =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; u1 &#39;{ k | x ~&gt; u2}
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d8"><span class="kn">Theorem</span> <span class="nf">subst_open_eq</span> :  <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u1</span> <span class="nv">u2</span> <span class="nv">t</span> <span class="nv">x</span>,
      LC (T k) k u2 -&gt;
      t &#39;(k | u1) &#39;{k | x ~&gt; u2} =
      t &#39;{k | x ~&gt; u2} &#39;(k | u1 &#39;{k | x ~&gt; u2}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
LC (T k) k u2 -&gt;
(t &#39;( k | u1)) &#39;{ k | x ~&gt; u2} =
(t &#39;{ k | x ~&gt; u2}) &#39;( k | u1 &#39;{ k | x ~&gt; u2})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u1</span> <span class="nv">u2</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
LC (T k) k u2 -&gt;
(t &#39;( k | u1)) &#39;{ k | x ~&gt; u2} =
(t &#39;{ k | x ~&gt; u2}) &#39;( k | u1 &#39;{ k | x ~&gt; u2})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3da" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3da">introv lc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(t &#39;( k | u1)) &#39;{ k | x ~&gt; u2} =
(t &#39;{ k | x ~&gt; u2}) &#39;( k | u1 &#39;{ k | x ~&gt; u2})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3db" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3db">compose near t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="nb">subst</span> U k x u2 ‚àò open U k u1) t =
(open U k (u1 &#39;{ k | x ~&gt; u2}) ‚àò <span class="nb">subst</span> U k x u2) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3dc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3dc"><span class="nb">unfold</span> open, <span class="nb">subst</span> <span class="nb">at</span> <span class="mi">1</span> <span class="mi">3</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(kbind U k (subst_loc k x u2)
 ‚àò kbindd U k (open_loc k u1)) t =
(kbindd U k (open_loc k (u1 &#39;{ k | x ~&gt; u2}))
 ‚àò kbind U k (subst_loc k x u2)) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3dd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3dd"><span class="nb">rewrite</span> (kbind_kbindd U), (kbindd_kbind U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k
  (kbind (T k) k (subst_loc k x u2) ‚àò open_loc k u1) t =
kbindd U k
  (<span class="kr">fun</span> &#39;(w, a) =&gt;
   kbindd (T k) k
     (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚àò incr w)
     (subst_loc k x u2 a)) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3de" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3de">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1, u2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind (T k) k (subst_loc k x u2) ‚àò open_loc k u1 =
(<span class="kr">fun</span> &#39;(w, a) =&gt;
 kbindd (T k) k
   (open_loc k (u1 &#39;{ k | x ~&gt; u2}) ‚àò incr w)
   (subst_loc k x u2 a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> subst_open_eq_loc; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3df" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3df"><span class="kn">Theorem</span> <span class="nf">subst_open_neq_loc</span> :  <span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) (<span class="nv">x</span> : atom),
      k1 &lt;&gt; k2 -&gt;
      LC (T k2) k1 u2 -&gt;
      (btgd k2 (subst_loc k2 x u2 ‚àò extract (W := prod (list K)))) ‚ãÜdm btgd k1 (open_loc k1 u1) =
      (btgd k1 (open_loc k1 (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))) ‚ãÜdm (btg k2 (subst_loc k2 x u2) ‚óª const (extract (W := prod (list K)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
btgd k2 (subst_loc k2 x u2 ‚àò extract)
‚ãÜdm btgd k1 (open_loc k1 u1) =
btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
‚ãÜdm (btg k2 (subst_loc k2 x u2) ‚óª const extract)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
btgd k2 (subst_loc k2 x u2 ‚àò extract)
‚ãÜdm btgd k1 (open_loc k1 u1) =
btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
‚ãÜdm (btg k2 (subst_loc k2 x u2) ‚óª const extract)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e1">introv Hneq HLC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k2 (subst_loc k2 x u2 ‚àò extract)
‚ãÜdm btgd k1 (open_loc k1 u1) =
btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
‚ãÜdm (btg k2 (subst_loc k2 x u2) ‚óª const extract)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e2">ext j [w l].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btgd k2 (subst_loc k2 x u2 ‚àò extract)
 ‚ãÜdm btgd k1 (open_loc k1 u1)) j (w, l) =
(btgd k1
   (open_loc k1
      (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
 ‚ãÜdm (btg k2 (subst_loc k2 x u2) ‚óª const extract)) j
  (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e3"><span class="nb">unfold</span> compose_dm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T j)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  (btgd k1 (open_loc k1 u1) j (w, l)) =
mbindd (T j)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w))
  ((btg k2 (subst_loc k2 x u2) ‚óª const extract) j
     (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e4"><span class="nb">compare</span> values j <span class="kn">and</span> k1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  (btgd k1 (open_loc k1 u1) k1 (w, l)) =
mbindd (T k1)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w))
  ((btg k2 (subst_loc k2 x u2) ‚óª const extract) k1
     (w, l))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk3e5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3e5"><hr></label><div class="goal-conclusion">mbindd (T j)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  (btgd k1 (open_loc k1 u1) j (w, l)) =
mbindd (T j)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w))
  ((btg k2 (subst_loc k2 x u2) ‚óª const extract) j
     (w, l))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e6">{ <span class="c">(* j = k1 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  (btgd k1 (open_loc k1 u1) k1 (w, l)) =
mbindd (T k1)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w))
  ((btg k2 (subst_loc k2 x u2) ‚óª const extract) k1
     (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e7"><span class="nb">rewrite</span> btgd_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
mbindd (T k1)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w))
  ((btg k2 (subst_loc k2 x u2) ‚óª const extract) k1
     (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e8"><span class="nb">replace</span> ((btg k2 (subst_loc k2 x u2) ‚óª const extract) k1 (w, l))
        <span class="kr">with</span> (btg k2 (subst_loc k2 x u2) k1 l) <span class="bp">by</span> (<span class="nb">compare</span> values k1 <span class="kn">and</span> k1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
mbindd (T k1)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w)) (btg k2 (subst_loc k2 x u2) k1 l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3e9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3e9"><span class="nb">rewrite</span> btg_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
mbindd (T k1)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w)) (mret T k1 l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ea" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ea">compose near l on <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
(mbindd (T k1)
   (btgd k1
      (open_loc k1
         (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w)) ‚àò mret T k1) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3eb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3eb"><span class="nb">rewrite</span> mbindd_comp_mret.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
((btgd k1
    (open_loc k1
       (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  ‚óª allK (incr w)) k1 ‚àò ret) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ec" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ec"><span class="nb">unfold</span> vec_compose <span class="nb">at</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
(btgd k1
   (open_loc k1
      (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   k1 ‚àò allK (incr w) k1 ‚àò ret) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ed" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ed"><span class="nb">unfold</span> allK <span class="nb">at</span> <span class="mi">2</span>, const.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
(btgd k1
   (open_loc k1
      (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   k1 ‚àò incr w ‚àò ret) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ee" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ee"><span class="nb">unfold</span> compose <span class="nb">at</span> <span class="mi">2</span> <span class="mi">3</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (ret l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ef" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ef"><span class="nb">rewrite</span> btgd_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
open_loc k1
  (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)
  (incr w (ret l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f0"><span class="nb">replace</span> (incr w (ret l)) <span class="kr">with</span> (w, l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
open_loc k1
  (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)
  (w, l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk3f1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3f1"><hr></label><div class="goal-conclusion">(w, l) = incr w (ret l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f2"><span class="mi">2</span>:{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, l) = incr w (ret l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">cbn</span>; <span class="bp">now</span> simpl_monoid.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f3">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (open_loc k1 u1 (w, l)) =
open_loc k1
  (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)
  (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f4"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  <span class="kr">match</span> l <span class="kr">with</span>
  | Fr x =&gt; mret T k1 (Fr x)
  | Bd n =&gt;
      <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k1 w) <span class="kr">with</span>
      | Eq =&gt; u1
      | Lt =&gt; mret T k1 (Bd n)
      | Gt =&gt; mret T k1 (Bd (n - <span class="mi">1</span>))
      <span class="kr">end</span>
  <span class="kr">end</span> =
<span class="kr">match</span> l <span class="kr">with</span>
| Fr x =&gt; mret T k1 (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k1 w) <span class="kr">with</span>
    | Eq =&gt;
        mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1
    | Lt =&gt; mret T k1 (Bd n)
    | Gt =&gt; mret T k1 (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f5"><span class="nb">destruct</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (mret T k1 (Fr a)) =
mret T k1 (Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk3f6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3f6"><hr></label><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k1 w) <span class="kr">with</span>
  | Eq =&gt; u1
  | Lt =&gt; mret T k1 (Bd n)
  | Gt =&gt; mret T k1 (Bd (n - <span class="mi">1</span>))
  <span class="kr">end</span> =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k1 w) <span class="kr">with</span>
| Eq =&gt; mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1
| Lt =&gt; mret T k1 (Bd n)
| Gt =&gt; mret T k1 (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (mret T k1 (Fr a)) =
mret T k1 (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">compose near (Fr a) on <span class="nb">left</span>;
           <span class="nb">rewrite</span> mbindd_comp_mret;
           <span class="nb">unfold</span> compose; <span class="nb">cbn</span>;
          <span class="nb">compare</span> values k1 <span class="kn">and</span> k2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k1 w) <span class="kr">with</span>
  | Eq =&gt; u1
  | Lt =&gt; mret T k1 (Bd n)
  | Gt =&gt; mret T k1 (Bd (n - <span class="mi">1</span>))
  <span class="kr">end</span> =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k1 w) <span class="kr">with</span>
| Eq =&gt; mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1
| Lt =&gt; mret T k1 (Bd n)
| Gt =&gt; mret T k1 (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f9"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k1 w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k1 w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (mret T k1 (Bd n)) =
mret T k1 (Bd n)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk3fa" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3fa"><hr></label><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) u1 =
mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk3fb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k1 w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k1 w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3fb"><hr></label><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) 
  (mret T k1 (Bd (n - <span class="mi">1</span>))) = 
mret T k1 (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3fc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3fc">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k1 w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (mret T k1 (Bd n)) =
mret T k1 (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3fd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3fd">compose near (Bd n) on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k1 w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mbindd (T k1)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w)) ‚àò mret T k1) (Bd n) =
mret T k1 (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> mbindd_comp_mret;
            <span class="nb">unfold</span> compose; <span class="nb">cbn</span>;
            <span class="nb">compare</span> values k1 <span class="kn">and</span> k2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3fe" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3fe">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) u1 =
mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3ff" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3ff"><span class="nb">unfold</span> mbind; fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k2 (subst_loc k2 x u2 ‚àò extract) ‚óª allK (incr w) =
btg k2 (subst_loc k2 x u2) ‚óª allK extract</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk400" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk400"><span class="nb">unfold</span> vec_compose, allK, const.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">k</span> =&gt;
 btgd k2 (subst_loc k2 x u2 ‚àò extract) k ‚àò incr w) =
(<span class="kr">fun</span> <span class="nv">k</span> =&gt; btg k2 (subst_loc k2 x u2) k ‚àò extract)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk401" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk401">ext j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k2 (subst_loc k2 x u2 ‚àò extract) j ‚àò incr w =
btg k2 (subst_loc k2 x u2) j ‚àò extract</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk402" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk402">destruct_eq_args j k2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k2 (subst_loc k2 x u2 ‚àò extract) k2 ‚àò incr w =
btg k2 (subst_loc k2 x u2) k2 ‚àò extract</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk403" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk403"><hr></label><div class="goal-conclusion">btgd k2 (subst_loc k2 x u2 ‚àò extract) j ‚àò incr w =
btg k2 (subst_loc k2 x u2) j ‚àò extract</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk404" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk404">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k2 (subst_loc k2 x u2 ‚àò extract) k2 ‚àò incr w =
btg k2 (subst_loc k2 x u2) k2 ‚àò extract</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk405" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk405"><span class="nb">rewrite</span> btg_eq, btgd_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x u2 ‚àò extract ‚àò incr w =
subst_loc k2 x u2 ‚àò extract</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk406" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk406">reassociate -&gt;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x u2 ‚àò (extract ‚àò incr w) =
subst_loc k2 x u2 ‚àò extract</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk407" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk407"><span class="nb">replace</span> (extract ‚àò incr w) <span class="kr">with</span> (extract (A := LN)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x u2 ‚àò extract =
subst_loc k2 x u2 ‚àò extract</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk408" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk408"><hr></label><div class="goal-conclusion">extract = extract ‚àò incr w</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk409" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk409"><span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">extract = extract ‚àò incr w</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> (extract_incr (A := LN) w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk40a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk40a">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k2 (subst_loc k2 x u2 ‚àò extract) j ‚àò incr w =
btg k2 (subst_loc k2 x u2) j ‚àò extract</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk40b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk40b"><span class="nb">rewrite</span> btgd_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T j ‚àò extract ‚àò incr w =
btg k2 (subst_loc k2 x u2) j ‚àò extract</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk40c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk40c"><span class="nb">rewrite</span> btg_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T j ‚àò extract ‚àò incr w = mret T j ‚àò extract</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk40d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk40d">reassociate -&gt;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T j ‚àò (extract ‚àò incr w) = mret T j ‚àò extract</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk40e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk40e"><span class="nb">replace</span> (extract ‚àò incr w) <span class="kr">with</span> (extract (A := LN)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T j ‚àò extract = mret T j ‚àò extract</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk40f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk40f"><hr></label><div class="goal-conclusion">extract = extract ‚àò incr w</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk410" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk410"><span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k1 w) 
  (countk k1 w) = Eq</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">extract = extract ‚àò incr w</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> (extract_incr (A := LN) w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk411" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk411">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k1 w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k1 w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k1)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) (mret T k1 (Bd (n - <span class="mi">1</span>))) =
mret T k1 (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk412" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk412">compose near (Bd (n - <span class="mi">1</span>)) on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k1 w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k1 w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mbindd (T k1)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w)) ‚àò mret T k1) (Bd (n - <span class="mi">1</span>)) =
mret T k1 (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> mbindd_comp_mret;
            <span class="nb">unfold</span> compose; <span class="nb">cbn</span>;
            <span class="nb">compare</span> values k1 <span class="kn">and</span> k2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk413" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk413">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T j)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  (btgd k1 (open_loc k1 u1) j (w, l)) =
mbindd (T j)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w))
  ((btg k2 (subst_loc k2 x u2) ‚óª const extract) j
     (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk414" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk414">{ <span class="c">(* j &lt;&gt; k1 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T j)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  (btgd k1 (open_loc k1 u1) j (w, l)) =
mbindd (T j)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w))
  ((btg k2 (subst_loc k2 x u2) ‚óª const extract) j
     (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk415" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk415"><span class="nb">rewrite</span> btgd_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T j)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w)) ((mret T j ‚àò extract) (w, l)) =
mbindd (T j)
  (btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   ‚óª allK (incr w))
  ((btg k2 (subst_loc k2 x u2) ‚óª const extract) j
     (w, l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk416" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk416"><span class="nb">unfold</span> vec_compose, const, compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k2 (subst_loc k2 x u2 ‚óã extract) k
   ‚óã allK (incr w) k) (mret T j (extract (w, l))) =
mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) j (extract (w, l)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk417" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk417"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k2 (subst_loc k2 x u2 ‚óã extract) k
   ‚óã allK (incr w) k) (mret T j l) =
mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) j l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk418" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk418">compose near l on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mbindd (T j)
   (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
    btgd k2 (subst_loc k2 x u2 ‚óã extract) k
    ‚óã allK (incr w) k) ‚àò mret T j) l =
mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk419" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk419"><span class="nb">rewrite</span> mbindd_comp_mret.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btgd k2 (subst_loc k2 x u2 ‚óã extract) j
 ‚óã allK (incr w) j ‚àò ret) l =
mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk41a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk41a"><span class="nb">compare</span> values j <span class="kn">and</span> k2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btgd k2 (subst_loc k2 x u2 ‚óã extract) k2
 ‚óã allK (incr w) k2 ‚àò ret) l =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) k2 l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk41b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk41b"><hr></label><div class="goal-conclusion">(btgd k2 (subst_loc k2 x u2 ‚óã extract) j
 ‚óã allK (incr w) j ‚àò ret) l =
mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) j l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk41c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk41c">{ <span class="c">(* j = k2 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btgd k2 (subst_loc k2 x u2 ‚óã extract) k2
 ‚óã allK (incr w) k2 ‚àò ret) l =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) k2 l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk41d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk41d"><span class="nb">rewrite</span> btgd_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="kr">fun</span> <span class="nv">a</span> : list K * LN =&gt;
  subst_loc k2 x u2 (extract (allK (incr w) k2 a)))
 ‚àò ret) l =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) k2 l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk41e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk41e"><span class="nb">rewrite</span> btg_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="kr">fun</span> <span class="nv">a</span> : list K * LN =&gt;
  subst_loc k2 x u2 (extract (allK (incr w) k2 a)))
 ‚àò ret) l =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k) (subst_loc k2 x u2 l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk41f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk41f"><span class="nb">unfold</span> compose, allK, const.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x u2 (extract (incr w (ret l))) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) (subst_loc k2 x u2 l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk420" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk420"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x u2 l =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) (subst_loc k2 x u2 l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk421" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk421"><span class="nb">compare</span> l to atom x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x u2 (Fr x) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) (subst_loc k2 x u2 (Fr x))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk422" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk422"><hr></label><div class="goal-conclusion">subst_loc k2 x u2 (Fr a) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) 
  (subst_loc k2 x u2 (Fr a))</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk423" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="ln-v-chk423"><hr></label><div class="goal-conclusion">subst_loc k2 x u2 (Bd n) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) 
  (subst_loc k2 x u2 (Bd n))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk424" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk424">- <span class="c">(* l = Fr x *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x u2 (Fr x) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) (subst_loc k2 x u2 (Fr x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk425" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk425"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == x <span class="kr">then</span> u2 <span class="kr">else</span> mret T k2 (Fr x)) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w)
  (<span class="kr">if</span> x == x <span class="kr">then</span> u2 <span class="kr">else</span> mret T k2 (Fr x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk426" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk426">destruct_eq_args x x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u2 =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) u2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk427" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk427"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) u2 = u2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk428" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk428"><span class="nb">apply</span> mbindd_respectful_id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w0</span> <span class="nv">k</span> (<span class="nv">a</span> : LN),
(w0, k, a) ‚ààmd u2 -&gt;
btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)) k
  (incr w (w0, a)) = mret T k a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk429" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk429"><span class="nb">intros</span> w&#39; k l Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k, l) ‚ààmd u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)) k
  (incr w (w&#39;, l)) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk42a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk42a"><span class="nb">compare</span> values k <span class="kn">and</span> k1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, l) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, l)) = mret T k1 l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk42b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k, l) ‚ààmd u2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k</span></span></span><br></div><label class="goal-separator" for="ln-v-chk42b"><hr></label><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)) k
  (incr w (w&#39;, l)) = 
mret T k l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk42c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk42c">+ <span class="c">(* k = k1 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, l) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, l)) = mret T k1 l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk42d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk42d"><span class="nb">unfold</span> LC, LCn <span class="kr">in</span> HLC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k1, l) ‚ààmd u2 -&gt; lc_loc k1 <span class="mi">0</span> (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, l) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, l)) = mret T k1 l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk42e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk42e"><span class="nb">specialize</span> (HLC _ _ Hin).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>lc_loc k1 <span class="mi">0</span> (w&#39;, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, l) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, l)) = mret T k1 l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk42f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk42f"><span class="nb">unfold</span> lc_loc <span class="kr">in</span> HLC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> l <span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n =&gt; n &lt; countk k1 w&#39; + <span class="mi">0</span>
<span class="kr">end</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, l) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, l)) = mret T k1 l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk430" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk430"><span class="nb">destruct</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Fr a) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, Fr a)) = mret T k1 (Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk431" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w&#39; + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Bd n) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk431"><hr></label><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, Bd n)) = 
mret T k1 (Bd n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk432" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk432">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Fr a) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, Fr a)) = mret T k1 (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp">  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk433" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk433"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Fr a) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> k1 == k1 <span class="kr">with</span>
| <span class="nb">left</span> x =&gt;
    rew [<span class="kr">fun</span> <span class="nv">H</span> : K =&gt; T H LN]
        eq_ind_r (<span class="kr">fun</span> <span class="nv">k</span> =&gt; k1 = k) eq_refl x <span class="kr">in</span>
    mret T k1 (Fr a)
| <span class="nb">right</span> _ =&gt; mret T k1 (Fr a)
<span class="kr">end</span> = mret T k1 (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk434" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk434"><span class="nb">compare</span> values k1 <span class="kn">and</span> k1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Fr a) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1, DESTR_EQ0, DESTR_EQs2</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rew [<span class="kr">fun</span> <span class="nv">H</span> : K =&gt; T H LN]
    eq_ind_r (<span class="kr">fun</span> <span class="nv">k</span> =&gt; k1 = k) eq_refl DESTR_EQ0 <span class="kr">in</span>
mret T k1 (Fr a) = mret T k1 (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">               </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">destruct</span> DESTR_EQ0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk435" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk435">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w&#39; + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Bd n) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, Bd n)) = mret T k1 (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk436" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk436">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w&#39; + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Bd n) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
  k1 (incr w (w&#39;, Bd n)) = mret T k1 (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk437" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk437"><span class="nb">rewrite</span> btgd_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w&#39; + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Bd n) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k1
  (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)
  (incr w (w&#39;, Bd n)) = mret T k1 (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">              </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk438" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk438"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w&#39; + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Bd n) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k1 (w ‚óè w&#39;)) <span class="kr">with</span>
| Eq =&gt; mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1
| Lt =&gt; mret T k1 (Bd n)
| Gt =&gt; mret T k1 (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k1 (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk439" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk439">unfold_ops @Monoid_op_list.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w&#39; + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Bd n) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k1 (w ++ w&#39;)) <span class="kr">with</span>
| Eq =&gt; mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1
| Lt =&gt; mret T k1 (Bd n)
| Gt =&gt; mret T k1 (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k1 (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">              </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk43a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk43a"><span class="nb">rewrite</span> countk_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>n &lt; countk k1 w&#39; + <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k1, Bd n) ‚ààmd u2</span></span></span><br><span><var>DESTR_EQs1</var><span class="hyp-type"><b>: </b><span>k1 = k1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k1 w + countk k1 w&#39;) <span class="kr">with</span>
| Eq =&gt; mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1
| Lt =&gt; mret T k1 (Bd n)
| Gt =&gt; mret T k1 (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k1 (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">              </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k1 w + countk k1 w&#39;).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk43b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk43b">+ <span class="c">(* k &lt;&gt; k1 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs0</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w&#39;, k, l) ‚ààmd u2</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btgd k1
  (open_loc k1
     (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)) k
  (incr w (w&#39;, l)) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> btgd_neq; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk43c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk43c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x u2 (Fr a) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) (subst_loc k2 x u2 (Fr a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk43d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk43d"><span class="nb">rewrite</span> subst_loc_fr_neq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k2 (Fr a) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) (mret T k2 (Fr a))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk43e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk43e"><hr></label><div class="goal-conclusion">Fr x &lt;&gt; Fr a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk43f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk43f">compose near (Fr a) on <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k2 (Fr a) =
(mbindd (T k2)
   (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
    btgd k1
      (open_loc k1
         (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
      k ‚óã incr w) ‚àò mret T k2) (Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk440" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk440"><hr></label><div class="goal-conclusion">Fr x &lt;&gt; Fr a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk441" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk441"><span class="nb">rewrite</span> mbindd_comp_mret.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k2 (Fr a) =
(btgd k1
   (open_loc k1
      (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   k2 ‚óã incr w ‚àò ret) (Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk442" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk442"><hr></label><div class="goal-conclusion">Fr x &lt;&gt; Fr a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk443" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk443"><span class="nb">rewrite</span> btgd_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; Fr a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk444" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk444"><span class="nb">inversion</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Fr x = Fr a</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>x = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk445" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk445">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">subst_loc k2 x u2 (Bd n) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) (subst_loc k2 x u2 (Bd n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk446" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk446"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k2 (Bd n) =
mbindd (T k2)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã incr w) (mret T k2 (Bd n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk447" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk447">compose near (Bd n) on <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k2 (Bd n) =
(mbindd (T k2)
   (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
    btgd k1
      (open_loc k1
         (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
      k ‚óã incr w) ‚àò mret T k2) (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk448" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk448"><span class="nb">rewrite</span> mbindd_comp_mret.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; k1</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k2 (Bd n) =
(btgd k1
   (open_loc k1
      (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   k2 ‚óã incr w ‚àò ret) (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> btgd_neq; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk449" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk449">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btgd k2 (subst_loc k2 x u2 ‚óã extract) j
 ‚óã allK (incr w) j ‚àò ret) l =
mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk44a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk44a">{ <span class="c">(* j &lt;&gt; k2 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btgd k2 (subst_loc k2 x u2 ‚óã extract) j
 ‚óã allK (incr w) j ‚àò ret) l =
mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk44b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk44b"><span class="nb">rewrite</span> btgd_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mret T j ‚àò extract ‚óã allK (incr w) j ‚àò ret) l =
mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k)
  (btg k2 (subst_loc k2 x u2) j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk44c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk44c"><span class="nb">rewrite</span> btg_neq; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mret T j ‚àò extract ‚óã allK (incr w) j ‚àò ret) l =
mbindd (T j)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k1
     (open_loc k1
        (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
     k ‚óã allK (incr w) k) (mret T j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk44d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk44d">compose near l on <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mret T j ‚àò extract ‚óã allK (incr w) j ‚àò ret) l =
(mbindd (T j)
   (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
    btgd k1
      (open_loc k1
         (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
      k ‚óã allK (incr w) k) ‚àò mret T j) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk44e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk44e"><span class="nb">rewrite</span> (mbindd_comp_mret).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hneq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>HLC</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k1</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; j</span></span></span><br><span><var>DESTR_NEQ0</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs0</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mret T j ‚àò extract ‚óã allK (incr w) j ‚àò ret) l =
(btgd k1
   (open_loc k1
      (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
   j ‚óã allK (incr w) j ‚àò ret) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> btgd_neq; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk44f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk44f"><span class="kn">Theorem</span> <span class="nf">subst_open_neq</span> :  <span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) (<span class="nv">x</span> : atom) (<span class="nv">t</span> : U LN),
      k1 &lt;&gt; k2 -&gt;
      LC (T k2) k1 u2 -&gt;
      t &#39;(k1 | u1) &#39;{k2 | x ~&gt; u2} =
      t &#39;{k2 | x ~&gt; u2} &#39;(k1 | u1 &#39;{k2 | x ~&gt; u2}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span> <span class="nv">t</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(t &#39;( k1 | u1)) &#39;{ k2 | x ~&gt; u2} =
(t &#39;{ k2 | x ~&gt; u2}) &#39;( k1 | u1 &#39;{ k2 | x ~&gt; u2})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk450" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk450"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span> <span class="nv">t</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(t &#39;( k1 | u1)) &#39;{ k2 | x ~&gt; u2} =
(t &#39;{ k2 | x ~&gt; u2}) &#39;( k1 | u1 &#39;{ k2 | x ~&gt; u2})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk451" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk451">introv neq lc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(t &#39;( k1 | u1)) &#39;{ k2 | x ~&gt; u2} =
(t &#39;{ k2 | x ~&gt; u2}) &#39;( k1 | u1 &#39;{ k2 | x ~&gt; u2})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk452" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk452">compose near t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="nb">subst</span> U k2 x u2 ‚àò open U k1 u1) t =
(open U k1 (u1 &#39;{ k2 | x ~&gt; u2}) ‚àò <span class="nb">subst</span> U k2 x u2) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk453" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk453"><span class="nb">unfold</span> <span class="nb">subst</span>, open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(kbind U k2 (subst_loc k2 x u2)
 ‚àò kbindd U k1 (open_loc k1 u1)) t =
(kbindd U k1
   (open_loc k1
      (kbind (T k1) k2 (subst_loc k2 x u2) u1))
 ‚àò kbind U k2 (subst_loc k2 x u2)) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk454" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk454"><span class="nb">unfold</span> kbind, kbindd.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mbind U (btg k2 (subst_loc k2 x u2))
 ‚àò mbindd U (btgd k1 (open_loc k1 u1))) t =
(mbindd U
   (btgd k1
      (open_loc k1
         (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)))
 ‚àò mbind U (btg k2 (subst_loc k2 x u2))) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk455" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk455"><span class="nb">rewrite</span> (mbind_to_mbindd U), (mbindd_mbindd U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd U
  (<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
   mbindd (T k)
     ((btg k2 (subst_loc k2 x u2) ‚óª allK extract)
      ‚óª allK (incr w))
     (btgd k1 (open_loc k1 u1) k (w, a))) t =
(mbindd U
   (btgd k1
      (open_loc k1
         (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1)))
 ‚àò mbindd U
     (btg k2 (subst_loc k2 x u2) ‚óª allK extract)) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk456" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk456"><span class="nb">rewrite</span> (mbindd_mbindd U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd U
  (<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
   mbindd (T k)
     ((btg k2 (subst_loc k2 x u2) ‚óª allK extract)
      ‚óª allK (incr w))
     (btgd k1 (open_loc k1 u1) k (w, a))) t =
mbindd U
  (<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
   mbindd (T k)
     (btgd k1
        (open_loc k1
           (mbind (T k1) (btg k2 (subst_loc k2 x u2))
              u1)) ‚óª allK (incr w))
     ((btg k2 (subst_loc k2 x u2) ‚óª allK extract) k
        (w, a))) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk457" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk457">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   ((btg k2 (subst_loc k2 x u2) ‚óª allK extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2) ‚óª allK extract) k
      (w, a)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk458" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk458"><span class="nb">pose</span> (lemma := subst_open_neq_loc).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
btgd k2 (subst_loc k2 x u2 ‚àò extract)
‚ãÜdm btgd k1 (open_loc k1 u1) =
btgd k1
  (open_loc k1
     (mbind 
        (T k1) 
        (btg k2 (subst_loc k2 x u2)) u1))
‚ãÜdm (btg k2 (subst_loc k2 x u2)
     ‚óª const extract)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   ((btg k2 (subst_loc k2 x u2) ‚óª allK extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2) ‚óª allK extract) k
      (w, a)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk459" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk459"><span class="nb">unfold</span> compose_dm <span class="kr">in</span> lemma.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   ((btg k2 (subst_loc k2 x u2) ‚óª allK extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind (T k1) (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2) ‚óª allK extract) k
      (w, a)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk45a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk45a"><span class="nb">setoid_rewrite</span> &lt;- lemma; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   ((btg k2 (subst_loc k2 x u2) ‚óª allK extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk45b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk45b">ext k [w a].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k)
  ((btg k2 (subst_loc k2 x u2) ‚óª allK extract)
   ‚óª allK (incr w))
  (btgd k1 (open_loc k1 u1) k (w, a)) =
mbindd (T k)
  (btgd k2 (subst_loc k2 x u2 ‚àò extract)
   ‚óª allK (incr w))
  (btgd k1 (open_loc k1 u1) k (w, a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk45c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk45c"><span class="nb">unfold</span> vec_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mbindd (T k)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btg k2 (subst_loc k2 x u2) k ‚àò allK extract k
   ‚àò allK (incr w) k)
  (btgd k1 (open_loc k1 u1) k (w, a)) =
mbindd (T k)
  (<span class="kr">fun</span> <span class="nv">k</span> =&gt;
   btgd k2 (subst_loc k2 x u2 ‚àò extract) k
   ‚àò allK (incr w) k)
  (btgd k1 (open_loc k1 u1) k (w, a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk45d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk45d">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">k</span> =&gt;
 btg k2 (subst_loc k2 x u2) k ‚àò allK extract k
 ‚àò allK (incr w) k) =
(<span class="kr">fun</span> <span class="nv">k</span> =&gt;
 btgd k2 (subst_loc k2 x u2 ‚àò extract) k
 ‚àò allK (incr w) k)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk45e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk45e">ext j [w&#39; a&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btg k2 (subst_loc k2 x u2) j ‚àò allK extract j
 ‚àò allK (incr w) j) (w&#39;, a&#39;) =
(btgd k2 (subst_loc k2 x u2 ‚àò extract) j
 ‚àò allK (incr w) j) (w&#39;, a&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk45f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk45f"><span class="nb">compare</span> values j <span class="kn">and</span> k2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btg k2 (subst_loc k2 x u2) k2 ‚àò allK extract k2
 ‚àò allK (incr w) k2) (w&#39;, a&#39;) =
(btgd k2 (subst_loc k2 x u2 ‚àò extract) k2
 ‚àò allK (incr w) k2) (w&#39;, a&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk460" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk460"><hr></label><div class="goal-conclusion">(btg k2 (subst_loc k2 x u2) j ‚àò allK extract j
 ‚àò allK (incr w) j) (
  w&#39;, a&#39;) =
(btgd k2 (subst_loc k2 x u2 ‚àò extract) j
 ‚àò allK (incr w) j) (
  w&#39;, a&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk461" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk461">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btg k2 (subst_loc k2 x u2) k2 ‚àò allK extract k2
 ‚àò allK (incr w) k2) (w&#39;, a&#39;) =
(btgd k2 (subst_loc k2 x u2 ‚àò extract) k2
 ‚àò allK (incr w) k2) (w&#39;, a&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk462" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk462"><span class="nb">rewrite</span> btgd_eq, btg_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(subst_loc k2 x u2 ‚àò allK extract k2
 ‚àò allK (incr w) k2) (w&#39;, a&#39;) =
(subst_loc k2 x u2 ‚àò extract ‚àò allK (incr w) k2)
  (w&#39;, a&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk463" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk463"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_EQs</var><span class="hyp-type"><b>: </b><span>k2 = k2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(subst_loc k2 x u2 ‚àò allK extract k2
 ‚àò allK (incr w) k2) (w&#39;, a&#39;) =
(subst_loc k2 x u2 ‚àò extract ‚àò allK (incr w) k2)
  (w&#39;, a&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk464" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk464">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u1</var><span class="hyp-type"><b>: </b><span>T k1 LN</span></span></span><br><span><var>u2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k2) k1 u2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>subst_open_neq_loc</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> (<span class="nv">u1</span> : T k1 LN) (<span class="nv">u2</span> : T k2 LN) <span class="nv">x</span>,
k1 &lt;&gt; k2 -&gt;
LC (T k2) k1 u2 -&gt;
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k2 (subst_loc k2 x u2 ‚àò extract)
    ‚óª allK (incr w))
   (btgd k1 (open_loc k1 u1) k (w, a))) =
(<span class="kr">fun</span> <span class="nv">k</span> &#39;(w, a) =&gt;
 mbindd (T k)
   (btgd k1
      (open_loc k1
         (mbind 
          (T k1) 
          (btg k2 (subst_loc k2 x u2)) u1))
    ‚óª allK (incr w))
   ((btg k2 (subst_loc k2 x u2)
     ‚óª const extract) k (
      w, a)))</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>w'</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>DESTR_NEQ</var><span class="hyp-type"><b>: </b><span>j &lt;&gt; k2</span></span></span><br><span><var>DESTR_NEQs</var><span class="hyp-type"><b>: </b><span>k2 &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(btg k2 (subst_loc k2 x u2) j ‚àò allK extract j
 ‚àò allK (incr w) j) (w&#39;, a&#39;) =
(btgd k2 (subst_loc k2 x u2 ‚àò extract) j
 ‚àò allK (incr w) j) (w&#39;, a&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> btgd_neq, btg_neq; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Decompose opening into variable opening followed by substitution *)</span>
  <span class="sd">(**************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk465" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk465"><span class="kn">Lemma</span> <span class="nf">open_spec_eq_loc</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">w</span> <span class="nv">l</span>,
      l &lt;&gt; Fr x -&gt;
      (<span class="nb">subst</span> (T k) k x u ‚àò open_loc k (mret T k (Fr x))) (w, l) =
      open_loc k u (w, l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> <span class="nv">w</span> <span class="nv">l</span>,
l &lt;&gt; Fr x -&gt;
(<span class="nb">subst</span> (T k) k x u ‚àò open_loc k (mret T k (Fr x)))
  (w, l) = open_loc k u (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk466" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk466"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">x</span> <span class="nv">w</span> <span class="nv">l</span>,
l &lt;&gt; Fr x -&gt;
(<span class="nb">subst</span> (T k) k x u ‚àò open_loc k (mret T k (Fr x)))
  (w, l) = open_loc k u (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk467" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk467">introv neq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="nb">subst</span> (T k) k x u ‚àò open_loc k (mret T k (Fr x)))
  (w, l) = open_loc k u (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk468" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk468"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k (Fr x)) (w, l) &#39;{ k | x ~&gt; u} =
open_loc k u (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk469" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk469"><span class="nb">compare</span> l to atom x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr x &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k (Fr x)) (w, Fr x) &#39;{ k | x ~&gt; u} =
open_loc k u (w, Fr x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk46a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr a &lt;&gt; Fr x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk46a"><hr></label><div class="goal-conclusion">open_loc k (mret T k (Fr x)) (w, Fr a) &#39;{ k | x ~&gt; u} =
open_loc k u (w, Fr a)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk46b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk46b"><hr></label><div class="goal-conclusion">open_loc k (mret T k (Fr x)) (w, Bd n) &#39;{ k | x ~&gt; u} =
open_loc k u (w, Bd n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk46c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk46c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr x &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k (Fr x)) (w, Fr x) &#39;{ k | x ~&gt; u} =
open_loc k u (w, Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk46d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk46d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr a &lt;&gt; Fr x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k (Fr x)) (w, Fr a) &#39;{ k | x ~&gt; u} =
open_loc k u (w, Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk46e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk46e"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr a &lt;&gt; Fr x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) &#39;{ k | x ~&gt; u} = mret T k (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk46f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk46f"><span class="nb">rewrite</span> subst_in_mret_eq, subst_loc_fr_neq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr a &lt;&gt; Fr x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr a) = mret T k (Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk470" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr a &lt;&gt; Fr x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk470"><hr></label><div class="goal-conclusion">Fr x &lt;&gt; Fr a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk471" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk471"><span class="nb">trivial</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr a &lt;&gt; Fr x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; Fr a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk472" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk472">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k (Fr x)) (w, Bd n) &#39;{ k | x ~&gt; u} =
open_loc k u (w, Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk473" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk473"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; mret T k (Fr x)
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> &#39;{ k | x ~&gt; u} =
<span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; u
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk474" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk474"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd n) &#39;{ k | x ~&gt; u} = mret T k (Bd n)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk475" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd (countk k w) &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk475"><hr></label><div class="goal-conclusion">mret T k (Fr x) &#39;{ k | x ~&gt; u} = u</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk476" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk476"><hr></label><div class="goal-conclusion">mret T k (Bd (n - <span class="mi">1</span>)) &#39;{ k | x ~&gt; u} =
mret T k (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk477" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk477"><span class="bp">now</span> <span class="nb">rewrite</span> subst_in_mret_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd (countk k w) &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Fr x) &#39;{ k | x ~&gt; u} = u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk478" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk478"><hr></label><div class="goal-conclusion">mret T k (Bd (n - <span class="mi">1</span>)) &#39;{ k | x ~&gt; u} =
mret T k (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk479" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk479"><span class="bp">now</span> <span class="nb">rewrite</span> subst_in_mret_eq, subst_loc_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mret T k (Bd (n - <span class="mi">1</span>)) &#39;{ k | x ~&gt; u} =
mret T k (Bd (n - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> subst_in_mret_eq, subst_loc_b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="c">(* This theorem would be easy to prove with [subst_open_eq], but</span>
<span class="c">   applying that theorem would introduce a local closure hypothesis</span>
<span class="c">   for &lt;&lt;u&gt;&gt; that is not actually required for our purposes. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk47a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk47a"><span class="kn">Theorem</span> <span class="nf">open_spec_eq</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
      ~ x `<span class="kr">in</span>` FV U k t -&gt;
      t &#39;(k | u) = t &#39;(k | mret T k (Fr x)) &#39;{k | x ~&gt; u}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
x `notin` FV U k t -&gt;
t &#39;( k | u) =
(t &#39;( k | mret T k (Fr x))) &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk47b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk47b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> <span class="nv">x</span>,
x `notin` FV U k t -&gt;
t &#39;( k | u) =
(t &#39;( k | mret T k (Fr x))) &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk47c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk47c">introv <span class="kp">fresh</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;( k | u) =
(t &#39;( k | mret T k (Fr x))) &#39;{ k | x ~&gt; u}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk47d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk47d">compose near t on <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t &#39;( k | u) =
(<span class="nb">subst</span> U k x u ‚àò open U k (mret T k (Fr x))) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk47e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk47e"><span class="nb">unfold</span> <span class="nb">subst</span>, open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k (open_loc k u) t =
(kbind U k (subst_loc k x u)
 ‚àò kbindd U k (open_loc k (mret T k (Fr x)))) t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk47f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk47f"><span class="nb">rewrite</span> (kbind_kbindd U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k (open_loc k u) t =
kbindd U k
  (kbind (T k) k (subst_loc k x u)
   ‚àò open_loc k (mret T k (Fr x))) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk480" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk480"><span class="nb">apply</span> (kbindd_respectful).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w</span> (<span class="nv">a</span> : LN),
(w, k, a) ‚ààmd t -&gt;
open_loc k u (w, a) =
(kbind (T k) k (subst_loc k x u)
 ‚àò open_loc k (mret T k (Fr x))) (w, a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk481" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk481">introv Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, a) =
(kbind (T k) k (subst_loc k x u)
 ‚àò open_loc k (mret T k (Fr x))) (w, a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk482" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk482"><span class="nb">assert</span> (a &lt;&gt; Fr x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a &lt;&gt; Fr x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk483" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, a) ‚ààmd t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk483"><hr></label><div class="goal-conclusion">open_loc k u (w, a) =
(kbind (T k) k (subst_loc k x u)
 ‚àò open_loc k (mret T k (Fr x))) (
  w, a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk484" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk484">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a &lt;&gt; Fr x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk485" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk485"><span class="nb">apply</span> (inmd_implies_in U) <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(k, a) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a &lt;&gt; Fr x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk486" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk486"><span class="nb">rewrite</span> &lt;- free_iff_FV <span class="kr">in</span> <span class="kp">fresh</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(k, a) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a &lt;&gt; Fr x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> ninf_in_neq <span class="kr">in</span> <span class="kp">fresh</span>; <span class="nb">eauto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk487" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk487">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, a) ‚ààmd t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k u (w, a) =
(kbind (T k) k (subst_loc k x u)
 ‚àò open_loc k (mret T k (Fr x))) (w, a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> &lt;- (open_spec_eq_loc k u x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Opening by a variable, followed by non-equal substitution *)</span>
  <span class="sd">(**************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk488" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk488"><span class="kn">Lemma</span> <span class="nf">subst_open_var_loc</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
      x &lt;&gt; y -&gt;
      LC (T k) k u -&gt;
      <span class="nb">subst</span> (T k) k x u ‚àò open_loc k (mret T k (Fr y)) =
      open_loc k (mret T k (Fr y)) ‚ãÜkdm (subst_loc k x u ‚àò extract (W := prod (list K))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
x &lt;&gt; y -&gt;
LC (T k) k u -&gt;
<span class="nb">subst</span> (T k) k x u ‚àò open_loc k (mret T k (Fr y)) =
open_loc k (mret T k (Fr y))
‚ãÜkdm (subst_loc k x u ‚àò extract)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk489" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk489"><span class="kn">Proof with</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) (<span class="nv">x</span> <span class="nv">y</span> : atom),
x &lt;&gt; y -&gt;
LC (T k) k u -&gt;
<span class="nb">subst</span> (T k) k x u ‚àò open_loc k (mret T k (Fr y)) =
open_loc k (mret T k (Fr y))
‚ãÜkdm (subst_loc k x u ‚àò extract)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk48a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk48a">introv neq lc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">subst</span> (T k) k x u ‚àò open_loc k (mret T k (Fr y)) =
open_loc k (mret T k (Fr y))
‚ãÜkdm (subst_loc k x u ‚àò extract)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk48b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk48b"><span class="nb">rewrite</span> subst_open_eq_loc...</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k (Fr y) &#39;{ k | x ~&gt; u})
‚ãÜkdm (subst_loc k x u ‚àò snd) =
open_loc k (mret T k (Fr y))
‚ãÜkdm (subst_loc k x u ‚àò extract)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk48c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk48c">simpl_local.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k (Fr y))
‚ãÜkdm (subst_loc k x u ‚àò snd) =
open_loc k (mret T k (Fr y))
‚ãÜkdm (subst_loc k x u ‚àò extract)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk48d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk48d"><span class="kn">Theorem</span> <span class="nf">subst_open_var</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
      x &lt;&gt; y -&gt;
      LC (T k) k u -&gt;
      t &#39;(k | mret T k (Fr y)) &#39;{k | x ~&gt; u} =
      t &#39;{k | x ~&gt; u} &#39;(k | mret T k (Fr y)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
x &lt;&gt; y -&gt;
LC (T k) k u -&gt;
(t &#39;( k | mret T k (Fr y))) &#39;{ k | x ~&gt; u} =
(t &#39;{ k | x ~&gt; u}) &#39;( k | mret T k (Fr y))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk48e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk48e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> (<span class="nv">u</span> : T k LN) <span class="nv">t</span> (<span class="nv">x</span> <span class="nv">y</span> : atom),
x &lt;&gt; y -&gt;
LC (T k) k u -&gt;
(t &#39;( k | mret T k (Fr y))) &#39;{ k | x ~&gt; u} =
(t &#39;{ k | x ~&gt; u}) &#39;( k | mret T k (Fr y))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk48f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk48f">introv neq lc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(t &#39;( k | mret T k (Fr y))) &#39;{ k | x ~&gt; u} =
(t &#39;{ k | x ~&gt; u}) &#39;( k | mret T k (Fr y))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk490" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk490">compose near t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="nb">subst</span> U k x u ‚àò open U k (mret T k (Fr y))) t =
(open U k (mret T k (Fr y)) ‚àò <span class="nb">subst</span> U k x u) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk491" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk491"><span class="nb">unfold</span> open, <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(kbind U k (subst_loc k x u)
 ‚àò kbindd U k (open_loc k (mret T k (Fr y)))) t =
(kbindd U k (open_loc k (mret T k (Fr y)))
 ‚àò kbind U k (subst_loc k x u)) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk492" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk492"><span class="nb">rewrite</span> (kbind_kbindd U), (kbindd_kbind U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k
  (kbind (T k) k (subst_loc k x u)
   ‚àò open_loc k (mret T k (Fr y))) t =
kbindd U k
  (<span class="kr">fun</span> &#39;(w, a) =&gt;
   kbindd (T k) k
     (open_loc k (mret T k (Fr y)) ‚àò incr w)
     (subst_loc k x u a)) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk493" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk493">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbind (T k) k (subst_loc k x u)
‚àò open_loc k (mret T k (Fr y)) =
(<span class="kr">fun</span> &#39;(w, a) =&gt;
 kbindd (T k) k
   (open_loc k (mret T k (Fr y)) ‚àò incr w)
   (subst_loc k x u a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> subst_open_var_loc; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Closing, followed by opening *)</span>
  <span class="sd">(**************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk494" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk494"><span class="kn">Lemma</span> <span class="nf">open_close_loc</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">w</span> <span class="nv">l</span>,
      (open_loc k (mret T k (Fr x)) ‚àò cobind (W := prod (list K))
                (close_loc k x)) (w, l) = mret T k l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">w</span> <span class="nv">l</span>,
(open_loc k (mret T k (Fr x)) ‚àò cobind (close_loc k x))
  (w, l) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk495" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk495"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">w</span> <span class="nv">l</span>,
(open_loc k (mret T k (Fr x)) ‚àò cobind (close_loc k x))
  (w, l) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk496" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk496"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(open_loc k (mret T k (Fr x)) ‚àò cobind (close_loc k x))
  (w, l) = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk497" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk497"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> l <span class="kr">with</span>
  | Fr y =&gt; <span class="kr">if</span> x == y <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr y
  | Bd n =&gt;
      <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
      | Lt =&gt; Bd n
      | _ =&gt; Bd (S n)
      <span class="kr">end</span>
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; mret T k (Fr x)
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span> = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk498" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk498"><span class="nb">unfold</span> id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> l <span class="kr">with</span>
  | Fr y =&gt; <span class="kr">if</span> x == y <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr y
  | Bd n =&gt;
      <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
      | Lt =&gt; Bd n
      | _ =&gt; Bd (S n)
      <span class="kr">end</span>
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; mret T k (Fr x)
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span> = mret T k l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk499" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk499"><span class="nb">compare</span> l to atom x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> (<span class="kr">if</span> x == x <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr x) <span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; mret T k (Fr x)
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span> = mret T k (Fr x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk49a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk49a"><hr></label><div class="goal-conclusion"><span class="kr">match</span> (<span class="kr">if</span> x == a <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr a) <span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; mret T k (Fr x)
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span> = mret T k (Fr a)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk49b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="ln-v-chk49b"><hr></label><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
  | Lt =&gt; Bd n
  | _ =&gt; Bd (S n)
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; mret T k (Fr x)
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span> = mret T k (Bd n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk49c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk49c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> (<span class="kr">if</span> x == x <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr x) <span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; mret T k (Fr x)
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span> = mret T k (Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk49d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk49d"><span class="nb">compare</span> values x <span class="kn">and</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>DESTR_EQ, DESTR_EQs</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> (countk k w) (countk k w) <span class="kr">with</span>
| Eq =&gt; mret T k (Fr x)
| Lt =&gt; mret T k (Bd (countk k w))
| Gt =&gt; mret T k (Bd (countk k w - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals (countk k w) <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk49e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk49e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> (<span class="kr">if</span> x == a <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr a) <span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; mret T k (Fr x)
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span> = mret T k (Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> values x <span class="kn">and</span> a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk49f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk49f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
  | Lt =&gt; Bd n
  | _ =&gt; Bd (S n)
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr x =&gt; mret T k (Fr x)
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Eq =&gt; mret T k (Fr x)
    | Lt =&gt; mret T k (Bd n)
    | Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
    <span class="kr">end</span>
<span class="kr">end</span> = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a0"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> (S (countk k w)) (countk k w) <span class="kr">with</span>
| Eq =&gt; mret T k (Fr x)
| Lt =&gt; mret T k (Bd (S (countk k w)))
| Gt =&gt; mret T k (Bd (S (countk k w) - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Bd (countk k w))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk4a1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4a1"><hr></label><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> (S n) (countk k w) <span class="kr">with</span>
| Eq =&gt; mret T k (Fr x)
| Lt =&gt; mret T k (Bd (S n))
| Gt =&gt; mret T k (Bd (S n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Bd n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a2"><span class="nb">compare</span> naturals (Datatypes.S (countk k w)) <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> (S n) (countk k w) <span class="kr">with</span>
| Eq =&gt; mret T k (Fr x)
| Lt =&gt; mret T k (Bd (S n))
| Gt =&gt; mret T k (Bd (S n - <span class="mi">1</span>))
<span class="kr">end</span> = mret T k (Bd n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals (Datatypes.S n) <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a3"><span class="kn">Theorem</span> <span class="nf">open_close</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">t</span>,
      (&#39;[k | x] t) &#39;(k | mret T k (Fr x)) = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">t</span>,
(&#39;[ k | x] t) &#39;( k | mret T k (Fr x)) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">t</span>,
(&#39;[ k | x] t) &#39;( k | mret T k (Fr x)) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a5"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(&#39;[ k | x] t) &#39;( k | mret T k (Fr x)) = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a6">compose near t on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(open U k (mret T k (Fr x)) ‚àò close U k x) t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a7"><span class="nb">unfold</span> open, close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(kbindd U k (open_loc k (mret T k (Fr x)))
 ‚àò kmapd U k (close_loc k x)) t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a8"><span class="nb">rewrite</span> (kbindd_kmapd U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k
  (<span class="kr">fun</span> &#39;(w, a) =&gt;
   open_loc k (mret T k (Fr x))
     (w, close_loc k x (w, a))) t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a9"><span class="nb">apply</span> (kbindd_respectful_id); <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(w, k, a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k (Fr x)) (w, close_loc k x (w, a)) =
mret T k a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> open_close_loc.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Opening by a LN reduces to an [kmapd] *)</span>
  <span class="sd">(**************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">open_LN_loc</span> <span class="nv">k</span> (<span class="nv">u</span> : LN) : list K * LN -&gt; LN :=
    <span class="kr">fun</span> <span class="nv">wl</span> =&gt;
      <span class="kr">match</span> wl <span class="kr">with</span>
      | (w, l) =&gt;
        <span class="kr">match</span> l <span class="kr">with</span>
        | Fr x =&gt; Fr x
        | Bd n =&gt;
          <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
          | Gt =&gt; Bd (n - <span class="mi">1</span>)
          | Eq =&gt; u
          | Lt =&gt; Bd n
          <span class="kr">end</span>
        <span class="kr">end</span>
      <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4aa" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4aa"><span class="kn">Lemma</span> <span class="nf">open_by_LN_spec</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span>,
      open U k (mret T k l) = kmapd U k (open_LN_loc k l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span>,
open U k (mret T k l) = kmapd U k (open_LN_loc k l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ab" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ab"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">l</span>,
open U k (mret T k l) = kmapd U k (open_LN_loc k l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ac" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ac"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open U k (mret T k l) = kmapd U k (open_LN_loc k l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ad" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ad"><span class="nb">unfold</span> open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k (open_loc k (mret T k l)) =
kmapd U k (open_LN_loc k l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ae" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ae">ext t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kbindd U k (open_loc k (mret T k l)) t =
kmapd U k (open_LN_loc k l) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4af" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4af"><span class="nb">apply</span> (kbindd_respectful_kmapd).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w</span> (<span class="nv">a</span> : LN),
(w, k, a) ‚ààmd t -&gt;
open_loc k (mret T k l) (w, a) =
mret T k (open_LN_loc k l (w, a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b0"><span class="nb">intros</span> w l&#39; l&#39;in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>l'in</var><span class="hyp-type"><b>: </b><span>(w, k, l&#39;) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k l) (w, l&#39;) =
mret T k (open_LN_loc k l (w, l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b1"><span class="nb">destruct</span> l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l'in</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k l) (w, Fr a) =
mret T k (open_LN_loc k l (w, Fr a))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk4b2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>l'in</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4b2"><hr></label><div class="goal-conclusion">open_loc k (mret T k l) (w, Bd n) =
mret T k (open_LN_loc k l (w, Bd n))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>l'in</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k l) (w, Fr a) =
mret T k (open_LN_loc k l (w, Fr a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>l'in</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">open_loc k (mret T k l) (w, Bd n) =
mret T k (open_LN_loc k l (w, Bd n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b5"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>l'in</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
| Eq =&gt; mret T k l
| Lt =&gt; mret T k (Bd n)
| Gt =&gt; mret T k (Bd (n - <span class="mi">1</span>))
<span class="kr">end</span> =
mret T k
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
  | Eq =&gt; l
  | Lt =&gt; Bd n
  | Gt =&gt; Bd (n - <span class="mi">1</span>)
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Opening, followed by closing *)</span>
  <span class="sd">(**************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b6"><span class="kn">Lemma</span> <span class="nf">close_open_local</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">w</span> <span class="nv">l</span>,
      l &lt;&gt; Fr x -&gt;
      (close_loc k x ‚àò cobind (W := prod (list K))
                 (open_LN_loc k (Fr x))) (w, l) = l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">w</span> <span class="nv">l</span>,
l &lt;&gt; Fr x -&gt;
(close_loc k x ‚àò cobind (open_LN_loc k (Fr x))) (w, l) =
l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">w</span> <span class="nv">l</span>,
l &lt;&gt; Fr x -&gt;
(close_loc k x ‚àò cobind (open_LN_loc k (Fr x))) (w, l) =
l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b8">introv neq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(close_loc k x ‚àò cobind (open_LN_loc k (Fr x))) (w, l) =
l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b9"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> l <span class="kr">with</span>
  | Fr x =&gt; Fr x
  | Bd n =&gt;
      <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
      | Eq =&gt; Fr x
      | Lt =&gt; Bd n
      | Gt =&gt; Bd (n - <span class="mi">1</span>)
      <span class="kr">end</span>
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr y =&gt; <span class="kr">if</span> x == y <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr y
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Lt =&gt; Bd n
    | _ =&gt; Bd (S n)
    <span class="kr">end</span>
<span class="kr">end</span> = l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ba" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ba"><span class="nb">unfold</span> id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> l <span class="kr">with</span>
  | Fr x =&gt; Fr x
  | Bd n =&gt;
      <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
      | Eq =&gt; Fr x
      | Lt =&gt; Bd n
      | Gt =&gt; Bd (n - <span class="mi">1</span>)
      <span class="kr">end</span>
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr y =&gt; <span class="kr">if</span> x == y <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr y
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Lt =&gt; Bd n
    | _ =&gt; Bd (S n)
    <span class="kr">end</span>
<span class="kr">end</span> = l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4bb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4bb"><span class="nb">compare</span> l to atom x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr x &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == x <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr x) = Fr x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk4bc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr a &lt;&gt; Fr x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4bc"><hr></label><div class="goal-conclusion">(<span class="kr">if</span> x == a <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr a) = Fr a</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk4bd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4bd"><hr></label><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
  | Eq =&gt; Fr x
  | Lt =&gt; Bd n
  | Gt =&gt; Bd (n - <span class="mi">1</span>)
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr y =&gt; <span class="kr">if</span> x == y <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr y
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Lt =&gt; Bd n
    | _ =&gt; Bd (S n)
    <span class="kr">end</span>
<span class="kr">end</span> = Bd n</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4be" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4be">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr x &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == x <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr x) = Fr x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4bf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4bf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr a &lt;&gt; Fr x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == a <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr a) = Fr a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c0"><span class="nb">unfold</span> compose; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Fr a &lt;&gt; Fr x</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == a <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr a) = Fr a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">compare</span> values x <span class="kn">and</span> a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
  | Eq =&gt; Fr x
  | Lt =&gt; Bd n
  | Gt =&gt; Bd (n - <span class="mi">1</span>)
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr y =&gt; <span class="kr">if</span> x == y <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr y
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Lt =&gt; Bd n
    | _ =&gt; Bd (S n)
    <span class="kr">end</span>
<span class="kr">end</span> = Bd n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c2"><span class="nb">unfold</span> compose; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
  | Eq =&gt; Fr x
  | Lt =&gt; Bd n
  | Gt =&gt; Bd (n - <span class="mi">1</span>)
  <span class="kr">end</span>
<span class="kr">with</span>
| Fr y =&gt; <span class="kr">if</span> x == y <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr y
| Bd n =&gt;
    <span class="kr">match</span> Nat.<span class="nb">compare</span> n (countk k w) <span class="kr">with</span>
    | Lt =&gt; Bd n
    | _ =&gt; Bd (S n)
    <span class="kr">end</span>
<span class="kr">end</span> = Bd n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c3"><span class="nb">compare</span> naturals n <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd (countk k w) &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == x <span class="kr">then</span> Bd (countk k w) <span class="kr">else</span> Fr x) =
Bd (countk k w)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk4c4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4c4"><hr></label><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> (n - <span class="mi">1</span>) (countk k w) <span class="kr">with</span>
| Lt =&gt; Bd (n - <span class="mi">1</span>)
| _ =&gt; Bd (S (n - <span class="mi">1</span>))
<span class="kr">end</span> = Bd n</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c5"><span class="nb">compare</span> values x <span class="kn">and</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>Bd n &lt;&gt; Fr x</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> Nat.<span class="nb">compare</span> (n - <span class="mi">1</span>) (countk k w) <span class="kr">with</span>
| Lt =&gt; Bd (n - <span class="mi">1</span>)
| _ =&gt; Bd (S (n - <span class="mi">1</span>))
<span class="kr">end</span> = Bd n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">compare</span> naturals (n - <span class="mi">1</span>) <span class="kn">and</span> (countk k w).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c6"><span class="kn">Theorem</span> <span class="nf">close_open</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">t</span>,
      ~ x ‚àà free U k t -&gt;
      &#39;[k | x] (t &#39;(k | mret T k (Fr x))) = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">t</span>,
~ x ‚àà free U k t -&gt;
&#39;[ k | x] (t &#39;( k | mret T k (Fr x))) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">x</span> <span class="nv">t</span>,
~ x ‚àà free U k t -&gt;
&#39;[ k | x] (t &#39;( k | mret T k (Fr x))) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c8">introv <span class="kp">fresh</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">&#39;[ k | x] (t &#39;( k | mret T k (Fr x))) = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c9">compose near t on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(close U k x ‚àò open U k (mret T k (Fr x))) t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ca" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ca"><span class="nb">rewrite</span> open_by_LN_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(close U k x ‚àò kmapd U k (open_LN_loc k (Fr x))) t = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4cb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4cb"><span class="nb">unfold</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(kmapd U k (close_loc k x)
 ‚àò kmapd U k (open_LN_loc k (Fr x))) t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4cc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4cc"><span class="nb">rewrite</span> (kmapd_kmapd U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">kmapd U k
  (<span class="kr">fun</span> &#39;(w, a) =&gt;
   close_loc k x (w, open_LN_loc k (Fr x) (w, a))) t =
t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4cd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4cd"><span class="nb">apply</span> (kmapd_respectful_id).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w</span> (<span class="nv">a</span> : LN),
(w, k, a) ‚ààmd t -&gt;
close_loc k x (w, open_LN_loc k (Fr x) (w, a)) = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ce" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ce"><span class="nb">intros</span> w l lin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">close_loc k x (w, open_LN_loc k (Fr x) (w, l)) = l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4cf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4cf"><span class="nb">assert</span> (l &lt;&gt; Fr x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l &lt;&gt; Fr x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk4d0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4d0"><hr></label><div class="goal-conclusion">close_loc k x (w, open_LN_loc k (Fr x) (w, l)) = l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d1">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l &lt;&gt; Fr x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d2"><span class="nb">rewrite</span> neq_symmetry.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d3"><span class="nb">apply</span> (inmd_implies_in) <span class="kr">in</span> lin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Fr x &lt;&gt; l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d4"><span class="nb">eapply</span> (ninf_in_neq U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ x ‚àà free U <span class="nl">?k</span> <span class="nl">?t</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk4d5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4d5"><hr></label><div class="goal-conclusion">(<span class="nl">?k</span>, l) ‚ààm <span class="nl">?t</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d6"><span class="bp">eassumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(k, l) ‚ààm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(k, l) ‚ààm t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d7">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>fresh</var><span class="hyp-type"><b>: </b><span>~ x ‚àà free U k t</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>lin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; Fr x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">close_loc k x (w, open_LN_loc k (Fr x) (w, l)) = l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> close_open_local.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Opening and local closure *)</span>
  <span class="sd">(**************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d8"><span class="kn">Lemma</span> <span class="nf">open_lc_gap_eq_1</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> <span class="nv">u</span>,
      LC (T k) k u -&gt;
      LCn U k n t -&gt;
      LCn U k (n - <span class="mi">1</span>) (t &#39;(k | u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
LC (T k) k u -&gt;
LCn U k n t -&gt; LCn U k (n - <span class="mi">1</span>) (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
LC (T k) k u -&gt;
LCn U k n t -&gt; LCn U k (n - <span class="mi">1</span>) (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4da" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4da"><span class="nb">unfold</span> LCn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
LC (T k) k u -&gt;
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)) -&gt;
<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t &#39;( k | u) -&gt; lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4db" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4db">introv lcu lct Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t &#39;( k | u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4dc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4dc"><span class="nb">rewrite</span> (inmd_open_iff_eq U) <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, k, l1) ‚ààmd t /\
  (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
  w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4dd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4dd"><span class="nb">destruct</span> Hin <span class="kr">as</span> [w1 [w2 [l1 [h1 [h2 h3]]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, l1) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc k u (w1, l1)</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4de" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4de"><span class="nb">destruct</span> l1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr a) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc k u (w1, Fr a)</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk4df" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc k u (w1, Bd n0)</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4df"><hr></label><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr a) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc k u (w1, Fr a)</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e1"><span class="nb">cbn</span> <span class="kr">in</span> h2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr a) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd mret T k (Fr a)</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e2"><span class="nb">rewrite</span> inmd_mret_eq_iff <span class="kr">in</span> h2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr a) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>w2 = ∆µ /\ Fr a = l</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e3"><span class="nb">destruct</span> h2; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w1 ‚óè ∆µ, Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e4"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">trivial</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc k u (w1, Bd n0)</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e6"><span class="nb">specialize</span> (lct _ _ h1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc k u (w1, Bd n0)</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e7"><span class="nb">cbn</span> <span class="kr">in</span> h2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l)
‚ààmd <span class="kr">match</span> Nat.<span class="nb">compare</span> n0 (countk k w1) <span class="kr">with</span>
    | Eq =&gt; u
    | Lt =&gt; mret T k (Bd n0)
    | Gt =&gt; mret T k (Bd (n0 - <span class="mi">1</span>))
    <span class="kr">end</span></span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e8"><span class="nb">compare</span> naturals n0 <span class="kn">and</span> (countk k w1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd mret T k (Bd n0)</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk4e9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd (countk k w1))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd (countk k w1)) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w1) 
  (countk k w1) = Eq</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4e9"><hr></label><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w1 ‚óè w2, l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk4ea" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd mret T k (Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk4ea"><hr></label><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4eb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4eb">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd mret T k (Bd n0)</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ec" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ec"><span class="nb">rewrite</span> inmd_mret_eq_iff <span class="kr">in</span> h2; <span class="nb">destruct</span> h2; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w1 ‚óè ∆µ, Bd n0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ed" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ed"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 &lt; countk k (w1 ‚óè ∆µ) + (n - <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ee" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ee">unfold_monoid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 &lt; countk k (w1 ++ []) + (n - <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ef" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ef">List.simpl_list.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 &lt; countk k w1 + (n - <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd (countk k w1))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd (countk k w1)) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w1) 
  (countk k w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w1 ‚óè w2, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f1"><span class="nb">specialize</span> (lcu w2 l h2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w2, l)</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd (countk k w1))</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd (countk k w1)) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w1) 
  (countk k w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w1 ‚óè w2, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f2"><span class="nb">unfold</span> lc_loc <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> l <span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n =&gt; n &lt; countk k w2 + <span class="mi">0</span>
<span class="kr">end</span></span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>countk k w1 &lt; countk k w1 + n</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd (countk k w1)) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w1) 
  (countk k w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> l <span class="kr">with</span>
| Fr _ =&gt; <span class="kt">True</span>
| Bd n0 =&gt; n0 &lt; countk k (w1 ‚óè w2) + (n - <span class="mi">1</span>)
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f3"><span class="nb">destruct</span> l; [<span class="nb">trivial</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w2 + <span class="mi">0</span></span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>countk k w1 &lt; countk k w1 + n</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd (countk k w1)) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n0) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w1) 
  (countk k w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 &lt; countk k (w1 ‚óè w2) + (n - <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f4">unfold_monoid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w2 + <span class="mi">0</span></span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>countk k w1 &lt; countk k w1 + n</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd (countk k w1)) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n0) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w1) 
  (countk k w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 &lt; countk k (w1 ++ w2) + (n - <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f5"><span class="nb">rewrite</span> countk_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w2 + <span class="mi">0</span></span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>countk k w1 &lt; countk k w1 + n</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd (countk k w1)) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n0) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w1) 
  (countk k w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 &lt; countk k w1 + countk k w2 + (n - <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f6" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f6">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd mret T k (Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f7"><span class="nb">rewrite</span> inmd_mret_eq_iff <span class="kr">in</span> h2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>w2 = ∆µ /\ Bd (n0 - <span class="mi">1</span>) = l</span></span></span><br><span><var>h3</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f8"><span class="nb">destruct</span> h2; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>lc_loc k n (w1, Bd n0)</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w1 ‚óè ∆µ, Bd (n0 - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f9"><span class="nb">unfold</span> lc_loc <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w1 + n</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 - <span class="mi">1</span> &lt; countk k (w1 ‚óè ∆µ) + (n - <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4fa" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4fa">unfold_monoid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w1 + n</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 - <span class="mi">1</span> &lt; countk k (w1 ++ []) + (n - <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4fb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4fb">List.simpl_list.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w1 + n</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>(w1, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 - <span class="mi">1</span> &lt; countk k w1 + (n - <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4fc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4fc"><span class="kn">Lemma</span> <span class="nf">open_lc_gap_eq_2</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> <span class="nv">u</span>,
      n &gt; <span class="mi">0</span> -&gt;
      LC (T k) k u -&gt;
      LCn U k (n - <span class="mi">1</span>) (t &#39;(k | u)) -&gt;
      LCn U k n t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
n &gt; <span class="mi">0</span> -&gt;
LC (T k) k u -&gt;
LCn U k (n - <span class="mi">1</span>) (t &#39;( k | u)) -&gt; LCn U k n t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4fd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4fd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
n &gt; <span class="mi">0</span> -&gt;
LC (T k) k u -&gt;
LCn U k (n - <span class="mi">1</span>) (t &#39;( k | u)) -&gt; LCn U k n t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4fe" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4fe"><span class="nb">unfold</span> LCn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
n &gt; <span class="mi">0</span> -&gt;
LC (T k) k u -&gt;
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t &#39;( k | u) -&gt; lc_loc k (n - <span class="mi">1</span>) (w, l)) -&gt;
<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4ff" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4ff">introv ngt lcu lct Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t &#39;( k | u) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk500" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk500"><span class="nb">setoid_rewrite</span> (inmd_open_iff_eq U) <span class="kr">in</span> lct.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk501" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk501"><span class="nb">destruct</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk502" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br></div><label class="goal-separator" for="ln-v-chk502"><hr></label><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk503" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk503">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk504" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk504"><span class="nb">cbv</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">trivial</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk505" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk505">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk506" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk506"><span class="nb">compare</span> naturals n0 <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk507" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd (countk k w)) ‚ààmd t</span></span></span><br></div><label class="goal-separator" for="ln-v-chk507"><hr></label><div class="goal-conclusion">lc_loc k n (w, Bd (countk k w))</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk508" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk508"><hr></label><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk509" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk509">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk50a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk50a"><span class="nb">specialize</span> (lct w (Bd n0)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk50b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk50b"><span class="nb">lapply</span> lct.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, Bd n0) -&gt; lc_loc k n (w, Bd n0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk50c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk50c"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, k, l1) ‚ààmd t /\
  (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
  w = w1 ‚óè w2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk50d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk50d">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, Bd n0) -&gt; lc_loc k n (w, Bd n0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">cbn</span>; unfold_monoid; <span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk50e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk50e">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, k, l1) ‚ààmd t /\
  (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
  w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk50f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk50f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, k, l1) ‚ààmd t /\
  (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
  w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk510" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk510"><span class="kr">exists</span> <span class="nv">w</span> (<span class="nv">∆µ</span> : list K) (<span class="nv">Bd</span> <span class="nv">n0</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, Bd n0) ‚ààmd t /\
(∆µ, k, Bd n0) ‚ààmd open_loc k u (w, Bd n0) /\ w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk511" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk511"><span class="nb">split</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(∆µ, k, Bd n0) ‚ààmd open_loc k u (w, Bd n0) /\ w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk512" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk512"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(∆µ, k, Bd n0)
‚ààmd <span class="kr">match</span> Nat.<span class="nb">compare</span> n0 (countk k w) <span class="kr">with</span>
    | Eq =&gt; u
    | Lt =&gt; mret T k (Bd n0)
    | Gt =&gt; mret T k (Bd (n0 - <span class="mi">1</span>))
    <span class="kr">end</span> /\ w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk513" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk513"><span class="nb">compare</span> naturals n0 <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>Lt = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br><span><var>ineqrw0</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp0</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(∆µ, k, Bd n0) ‚ààmd mret T k (Bd n0) /\ w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk514" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk514"><span class="nb">rewrite</span> inmd_mret_eq_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd n0) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>Lt = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br><span><var>ineqrw0</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Lt</span></span></span><br><span><var>ineqp0</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(∆µ = ∆µ /\ Bd n0 = Bd n0) /\ w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> simpl_monoid.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk515" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk515">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd (countk k w)) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Bd (countk k w))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk516" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk516"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk k w) 
  (countk k w) = Eq</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd (countk k w)) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">countk k w &lt; countk k w + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">unfold_monoid; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk517" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk517">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk518" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk518"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc k u (w1, l1) /\
   w = w1 ‚óè w2) -&gt; 
lc_loc k (n - <span class="mi">1</span>) (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 &lt; countk k w + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk519" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk519"><span class="nb">specialize</span> (lct w (Bd (n0 - <span class="mi">1</span>))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n0 &lt; countk k w + n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk51a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk51a"><span class="nb">lapply</span> lct.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>)) -&gt;
n0 &lt; countk k w + n</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk51b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><label class="goal-separator" for="ln-v-chk51b"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, k, l1) ‚ààmd t /\
  (w2, k, Bd (n0 - <span class="mi">1</span>)) ‚ààmd open_loc k u (w1, l1) /\
  w = w1 ‚óè w2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk51c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk51c">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>)) -&gt;
n0 &lt; countk k w + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">cbn</span>; unfold_monoid; <span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk51d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk51d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, k, l1) ‚ààmd t /\
  (w2, k, Bd (n0 - <span class="mi">1</span>)) ‚ààmd open_loc k u (w1, l1) /\
  w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk51e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk51e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, k, l1) ‚ààmd t /\
  (w2, k, Bd (n0 - <span class="mi">1</span>)) ‚ààmd open_loc k u (w1, l1) /\
  w = w1 ‚óè w2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk51f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk51f"><span class="kr">exists</span> <span class="nv">w</span> (<span class="nv">∆µ</span> : list K) (<span class="nv">Bd</span> <span class="nv">n0</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, Bd n0) ‚ààmd t /\
(∆µ, k, Bd (n0 - <span class="mi">1</span>)) ‚ààmd open_loc k u (w, Bd n0) /\
w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk520" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk520"><span class="nb">split</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(∆µ, k, Bd (n0 - <span class="mi">1</span>)) ‚ààmd open_loc k u (w, Bd n0) /\
w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk521" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk521"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(∆µ, k, Bd (n0 - <span class="mi">1</span>))
‚ààmd <span class="kr">match</span> Nat.<span class="nb">compare</span> n0 (countk k w) <span class="kr">with</span>
    | Eq =&gt; u
    | Lt =&gt; mret T k (Bd n0)
    | Gt =&gt; mret T k (Bd (n0 - <span class="mi">1</span>))
    <span class="kr">end</span> /\ w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk522" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk522"><span class="nb">compare</span> naturals n0 <span class="kn">and</span> (countk k w).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>Gt = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br><span><var>ineqrw0</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp0</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(∆µ, k, Bd (n0 - <span class="mi">1</span>)) ‚ààmd mret T k (Bd (n0 - <span class="mi">1</span>)) /\
w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk523" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk523"><span class="nb">rewrite</span> inmd_mret_eq_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>ngt</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, k, l1) ‚ààmd t /\
   (w2, k, Bd (n0 - <span class="mi">1</span>))
   ‚ààmd open_loc k u (w1, l1) /\ 
   w = w1 ‚óè w2) -&gt;
lc_loc k (n - <span class="mi">1</span>) (w, Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>Gt = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br><span><var>ineqrw0</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk k w) = Gt</span></span></span><br><span><var>ineqp0</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk k w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(∆µ = ∆µ /\ Bd (n0 - <span class="mi">1</span>) = Bd (n0 - <span class="mi">1</span>)) /\ w = w ‚óè ∆µ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> simpl_monoid.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk524" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk524"><span class="kn">Theorem</span> <span class="nf">open_lc_gap_eq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> <span class="nv">u</span>,
      n &gt; <span class="mi">0</span> -&gt;
      LC (T k) k u -&gt;
      LCn U k n t &lt;-&gt;
      LCn U k (n - <span class="mi">1</span>) (t &#39;(k | u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
n &gt; <span class="mi">0</span> -&gt;
LC (T k) k u -&gt;
LCn U k n t &lt;-&gt; LCn U k (n - <span class="mi">1</span>) (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk525" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk525"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
n &gt; <span class="mi">0</span> -&gt;
LC (T k) k u -&gt;
LCn U k n t &lt;-&gt; LCn U k (n - <span class="mi">1</span>) (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">intuition</span> (<span class="nb">eauto using</span> open_lc_gap_eq_1, open_lc_gap_eq_2).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk526" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk526"><span class="kn">Corollary</span> <span class="nf">open_lc_gap_eq_var</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> <span class="nv">x</span>,
      n &gt; <span class="mi">0</span> -&gt;
      LCn U k n t &lt;-&gt;
      LCn U k (n - <span class="mi">1</span>) (t &#39;(k | mret T k (Fr x))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> <span class="nv">x</span>,
n &gt; <span class="mi">0</span> -&gt;
LCn U k n t &lt;-&gt;
LCn U k (n - <span class="mi">1</span>) (t &#39;( k | mret T k (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk527" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk527"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">n</span> <span class="nv">t</span> <span class="nv">x</span>,
n &gt; <span class="mi">0</span> -&gt;
LCn U k n t &lt;-&gt;
LCn U k (n - <span class="mi">1</span>) (t &#39;( k | mret T k (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk528" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk528"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k n t &lt;-&gt;
LCn U k (n - <span class="mi">1</span>) (t &#39;( k | mret T k (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk529" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk529"><span class="nb">apply</span> open_lc_gap_eq_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &gt; <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk52a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="ln-v-chk52a"><hr></label><div class="goal-conclusion">LC (T k) k (mret T k (Fr x))</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk52b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk52b"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC (T k) k (mret T k (Fr x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk52c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk52c"><span class="nb">intros</span> w l hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd mret T k (Fr x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk52d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk52d"><span class="nb">rewrite</span> inmd_mret_eq_iff <span class="kr">in</span> hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>w = ∆µ /\ Fr x = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk52e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk52e"><span class="nb">destruct</span> hin; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k <span class="mi">0</span> (∆µ, Fr x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk52f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk52f"><span class="nb">cbv</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>n &gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">trivial</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk530" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk530"><span class="kn">Corollary</span> <span class="nf">open_lc_gap_eq_iff_1</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">u</span>,
      LC (T k) k u -&gt;
      LCn U k <span class="mi">1</span> t &lt;-&gt;
      LC U k (t &#39;(k | u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
LC (T k) k u -&gt; LCn U k <span class="mi">1</span> t &lt;-&gt; LC U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk531" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk531"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> (<span class="nv">u</span> : T k LN),
LC (T k) k u -&gt; LCn U k <span class="mi">1</span> t &lt;-&gt; LC U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk532" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk532"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k <span class="mi">1</span> t &lt;-&gt; LC U k (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk533" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk533"><span class="nb">unfold</span> LC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k <span class="mi">1</span> t &lt;-&gt; LCn U k <span class="mi">0</span> (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk534" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk534"><span class="nb">change</span> <span class="mi">0</span> <span class="kr">with</span> (<span class="mi">1</span> - <span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k (S (<span class="mi">1</span> - <span class="mi">1</span>)) t &lt;-&gt;
LCn U k (<span class="mi">1</span> - <span class="mi">1</span>) (t &#39;( k | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk535" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk535"><span class="nb">rewrite</span> &lt;- open_lc_gap_eq_iff; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>LC (T k) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k (S (<span class="mi">1</span> - <span class="mi">1</span>)) t &lt;-&gt; LCn U k <span class="mi">1</span> t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk536" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk536"><span class="kn">Corollary</span> <span class="nf">open_lc_gap_eq_var_1</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
      LCn U k <span class="mi">1</span> t &lt;-&gt;
      LC U k (t &#39;(k | mret T k (Fr x))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
LCn U k <span class="mi">1</span> t &lt;-&gt; LC U k (t &#39;( k | mret T k (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk537" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk537"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">t</span> <span class="nv">x</span>,
LCn U k <span class="mi">1</span> t &lt;-&gt; LC U k (t &#39;( k | mret T k (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk538" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk538"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k <span class="mi">1</span> t &lt;-&gt; LC U k (t &#39;( k | mret T k (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk539" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk539"><span class="nb">unfold</span> LC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k <span class="mi">1</span> t &lt;-&gt; LCn U k <span class="mi">0</span> (t &#39;( k | mret T k (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk53a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk53a"><span class="nb">change</span> <span class="mi">0</span> <span class="kr">with</span> (<span class="mi">1</span> - <span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k (S (<span class="mi">1</span> - <span class="mi">1</span>)) t &lt;-&gt;
LCn U k (<span class="mi">1</span> - <span class="mi">1</span>) (t &#39;( k | mret T k (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk53b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk53b"><span class="nb">rewrite</span> &lt;- open_lc_gap_eq_var; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k (S (<span class="mi">1</span> - <span class="mi">1</span>)) t &lt;-&gt; LCn U k <span class="mi">1</span> t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk53c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk53c"><span class="kn">Lemma</span> <span class="nf">open_lc_gap_neq_1</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> <span class="nv">u</span>,
      k &lt;&gt; j -&gt;
      LC (T j) k u -&gt;
      LCn U k n t -&gt;
      LCn U k n (t &#39;(j | u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T j LN),
k &lt;&gt; j -&gt;
LC (T j) k u -&gt; LCn U k n t -&gt; LCn U k n (t &#39;( j | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk53d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk53d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T j LN),
k &lt;&gt; j -&gt;
LC (T j) k u -&gt; LCn U k n t -&gt; LCn U k n (t &#39;( j | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk53e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk53e"><span class="nb">unfold</span> LCn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T j LN),
k &lt;&gt; j -&gt;
LC (T j) k u -&gt;
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)) -&gt;
<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t &#39;( j | u) -&gt; lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk53f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk53f">introv neq lcu lct Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t &#39;( j | u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk540" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk540"><span class="nb">rewrite</span> (inmd_open_neq_iff U) <span class="kr">in</span> Hin; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t \/
(<span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
   (w1, j, l1) ‚ààmd t /\
   (w2, k, l) ‚ààmd open_loc j u (w1, l1) /\
   w = w1 ‚óè w2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk541" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk541"><span class="nb">destruct</span> Hin <span class="kr">as</span> [Hin | Hin].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk542" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (w2, k, l) ‚ààmd open_loc j u (w1, l1) /\
  w = w1 ‚óè w2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk542"><hr></label><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk543" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk543">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk544" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk544">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">w1</span> <span class="nv">w2</span> <span class="nv">l1</span>,
  (w1, j, l1) ‚ààmd t /\
  (w2, k, l) ‚ààmd open_loc j u (w1, l1) /\
  w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk545" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk545"><span class="nb">destruct</span> Hin <span class="kr">as</span> [w1 [w2 [l1 [in_t [in_open ?]]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, l1) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc j u (w1, l1)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>w = w1 ‚óè w2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk546" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk546"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, l1) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc j u (w1, l1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk547" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk547"><span class="nb">destruct</span> l1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Fr a) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc j u (w1, Fr a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk548" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc j u (w1, Bd n0)</span></span></span><br></div><label class="goal-separator" for="ln-v-chk548"><hr></label><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk549" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk549">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Fr a) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc j u (w1, Fr a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk54a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk54a"><span class="nb">cbn</span> <span class="kr">in</span> in_open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Fr a) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd mret T j (Fr a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk54b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk54b"><span class="nb">rewrite</span> inmd_mret_iff <span class="kr">in</span> in_open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Fr a) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>w2 = ∆µ /\ j = k /\ Fr a = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk54c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk54c">false.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Fr a) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>w2 = ∆µ /\ j = k /\ Fr a = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk54d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk54d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, l) ‚ààmd open_loc j u (w1, Bd n0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk54e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk54e"><span class="nb">destruct</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Fr a) ‚ààmd open_loc j u (w1, Bd n0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk54f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd open_loc j u (w1, Bd n0)</span></span></span><br></div><label class="goal-separator" for="ln-v-chk54f"><hr></label><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, Bd n1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk550" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk550">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Fr a) ‚ààmd open_loc j u (w1, Bd n0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk551" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk551"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Fr a) ‚ààmd open_loc j u (w1, Bd n0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">trivial</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk552" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk552">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd open_loc j u (w1, Bd n0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, Bd n1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk553" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk553">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd open_loc j u (w1, Bd n0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w1 ‚óè w2, Bd n1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk554" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk554"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd open_loc j u (w1, Bd n0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk555" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk555"><span class="nb">cbn</span> <span class="kr">in</span> in_open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1)
‚ààmd <span class="kr">match</span> Nat.<span class="nb">compare</span> n0 (countk j w1) <span class="kr">with</span>
    | Eq =&gt; u
    | Lt =&gt; mret T j (Bd n0)
    | Gt =&gt; mret T j (Bd (n0 - <span class="mi">1</span>))
    <span class="kr">end</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk556" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk556"><span class="nb">compare</span> naturals n0 <span class="kn">and</span> (countk j w1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd mret T j (Bd n0)</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk j w1) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk j w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk557" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd (countk j w1)) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk j w1) 
  (countk j w1) = Eq</span></span></span><br></div><label class="goal-separator" for="ln-v-chk557"><hr></label><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk558" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd mret T j (Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk j w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk j w1</span></span></span><br></div><label class="goal-separator" for="ln-v-chk558"><hr></label><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk559" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk559">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd mret T j (Bd n0)</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk j w1) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk j w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk55a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk55a"><span class="nb">rewrite</span> inmd_mret_iff <span class="kr">in</span> in_open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>w2 = ∆µ /\ j = k /\ Bd n0 = Bd n1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk j w1) = Lt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &lt; countk j w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">false; <span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk55b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk55b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd (countk j w1)) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk j w1) 
  (countk j w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk55c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk55c"><span class="nb">specialize</span> (lcu _ _ in_open).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>lc_loc k <span class="mi">0</span> (w2, Bd n1)</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd (countk j w1)) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk j w1) 
  (countk j w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk55d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk55d"><span class="nb">unfold</span> lc_loc <span class="kr">in</span> lcu.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n1 &lt; countk k w2 + <span class="mi">0</span></span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd (countk j w1)) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk j w1) 
  (countk j w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk55e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk55e">unfold_monoid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n1 &lt; countk k w2 + <span class="mi">0</span></span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd (countk j w1)) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk j w1) 
  (countk j w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ++ w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk55f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk55f"><span class="nb">rewrite</span> countk_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>n1 &lt; countk k w2 + <span class="mi">0</span></span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w1</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd (countk j w1)) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd u</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> 
  (countk j w1) 
  (countk j w1) = Eq</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k w1 + countk k w2 + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk560" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk560">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>(w2, k, Bd n1) ‚ààmd mret T j (Bd (n0 - <span class="mi">1</span>))</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk j w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk j w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk561" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk561"><span class="nb">rewrite</span> inmd_mret_iff <span class="kr">in</span> in_open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>w1, w2</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>in_t</var><span class="hyp-type"><b>: </b><span>(w1, j, Bd n0) ‚ààmd t</span></span></span><br><span><var>in_open</var><span class="hyp-type"><b>: </b><span>w2 = ∆µ /\ j = k /\ Bd (n0 - <span class="mi">1</span>) = Bd n1</span></span></span><br><span><var>ineqrw</var><span class="hyp-type"><b>: </b><span>PeanoNat.Nat.<span class="nb">compare</span> n0 (countk j w1) = Gt</span></span></span><br><span><var>ineqp</var><span class="hyp-type"><b>: </b><span>n0 &gt; countk j w1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n1 &lt; countk k (w1 ‚óè w2) + n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">false; <span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk562" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk562"><span class="kn">Lemma</span> <span class="nf">open_lc_gap_neq_2</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> <span class="nv">u</span>,
      k &lt;&gt; j -&gt;
      LC (T j) k u -&gt;
      LCn U k n (t &#39;(j | u)) -&gt;
      LCn U k n t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T j LN),
k &lt;&gt; j -&gt;
LC (T j) k u -&gt; LCn U k n (t &#39;( j | u)) -&gt; LCn U k n t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk563" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk563"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T j LN),
k &lt;&gt; j -&gt;
LC (T j) k u -&gt; LCn U k n (t &#39;( j | u)) -&gt; LCn U k n t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk564" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk564"><span class="nb">unfold</span> LCn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T j LN),
k &lt;&gt; j -&gt;
LC (T j) k u -&gt;
(<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
 (w, k, l) ‚ààmd t &#39;( j | u) -&gt; lc_loc k n (w, l)) -&gt;
<span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>, (w, k, l) ‚ààmd t -&gt; lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk565" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk565">introv neq lcu lct Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t &#39;( j | u) -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LN</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, l) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk566" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk566"><span class="nb">destruct</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t &#39;( j | u) -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Fr a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk567" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t &#39;( j | u) -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br></div><label class="goal-separator" for="ln-v-chk567"><hr></label><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk568" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk568">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t &#39;( j | u) -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Fr a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk569" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk569"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t &#39;( j | u) -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Fr a) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk56a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk56a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd t &#39;( j | u) -&gt; lc_loc k n (w, l)</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk56b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk56b"><span class="nb">specialize</span> (lct w (Bd n0)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t &#39;( j | u) -&gt;
lc_loc k n (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lc_loc k n (w, Bd n0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk56c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk56c"><span class="nb">apply</span> lct.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>neq</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>lcu</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>list K</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>lct</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t &#39;( j | u) -&gt;
lc_loc k n (w, Bd n0)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(w, k, Bd n0) ‚ààmd t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(w, k, Bd n0) ‚ààmd t &#39;( j | u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> (inmd_open_neq_iff U); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk56d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk56d"><span class="kn">Theorem</span> <span class="nf">open_lc_gap_neq_iff</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> <span class="nv">u</span>,
      k &lt;&gt; j -&gt;
      LC (T j) k u -&gt;
      LCn U k n t &lt;-&gt;
      LCn U k n (t &#39;(j | u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T j LN),
k &lt;&gt; j -&gt;
LC (T j) k u -&gt;
LCn U k n t &lt;-&gt; LCn U k n (t &#39;( j | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk56e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk56e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">n</span> <span class="nv">t</span> (<span class="nv">u</span> : T j LN),
k &lt;&gt; j -&gt;
LC (T j) k u -&gt;
LCn U k n t &lt;-&gt; LCn U k n (t &#39;( j | u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk56f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk56f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T j LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC (T j) k u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k n t &lt;-&gt; LCn U k n (t &#39;( j | u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span> (<span class="nb">eauto using</span> open_lc_gap_neq_1, open_lc_gap_neq_2).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk570" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk570"><span class="kn">Corollary</span> <span class="nf">open_lc_gap_neq_var</span> : <span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">x</span>,
      k &lt;&gt; j -&gt;
      LC U k t &lt;-&gt;
      LC U k (t &#39;(j | mret T j (Fr x))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
LC U k t &lt;-&gt; LC U k (t &#39;( j | mret T j (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk571" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk571"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k</span> <span class="nv">j</span> <span class="nv">t</span> <span class="nv">x</span>,
k &lt;&gt; j -&gt;
LC U k t &lt;-&gt; LC U k (t &#39;( j | mret T j (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk572" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk572"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC U k t &lt;-&gt; LC U k (t &#39;( j | mret T j (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk573" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk573"><span class="nb">unfold</span> LC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k <span class="mi">0</span> t &lt;-&gt; LCn U k <span class="mi">0</span> (t &#39;( j | mret T j (Fr x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk574" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk574"><span class="nb">rewrite</span> open_lc_gap_neq_iff; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LCn U k <span class="mi">0</span> (t &#39;( j | <span class="nl">?Goal0</span>)) &lt;-&gt;
LCn U k <span class="mi">0</span> (t &#39;( j | mret T j (Fr x)))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk575" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><label class="goal-separator" for="ln-v-chk575"><hr></label><div class="goal-conclusion">LC (T j) k <span class="nl">?Goal0</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk576" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk576"><span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC (T j) k (mret T j (Fr x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk577" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk577"><span class="nb">unfold</span> LC, LCn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
(w, k, l) ‚ààmd mret T j (Fr x) -&gt; lc_loc k <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk578" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk578"><span class="nb">setoid_rewrite</span> inmd_mret_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>U</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T U</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span>, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T U</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k, j</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>U LN</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>k &lt;&gt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">w</span> <span class="nv">l</span>,
w = ∆µ /\ j = k /\ Fr x = l -&gt; lc_loc k <span class="mi">0</span> (w, l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">open_metatheory</span>.</span></span></pre>
</div>
</div></body>
</html>
