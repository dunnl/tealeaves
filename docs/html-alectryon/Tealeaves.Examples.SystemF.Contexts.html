<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.21.2: https://docutils.sourceforge.io/" />
<title>Contexts.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.16.0+0.16.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves <span class="kn">Require Import</span>
  Functors.List
  Backends.Multisorted.LN
  Examples.SystemF.Syntax
  Simplification.Tests.SystemF_LN.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span>
  Sorting.Permutation.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Types</span> (<span class="nv">x</span> : atom).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> AtomSet.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> ContainerFunctor.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> LN.AssocList.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> List.ListNotations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Create HintDb</span> sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Generalizable Variables</span> <span class="nf">F</span> G A B C œï W T.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Open Scope</span> set_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Misc *)</span>

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk0"><span class="kn">Lemma</span> <span class="nf">rw_subst_type_var_neq</span> {<span class="nv">x</span> <span class="nv">y</span>} <span class="nv">œÑ&#39;</span>:
  x &lt;&gt; y -&gt;
  <span class="nb">subst</span> typ ktyp x œÑ&#39; (ty_v (Fr y)) = ty_v (Fr y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ'</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &lt;&gt; y -&gt;
<span class="nb">subst</span> typ ktyp x œÑ&#39; (ty_v (Fr y)) = ty_v (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ'</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &lt;&gt; y -&gt;
<span class="nb">subst</span> typ ktyp x œÑ&#39; (ty_v (Fr y)) = ty_v (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ'</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">subst</span> typ ktyp x œÑ&#39; (ty_v (Fr y)) = ty_v (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk3">simplify_subst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ'</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btg ktyp (subst_loc ktyp x œÑ&#39;) ktyp (Fr y) =
ty_v (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk4"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ'</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> x == y <span class="kr">then</span> œÑ&#39; <span class="kr">else</span> ty_v (Fr y)) = ty_v (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">destruct_eq_args x y.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk5"><span class="kn">Lemma</span> <span class="nf">rw_subst_term_var_neq</span> {<span class="nv">x</span> <span class="nv">y</span>} {<span class="nv">œÑ</span>} :
  x &lt;&gt; y -&gt;
  <span class="nb">subst</span> term ktyp x œÑ (tm_var (Fr y)) = tm_var (Fr y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &lt;&gt; y -&gt;
<span class="nb">subst</span> term ktyp x œÑ (tm_var (Fr y)) = tm_var (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &lt;&gt; y -&gt;
<span class="nb">subst</span> term ktyp x œÑ (tm_var (Fr y)) = tm_var (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk7"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">subst</span> term ktyp x œÑ (tm_var (Fr y)) = tm_var (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk8">simplify_subst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">btg ktyp (subst_loc ktyp x œÑ) ktrm (Fr y) =
tm_var (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk9"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>SystemF ktyp LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tm_var (Fr y) = tm_var (Fr y)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">destruct_eq_args x y.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka"><span class="kn">Lemma</span> <span class="nf">FV_trm_type_empty</span>: <span class="kr">forall</span> <span class="nv">œÑ</span>,
    FV typ ktrm œÑ [=] ‚àÖ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, FV typ ktrm œÑ [=] ‚àÖ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, FV typ ktrm œÑ [=] ‚àÖ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV typ ktrm œÑ [=] ‚àÖ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> œÑ; simplify_FV; fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd"><span class="kn">Lemma</span> <span class="nf">subst_in_type_id</span>: <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">u</span> <span class="nv">œÑ</span>,
    <span class="nb">subst</span> typ ktrm x u œÑ = œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">u</span> : SystemF ktrm LN) (<span class="nv">œÑ</span> : typ LN),
<span class="nb">subst</span> typ ktrm x u œÑ = œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">u</span> : SystemF ktrm LN) (<span class="nv">œÑ</span> : typ LN),
<span class="nb">subst</span> typ ktrm x u œÑ = œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>SystemF ktrm LN</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">subst</span> typ ktrm x u œÑ = œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk10"><span class="nb">eapply</span> (subst_fresh_set typ).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>SystemF ktrm LN</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `notin` FV typ ktrm œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk11"><span class="nb">rewrite</span> FV_trm_type_empty.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>SystemF ktrm LN</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `notin` ‚àÖ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk12"><span class="kn">Lemma</span> <span class="nf">LC_typ_trm</span>: <span class="kr">forall</span> <span class="nv">œÑ</span>,
    LC typ ktrm œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, LC typ ktrm œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk13"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, LC typ ktrm œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk14"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC typ ktrm œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> œÑ; <span class="bp">now</span> simplify_LC.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Tactical support *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">burst</span> :=
  <span class="nb">rewrite_strat</span>
    outermost
    (choice (hints tea_rw_dom)
            (choice (hints tea_rw_range)
                    (choice (hints tea_rw_disj)
                            (choice (hints tea_rw_uniq)
                                    (hints tea_list))))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Tactic Notation</span> <span class="s2">&quot;burst&quot;</span> <span class="s2">&quot;in&quot;</span> hyp(H) :=
  <span class="nb">rewrite_strat</span>
    outermost
    (choice (hints tea_rw_dom)
            (choice (hints tea_rw_range)
                    (choice (hints tea_rw_disj)
                            (choice (hints tea_rw_uniq)
                                    (hints tea_list))))) <span class="kr">in</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Tactic Notation</span> <span class="s2">&quot;bursts&quot;</span> :=
  <span class="kp">repeat</span> <span class="kr">match goal with</span>
         | H : _ |- _ =&gt; burst <span class="kr">in</span> H
         <span class="kr">end</span>; <span class="kp">repeat</span> burst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Structural lemmas for &lt;&lt;scoped&gt;&gt; *)</span>
<span class="sd">(** These lemmas are actually independent of System F. They could be</span>
<span class="sd">    incorporated into the locally nameless backend. *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">scope_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">S</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
    `{MultiDecoratedTraversablePreModule (list K) T S (mn_op := Monoid_op_list) (mn_unit := Monoid_unit_list)}
    `{! MultiDecoratedTraversableMonad (list K) T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** Permutation *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk15"><span class="kn">Lemma</span> <span class="nf">scoped_perm</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
      Permutation Œ≥1 Œ≥2 -&gt;
      scoped S k t (domset Œ≥1) -&gt;
      scoped S k t (domset Œ≥2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
Permutation Œ≥1 Œ≥2 -&gt;
scoped S k t (domset Œ≥1) -&gt; scoped S k t (domset Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk16"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
Permutation Œ≥1 Œ≥2 -&gt;
scoped S k t (domset Œ≥1) -&gt; scoped S k t (domset Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk17">introv Hperm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œ≥1 Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset Œ≥1) -&gt; scoped S k t (domset Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk18"><span class="nb">unfold</span> scoped.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œ≥1 Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t ‚äÜ domset Œ≥1 -&gt; FV S k t ‚äÜ domset Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> (perm_domset); <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk19"><span class="kn">Theorem</span> <span class="nf">scoped_perm_iff</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
      Permutation Œ≥1 Œ≥2 -&gt;
      scoped S k t (domset Œ≥1) &lt;-&gt;
      scoped S k t (domset Œ≥2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
Permutation Œ≥1 Œ≥2 -&gt;
scoped S k t (domset Œ≥1) &lt;-&gt; scoped S k t (domset Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk1a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
Permutation Œ≥1 Œ≥2 -&gt;
scoped S k t (domset Œ≥1) &lt;-&gt; scoped S k t (domset Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk1b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Permutation Œ≥1 Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset Œ≥1) &lt;-&gt; scoped S k t (domset Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk1c"><span class="nb">assert</span> (Permutation Œ≥2 Œ≥1) <span class="bp">by</span> <span class="bp">now</span> <span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Permutation Œ≥1 Œ≥2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Permutation Œ≥2 Œ≥1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset Œ≥1) &lt;-&gt; scoped S k t (domset Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">eauto using</span> scoped_perm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk1d"><span class="kn">Corollary</span> <span class="nf">scoped_perm_comm</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
      scoped S k t (domset (Œ≥1 ++ Œ≥2)) &lt;-&gt;
      scoped S k t (domset (Œ≥2 ++ Œ≥1)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
scoped S k t (domset (Œ≥1 ++ Œ≥2)) &lt;-&gt;
scoped S k t (domset (Œ≥2 ++ Œ≥1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk1e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
scoped S k t (domset (Œ≥1 ++ Œ≥2)) &lt;-&gt;
scoped S k t (domset (Œ≥2 ++ Œ≥1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk1f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset (Œ≥1 ++ Œ≥2)) &lt;-&gt;
scoped S k t (domset (Œ≥2 ++ Œ≥1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk20"><span class="nb">apply</span> scoped_perm_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Permutation (Œ≥1 ++ Œ≥2) (Œ≥2 ++ Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Permutation_app_comm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** Weakening *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk21"><span class="kn">Lemma</span> <span class="nf">scoped_weak_l</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
      scoped S k t (domset Œ≥1) -&gt;
      scoped S k t (domset (Œ≥1 ++ Œ≥2)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
scoped S k t (domset Œ≥1) -&gt;
scoped S k t (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk22"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
scoped S k t (domset Œ≥1) -&gt;
scoped S k t (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk23"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped S k t (domset Œ≥1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk24"><span class="nb">unfold</span> scoped <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV S k t ‚äÜ domset Œ≥1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t ‚äÜ domset (Œ≥1 ++ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk25"><span class="nb">autorewrite with</span> tea_rw_dom.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV S k t ‚äÜ domset Œ≥1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk26"><span class="kn">Lemma</span> <span class="nf">scoped_weak_mid</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> <span class="nv">Œ≥</span> : alist X),
      scoped S k t (domset (Œ≥1 ++ Œ≥2)) -&gt;
      scoped S k t (domset (Œ≥1 ++ Œ≥ ++ Œ≥2)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> <span class="nv">Œ≥</span> : alist X),
scoped S k t (domset (Œ≥1 ++ Œ≥2)) -&gt;
scoped S k t (domset (Œ≥1 ++ Œ≥ ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk27"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> <span class="nv">Œ≥</span> : alist X),
scoped S k t (domset (Œ≥1 ++ Œ≥2)) -&gt;
scoped S k t (domset (Œ≥1 ++ Œ≥ ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk28"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2, Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped S k t (domset (Œ≥1 ++ Œ≥2))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset (Œ≥1 ++ Œ≥ ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk29"><span class="nb">unfold</span> scoped <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2, Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV S k t ‚äÜ domset (Œ≥1 ++ Œ≥2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t ‚äÜ domset (Œ≥1 ++ Œ≥ ++ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk2a"><span class="nb">autorewrite with</span> tea_rw_dom <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2, Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV S k t ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t ‚äÜ domset Œ≥1 ‚à™ (domset Œ≥ ‚à™ domset Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk2b"><span class="kn">Lemma</span> <span class="nf">scoped_weak_r</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
      scoped S k t (domset Œ≥2) -&gt;
      scoped S k t (domset (Œ≥1 ++ Œ≥2)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
scoped S k t (domset Œ≥2) -&gt;
scoped S k t (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk2c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
scoped S k t (domset Œ≥2) -&gt;
scoped S k t (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk2d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped S k t (domset Œ≥2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk2e"><span class="nb">unfold</span> scoped <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV S k t ‚äÜ domset Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t ‚äÜ domset (Œ≥1 ++ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk2f"><span class="nb">autorewrite with</span> tea_rw_dom.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV S k t ‚äÜ domset Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** Strengthening *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk30"><span class="kn">Lemma</span> <span class="nf">scoped_stren_mid</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X) (<span class="nv">x</span> : atom) (<span class="nv">x&#39;</span> : X),
      scoped S k t (domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2)) -&gt;
      ~ x `<span class="kr">in</span>` (FV S k t) -&gt;
      scoped S k t (domset (Œ≥1 ++ Œ≥2)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X)
  <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t (domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2)) -&gt;
x `notin` FV S k t -&gt; scoped S k t (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk31"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X)
  <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t (domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2)) -&gt;
x `notin` FV S k t -&gt; scoped S k t (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk32">introv hyp hnotin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>scoped S k t (domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2))</span></span></span><br><span><var>hnotin</var><span class="hyp-type"><b>: </b><span>x `notin` FV S k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk33"><span class="nb">unfold</span> scoped <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>FV S k t ‚äÜ domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2)</span></span></span><br><span><var>hnotin</var><span class="hyp-type"><b>: </b><span>x `notin` FV S k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t ‚äÜ domset (Œ≥1 ++ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk34"><span class="nb">autorewrite with</span> tea_rw_dom <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>FV S k t ‚äÜ domset Œ≥1 ‚à™ ({{x}} ‚à™ domset Œ≥2)</span></span></span><br><span><var>hnotin</var><span class="hyp-type"><b>: </b><span>x `notin` FV S k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk35"><span class="kn">Corollary</span> <span class="nf">scoped_stren_l</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥</span> : alist X) (<span class="nv">x</span> : atom) (<span class="nv">x&#39;</span> : X),
      scoped S k t (domset (x ~ x&#39; ++ Œ≥)) -&gt;
      ~ x `<span class="kr">in</span>` (FV S k t) -&gt;
      scoped S k t (domset Œ≥).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥</span> : alist X) 
  <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t (domset (x ~ x&#39; ++ Œ≥)) -&gt;
x `notin` FV S k t -&gt; scoped S k t (domset Œ≥)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk36"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥</span> : alist X) 
  <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t (domset (x ~ x&#39; ++ Œ≥)) -&gt;
x `notin` FV S k t -&gt; scoped S k t (domset Œ≥)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk37">introv Hscope Hnotin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>scoped S k t (domset (x ~ x&#39; ++ Œ≥))</span></span></span><br><span><var>Hnotin</var><span class="hyp-type"><b>: </b><span>x `notin` FV S k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset Œ≥)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk38"><span class="nb">change</span> Œ≥ <span class="kr">with</span> (nil ++ Œ≥).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>scoped S k t (domset (x ~ x&#39; ++ Œ≥))</span></span></span><br><span><var>Hnotin</var><span class="hyp-type"><b>: </b><span>x `notin` FV S k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset ([] ++ Œ≥))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> scoped_stren_mid; [<span class="nb">apply</span> Hscope | <span class="nb">apply</span> Hnotin].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk39"><span class="kn">Corollary</span> <span class="nf">scoped_stren_r</span> : <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥</span> : alist X) (<span class="nv">x</span> : atom) (<span class="nv">x&#39;</span> : X),
      scoped S k t (domset (Œ≥ ++ x ~ x&#39;)) -&gt;
      ~ x `<span class="kr">in</span>` (FV S k t) -&gt;
      scoped S k t (domset Œ≥).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥</span> : alist X) 
  <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t (domset (Œ≥ ++ x ~ x&#39;)) -&gt;
x `notin` FV S k t -&gt; scoped S k t (domset Œ≥)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk3a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t</span> : S LN) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥</span> : alist X) 
  <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t (domset (Œ≥ ++ x ~ x&#39;)) -&gt;
x `notin` FV S k t -&gt; scoped S k t (domset Œ≥)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk3b">introv Hscope Hnotin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>scoped S k t (domset (Œ≥ ++ x ~ x&#39;))</span></span></span><br><span><var>Hnotin</var><span class="hyp-type"><b>: </b><span>x `notin` FV S k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset Œ≥)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk3c"><span class="nb">replace</span> Œ≥ <span class="kr">with</span> (Œ≥ ++ nil) <span class="bp">by</span> (<span class="bp">now</span> List.simpl_list).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>scoped S k t (domset (Œ≥ ++ x ~ x&#39;))</span></span></span><br><span><var>Hnotin</var><span class="hyp-type"><b>: </b><span>x `notin` FV S k t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t (domset (Œ≥ ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> scoped_stren_mid; [<span class="nb">apply</span> Hscope | <span class="nb">apply</span> Hnotin].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** Substitution *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk3d"><span class="kn">Lemma</span> <span class="nf">scoped_sub_eq_mid</span> :
    <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k LN)
      (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X) (<span class="nv">x</span> : atom) (<span class="nv">x&#39;</span> : X),
      scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2)) -&gt;
      scoped (T k) k t2 (domset (Œ≥1 ++ Œ≥2)) -&gt;
      scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset (Œ≥1 ++ Œ≥2)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X) <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2)) -&gt;
scoped (T k) k t2 (domset (Œ≥1 ++ Œ≥2)) -&gt;
scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk3e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X) <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2)) -&gt;
scoped (T k) k t2 (domset (Œ≥1 ++ Œ≥2)) -&gt;
scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk3f">introv hyp1 hyp2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2))</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped (T k) k t2 (domset (Œ≥1 ++ Œ≥2))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset (Œ≥1 ++ Œ≥2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk40"><span class="nb">unfold</span> scoped <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>FV S k t1 ‚äÜ domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2)</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV (T k) k t2 ‚äÜ domset (Œ≥1 ++ Œ≥2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k (<span class="nb">subst</span> S k x t2 t1) ‚äÜ domset (Œ≥1 ++ Œ≥2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk41"><span class="nb">autorewrite with</span> tea_rw_dom <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>FV S k t1 ‚äÜ domset Œ≥1 ‚à™ ({{x}} ‚à™ domset Œ≥2)</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV (T k) k t2 ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k (<span class="nb">subst</span> S k x t2 t1) ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk42"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>FV S k t1 ‚äÜ domset Œ≥1 ‚à™ ({{x}} ‚à™ domset Œ≥2)</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV (T k) k t2 ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k (<span class="nb">subst</span> S k x t2 t1) ‚äÜ <span class="nl">?y</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk43" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>FV S k t1 ‚äÜ domset Œ≥1 ‚à™ ({{x}} ‚à™ domset Œ≥2)</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV (T k) k t2 ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk43"><hr></label><div class="goal-conclusion"><span class="nl">?y</span> ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk44"><span class="nb">apply</span> (FV_subst_upper_eq S).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1, Œ≥2</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>FV S k t1 ‚äÜ domset Œ≥1 ‚à™ ({{x}} ‚à™ domset Œ≥2)</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV (T k) k t2 ‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t1 \\ {{x}} ‚à™ FV (T k) k t2
‚äÜ domset Œ≥1 ‚à™ domset Œ≥2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk45"><span class="kn">Corollary</span> <span class="nf">scoped_sub_eq_r</span> :
    <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k LN)
      (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> : alist X) (<span class="nv">x</span> : atom) (<span class="nv">x&#39;</span> : X),
      scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39;)) -&gt;
      scoped (T k) k t2 (domset Œ≥1) -&gt;
      scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥1</span> : alist X) <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39;)) -&gt;
scoped (T k) k t2 (domset Œ≥1) -&gt;
scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk46"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥1</span> : alist X) <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39;)) -&gt;
scoped (T k) k t2 (domset Œ≥1) -&gt;
scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk47">introv hyp1 hyp2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39;))</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped (T k) k t2 (domset Œ≥1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk48">change_alist (Œ≥1 ++ x ~ x&#39; ++ []) <span class="kr">in</span> hyp1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39; ++ []))</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped (T k) k t2 (domset Œ≥1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk49">change_alist (Œ≥1 ++ []) <span class="kr">in</span> hyp2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39; ++ []))</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped (T k) k t2 (domset (Œ≥1 ++ []))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk4a">change_alist (Œ≥1 ++ []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset (Œ≥1 ++ x ~ x&#39; ++ []))</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped (T k) k t2 (domset (Œ≥1 ++ []))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset (Œ≥1 ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> scoped_sub_eq_mid; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk4b"><span class="kn">Corollary</span> <span class="nf">scoped_sub_eq_l</span> :
    <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k LN)
      (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> : alist X) (<span class="nv">x</span> : atom) (<span class="nv">x&#39;</span> : X),
      scoped S k t1 (domset (x ~ x&#39; ++ Œ≥1)) -&gt;
      scoped (T k) k t2 (domset Œ≥1) -&gt;
      scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥1</span> : alist X) <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t1 (domset (x ~ x&#39; ++ Œ≥1)) -&gt;
scoped (T k) k t2 (domset Œ≥1) -&gt;
scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk4c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥1</span> : alist X) <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped S k t1 (domset (x ~ x&#39; ++ Œ≥1)) -&gt;
scoped (T k) k t2 (domset Œ≥1) -&gt;
scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk4d">introv hyp1 hyp2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset (x ~ x&#39; ++ Œ≥1))</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped (T k) k t2 (domset Œ≥1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk4e">change_alist ([] ++ x ~ x&#39; ++ Œ≥1) <span class="kr">in</span> hyp1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset ([] ++ x ~ x&#39; ++ Œ≥1))</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped (T k) k t2 (domset Œ≥1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk4f">change_alist ([] ++ Œ≥1) <span class="kr">in</span> hyp2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset ([] ++ x ~ x&#39; ++ Œ≥1))</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped (T k) k t2 (domset ([] ++ Œ≥1))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk50">change_alist ([] ++ Œ≥1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset ([] ++ x ~ x&#39; ++ Œ≥1))</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped (T k) k t2 (domset ([] ++ Œ≥1))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k (<span class="nb">subst</span> S k x t2 t1) (domset ([] ++ Œ≥1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> scoped_sub_eq_mid; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk51"><span class="kn">Lemma</span> <span class="nf">scoped_sub_neq</span> :
    <span class="kr">forall</span> (<span class="nv">k1</span> <span class="nv">k2</span> : K) (<span class="nv">neq</span> : k1 &lt;&gt; k2) (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k2 LN)
      (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥</span> : alist X) (<span class="nv">x</span> : atom),
      scoped S k1 t1 (domset Œ≥) -&gt;
      scoped (T k2) k1 t2 (domset Œ≥) -&gt;
      scoped S k1 (<span class="nb">subst</span> S k2 x t2 t1) (domset Œ≥).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> : K,
k1 &lt;&gt; k2 -&gt;
<span class="kr">forall</span> (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k2 LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥</span> : alist X) <span class="nv">x</span>,
scoped S k1 t1 (domset Œ≥) -&gt;
scoped (T k2) k1 t2 (domset Œ≥) -&gt;
scoped S k1 (<span class="nb">subst</span> S k2 x t2 t1) (domset Œ≥)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk52"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> : K,
k1 &lt;&gt; k2 -&gt;
<span class="kr">forall</span> (<span class="nv">t1</span> : S LN) (<span class="nv">t2</span> : T k2 LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥</span> : alist X) <span class="nv">x</span>,
scoped S k1 t1 (domset Œ≥) -&gt;
scoped (T k2) k1 t2 (domset Œ≥) -&gt;
scoped S k1 (<span class="nb">subst</span> S k2 x t2 t1) (domset Œ≥)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk53">introv hyp1 hyp2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>scoped S k1 t1 (domset Œ≥)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped (T k2) k1 t2 (domset Œ≥) -&gt;
scoped S k1 (<span class="nb">subst</span> S k2 x t2 t1) (domset Œ≥)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk54"><span class="nb">unfold</span> scoped <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV S k1 t1 ‚äÜ domset Œ≥</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV (T k2) k1 t2 ‚äÜ domset Œ≥ -&gt;
FV S k1 (<span class="nb">subst</span> S k2 x t2 t1) ‚äÜ domset Œ≥</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk55"><span class="nb">autorewrite with</span> tea_rw_dom <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV S k1 t1 ‚äÜ domset Œ≥</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV (T k2) k1 t2 ‚äÜ domset Œ≥ -&gt;
FV S k1 (<span class="nb">subst</span> S k2 x t2 t1) ‚äÜ domset Œ≥</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk56"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV S k1 t1 ‚äÜ domset Œ≥</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV (T k2) k1 t2 ‚äÜ domset Œ≥</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k1 (<span class="nb">subst</span> S k2 x t2 t1) ‚äÜ <span class="nl">?y</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk57" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV S k1 t1 ‚äÜ domset Œ≥</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV (T k2) k1 t2 ‚äÜ domset Œ≥</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk57"><hr></label><div class="goal-conclusion"><span class="nl">?y</span> ‚äÜ domset Œ≥</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk58"><span class="nb">apply</span> (FV_subst_upper_neq S); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>k1 &lt;&gt; k2</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T k2 LN</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>FV S k1 t1 ‚äÜ domset Œ≥</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>FV (T k2) k1 t2 ‚äÜ domset Œ≥</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k1 t1 ‚à™ FV (T k2) k1 t2 ‚äÜ domset Œ≥</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** Other *)</span>
  <span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk59"><span class="kn">Lemma</span> <span class="nf">scoped_envmap</span> :
    <span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">X</span> <span class="nv">Y</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> : alist X) (<span class="nv">f</span> : X -&gt; Y),
      scoped S k t1 (domset Œ≥1) -&gt;
      scoped S k t1 (domset (envmap f Œ≥1)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">X</span> <span class="nv">Y</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> : alist X)
  (<span class="nv">f</span> : X -&gt; Y),
scoped S k t1 (domset Œ≥1) -&gt;
scoped S k t1 (domset (envmap f Œ≥1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk5a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">k</span> : K) (<span class="nv">t1</span> : S LN) (<span class="nv">X</span> <span class="nv">Y</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> : alist X)
  (<span class="nv">f</span> : X -&gt; Y),
scoped S k t1 (domset Œ≥1) -&gt;
scoped S k t1 (domset (envmap f Œ≥1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk5b">introv Hscope.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>scoped S k t1 (domset Œ≥1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped S k t1 (domset (envmap f Œ≥1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk5c"><span class="nb">unfold</span> scoped <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ix</var><span class="hyp-type"><b>: </b><span>Index</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>K -&gt; <span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>MReturn0</var><span class="hyp-type"><b>: </b><span>MReturn T</span></span></span><br><span><var>MBind0</var><span class="hyp-type"><b>: </b><span>MBind (list K) T S</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : K, MBind (list K) T (T k)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversablePreModule (list K) T S</span></span></span><br><span><var>MultiDecoratedTraversableMonad0</var><span class="hyp-type"><b>: </b><span>MultiDecoratedTraversableMonad
  (list K) T</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>K</span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>S LN</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Œ≥1</var><span class="hyp-type"><b>: </b><span>alist X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>FV S k t1 ‚äÜ domset Œ≥1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV S k t1 ‚äÜ domset (envmap f Œ≥1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> domset_map.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">scope_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Infrastructural lemmas for contexts and well-formedness predicates *)</span>
<span class="sd">(******************************************************************************)</span>

<span class="sd">(** ** General properties of &lt;&lt;ok_kind_ctx&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk5d"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_nil</span> : <span class="kr">forall</span> <span class="nv">x</span>,
    ok_kind_ctx [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">atom -&gt; ok_kind_ctx []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk5e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">atom -&gt; ok_kind_ctx []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk5f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_kind_ctx []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk60"><span class="nb">unfold</span> ok_kind_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> bursts.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk61"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_one</span> : <span class="kr">forall</span> <span class="nv">x</span>,
    ok_kind_ctx (x ~ tt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span>, ok_kind_ctx (x ~ tt)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk62"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span>, ok_kind_ctx (x ~ tt)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk63"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_kind_ctx (x ~ tt)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk64"><span class="nb">unfold</span> ok_kind_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (x ~ tt)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> bursts.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk65"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_app</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span>,
    ok_kind_ctx (Œî1 ++ Œî2) &lt;-&gt;
    ok_kind_ctx Œî1 /\ ok_kind_ctx Œî2 /\ disjoint Œî1 Œî2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2) &lt;-&gt;
ok_kind_ctx Œî1 /\ ok_kind_ctx Œî2 /\ disjoint Œî1 Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk66"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2) &lt;-&gt;
ok_kind_ctx Œî1 /\ ok_kind_ctx Œî2 /\ disjoint Œî1 Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk67"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_kind_ctx (Œî1 ++ Œî2) &lt;-&gt;
ok_kind_ctx Œî1 /\ ok_kind_ctx Œî2 /\ disjoint Œî1 Œî2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk68"><span class="nb">unfold</span> ok_kind_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (Œî1 ++ Œî2) &lt;-&gt;
uniq Œî1 /\ uniq Œî2 /\ disjoint Œî1 Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> bursts.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk69"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_comm</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span>,
    ok_kind_ctx (Œî1 ++ Œî2) &lt;-&gt;
    ok_kind_ctx (Œî1 ++ Œî2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2) &lt;-&gt; ok_kind_ctx (Œî1 ++ Œî2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk6a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2) &lt;-&gt; ok_kind_ctx (Œî1 ++ Œî2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk6b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_kind_ctx (Œî1 ++ Œî2) &lt;-&gt; ok_kind_ctx (Œî1 ++ Œî2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk6c"><span class="nb">unfold</span> ok_kind_ctx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (Œî1 ++ Œî2) &lt;-&gt; uniq (Œî1 ++ Œî2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk6d">bursts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œî1 /\ uniq Œî2 /\ disjoint Œî1 Œî2 &lt;-&gt;
uniq Œî1 /\ uniq Œî2 /\ disjoint Œî1 Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk6e"><span class="nb">rewrite</span> disjoint_sym.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œî1 /\ uniq Œî2 /\ disjoint Œî2 Œî1 &lt;-&gt;
uniq Œî1 /\ uniq Œî2 /\ disjoint Œî2 Œî1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk6f"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_perm1</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span>,
    ok_kind_ctx Œî1 -&gt;
    Permutation Œî1 Œî2 -&gt;
    ok_kind_ctx Œî2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit)),
ok_kind_ctx Œî1 -&gt; Permutation Œî1 Œî2 -&gt; ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk70"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit)),
ok_kind_ctx Œî1 -&gt; Permutation Œî1 Œî2 -&gt; ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk71"><span class="nb">unfold</span> ok_kind_ctx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit)),
uniq Œî1 -&gt; Permutation Œî1 Œî2 -&gt; uniq Œî2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk72"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œî1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œî2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> &lt;- uniq_perm; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk73"><span class="kn">Corollary</span> <span class="nf">ok_kind_ctx_perm</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span>,
    Permutation Œî1 Œî2 -&gt;
    ok_kind_ctx Œî1 &lt;-&gt; ok_kind_ctx Œî2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
Permutation Œî1 Œî2 -&gt; ok_kind_ctx Œî1 &lt;-&gt; ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk74"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
Permutation Œî1 Œî2 -&gt; ok_kind_ctx Œî1 &lt;-&gt; ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk75"><span class="nb">unfold</span> ok_kind_ctx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
Permutation Œî1 Œî2 -&gt; uniq Œî1 &lt;-&gt; uniq Œî2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk76"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œî1 &lt;-&gt; uniq Œî2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> uniq_perm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_kind_ctx_nil : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_kind_ctx_one : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_kind_ctx_perm1 : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Tactical support for &lt;&lt;ok_kind_ctx&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk77"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_app1</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span>,
    ok_kind_ctx Œî1 /\ ok_kind_ctx Œî2 /\ disjoint Œî1 Œî2 -&gt;
    ok_kind_ctx (Œî1 ++ Œî2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : kind_ctx,
ok_kind_ctx Œî1 /\ ok_kind_ctx Œî2 /\ disjoint Œî1 Œî2 -&gt;
ok_kind_ctx (Œî1 ++ Œî2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk78"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : kind_ctx,
ok_kind_ctx Œî1 /\ ok_kind_ctx Œî2 /\ disjoint Œî1 Œî2 -&gt;
ok_kind_ctx (Œî1 ++ Œî2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk79"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_kind_ctx Œî1 /\ ok_kind_ctx Œî2 /\ disjoint Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_kind_ctx (Œî1 ++ Œî2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk7a"><span class="nb">unfold</span> ok_kind_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œî1 /\ uniq Œî2 /\ disjoint Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (Œî1 ++ Œî2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> bursts.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk7b"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_mid1</span>: <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œî3</span>,
    ok_kind_ctx (Œî1 ++ Œî2 ++ Œî3) -&gt;
    ok_kind_ctx Œî2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œî3</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2 ++ Œî3) -&gt; ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk7c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œî3</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2 ++ Œî3) -&gt; ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk7d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2, Œî3</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_kind_ctx (Œî1 ++ Œî2 ++ Œî3)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk7e"><span class="nb">unfold</span> ok_kind_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2, Œî3</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq (Œî1 ++ Œî2 ++ Œî3)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> bursts.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk7f"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_mid2</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œî3</span>,
    ok_kind_ctx (Œî1 ++ Œî2 ++ Œî3) -&gt;
    ok_kind_ctx (Œî1 ++ Œî3).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œî3</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2 ++ Œî3) -&gt; ok_kind_ctx (Œî1 ++ Œî3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk80"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œî3</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2 ++ Œî3) -&gt; ok_kind_ctx (Œî1 ++ Œî3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk81"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2, Œî3</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_kind_ctx (Œî1 ++ Œî2 ++ Œî3)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_kind_ctx (Œî1 ++ Œî3)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk82"><span class="nb">unfold</span> ok_kind_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2, Œî3</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq (Œî1 ++ Œî2 ++ Œî3)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (Œî1 ++ Œî3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk83">bursts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2, Œî3</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œî1 /\
(uniq Œî2 /\ uniq Œî3 /\ disjoint Œî2 Œî3) /\
disjoint Œî2 Œî1 /\ disjoint Œî3 Œî1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œî1 /\ uniq Œî3 /\ disjoint Œî1 Œî3</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> disjoint_sym.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk84"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_app_l</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span>,
    ok_kind_ctx (Œî1 ++ Œî2) -&gt;
    ok_kind_ctx Œî1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2) -&gt; ok_kind_ctx Œî1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk85"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2) -&gt; ok_kind_ctx Œî1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk86"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_kind_ctx (Œî1 ++ Œî2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_kind_ctx Œî1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk87"><span class="nb">unfold</span> ok_kind_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq (Œî1 ++ Œî2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œî1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> bursts.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk88"><span class="kn">Lemma</span> <span class="nf">ok_kind_ctx_app_r</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span>,
    ok_kind_ctx (Œî1 ++ Œî2) -&gt;
    ok_kind_ctx Œî2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2) -&gt; ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk89"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit),
ok_kind_ctx (Œî1 ++ Œî2) -&gt; ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk8a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_kind_ctx (Œî1 ++ Œî2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_kind_ctx Œî2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk8b"><span class="nb">unfold</span> ok_kind_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq (Œî1 ++ Œî2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œî2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> bursts.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_kind_ctx_app1 : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_kind_ctx_mid1 ok_kind_ctx_mid2 : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_kind_ctx_app_l ok_kind_ctx_app_r : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** General properties of &lt;&lt;ok_type&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>

<span class="sd">(** A well-formed type is locally closed. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk8c"><span class="kn">Lemma</span> <span class="nf">ok_type_lc</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">œÑ</span>,
    ok_type Œî œÑ -&gt;
    LC typ ktyp œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">œÑ</span> : typ LN),
ok_type Œî œÑ -&gt; LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk8d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">œÑ</span> : typ LN),
ok_type Œî œÑ -&gt; LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk8e"><span class="nb">unfold</span> ok_type.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">œÑ</span> : typ LN),
scoped typ ktyp œÑ (domset Œî) /\ LC typ ktyp œÑ -&gt;
LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">tauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_lc : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_lc : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Structural properties of &lt;&lt;ok_type Œî œÑ&gt;&gt; in &lt;&lt;Œî&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>

<span class="sd">(** *** Permutation *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk8f"><span class="kn">Lemma</span> <span class="nf">ok_type_perm</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">œÑ</span>,
    Permutation Œî1 Œî2 -&gt;
    ok_type Œî1 œÑ &lt;-&gt;
    ok_type Œî2 œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) (<span class="nv">œÑ</span> : typ LN),
Permutation Œî1 Œî2 -&gt; ok_type Œî1 œÑ &lt;-&gt; ok_type Œî2 œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk90"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) (<span class="nv">œÑ</span> : typ LN),
Permutation Œî1 Œî2 -&gt; ok_type Œî1 œÑ &lt;-&gt; ok_type Œî2 œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk91"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî1 œÑ &lt;-&gt; ok_type Œî2 œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk92"><span class="nb">unfold</span> ok_type.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ &lt;-&gt;
scoped typ ktyp œÑ (domset Œî2) /\ LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (scoped_perm_iff); <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk93"><span class="kn">Lemma</span> <span class="nf">ok_type_perm1</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">œÑ</span>,
    ok_type Œî1 œÑ -&gt;
    Permutation Œî1 Œî2 -&gt;
    ok_type Œî2 œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">œÑ</span> : typ LN),
ok_type Œî1 œÑ -&gt; Permutation Œî1 Œî2 -&gt; ok_type Œî2 œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk94"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">œÑ</span> : typ LN),
ok_type Œî1 œÑ -&gt; Permutation Œî1 Œî2 -&gt; ok_type Œî2 œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk95"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type Œî1 œÑ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî2 œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> &lt;- ok_type_perm; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Weakening *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk96"><span class="kn">Lemma</span> <span class="nf">ok_type_weak_r</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">œÑ</span>,
    ok_type Œî1 œÑ -&gt;
    ok_type (Œî1 ++ Œî2) œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">œÑ</span> : typ LN), ok_type Œî1 œÑ -&gt; ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk97"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">œÑ</span> : typ LN), ok_type Œî1 œÑ -&gt; ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk98"><span class="nb">unfold</span> ok_type.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">œÑ</span> : typ LN),
scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ -&gt;
scoped typ ktyp œÑ (domset (Œî1 ++ Œî2)) /\ LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk99"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp œÑ (domset (Œî1 ++ Œî2)) /\ LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk9a"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk9b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk9b"><hr></label><div class="goal-conclusion">LC typ ktyp œÑ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk9c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk9d"><span class="nb">apply</span> (scoped_weak_l typ).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp œÑ (domset Œî1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">tauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk9e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">tauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk9f"><span class="kn">Lemma</span> <span class="nf">ok_type_weak_l</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">œÑ</span>,
    ok_type Œî2 œÑ -&gt;
    ok_type (Œî1 ++ Œî2) œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : list (atom * unit)) (<span class="nv">Œî2</span> : kind_ctx)
  (<span class="nv">œÑ</span> : typ LN), ok_type Œî2 œÑ -&gt; ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : list (atom * unit)) (<span class="nv">Œî2</span> : kind_ctx)
  (<span class="nv">œÑ</span> : typ LN), ok_type Œî2 œÑ -&gt; ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka1"><span class="nb">unfold</span> ok_type.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : list (atom * unit)) (<span class="nv">Œî2</span> : kind_ctx)
  (<span class="nv">œÑ</span> : typ LN),
scoped typ ktyp œÑ (domset Œî2) /\ LC typ ktyp œÑ -&gt;
scoped typ ktyp œÑ (domset (Œî1 ++ Œî2)) /\ LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span> (<span class="nb">auto using</span> (scoped_weak_r typ)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Strengthening  *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka2"><span class="kn">Lemma</span> <span class="nf">ok_type_stren</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">x</span> <span class="nv">œÑ</span>,
    ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ -&gt;
    ~ x `<span class="kr">in</span>` (FV typ ktyp œÑ) -&gt;
    ok_type (Œî1 ++ Œî2) œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ -&gt;
x `notin` FV typ ktyp œÑ -&gt; ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ -&gt;
x `notin` FV typ ktyp œÑ -&gt; ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka4">introv [? ?] ?.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x `notin` FV typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka5"><span class="nb">unfold</span> ok_type.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x `notin` FV typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp œÑ (domset (Œî1 ++ Œî2)) /\ LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> (scoped_stren_mid typ).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka6"><span class="kn">Corollary</span> <span class="nf">ok_type_stren1</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">x</span> <span class="nv">œÑ</span>,
    ok_type (Œî ++ x ~ tt) œÑ -&gt;
    ~ x `<span class="kr">in</span>` (FV typ ktyp œÑ) -&gt;
    ok_type Œî œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type (Œî ++ x ~ tt) œÑ -&gt;
x `notin` FV typ ktyp œÑ -&gt; ok_type Œî œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type (Œî ++ x ~ tt) œÑ -&gt;
x `notin` FV typ ktyp œÑ -&gt; ok_type Œî œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka8">introv H1 H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type (Œî ++ x ~ tt) œÑ</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x `notin` FV typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chka9">change_alist (Œî ++ x ~ tt ++ []) <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type (Œî ++ x ~ tt ++ []) œÑ</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x `notin` FV typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkaa">change_alist (Œî ++ []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type (Œî ++ x ~ tt ++ []) œÑ</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x `notin` FV typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî ++ []) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> ok_type_stren.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Substitution *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkab"><span class="kn">Lemma</span> <span class="nf">ok_type_sub</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">x</span> <span class="nv">œÑ1</span> <span class="nv">œÑ2</span>,
    ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ1 -&gt;
    ok_type (Œî1 ++ Œî2) œÑ2 -&gt;
    ok_type (Œî1 ++ Œî2) (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ1</span> <span class="nv">œÑ2</span> : typ LN),
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ1 -&gt;
ok_type (Œî1 ++ Œî2) œÑ2 -&gt;
ok_type (Œî1 ++ Œî2) (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkac"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ1</span> <span class="nv">œÑ2</span> : typ LN),
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ1 -&gt;
ok_type (Œî1 ++ Œî2) œÑ2 -&gt;
ok_type (Œî1 ++ Œî2) (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkad"><span class="nb">unfold</span> ok_type.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ1</span> <span class="nv">œÑ2</span> : typ LN),
scoped typ ktyp œÑ1 (domset (Œî1 ++ x ~ tt ++ Œî2)) /\
LC typ ktyp œÑ1 -&gt;
scoped typ ktyp œÑ2 (domset (Œî1 ++ Œî2)) /\
LC typ ktyp œÑ2 -&gt;
scoped typ ktyp (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)
  (domset (Œî1 ++ Œî2)) /\
LC typ ktyp (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkae">introv [? ?] [? ?].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ1 (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ2 (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)
  (domset (Œî1 ++ Œî2)) /\
LC typ ktyp (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkaf"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ1 (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ2 (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)
  (domset (Œî1 ++ Œî2))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chkb0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ1 (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ2 (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ2</span></span></span><br></div><label class="goal-separator" for="contexts-v-chkb0"><hr></label><div class="goal-conclusion">LC typ ktyp (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ1 (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ2 (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)
  (domset (Œî1 ++ Œî2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb2"><span class="nb">pose</span> (lemma := scoped_sub_eq_mid typ ktyp).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ1 (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ2 (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>scoped_sub_eq_mid typ ktyp</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">t1</span> : typ LN) (<span class="nv">t2</span> : SystemF ktyp LN)
  (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X) 
  <span class="nv">x</span> (<span class="nv">x&#39;</span> : X),
scoped typ ktyp t1
  (domset (Œ≥1 ++ x ~ x&#39; ++ Œ≥2)) -&gt;
scoped (SystemF ktyp) ktyp t2
  (domset (Œ≥1 ++ Œ≥2)) -&gt;
scoped typ ktyp (<span class="nb">subst</span> typ ktyp x t2 t1)
  (domset (Œ≥1 ++ Œ≥2))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)
  (domset (Œî1 ++ Œî2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> lemma; <span class="bp">eassumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ1 (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ2 (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC typ ktyp (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto using</span> (subst_lc_eq typ).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb4"><span class="kn">Corollary</span> <span class="nf">ok_type_sub1</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">x</span> <span class="nv">œÑ1</span> <span class="nv">œÑ2</span>,
    ok_type (Œî ++ x ~ tt) œÑ1 -&gt;
    ok_type Œî œÑ2 -&gt;
    ok_type Œî (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ1</span> <span class="nv">œÑ2</span> : typ LN),
ok_type (Œî ++ x ~ tt) œÑ1 -&gt;
ok_type Œî œÑ2 -&gt; ok_type Œî (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ1</span> <span class="nv">œÑ2</span> : typ LN),
ok_type (Œî ++ x ~ tt) œÑ1 -&gt;
ok_type Œî œÑ2 -&gt; ok_type Œî (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb6">introv H1 H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type (Œî ++ x ~ tt) œÑ1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb7">change_alist (Œî ++ x ~ tt ++ []) <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type (Œî ++ x ~ tt ++ []) œÑ1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb8">change_alist (Œî ++ []) <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type (Œî ++ x ~ tt ++ []) œÑ1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ok_type (Œî ++ []) œÑ2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkb9">change_alist (Œî ++ []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ1, œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type (Œî ++ x ~ tt ++ []) œÑ1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ok_type (Œî ++ []) œÑ2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî ++ []) (<span class="nb">subst</span> typ ktyp x œÑ2 œÑ1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto using</span> ok_type_sub.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_perm1 : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_weak_l ok_type_weak_r : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_stren ok_type_stren1 : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_sub : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_sub1 : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** General properties of &lt;&lt;ok_type_ctx&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkba"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_nil</span> : <span class="kr">forall</span> <span class="nv">Œî</span>,
    ok_type_ctx Œî [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî</span> : kind_ctx, ok_type_ctx Œî []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkbb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Œî</span> : kind_ctx, ok_type_ctx Œî []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkbc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkbd"><span class="nb">unfold</span> ok_type_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq [] /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range [] -&gt; ok_type Œî œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> bursts.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkbe"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_cons</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì</span> <span class="nv">x</span> <span class="nv">œÑ</span>,
    ok_type_ctx Œî Œì -&gt;
    ~ (x `<span class="kr">in</span>` domset Œì) -&gt;
    ok_type Œî œÑ -&gt;
    ok_type_ctx Œî (x ~ œÑ ++ Œì).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì</span> : type_ctx) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type_ctx Œî Œì -&gt;
x `notin` domset Œì -&gt;
ok_type Œî œÑ -&gt; ok_type_ctx Œî (x ~ œÑ ++ Œì)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkbf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì</span> : type_ctx) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type_ctx Œî Œì -&gt;
x `notin` domset Œì -&gt;
ok_type Œî œÑ -&gt; ok_type_ctx Œî (x ~ œÑ ++ Œì)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkc0"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî Œì</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî (x ~ œÑ ++ Œì)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkc1"><span class="nb">unfold</span> ok_type_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (x ~ œÑ ++ Œì) /\
(<span class="kr">forall</span> <span class="nv">œÑ0</span> : typ LN,
 œÑ0 ‚àà range (x ~ œÑ ++ Œì) -&gt; ok_type Œî œÑ0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkc2">bursts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kt">True</span> /\ uniq Œì /\ x `notin` domset Œì) /\
(<span class="kr">forall</span> <span class="nv">œÑ0</span> : typ LN,
 œÑ = œÑ0 \/ œÑ0 ‚àà range Œì -&gt; ok_type Œî œÑ0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkc3">splits.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span> /\ uniq Œì /\ x `notin` domset Œì</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chkc4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><label class="goal-separator" for="contexts-v-chkc4"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ0</span> : typ LN,
œÑ = œÑ0 \/ œÑ0 ‚àà range Œì -&gt; ok_type Œî œÑ0</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkc5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span> /\ uniq Œì /\ x `notin` domset Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkc6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ0</span> : typ LN,
œÑ = œÑ0 \/ œÑ0 ‚àà range Œì -&gt; ok_type Œî œÑ0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkc7"><span class="nb">intros</span> ? [?|?].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br><span><var>œÑ0</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>œÑ = œÑ0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî œÑ0</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chkc8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br><span><var>œÑ0</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>œÑ0 ‚àà range Œì</span></span></span><br></div><label class="goal-separator" for="contexts-v-chkc8"><hr></label><div class="goal-conclusion">ok_type Œî œÑ0</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkc9">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br><span><var>œÑ0</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>œÑ = œÑ0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî œÑ0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkca"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>œÑ0</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî œÑ0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkcb">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî œÑ)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x `notin` domset Œì</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br><span><var>œÑ0</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>œÑ0 ‚àà range Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî œÑ0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkcc"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_one</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">x</span> <span class="nv">œÑ</span>,
    ok_type Œî œÑ -&gt;
    ok_type_ctx Œî (x ~ œÑ).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type Œî œÑ -&gt; ok_type_ctx Œî (x ~ œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkcd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type Œî œÑ -&gt; ok_type_ctx Œî (x ~ œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkce"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî (x ~ œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkcf"><span class="nb">change</span> (x ~ œÑ) <span class="kr">with</span> [(x, œÑ)].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî [(x, œÑ)]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd0"><span class="nb">apply</span> ok_type_ctx_cons; <span class="nb">auto using</span> ok_type_ctx_nil.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `notin` domset []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd1"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_app</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span>,
    ok_type_ctx Œî (Œì1 ++ Œì2) &lt;-&gt;
    ok_type_ctx Œî Œì1 /\ ok_type_ctx Œî Œì2 /\ disjoint Œì1 Œì2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2) &lt;-&gt;
ok_type_ctx Œî Œì1 /\ ok_type_ctx Œî Œì2 /\ disjoint Œì1 Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2) &lt;-&gt;
ok_type_ctx Œî Œì1 /\ ok_type_ctx Œî Œì2 /\ disjoint Œì1 Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd3"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî (Œì1 ++ Œì2) &lt;-&gt;
ok_type_ctx Œî Œì1 /\ ok_type_ctx Œî Œì2 /\ disjoint Œì1 Œì2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd4"><span class="nb">unfold</span> ok_type_ctx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (Œì1 ++ Œì2) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range (Œì1 ++ Œì2) -&gt; ok_type Œî œÑ) &lt;-&gt;
(uniq Œì1 /\
 (<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ)) /\
(uniq Œì2 /\
 (<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì2 -&gt; ok_type Œî œÑ)) /\
disjoint Œì1 Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd5"><span class="nb">setoid_rewrite</span> in_range_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (Œì1 ++ Œì2) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 (<span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ) ‚àà (Œì1 ++ Œì2)) -&gt; ok_type Œî œÑ) &lt;-&gt;
(uniq Œì1 /\
 (<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
  (<span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ) ‚àà Œì1) -&gt; ok_type Œî œÑ)) /\
(uniq Œì2 /\
 (<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
  (<span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ) ‚àà Œì2) -&gt; ok_type Œî œÑ)) /\
disjoint Œì1 Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd6"><span class="nb">rewrite</span> uniq_app_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(uniq Œì1 /\ uniq Œì2 /\ disjoint Œì1 Œì2) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 (<span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ) ‚àà (Œì1 ++ Œì2)) -&gt; ok_type Œî œÑ) &lt;-&gt;
(uniq Œì1 /\
 (<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
  (<span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ) ‚àà Œì1) -&gt; ok_type Œî œÑ)) /\
(uniq Œì2 /\
 (<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
  (<span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ) ‚àà Œì2) -&gt; ok_type Œî œÑ)) /\
disjoint Œì1 Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd7"><span class="nb">setoid_rewrite</span> element_of_list_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(uniq Œì1 /\ uniq Œì2 /\ disjoint Œì1 Œì2) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 (<span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ) ‚àà Œì1 \/ (x, œÑ) ‚àà Œì2) -&gt; ok_type Œî œÑ) &lt;-&gt;
(uniq Œì1 /\
 (<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
  (<span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ) ‚àà Œì1) -&gt; ok_type Œî œÑ)) /\
(uniq Œì2 /\
 (<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
  (<span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ) ‚àà Œì2) -&gt; ok_type Œî œÑ)) /\
disjoint Œì1 Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd8"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_app_comm</span> : <span class="kr">forall</span> {<span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span>},
    ok_type_ctx Œî (Œì1 ++ Œì2) &lt;-&gt;
    ok_type_ctx Œî (Œì2 ++ Œì1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2) &lt;-&gt; ok_type_ctx Œî (Œì2 ++ Œì1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkd9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2) &lt;-&gt; ok_type_ctx Œî (Œì2 ++ Œì1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkda"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî (Œì1 ++ Œì2) &lt;-&gt; ok_type_ctx Œî (Œì2 ++ Œì1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkdb"><span class="nb">unfold</span> ok_type_ctx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (Œì1 ++ Œì2) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range (Œì1 ++ Œì2) -&gt; ok_type Œî œÑ) &lt;-&gt;
uniq (Œì2 ++ Œì1) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range (Œì2 ++ Œì1) -&gt; ok_type Œî œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkdc">bursts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(uniq Œì1 /\ uniq Œì2 /\ disjoint Œì1 Œì2) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì1 \/ œÑ ‚àà range Œì2 -&gt; ok_type Œî œÑ) &lt;-&gt;
(uniq Œì2 /\ uniq Œì1 /\ disjoint Œì2 Œì1) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì2 \/ œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkdd"><span class="nb">rewrite</span> disjoint_sym.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(uniq Œì1 /\ uniq Œì2 /\ disjoint Œì2 Œì1) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì1 \/ œÑ ‚àà range Œì2 -&gt; ok_type Œî œÑ) &lt;-&gt;
(uniq Œì2 /\ uniq Œì1 /\ disjoint Œì2 Œì1) /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì2 \/ œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkde"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_binds</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì</span> <span class="nv">x</span> <span class="nv">œÑ</span>,
    ok_type_ctx Œî Œì -&gt;
    (x, œÑ) ‚àà (Œì : list (atom * typ LN)) -&gt;
    ok_type Œî œÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì</span> : type_ctx) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type_ctx Œî Œì -&gt;
(x, œÑ) ‚àà (Œì : list (atom * typ LN)) -&gt; ok_type Œî œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkdf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì</span> : type_ctx) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN),
ok_type_ctx Œî Œì -&gt;
(x, œÑ) ‚àà (Œì : list (atom * typ LN)) -&gt; ok_type Œî œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke0">introv Hok Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Hok</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî Œì</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(x, œÑ) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke1"><span class="nb">unfold</span> ok_type_ctx, ok_type <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Hok</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; scoped typ ktyp œÑ (domset Œî) /\ LC typ ktyp œÑ)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(x, œÑ) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped typ ktyp œÑ (domset Œî) /\ LC typ ktyp œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke2"><span class="nb">apply</span> Hok.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Hok</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; scoped typ ktyp œÑ (domset Œî) /\ LC typ ktyp œÑ)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>(x, œÑ) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">œÑ ‚àà range Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">erewrite</span> (in_range_iff Œì); <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** &lt;&lt;ok_type_ctx Œî Œì&gt;&gt; supports permutation in Œì. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke3"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_perm_gamma1</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span>,
    ok_type_ctx Œî Œì1 -&gt;
    Permutation Œì1 Œì2 -&gt;
    ok_type_ctx Œî Œì2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> : type_ctx)
  (<span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî Œì1 -&gt;
Permutation Œì1 Œì2 -&gt; ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> : type_ctx)
  (<span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî Œì1 -&gt;
Permutation Œì1 Œì2 -&gt; ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke5">introv [huniq hok].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Permutation Œì1 Œì2 -&gt; ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke6"><span class="nb">unfold</span> ok_type_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Permutation Œì1 Œì2 -&gt;
uniq Œì2 /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì2 -&gt; ok_type Œî œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke7"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chke8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br></div><label class="goal-separator" for="contexts-v-chke8"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì2 -&gt; ok_type Œî œÑ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chke9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkea"><span class="nb">rewrite</span> uniq_perm; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Permutation Œì2 Œì1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">symmetry</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkeb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì2 -&gt; ok_type Œî œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkec"><span class="nb">intros</span> œÑ hin; <span class="nb">specialize</span> (hok œÑ).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>œÑ ‚àà range Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type Œî œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chked"><span class="nb">apply</span> hok.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>œÑ ‚àà range Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">œÑ ‚àà range Œì1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> perm_range; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkee"><span class="kn">Corollary</span> <span class="nf">ok_type_ctx_perm_gamma</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span>,
    Permutation Œì1 Œì2 -&gt;
    ok_type_ctx Œî Œì1 &lt;-&gt; ok_type_ctx Œî Œì2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
Permutation Œì1 Œì2 -&gt;
ok_type_ctx Œî Œì1 &lt;-&gt; ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkef"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
Permutation Œì1 Œì2 -&gt;
ok_type_ctx Œî Œì1 &lt;-&gt; ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf0">introv Hperm; <span class="nb">split</span>; <span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî Œì1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî Œì2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chkf1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî Œì2</span></span></span><br></div><label class="goal-separator" for="contexts-v-chkf1"><hr></label><div class="goal-conclusion">ok_type_ctx Œî Œì1</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî Œì1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> ok_type_ctx_perm_gamma1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî Œì1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf4"><span class="nb">symmetry in</span> Hperm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œì2 Œì1</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî Œì1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> ok_type_ctx_perm_gamma1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_ctx_nil : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_ctx_cons : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_ctx_one : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_ctx_app_comm : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_ctx_binds : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_ctx_perm_gamma : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Tactical support for &lt;&lt;ok_type_ctx&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf5"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_inv_app_l</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span>,
    ok_type_ctx Œî (Œì1 ++ Œì2) -&gt;
    ok_type_ctx Œî Œì1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2) -&gt; ok_type_ctx Œî Œì1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2) -&gt; ok_type_ctx Œî Œì1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf7">introv [huniq hscope].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq (Œì1 ++ Œì2)</span></span></span><br><span><var>hscope</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range (Œì1 ++ Œì2) -&gt; ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî Œì1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf8"><span class="nb">unfold</span> ok_type_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq (Œì1 ++ Œì2)</span></span></span><br><span><var>hscope</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range (Œì1 ++ Œì2) -&gt; ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì1 /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkf9">bursts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì1 /\ uniq Œì2 /\ disjoint Œì1 Œì2</span></span></span><br><span><var>hscope</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì1 \/ œÑ ‚àà range Œì2 -&gt; ok_type Œî œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì1 /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì1 -&gt; ok_type Œî œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkfa"><span class="kn">Corollary</span> <span class="nf">ok_type_ctx_inv_app_r</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span>,
    ok_type_ctx Œî (Œì1 ++ Œì2) -&gt;
    ok_type_ctx Œî Œì2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2) -&gt; ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkfb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2) -&gt; ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkfc">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî (Œì1 ++ Œì2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkfd"><span class="nb">rewrite</span> ok_type_ctx_app_comm <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî (Œì2 ++ Œì1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî Œì2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> ok_type_ctx_inv_app_l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkfe"><span class="kn">Corollary</span> <span class="nf">ok_type_ctx_inv_mid</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span> <span class="nv">Œì3</span>,
    ok_type_ctx Œî (Œì1 ++ Œì2 ++ Œì3) -&gt;
    ok_type_ctx Œî (Œì1 ++ Œì3).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx)
  (<span class="nv">Œì1</span> <span class="nv">Œì2</span> <span class="nv">Œì3</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2 ++ Œì3) -&gt;
ok_type_ctx Œî (Œì1 ++ Œì3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chkff"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx)
  (<span class="nv">Œì1</span> <span class="nv">Œì2</span> <span class="nv">Œì3</span> : list (atom * typ LN)),
ok_type_ctx Œî (Œì1 ++ Œì2 ++ Œì3) -&gt;
ok_type_ctx Œî (Œì1 ++ Œì3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk100">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2, Œì3</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî (Œì1 ++ Œì2 ++ Œì3)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî (Œì1 ++ Œì3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk101">change_alist ((Œì1 ++ Œì2) ++ Œì3) <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2, Œì3</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî ((Œì1 ++ Œì2) ++ Œì3)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî (Œì1 ++ Œì3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk102"><span class="nb">rewrite</span> ok_type_ctx_app_comm <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2, Œì3</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî (Œì3 ++ Œì1 ++ Œì2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî (Œì1 ++ Œì3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk103">change_alist ((Œì3 ++ Œì1) ++ Œì2) <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2, Œì3</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî ((Œì3 ++ Œì1) ++ Œì2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî (Œì1 ++ Œì3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk104"><span class="nb">apply</span> ok_type_ctx_inv_app_l <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2, Œì3</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span>ok_type_ctx Œî (Œì3 ++ Œì1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî (Œì1 ++ Œì3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> ok_type_ctx_app_comm <span class="kr">in</span> hyp.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_ctx_inv_app_l : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_ctx_inv_app_r : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_ctx_inv_mid : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Structural properties in &lt;&lt;Œî&gt;&gt; in &lt;&lt;ok_type_ctx Œî Œì&gt;&gt;. *)</span>
<span class="sd">(******************************************************************************)</span>

<span class="sd">(** *** Permutation *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk105"><span class="kn">Theorem</span> <span class="nf">ok_type_ctx_perm1</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œì</span>,
    ok_type_ctx Œî1 Œì -&gt;
    Permutation Œî1 Œî2 -&gt;
    ok_type_ctx Œî2 Œì.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">Œì</span> : type_ctx),
ok_type_ctx Œî1 Œì -&gt;
Permutation Œî1 Œî2 -&gt; ok_type_ctx Œî2 Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk106"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">Œì</span> : type_ctx),
ok_type_ctx Œî1 Œì -&gt;
Permutation Œî1 Œî2 -&gt; ok_type_ctx Œî2 Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk107">introv [? ?] ?.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî1 œÑ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî2 Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk108"><span class="nb">unfold</span> ok_type_ctx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî1 œÑ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî2 œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">eauto using</span> ok_type_perm1 <span class="kr">with</span> tea_alist.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk109"><span class="kn">Corollary</span> <span class="nf">ok_type_ctx_perm</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œì</span>,
    Permutation Œî1 Œî2 -&gt;
    ok_type_ctx Œî1 Œì &lt;-&gt; ok_type_ctx Œî2 Œì.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) (<span class="nv">Œì</span> : type_ctx),
Permutation Œî1 Œî2 -&gt;
ok_type_ctx Œî1 Œì &lt;-&gt; ok_type_ctx Œî2 Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk10a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) (<span class="nv">Œì</span> : type_ctx),
Permutation Œî1 Œî2 -&gt;
ok_type_ctx Œî1 Œì &lt;-&gt; ok_type_ctx Œî2 Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk10b">introv Hperm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî1 Œì &lt;-&gt; ok_type_ctx Œî2 Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk10c"><span class="nb">unfold</span> ok_type_ctx, ok_type.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ) &lt;-&gt;
uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî2) /\ LC typ ktyp œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk10d"><span class="nb">split</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî2) /\ LC typ ktyp œÑ)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk10e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî2) /\ LC typ ktyp œÑ)</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk10e"><hr></label><div class="goal-conclusion">uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk10f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî2) /\ LC typ ktyp œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> ok_type_ctx_perm1; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk110">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî2) /\ LC typ ktyp œÑ)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî1) /\ LC typ ktyp œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk111"><span class="nb">eapply</span> ok_type_ctx_perm1; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Hperm</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt;
 scoped typ ktyp œÑ (domset Œî2) /\ LC typ ktyp œÑ)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Permutation Œî2 Œî1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> Permutation_sym.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Set Firstorder Depth</span> <span class="mi">4</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Weakening *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk112"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_weak_r</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œì</span>,
    ok_type_ctx Œî1 Œì -&gt;
    ok_type_ctx (Œî1 ++ Œî2) Œì.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">Œì</span> : type_ctx),
ok_type_ctx Œî1 Œì -&gt; ok_type_ctx (Œî1 ++ Œî2) Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk113"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">Œì</span> : type_ctx),
ok_type_ctx Œî1 Œì -&gt; ok_type_ctx (Œî1 ++ Œî2) Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk114">introv [huniq hok1].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî1 œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx (Œî1 ++ Œî2) Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk115"><span class="nb">unfold</span> ok_type_ctx <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>huniq</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type Œî1 œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ Œî2) œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">firstorder using</span> ok_type_weak_r.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Strengthening *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk116"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_stren</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">x</span> <span class="nv">Œì</span>,
    ok_type_ctx (Œî1 ++ x ~ tt ++ Œî2) Œì -&gt;
    (<span class="kr">forall</span> <span class="nv">t</span> : typ LN, t ‚àà range Œì -&gt; ~ x `<span class="kr">in</span>` FV typ ktyp t) -&gt;
    ok_type_ctx (Œî1 ++ Œî2) Œì.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">Œì</span> : type_ctx),
ok_type_ctx (Œî1 ++ x ~ tt ++ Œî2) Œì -&gt;
(<span class="kr">forall</span> <span class="nv">t</span> : typ LN,
 t ‚àà range Œì -&gt; x `notin` FV typ ktyp t) -&gt;
ok_type_ctx (Œî1 ++ Œî2) Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk117"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">Œì</span> : type_ctx),
ok_type_ctx (Œî1 ++ x ~ tt ++ Œî2) Œì -&gt;
(<span class="kr">forall</span> <span class="nv">t</span> : typ LN,
 t ‚àà range Œì -&gt; x `notin` FV typ ktyp t) -&gt;
ok_type_ctx (Œî1 ++ Œî2) Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk118">introv [hunit hok] hfresh.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>hfresh</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">t</span> : typ LN,
t ‚àà range Œì -&gt; x `notin` FV typ ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx (Œî1 ++ Œî2) Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk119"><span class="nb">unfold</span> ok_type_ctx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>hfresh</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">t</span> : typ LN,
t ‚àà range Œì -&gt; x `notin` FV typ ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq Œì /\
(<span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
 œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ Œî2) œÑ)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk11a"><span class="nb">split</span>; [<span class="nb">trivial</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>hfresh</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">t</span> : typ LN,
t ‚àà range Œì -&gt; x `notin` FV typ ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN, œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk11b"><span class="nb">intros</span> œÑ hin; <span class="nb">specialize</span> (hok œÑ hin).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>hfresh</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">t</span> : typ LN,
t ‚àà range Œì -&gt; x `notin` FV typ ktyp t</span></span></span><br><span><var>hin</var><span class="hyp-type"><b>: </b><span>œÑ ‚àà range Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> ok_type_stren.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk11c"><span class="kn">Corollary</span> <span class="nf">ok_type_ctx_stren1</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">x</span> <span class="nv">Œì</span>,
    ok_type_ctx (Œî ++ x ~ tt) Œì -&gt;
    (<span class="kr">forall</span> <span class="nv">t</span> : typ LN, t ‚àà range Œì -&gt; ~ x `<span class="kr">in</span>` FV typ ktyp t) -&gt;
    ok_type_ctx Œî Œì.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">Œì</span> : type_ctx),
ok_type_ctx (Œî ++ x ~ tt) Œì -&gt;
(<span class="kr">forall</span> <span class="nv">t</span> : typ LN,
 t ‚àà range Œì -&gt; x `notin` FV typ ktyp t) -&gt;
ok_type_ctx Œî Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk11d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">Œì</span> : type_ctx),
ok_type_ctx (Œî ++ x ~ tt) Œì -&gt;
(<span class="kr">forall</span> <span class="nv">t</span> : typ LN,
 t ‚àà range Œì -&gt; x `notin` FV typ ktyp t) -&gt;
ok_type_ctx Œî Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk11e">introv hyp1 hyp2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>ok_type_ctx (Œî ++ x ~ tt) Œì</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">t</span> : typ LN,
t ‚àà range Œì -&gt; x `notin` FV typ ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk11f">change_alist (Œî ++ x ~ tt ++ []) <span class="kr">in</span> hyp1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>ok_type_ctx (Œî ++ x ~ tt ++ []) Œì</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">t</span> : typ LN,
t ‚àà range Œì -&gt; x `notin` FV typ ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx Œî Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk120">change_alist (Œî ++ []).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>ok_type_ctx (Œî ++ x ~ tt ++ []) Œì</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">t</span> : typ LN,
t ‚àà range Œì -&gt; x `notin` FV typ ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx (Œî ++ []) Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto using</span> ok_type_ctx_stren.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk121"><span class="kn">Lemma</span> <span class="nf">ok_type_ctx_sub</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">x</span> <span class="nv">Œì</span> <span class="nv">œÑ</span>,
    ok_type_ctx (Œî1 ++ x ~ tt ++ Œî2) Œì -&gt;
    ok_type (Œî1 ++ Œî2) œÑ -&gt;
    LC typ ktyp œÑ -&gt;
    ok_type_ctx (Œî1 ++ Œî2) (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">Œì</span> : type_ctx)
  (<span class="nv">œÑ</span> : typ LN),
ok_type_ctx (Œî1 ++ x ~ tt ++ Œî2) Œì -&gt;
ok_type (Œî1 ++ Œî2) œÑ -&gt;
LC typ ktyp œÑ -&gt;
ok_type_ctx (Œî1 ++ Œî2) (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk122"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">Œì</span> : type_ctx)
  (<span class="nv">œÑ</span> : typ LN),
ok_type_ctx (Œî1 ++ x ~ tt ++ Œî2) Œì -&gt;
ok_type (Œî1 ++ Œî2) œÑ -&gt;
LC typ ktyp œÑ -&gt;
ok_type_ctx (Œî1 ++ Œî2) (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk123">introv [hunit hok] Hscope lc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type_ctx (Œî1 ++ Œî2) (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk124"><span class="nb">unfold</span> ok_type_ctx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì) /\
(<span class="kr">forall</span> <span class="nv">œÑ0</span> : typ LN,
 œÑ0 ‚àà range (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì) -&gt;
 ok_type (Œî1 ++ Œî2) œÑ0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk125"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk126" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk126"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ0</span> : typ LN,
œÑ0 ‚àà range (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì) -&gt;
ok_type (Œî1 ++ Œî2) œÑ0</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk127">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uniq (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> uniq_map2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk128">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">œÑ0</span> : typ LN,
œÑ0 ‚àà range (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì) -&gt;
ok_type (Œî1 ++ Œî2) œÑ0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk129"><span class="nb">intros</span> œÑ2 œÑ2in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>œÑ2in</var><span class="hyp-type"><b>: </b><span>œÑ2 ‚àà range (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ Œî2) œÑ2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk12a"><span class="nb">rewrite</span> in_range_iff <span class="kr">in</span> œÑ2in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>œÑ2in</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">x0</span>,
  (x0, œÑ2) ‚àà envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ Œî2) œÑ2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk12b"><span class="nb">setoid_rewrite</span> in_envmap_iff <span class="kr">in</span> œÑ2in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>œÑ2</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>œÑ2in</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">x0</span> (<span class="nv">a</span> : typ LN),
  (x0, a) ‚àà Œì /\ <span class="nb">subst</span> typ ktyp x œÑ a = œÑ2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ Œî2) œÑ2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk12c"><span class="nb">destruct</span> œÑ2in <span class="kr">as</span> [y [œÑ2_inv [? ?]]]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">œÑ</span> : typ LN,
œÑ ‚àà range Œì -&gt; ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ2_inv</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(y, œÑ2_inv) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ Œî2) (<span class="nb">subst</span> typ ktyp x œÑ œÑ2_inv)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk12d"><span class="nb">specialize</span> (hok œÑ2_inv).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>œÑ2_inv</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>œÑ2_inv ‚àà range Œì -&gt;
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ2_inv</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(y, œÑ2_inv) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ Œî2) (<span class="nb">subst</span> typ ktyp x œÑ œÑ2_inv)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk12e"><span class="nb">apply</span> ok_type_sub.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>œÑ2_inv</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>œÑ2_inv ‚àà range Œì -&gt;
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ2_inv</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(y, œÑ2_inv) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ2_inv</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk12f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>œÑ2_inv</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>œÑ2_inv ‚àà range Œì -&gt;
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ2_inv</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(y, œÑ2_inv) ‚àà Œì</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk12f"><hr></label><div class="goal-conclusion">ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk130">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>œÑ2_inv</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>œÑ2_inv ‚àà range Œì -&gt;
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ2_inv</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(y, œÑ2_inv) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ2_inv</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk131"><span class="nb">apply</span> hok.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>œÑ2_inv</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>œÑ2_inv ‚àà range Œì -&gt;
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ2_inv</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(y, œÑ2_inv) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">œÑ2_inv ‚àà range Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk132"><span class="nb">rewrite</span> in_range_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>œÑ2_inv</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>œÑ2_inv ‚àà range Œì -&gt;
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ2_inv</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(y, œÑ2_inv) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">x</span>, (x, œÑ2_inv) ‚àà Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk133">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hunit</var><span class="hyp-type"><b>: </b><span>uniq Œì</span></span></span><br><span><var>œÑ2_inv</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>hok</var><span class="hyp-type"><b>: </b><span>œÑ2_inv ‚àà range Œì -&gt;
ok_type (Œî1 ++ x ~ tt ++ Œî2) œÑ2_inv</span></span></span><br><span><var>Hscope</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br><span><var>lc</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(y, œÑ2_inv) ‚àà Œì</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_type (Œî1 ++ Œî2) œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Immediate</span> ok_type_ctx_perm : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_ctx_perm1 : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_ctx_weak_r : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Hint Resolve</span> ok_type_ctx_sub : sysf_ctx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Structural properties of &lt;&lt;ok_term Œî Œì t&gt;&gt; in &lt;&lt;Œî&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>

<span class="sd">(** *** Permutation *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk134"><span class="kn">Lemma</span> <span class="nf">ok_term_perm_delta</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œì</span> <span class="nv">t</span>,
    Permutation Œî1 Œî2 -&gt;
    ok_term Œî1 Œì t &lt;-&gt;
    ok_term Œî2 Œì t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) (<span class="nv">Œì</span> : type_ctx)
  (<span class="nv">t</span> : term LN),
Permutation Œî1 Œî2 -&gt; ok_term Œî1 Œì t &lt;-&gt; ok_term Œî2 Œì t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk135"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) (<span class="nv">Œì</span> : type_ctx)
  (<span class="nv">t</span> : term LN),
Permutation Œî1 Œî2 -&gt; ok_term Œî1 Œì t &lt;-&gt; ok_term Œî2 Œì t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk136"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_term Œî1 Œì t &lt;-&gt; ok_term Œî2 Œì t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk137"><span class="nb">unfold</span> ok_term.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œî1 Œî2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset Œî1) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t &lt;-&gt;
scoped term ktyp t (domset Œî2) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> scoped_perm_iff.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Weakening *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk138"><span class="kn">Lemma</span> <span class="nf">ok_term_weak_delta_r</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œì</span> <span class="nv">t</span>,
    ok_term Œî1 Œì t -&gt;
    ok_term (Œî1 ++ Œî2) Œì t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">Œì</span> : type_ctx) (<span class="nv">t</span> : term LN),
ok_term Œî1 Œì t -&gt; ok_term (Œî1 ++ Œî2) Œì t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk139"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">Œì</span> : type_ctx) (<span class="nv">t</span> : term LN),
ok_term Œî1 Œì t -&gt; ok_term (Œî1 ++ Œî2) Œì t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk13a"><span class="nb">unfold</span> ok_term.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : kind_ctx) (<span class="nv">Œî2</span> : list (atom * unit))
  (<span class="nv">Œì</span> : type_ctx) (<span class="nv">t</span> : term LN),
scoped term ktyp t (domset Œî1) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t -&gt;
scoped term ktyp t (domset (Œî1 ++ Œî2)) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk13b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî1) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset (Œî1 ++ Œî2)) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span> (<span class="nb">eauto using</span> (scoped_weak_l term)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk13c"><span class="kn">Lemma</span> <span class="nf">ok_term_weak_delta_l</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">Œì</span> <span class="nv">t</span>,
    ok_term Œî2 Œì t -&gt;
    ok_term (Œî1 ++ Œî2) Œì t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : list (atom * unit)) (<span class="nv">Œî2</span> : kind_ctx)
  (<span class="nv">Œì</span> : type_ctx) (<span class="nv">t</span> : term LN),
ok_term Œî2 Œì t -&gt; ok_term (Œî1 ++ Œî2) Œì t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk13d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : list (atom * unit)) (<span class="nv">Œî2</span> : kind_ctx)
  (<span class="nv">Œì</span> : type_ctx) (<span class="nv">t</span> : term LN),
ok_term Œî2 Œì t -&gt; ok_term (Œî1 ++ Œî2) Œì t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk13e"><span class="nb">unfold</span> ok_term.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> : list (atom * unit)) (<span class="nv">Œî2</span> : kind_ctx)
  (<span class="nv">Œì</span> : type_ctx) (<span class="nv">t</span> : term LN),
scoped term ktyp t (domset Œî2) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t -&gt;
scoped term ktyp t (domset (Œî1 ++ Œî2)) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk13f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>Œî2</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî2) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset (Œî1 ++ Œî2)) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span> (<span class="nb">eauto using</span> (scoped_weak_r term)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Strengthening  *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk140"><span class="kn">Lemma</span> <span class="nf">ok_term_stren_delta</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">x</span> <span class="nv">Œì</span> <span class="nv">t</span>,
    ok_term (Œî1 ++ x ~ tt ++ Œî2) Œì t -&gt;
    ~ x `<span class="kr">in</span>` (FV term ktyp t) -&gt;
    ok_term (Œî1 ++ Œî2) Œì t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">Œì</span> : type_ctx)
  (<span class="nv">t</span> : term LN),
ok_term (Œî1 ++ x ~ tt ++ Œî2) Œì t -&gt;
x `notin` FV term ktyp t -&gt; ok_term (Œî1 ++ Œî2) Œì t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk141"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">Œì</span> : type_ctx)
  (<span class="nv">t</span> : term LN),
ok_term (Œî1 ++ x ~ tt ++ Œî2) Œì t -&gt;
x `notin` FV term ktyp t -&gt; ok_term (Œî1 ++ Œî2) Œì t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk142">introv Hok Hfresh.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hok</var><span class="hyp-type"><b>: </b><span>ok_term (Œî1 ++ x ~ tt ++ Œî2) Œì t</span></span></span><br><span><var>Hfresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_term (Œî1 ++ Œî2) Œì t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk143"><span class="nb">unfold</span> ok_term <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hok</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2)) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</span></span></span><br><span><var>Hfresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset (Œî1 ++ Œî2)) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk144"><span class="nb">intuition</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hfresh</var><span class="hyp-type"><b>: </b><span>x `<span class="kr">in</span>` FV term ktyp t -&gt; <span class="kt">False</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset (Œî1 ++ Œî2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> (scoped_stren_mid term); <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Substitution *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk145"><span class="kn">Lemma</span> <span class="nf">ok_term_sub_delta</span> : <span class="kr">forall</span> <span class="nv">Œî1</span> <span class="nv">Œî2</span> <span class="nv">x</span> <span class="nv">œÑ</span> <span class="nv">Œì</span> <span class="nv">t</span>,
    ok_term (Œî1 ++ x ~ tt ++ Œî2) Œì t -&gt;
    ok_type (Œî1 ++ Œî2) œÑ -&gt;
    ok_term (Œî1 ++ Œî2) (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì) (<span class="nb">subst</span> term ktyp x œÑ t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN)
  (<span class="nv">Œì</span> : type_ctx) (<span class="nv">t</span> : term LN),
ok_term (Œî1 ++ x ~ tt ++ Œî2) Œì t -&gt;
ok_type (Œî1 ++ Œî2) œÑ -&gt;
ok_term (Œî1 ++ Œî2) (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)
  (<span class="nb">subst</span> term ktyp x œÑ t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk146"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî1</span> <span class="nv">Œî2</span> : list (atom * unit)) <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN)
  (<span class="nv">Œì</span> : type_ctx) (<span class="nv">t</span> : term LN),
ok_term (Œî1 ++ x ~ tt ++ Œî2) Œì t -&gt;
ok_type (Œî1 ++ Œî2) œÑ -&gt;
ok_term (Œî1 ++ Œî2) (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)
  (<span class="nb">subst</span> term ktyp x œÑ t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk147">introv Hokt HokœÑ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hokt</var><span class="hyp-type"><b>: </b><span>ok_term (Œî1 ++ x ~ tt ++ Œî2) Œì t</span></span></span><br><span><var>HokœÑ</var><span class="hyp-type"><b>: </b><span>ok_type (Œî1 ++ Œî2) œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_term (Œî1 ++ Œî2) (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)
  (<span class="nb">subst</span> term ktyp x œÑ t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk148"><span class="nb">unfold</span> ok_term, ok_type <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hokt</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t
  (domset (Œî1 ++ x ~ tt ++ Œî2)) /\
scoped term ktrm t (domset Œì) /\
LC term ktrm t /\ LC term ktyp t</span></span></span><br><span><var>HokœÑ</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2)) /\
LC typ ktyp œÑ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp (<span class="nb">subst</span> term ktyp x œÑ t)
  (domset (Œî1 ++ Œî2)) /\
scoped term ktrm (<span class="nb">subst</span> term ktyp x œÑ t)
  (domset (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì)) /\
LC term ktrm (<span class="nb">subst</span> term ktyp x œÑ t) /\
LC term ktyp (<span class="nb">subst</span> term ktyp x œÑ t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk149"><span class="nb">intuition</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp (<span class="nb">subst</span> term ktyp x œÑ t)
  (domset (Œî1 ++ Œî2))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk14a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk14a"><hr></label><div class="goal-conclusion">scoped term ktrm (<span class="nb">subst</span> term ktyp x œÑ t)
  (domset (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì))</div></blockquote><input class="alectryon-extra-goal-toggle" id="contexts-v-chk14b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk14b"><hr></label><div class="goal-conclusion">LC term ktrm (<span class="nb">subst</span> term ktyp x œÑ t)</div></blockquote><input class="alectryon-extra-goal-toggle" id="contexts-v-chk14c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk14c"><hr></label><div class="goal-conclusion">LC term ktyp (<span class="nb">subst</span> term ktyp x œÑ t)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk14d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp (<span class="nb">subst</span> term ktyp x œÑ t)
  (domset (Œî1 ++ Œî2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> (scoped_sub_eq_mid term); <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk14e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktrm (<span class="nb">subst</span> term ktyp x œÑ t)
  (domset (envmap (<span class="nb">subst</span> typ ktyp x œÑ) Œì))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk14f"><span class="nb">apply</span> scoped_envmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktrm (<span class="nb">subst</span> term ktyp x œÑ t) (domset Œì)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk150"><span class="nb">eapply</span> (scoped_sub_neq term); <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ktrm &lt;&gt; ktyp</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk151" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk151"><hr></label><div class="goal-conclusion">scoped (SystemF ktyp) ktrm œÑ (domset Œì)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk152">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ktrm &lt;&gt; ktyp</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">discriminate</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk153">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped (SystemF ktyp) ktrm œÑ (domset Œì)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk154"><span class="nb">unfold</span> scoped.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV (SystemF ktyp) ktrm œÑ ‚äÜ domset Œì</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk155"><span class="nb">rewrite</span> FV_trm_type_empty.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">‚àÖ ‚äÜ domset Œì</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">fsetdec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk156">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC term ktrm (<span class="nb">subst</span> term ktyp x œÑ t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk157"><span class="nb">eapply</span> (subst_lc_neq term); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ktyp &lt;&gt; ktrm</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk158" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk158"><hr></label><div class="goal-conclusion">LC (SystemF ktyp) ktrm œÑ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk159">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ktyp &lt;&gt; ktrm</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">discriminate</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk15a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC (SystemF ktyp) ktrm œÑ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> LC_typ_trm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk15b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî1, Œî2</var><span class="hyp-type"><b>: </b><span>list (atom * unit)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>Œì</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset (Œî1 ++ x ~ tt ++ Œî2))</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped typ ktyp œÑ (domset (Œî1 ++ Œî2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC typ ktyp œÑ</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset Œì)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC term ktyp (<span class="nb">subst</span> term ktyp x œÑ t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> (subst_lc_eq term); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Structural properties of &lt;&lt;ok_term Œî Œì t&gt;&gt; in &lt;&lt;Œì&gt;&gt; *)</span>
<span class="sd">(******************************************************************************)</span>

<span class="sd">(** *** Permutation *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk15c"><span class="kn">Lemma</span> <span class="nf">ok_term_perm_gamma</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span> <span class="nv">t</span>,
    Permutation Œì1 Œì2 -&gt;
    ok_term Œî Œì1 t &lt;-&gt;
    ok_term Œî Œì2 t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN))
  (<span class="nv">t</span> : term LN),
Permutation Œì1 Œì2 -&gt; ok_term Œî Œì1 t &lt;-&gt; ok_term Œî Œì2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk15d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN))
  (<span class="nv">t</span> : term LN),
Permutation Œì1 Œì2 -&gt; ok_term Œî Œì1 t &lt;-&gt; ok_term Œî Œì2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk15e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_term Œî Œì1 t &lt;-&gt; ok_term Œî Œì2 t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk15f"><span class="nb">unfold</span> ok_term.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset Œì1) /\
LC term ktrm t /\ LC term ktyp t &lt;-&gt;
scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset Œì2) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk160"><span class="nb">pose</span> (lemma := scoped_perm_iff term (ktrm : K)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Permutation Œì1 Œì2</span></span></span><br><span><var>lemma</var><span><span class="hyp-body"><b>:= </b><span>scoped_perm_iff term (ktrm : K)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">t</span> : term LN) (<span class="nv">X</span> : <span class="kt">Type</span>)
  (<span class="nv">Œ≥1</span> <span class="nv">Œ≥2</span> : alist X),
Permutation Œ≥1 Œ≥2 -&gt;
scoped term (ktrm : K) t (domset Œ≥1) &lt;-&gt;
scoped term (ktrm : K) t (domset Œ≥2)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset Œì1) /\
LC term ktrm t /\ LC term ktyp t &lt;-&gt;
scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset Œì2) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> lemma; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Weakening *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk161"><span class="kn">Lemma</span> <span class="nf">ok_term_weak_gamma_r</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span> <span class="nv">t</span>,
    ok_term Œî Œì1 t -&gt;
    ok_term Œî (Œì1 ++ Œì2) t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> : type_ctx)
  (<span class="nv">Œì2</span> : list (atom * typ LN)) (<span class="nv">t</span> : term LN),
ok_term Œî Œì1 t -&gt; ok_term Œî (Œì1 ++ Œì2) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk162"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> : type_ctx)
  (<span class="nv">Œì2</span> : list (atom * typ LN)) (<span class="nv">t</span> : term LN),
ok_term Œî Œì1 t -&gt; ok_term Œî (Œì1 ++ Œì2) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk163"><span class="nb">unfold</span> ok_term.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> : type_ctx)
  (<span class="nv">Œì2</span> : list (atom * typ LN)) (<span class="nv">t</span> : term LN),
scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset Œì1) /\
LC term ktrm t /\ LC term ktyp t -&gt;
scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset (Œì1 ++ Œì2)) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk164"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset Œì1) /\
LC term ktrm t /\ LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset (Œì1 ++ Œì2)) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span> (<span class="nb">eauto using</span> (scoped_weak_l term)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk165"><span class="kn">Lemma</span> <span class="nf">ok_term_weak_gamma_l</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span> <span class="nv">t</span>,
    ok_term Œî Œì2 t -&gt;
    ok_term Œî (Œì1 ++ Œì2) t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> : list (atom * typ LN))
  (<span class="nv">Œì2</span> : type_ctx) (<span class="nv">t</span> : term LN),
ok_term Œî Œì2 t -&gt; ok_term Œî (Œì1 ++ Œì2) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk166"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> : list (atom * typ LN))
  (<span class="nv">Œì2</span> : type_ctx) (<span class="nv">t</span> : term LN),
ok_term Œî Œì2 t -&gt; ok_term Œî (Œì1 ++ Œì2) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk167"><span class="nb">unfold</span> ok_term.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> : list (atom * typ LN))
  (<span class="nv">Œì2</span> : type_ctx) (<span class="nv">t</span> : term LN),
scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset Œì2) /\
LC term ktrm t /\ LC term ktyp t -&gt;
scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset (Œì1 ++ Œì2)) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk168"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>Œì2</var><span class="hyp-type"><b>: </b><span>type_ctx</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset Œì2) /\
LC term ktrm t /\ LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset (Œì1 ++ Œì2)) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span> (<span class="nb">eauto using</span> (scoped_weak_r term)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Strengthening  *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk169"><span class="kn">Lemma</span> <span class="nf">ok_term_stren_gamma</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span> <span class="nv">x</span> <span class="nv">œÑ</span> <span class="nv">t</span>,
    ok_term Œî (Œì1 ++ x ~ œÑ ++ Œì2) t -&gt;
    ~ x `<span class="kr">in</span>` (FV term ktrm t) -&gt;
    ok_term Œî (Œì1 ++ Œì2) t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)) 
  <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN) (<span class="nv">t</span> : term LN),
ok_term Œî (Œì1 ++ x ~ œÑ ++ Œì2) t -&gt;
x `notin` FV term ktrm t -&gt; ok_term Œî (Œì1 ++ Œì2) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk16a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)) 
  <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN) (<span class="nv">t</span> : term LN),
ok_term Œî (Œì1 ++ x ~ œÑ ++ Œì2) t -&gt;
x `notin` FV term ktrm t -&gt; ok_term Œî (Œì1 ++ Œì2) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk16b">introv Hok Hfresh.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hok</var><span class="hyp-type"><b>: </b><span>ok_term Œî (Œì1 ++ x ~ œÑ ++ Œì2) t</span></span></span><br><span><var>Hfresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV term ktrm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_term Œî (Œì1 ++ Œì2) t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk16c"><span class="nb">unfold</span> ok_term <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hok</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2)) /\
LC term ktrm t /\ LC term ktyp t</span></span></span><br><span><var>Hfresh</var><span class="hyp-type"><b>: </b><span>x `notin` FV term ktrm t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset (Œì1 ++ Œì2)) /\
LC term ktrm t /\ LC term ktyp t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk16d"><span class="nb">intuition</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hfresh</var><span class="hyp-type"><b>: </b><span>x `<span class="kr">in</span>` FV term ktrm t -&gt; <span class="kt">False</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktrm t (domset (Œì1 ++ Œì2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> (scoped_stren_mid term); <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** *** Substitution *)</span>
<span class="sd">(******************************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk16e"><span class="kn">Lemma</span> <span class="nf">ok_term_sub_gamma</span> : <span class="kr">forall</span> <span class="nv">Œî</span> <span class="nv">Œì1</span> <span class="nv">Œì2</span> <span class="nv">x</span> <span class="nv">œÑ</span> <span class="nv">u</span> <span class="nv">t</span>,
    ok_term Œî (Œì1 ++ x ~ œÑ ++ Œì2) t -&gt;
    ok_term Œî (Œì1 ++ Œì2) u -&gt;
    ok_term Œî (Œì1 ++ Œì2) (<span class="nb">subst</span> term ktrm x u t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)) 
  <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN) (<span class="nv">u</span> <span class="nv">t</span> : term LN),
ok_term Œî (Œì1 ++ x ~ œÑ ++ Œì2) t -&gt;
ok_term Œî (Œì1 ++ Œì2) u -&gt;
ok_term Œî (Œì1 ++ Œì2) (<span class="nb">subst</span> term ktrm x u t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk16f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Œî</span> : kind_ctx) (<span class="nv">Œì1</span> <span class="nv">Œì2</span> : list (atom * typ LN)) 
  <span class="nv">x</span> (<span class="nv">œÑ</span> : typ LN) (<span class="nv">u</span> <span class="nv">t</span> : term LN),
ok_term Œî (Œì1 ++ x ~ œÑ ++ Œì2) t -&gt;
ok_term Œî (Œì1 ++ Œì2) u -&gt;
ok_term Œî (Œì1 ++ Œì2) (<span class="nb">subst</span> term ktrm x u t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk170">introv Hokt Hoku.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hokt</var><span class="hyp-type"><b>: </b><span>ok_term Œî (Œì1 ++ x ~ œÑ ++ Œì2) t</span></span></span><br><span><var>Hoku</var><span class="hyp-type"><b>: </b><span>ok_term Œî (Œì1 ++ Œì2) u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ok_term Œî (Œì1 ++ Œì2) (<span class="nb">subst</span> term ktrm x u t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk171"><span class="nb">unfold</span> ok_term, ok_type <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>Hokt</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî) /\
scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2)) /\
LC term ktrm t /\ LC term ktyp t</span></span></span><br><span><var>Hoku</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî) /\
scoped term ktrm u (domset (Œì1 ++ Œì2)) /\
LC term ktrm u /\ LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp (<span class="nb">subst</span> term ktrm x u t) (domset Œî) /\
scoped term ktrm (<span class="nb">subst</span> term ktrm x u t)
  (domset (Œì1 ++ Œì2)) /\
LC term ktrm (<span class="nb">subst</span> term ktrm x u t) /\
LC term ktyp (<span class="nb">subst</span> term ktrm x u t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk172"><span class="nb">intuition</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp (<span class="nb">subst</span> term ktrm x u t) (domset Œî)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="contexts-v-chk173" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk173"><hr></label><div class="goal-conclusion">scoped term ktrm (<span class="nb">subst</span> term ktrm x u t)
  (domset (Œì1 ++ Œì2))</div></blockquote><input class="alectryon-extra-goal-toggle" id="contexts-v-chk174" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk174"><hr></label><div class="goal-conclusion">LC term ktrm (<span class="nb">subst</span> term ktrm x u t)</div></blockquote><input class="alectryon-extra-goal-toggle" id="contexts-v-chk175" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><label class="goal-separator" for="contexts-v-chk175"><hr></label><div class="goal-conclusion">LC term ktyp (<span class="nb">subst</span> term ktrm x u t)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk176">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktyp (<span class="nb">subst</span> term ktrm x u t) (domset Œî)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk177"><span class="nb">eapply</span> (scoped_sub_neq term); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ktyp &lt;&gt; ktrm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk178">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ktyp &lt;&gt; ktrm</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">discriminate</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk179">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">scoped term ktrm (<span class="nb">subst</span> term ktrm x u t)
  (domset (Œì1 ++ Œì2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> (scoped_sub_eq_mid term); <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk17a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC term ktrm (<span class="nb">subst</span> term ktrm x u t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> (subst_lc_eq term); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk17b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LC term ktyp (<span class="nb">subst</span> term ktrm x u t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk17c"><span class="nb">eapply</span> (subst_lc_neq term); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ktrm &lt;&gt; ktyp</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="contexts-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="contexts-v-chk17d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Œî</var><span class="hyp-type"><b>: </b><span>kind_ctx</span></span></span><br><span><var>Œì1, Œì2</var><span class="hyp-type"><b>: </b><span>list (atom * typ LN)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>œÑ</var><span class="hyp-type"><b>: </b><span>typ LN</span></span></span><br><span><var>u, t</var><span class="hyp-type"><b>: </b><span>term LN</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>scoped term ktyp t (domset Œî)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>scoped term ktyp u (domset Œî)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>scoped term ktrm t (domset (Œì1 ++ x ~ œÑ ++ Œì2))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>scoped term ktrm u (domset (Œì1 ++ Œì2))</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>LC term ktrm t</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>LC term ktyp t</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>LC term ktrm u</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>LC term ktyp u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ktrm &lt;&gt; ktyp</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">discriminate</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

<span class="c">(*</span>
<span class="c">(** ** Example: Typing the polymorphic identity *)</span>
<span class="c">(******************************************************************************)</span>
<span class="c">Example polymorphic_identity_function :</span>
<span class="c">  (nil ; nil ‚ä¢ (Œõ Œª 0 ‚ãÖ 0) : (‚àÄ 0 ‚üπ 0)).</span>
<span class="c">Proof.</span>
<span class="c">  apply j_univ with (L := ‚àÖ).</span>
<span class="c">  introv _.</span>
<span class="c">  cbn.</span>
<span class="c">  change (pure (F := fun A =&gt; A) ?x) with x.</span>
<span class="c">  apply j_abs with (L := ‚àÖ).</span>
<span class="c">  introv _.</span>
<span class="c">  apply j_var.</span>
<span class="c">  - auto with tea_alist.</span>
<span class="c">  - simpl_alist.</span>
<span class="c">    apply ok_tmv_tm_one.</span>
<span class="c">      unfold ok_type, scoped_env, scoped.</span>
<span class="c">      autorewrite with sysf_rw tea_rw_dom.</span>
<span class="c">      split; [fsetdec | apply lc_ty_ty_Fr].</span>
<span class="c">    + simpl_alist. now autorewrite with tea_list.</span>
<span class="c">Qed.</span>

<span class="c">*)</span></span></pre>
</div>
</div></body>
</html>
