<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.21.2: https://docutils.sourceforge.io/" />
<title>LN.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.16.0+0.16.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves.Theory <span class="kn">Require Export</span>
  DecoratedTraversableMonad.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves.Backends.LN <span class="kn">Require Export</span>
  Atom AtomSet AssocList LN Simplification.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves.Simplification <span class="kn">Require Export</span>
  Simplification.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">Notations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Categorical.Applicative.Notations. <span class="c">(* &lt;‚ãÜ&gt; *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Kleisli.Comonad.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Export Kleisli.DecoratedFunctor.Notations. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Kleisli.DecoratedMonad.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Kleisli.TraversableFunctor.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Kleisli.TraversableMonad.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Kleisli.DecoratedTraversableFunctor.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Kleisli.DecoratedTraversableMonad.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Kleisli.DecoratedContainerFunctor.Notations. <span class="c">(* ‚ààd *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Export Kleisli.DecoratedContainerMonad.Notations. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Categorical.ContainerFunctor.Notations. <span class="c">(* ‚àà *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Misc.Product.Notations. <span class="c">(* √ó *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Monoid.Notations. <span class="c">(* ∆µ and ‚óè *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> Misc.Subset.Notations. <span class="c">(* ‚à™ *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> List.ListNotations. <span class="c">(* [] :: *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="c">(* Export LN.OpNotations. (* operations *) *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> LN.AtomSet.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Export</span> LN.AssocList.Notations. <span class="c">(* one, ~ *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Notations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module Type</span> <span class="nf">SyntaxSIGHetero</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> (<span class="nv">iterm</span> <span class="nv">oterm</span> : <span class="kt">Type</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> (<span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">ret_inst</span>: Return T.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">binddt_T_inst</span>: Binddt nat T T.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">binddt_U_inst</span>: Binddt nat T U.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">module_inst</span>:
    DecoratedTraversableRightModule nat T U
      (Return_inst := ret_inst)
      (Bindd_T_inst := binddt_T_inst)
      (Bindd_U_inst := binddt_U_inst)
      (unit := Monoid_unit_zero)
      (op := Monoid_op_plus).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_T</span>:  iterm -&gt; T LN.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_T_inv</span>: T LN -&gt; iterm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_U</span>: oterm -&gt; U LN.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_U_inv</span>: U LN -&gt; oterm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_T_iso</span> : <span class="kr">forall</span> (<span class="nv">t</span> : iterm), to_T_inv (to_T t) = t.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_U_iso</span> : <span class="kr">forall</span> (<span class="nv">t</span> : oterm), to_U_inv (to_U t) = t.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_T_iso_inv</span> : <span class="kr">forall</span> (<span class="nv">t</span> : T LN), to_T (to_T_inv t) = t.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_U_iso_inv</span> : <span class="kr">forall</span> (<span class="nv">t</span> : U LN), to_U (to_U_inv t) = t.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">from_atom</span>: atom -&gt; iterm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">from_ix</span>: nat -&gt; iterm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">from_atom_Ret</span>:
    from_atom = to_T_inv ‚óã @ret T ret_inst LN ‚óã Fr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">from_ix_Ret</span>:
    from_ix = to_T_inv ‚óã @ret T ret_inst LN ‚óã Bd.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">SyntaxSIGHetero</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module Type</span> <span class="nf">TheorySIG</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameters</span> <span class="nv">iterm</span> <span class="nv">oterm</span> : <span class="kt">Type</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameters</span>
    (<span class="nv">open</span> : iterm -&gt; oterm -&gt; oterm)
    (<span class="nv">close</span> : atom -&gt; oterm -&gt; oterm)
    (<span class="nv">subst</span> : atom -&gt; iterm -&gt; oterm -&gt; oterm)
    (<span class="nv">LCb</span> : oterm -&gt; bool).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">TheorySIG</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">MakeTheory_Hetero</span>
  (Syntax: SyntaxSIGHetero) &lt;: TheorySIG.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Syntax.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">iterm</span> := Syntax.iterm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">oterm</span> := Syntax.oterm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Syntax</span>.ret_inst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Syntax</span>.binddt_T_inst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Syntax</span>.binddt_U_inst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Syntax</span>.module_inst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Map_Binddt</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Mapd_Binddt</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Traverse_Binddt</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Mapdt_Binddt</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Bind_Binddt</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Bindt_Binddt</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">Bindd_Binddt</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">ToBatch_Traverse</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Existing Instance</span> <span class="nf">ToSubset_Traverse</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> AtomSet.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Coercion</span> <span class="nf">to_T</span> : Syntax.iterm &gt;-&gt; T.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Coercion</span> <span class="nf">to_U</span> : Syntax.oterm &gt;-&gt; U.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">open</span> : iterm -&gt; oterm -&gt; oterm :=
    <span class="kr">fun</span> <span class="nv">t</span> <span class="nv">u</span> =&gt; to_U_inv (open (T := T) (U := U) t u).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">close</span> : atom -&gt; oterm -&gt; oterm :=
    <span class="kr">fun</span> <span class="nv">x</span> <span class="nv">u</span> =&gt; to_U_inv (close (T := U) x u).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">subst</span> : atom -&gt; iterm -&gt; oterm -&gt; oterm :=
    <span class="kr">fun</span> <span class="nv">x</span> <span class="nv">t</span> <span class="nv">u</span> =&gt; to_U_inv (<span class="nb">subst</span> (T := T) (U := U) x t u).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">free</span> : oterm -&gt; list atom :=
    <span class="kr">fun</span> <span class="nv">u</span> =&gt; free (T := U) u.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">FV</span> : oterm -&gt; AtomSet.t :=
    <span class="kr">fun</span> <span class="nv">u</span> =&gt; FV (T := U) u.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">LC</span> : oterm -&gt; <span class="kt">Prop</span> :=
    <span class="kr">fun</span> <span class="nv">u</span> =&gt; LC (U := U) u.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">LCb</span> : oterm -&gt; bool :=
    <span class="kr">fun</span> <span class="nv">u</span> =&gt; LCb (U := U) u.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">scoped</span> : oterm -&gt; AtomSet.t -&gt; <span class="kt">Prop</span> :=
    <span class="kr">fun</span> <span class="nv">t</span> <span class="nv">Œ≥</span> =&gt; FV t ‚äÜ Œ≥.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">subst_i</span> : atom -&gt; iterm -&gt; iterm -&gt; iterm :=
    <span class="kr">fun</span> <span class="nv">x</span> <span class="nv">t</span> <span class="nv">u</span> =&gt; to_T_inv (LN.<span class="nb">subst</span> (T := T) (U := T) x t u).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">FV_i</span> : iterm -&gt; AtomSet.t :=
    <span class="kr">fun</span> <span class="nv">t</span> =&gt; LN.FV (T := T) t.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">LC_i</span> : iterm -&gt; <span class="kt">Prop</span> :=
    <span class="kr">fun</span> <span class="nv">u</span> =&gt; LN.LC (U := T) u.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">Notations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;t &#39;{ x ~&gt; u }&quot;</span> := (<span class="nb">subst</span> x u t) (<span class="kn">at level</span> <span class="mi">35</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;t &#39;( u )&quot;</span> := (open u t) (<span class="kn">at level</span> <span class="mi">35</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;&#39;[ x ] t&quot;</span> := (close x t) (<span class="kn">at level</span> <span class="mi">35</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Notations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Coercion</span> <span class="nf">from_atom</span> : atom &gt;-&gt; Syntax.iterm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Coercion</span> <span class="nf">from_ix</span> : nat &gt;-&gt; Syntax.iterm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Types</span> (<span class="nv">x</span> <span class="nv">y</span>: atom) (<span class="nv">t</span>: iterm) (<span class="nv">u</span>: oterm).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk0"><span class="kn">Theorem</span> <span class="nf">open_lc</span>: <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span>,
    LC u -&gt; u &#39;(t) = u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span>, LC u -&gt; u &#39;( t) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span>, LC u -&gt; u &#39;( t) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u &#39;( t) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3"><span class="nb">unfold</span> LC.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u &#39;( t) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4"><span class="nb">unfold</span> open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.open t u) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5"><span class="nb">rewrite</span> open_lc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv u = u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC u</span></span></span><br></div><label class="goal-separator" for="ln-v-chk6"><hr></label><div class="goal-conclusion">LN.LC u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv u = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> to_U_iso.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.LC u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk9"><span class="kn">Theorem</span> <span class="nf">FV_subst_upper</span>: <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">t</span> <span class="nv">u</span>,
      FV (u &#39;{x ~&gt; t}) ‚äÜ FV u \\ {{x}} ‚à™ FV_i t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">t</span> <span class="nv">u</span>,
FV (u &#39;{ x ~&gt; t}) ‚äÜ FV u \\ {{x}} ‚à™ FV_i t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chka"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">t</span> <span class="nv">u</span>,
FV (u &#39;{ x ~&gt; t}) ‚äÜ FV u \\ {{x}} ‚à™ FV_i t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkb"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV (u &#39;{ x ~&gt; t}) ‚äÜ FV u \\ {{x}} ‚à™ FV_i t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkc"><span class="nb">unfold</span> FV, FV_i, <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV (to_U_inv (LN.<span class="nb">subst</span> x t u))
‚äÜ LN.FV u \\ {{x}} ‚à™ LN.FV t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkd"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV (LN.<span class="nb">subst</span> x t u) ‚äÜ LN.FV u \\ {{x}} ‚à™ LN.FV t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chke"><span class="nb">rewrite</span> FV_subst_upper.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV u \\ {{x}} ‚à™ LN.FV t
‚äÜ LN.FV u \\ {{x}} ‚à™ LN.FV t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chkf"><span class="kn">Theorem</span> <span class="nf">FV_subst_lower</span>: <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">x</span>,
      FV u \\ {{ x }} ‚äÜ FV (u &#39;{x ~&gt; t}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">x</span>, FV u \\ {{x}} ‚äÜ FV (u &#39;{ x ~&gt; t})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk10"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span> <span class="nv">x</span>, FV u \\ {{x}} ‚äÜ FV (u &#39;{ x ~&gt; t})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk11"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV u \\ {{x}} ‚äÜ FV (u &#39;{ x ~&gt; t})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk12"><span class="nb">unfold</span> FV, FV_i, <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV u \\ {{x}} ‚äÜ LN.FV (to_U_inv (LN.<span class="nb">subst</span> x t u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk13"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV u \\ {{x}} ‚äÜ LN.FV (LN.<span class="nb">subst</span> x t u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> FV_subst_lower.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk14"><span class="kn">Theorem</span> <span class="nf">close_open</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">u</span>,
      ~ x `<span class="kr">in</span>` FV u -&gt;
      &#39;[x] (u &#39;(from_atom x)) = u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">u</span>, x `notin` FV u -&gt; &#39;[ x] (u &#39;( x)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk15"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">u</span>, x `notin` FV u -&gt; &#39;[ x] (u &#39;( x)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk16"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">&#39;[ x] (u &#39;( x)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk17"><span class="nb">unfold</span> close, open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.close x (to_U_inv (LN.open x u))) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk18"><span class="nb">rewrite</span> from_atom_Ret.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv
  (LN.close x
     (to_U_inv (LN.open (to_T_inv (ret (Fr x))) u))) =
u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk19"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv
  (LN.close x (LN.open (to_T_inv (ret (Fr x))) u)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1a"><span class="nb">rewrite</span> to_T_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.close x (LN.open (ret (Fr x)) u)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1b"><span class="nb">rewrite</span> close_open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv u = u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk1c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><label class="goal-separator" for="ln-v-chk1c"><hr></label><div class="goal-conclusion">~ element_of x (LN.free u)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv u = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1e"><span class="nb">rewrite</span> to_U_iso.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk1f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ element_of x (LN.free u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk20"><span class="nb">rewrite</span> free_iff_FV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `notin` LN.FV u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk21"><span class="kn">Theorem</span> <span class="nf">open_close</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">u</span>,
      (&#39;[x] u) &#39;(x) = u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">u</span>, (&#39;[ x] u) &#39;( x) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk22"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">u</span>, (&#39;[ x] u) &#39;( x) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk23"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(&#39;[ x] u) &#39;( x) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk24"><span class="nb">unfold</span> close, open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.open x (to_U_inv (LN.close x u))) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk25"><span class="nb">rewrite</span> from_atom_Ret.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv
  (LN.open (to_T_inv (ret (Fr x)))
     (to_U_inv (LN.close x u))) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk26"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv
  (LN.open (to_T_inv (ret (Fr x))) (LN.close x u)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk27"><span class="nb">rewrite</span> to_T_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.open (ret (Fr x)) (LN.close x u)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk28"><span class="nb">rewrite</span> open_close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv u = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk29"><span class="nb">rewrite</span> to_U_iso.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2a"><span class="kn">Theorem</span> <span class="nf">subst_open_var</span> : <span class="kr">forall</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
      x &lt;&gt; y -&gt;
      LC_i t -&gt;
      u &#39;(from_atom y) &#39;{x ~&gt; t} =
        u &#39;{x ~&gt; t} &#39;(from_atom y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
x &lt;&gt; y -&gt;
LC_i t -&gt; (u &#39;( y)) &#39;{ x ~&gt; t} = (u &#39;{ x ~&gt; t}) &#39;( y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span> <span class="nv">y</span>,
x &lt;&gt; y -&gt;
LC_i t -&gt; (u &#39;( y)) &#39;{ x ~&gt; t} = (u &#39;{ x ~&gt; t}) &#39;( y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2c"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(u &#39;( y)) &#39;{ x ~&gt; t} = (u &#39;{ x ~&gt; t}) &#39;( y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2d"><span class="nb">unfold</span> close, open, <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> x t (to_U_inv (LN.open y u))) =
to_U_inv (LN.open y (to_U_inv (LN.<span class="nb">subst</span> x t u)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2e"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> x t (LN.open y u)) =
to_U_inv (LN.open y (to_U_inv (LN.<span class="nb">subst</span> x t u)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk2f"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> x t (LN.open y u)) =
to_U_inv (LN.open y (LN.<span class="nb">subst</span> x t u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk30"><span class="nb">rewrite</span> from_atom_Ret.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv
  (LN.<span class="nb">subst</span> x t (LN.open (to_T_inv (ret (Fr y))) u)) =
to_U_inv
  (LN.open (to_T_inv (ret (Fr y))) (LN.<span class="nb">subst</span> x t u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk31"><span class="nb">rewrite</span> to_T_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> x t (LN.open (ret (Fr y)) u)) =
to_U_inv (LN.open (ret (Fr y)) (LN.<span class="nb">subst</span> x t u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk32"><span class="nb">rewrite</span> subst_open_var.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.open (ret (Fr y)) (LN.<span class="nb">subst</span> x t u)) =
to_U_inv (LN.open (ret (Fr y)) (LN.<span class="nb">subst</span> x t u))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk33" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><label class="goal-separator" for="ln-v-chk33"><hr></label><div class="goal-conclusion">x &lt;&gt; y</div></blockquote><input class="alectryon-extra-goal-toggle" id="ln-v-chk34" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><label class="goal-separator" for="ln-v-chk34"><hr></label><div class="goal-conclusion">LN.LC t</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk35">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.open (ret (Fr y)) (LN.<span class="nb">subst</span> x t u)) =
to_U_inv (LN.open (ret (Fr y)) (LN.<span class="nb">subst</span> x t u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk36">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &lt;&gt; y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk37">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x &lt;&gt; y</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>LC_i t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.LC t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk38"><span class="kn">Theorem</span> <span class="nf">open_spec</span> : <span class="kr">forall</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
      ~ x `<span class="kr">in</span>` FV u -&gt;
      u &#39;(t) = u &#39;(from_atom x) &#39;{x ~&gt; t}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
x `notin` FV u -&gt; u &#39;( t) = (u &#39;( x)) &#39;{ x ~&gt; t}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk39"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">t</span> <span class="nv">x</span>,
x `notin` FV u -&gt; u &#39;( t) = (u &#39;( x)) &#39;{ x ~&gt; t}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u &#39;( t) = (u &#39;( x)) &#39;{ x ~&gt; t}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3b"><span class="nb">unfold</span> close, open, <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.open t u) =
to_U_inv (LN.<span class="nb">subst</span> x t (to_U_inv (LN.open x u)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3c"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.open t u) =
to_U_inv (LN.<span class="nb">subst</span> x t (LN.open x u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3d"><span class="nb">erewrite</span> open_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> <span class="nl">?x</span> t (LN.open (ret (Fr <span class="nl">?x</span>)) u)) =
to_U_inv (LN.<span class="nb">subst</span> x t (LN.open x u))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk3e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><label class="goal-separator" for="ln-v-chk3e"><hr></label><div class="goal-conclusion"><span class="nl">?x</span> `notin` LN.FV u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk3f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> <span class="nl">?x</span> t (LN.open (ret (Fr <span class="nl">?x</span>)) u)) =
to_U_inv (LN.<span class="nb">subst</span> x t (LN.open x u))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk40"><span class="nb">rewrite</span> from_atom_Ret.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> <span class="nl">?x</span> t (LN.open (ret (Fr <span class="nl">?x</span>)) u)) =
to_U_inv
  (LN.<span class="nb">subst</span> x t (LN.open (to_T_inv (ret (Fr x))) u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk41"><span class="nb">rewrite</span> to_T_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> <span class="nl">?x</span> t (LN.open (ret (Fr <span class="nl">?x</span>)) u)) =
to_U_inv (LN.<span class="nb">subst</span> x t (LN.open (ret (Fr x)) u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk42">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x `notin` FV u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `notin` LN.FV u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk43"><span class="kn">Theorem</span> <span class="nf">subst_open</span> :  <span class="kr">forall</span> <span class="nv">t1</span> <span class="nv">t2</span> <span class="nv">u</span> <span class="nv">x</span>,
      LC_i t2 -&gt;
      u &#39;(t1) &#39;{x ~&gt; t2} =
        open (subst_i x t2 t1) (u &#39;{x ~&gt; t2}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t1</span> <span class="nv">t2</span> <span class="nv">u</span> <span class="nv">x</span>,
LC_i t2 -&gt;
(u &#39;( t1)) &#39;{ x ~&gt; t2} =
(u &#39;{ x ~&gt; t2}) &#39;( subst_i x t2 t1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk44"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t1</span> <span class="nv">t2</span> <span class="nv">u</span> <span class="nv">x</span>,
LC_i t2 -&gt;
(u &#39;( t1)) &#39;{ x ~&gt; t2} =
(u &#39;{ x ~&gt; t2}) &#39;( subst_i x t2 t1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk45"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC_i t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(u &#39;( t1)) &#39;{ x ~&gt; t2} =
(u &#39;{ x ~&gt; t2}) &#39;( subst_i x t2 t1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk46"><span class="nb">unfold</span> close, open, <span class="nb">subst</span>, subst_i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC_i t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> x t2 (to_U_inv (LN.open t1 u))) =
to_U_inv
  (LN.open (to_T_inv (LN.<span class="nb">subst</span> x t2 t1))
     (to_U_inv (LN.<span class="nb">subst</span> x t2 u)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk47"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC_i t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv (LN.<span class="nb">subst</span> x t2 (LN.open t1 u)) =
to_U_inv
  (LN.open (to_T_inv (LN.<span class="nb">subst</span> x t2 t1))
     (to_U_inv (LN.<span class="nb">subst</span> x t2 u)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk48"><span class="nb">rewrite</span> subst_open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC_i t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv
  (LN.open (LN.<span class="nb">subst</span> x t2 t1) (LN.<span class="nb">subst</span> x t2 u)) =
to_U_inv
  (LN.open (to_T_inv (LN.<span class="nb">subst</span> x t2 t1))
     (to_U_inv (LN.<span class="nb">subst</span> x t2 u)))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ln-v-chk49" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC_i t2</span></span></span><br></div><label class="goal-separator" for="ln-v-chk49"><hr></label><div class="goal-conclusion">LN.LC t2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC_i t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv
  (LN.open (LN.<span class="nb">subst</span> x t2 t1) (LN.<span class="nb">subst</span> x t2 u)) =
to_U_inv
  (LN.open (to_T_inv (LN.<span class="nb">subst</span> x t2 t1))
     (to_U_inv (LN.<span class="nb">subst</span> x t2 u)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4b"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC_i t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv
  (LN.open (LN.<span class="nb">subst</span> x t2 t1) (LN.<span class="nb">subst</span> x t2 u)) =
to_U_inv
  (LN.open (to_T_inv (LN.<span class="nb">subst</span> x t2 t1))
     (LN.<span class="nb">subst</span> x t2 u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4c"><span class="nb">rewrite</span> to_T_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC_i t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to_U_inv
  (LN.open (LN.<span class="nb">subst</span> x t2 t1) (LN.<span class="nb">subst</span> x t2 u)) =
to_U_inv
  (LN.open (LN.<span class="nb">subst</span> x t2 t1) (LN.<span class="nb">subst</span> x t2 u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>LC_i t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.LC t2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4e"><span class="kn">Theorem</span> <span class="nf">FV_open_upper</span> : <span class="kr">forall</span> <span class="nv">u</span> <span class="nv">t</span>,
      FV (u &#39;(t)) ‚äÜ FV u ‚à™ FV_i t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">t</span>, FV (u &#39;( t)) ‚äÜ FV u ‚à™ FV_i t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk4f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">t</span>, FV (u &#39;( t)) ‚äÜ FV u ‚à™ FV_i t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk50"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV (u &#39;( t)) ‚äÜ FV u ‚à™ FV_i t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk51"><span class="nb">unfold</span> FV, open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV (to_U_inv (LN.open t u)) ‚äÜ LN.FV u ‚à™ FV_i t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk52"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV (LN.open t u) ‚äÜ LN.FV u ‚à™ FV_i t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk53"><span class="nb">rewrite</span> FV_open_upper.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV u ‚à™ LN.FV t ‚äÜ LN.FV u ‚à™ FV_i t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk54"><span class="kn">Theorem</span> <span class="nf">FV_open_lower</span> : <span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span>,
      FV u ‚äÜ FV (u &#39;(t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span>, FV u ‚äÜ FV (u &#39;( t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk55"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span>, FV u ‚äÜ FV (u &#39;( t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk56"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV u ‚äÜ FV (u &#39;( t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk57"><span class="nb">unfold</span> FV, open.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV u ‚äÜ LN.FV (to_U_inv (LN.open t u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk58"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV u ‚äÜ LN.FV (LN.open t u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk59"><span class="nb">rewrite</span> FV_open_lower.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>t</var><span class="hyp-type"><b>: </b><span>iterm</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV (LN.open <span class="nl">?Goal0</span> u) ‚äÜ LN.FV (LN.open t u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5a"><span class="kn">Theorem</span> <span class="nf">FV_close</span> : <span class="kr">forall</span> <span class="nv">u</span> <span class="nv">x</span>,
      FV (&#39;[x] u) [=] FV u \\ {{ x }}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">x</span>, FV (&#39;[ x] u) [=] FV u \\ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">x</span>, FV (&#39;[ x] u) [=] FV u \\ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5c"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FV (&#39;[ x] u) [=] FV u \\ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5d"><span class="nb">unfold</span> FV, close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV (to_U_inv (LN.close x u)) [=] LN.FV u \\ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5e"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV (LN.close x u) [=] LN.FV u \\ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk5f"><span class="nb">rewrite</span> FV_close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LN.FV u \\ {{x}} [=] LN.FV u \\ {{x}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk60"><span class="kn">Theorem</span> <span class="nf">nin_FV_close</span> : <span class="kr">forall</span> <span class="nv">u</span> <span class="nv">x</span>,
      ~ x `<span class="kr">in</span>` FV (&#39;[x] u).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">x</span>, x `notin` FV (&#39;[ x] u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk61"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">x</span>, x `notin` FV (&#39;[ x] u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk62"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `notin` FV (&#39;[ x] u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk63"><span class="nb">unfold</span> FV, close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `notin` LN.FV (to_U_inv (LN.close x u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk64"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x `notin` LN.FV (LN.close x u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> nin_FV_close.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk65"><span class="kn">Theorem</span> <span class="nf">FV_close1</span> : <span class="kr">forall</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
      y &lt;&gt; x -&gt;
      y `<span class="kr">in</span>` FV (&#39;[x] u) &lt;-&gt; y `<span class="kr">in</span>` FV u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
y &lt;&gt; x -&gt; y `<span class="kr">in</span>` FV (&#39;[ x] u) &lt;-&gt; y `<span class="kr">in</span>` FV u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk66"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">u</span> <span class="nv">x</span> <span class="nv">y</span>,
y &lt;&gt; x -&gt; y `<span class="kr">in</span>` FV (&#39;[ x] u) &lt;-&gt; y `<span class="kr">in</span>` FV u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk67"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y `<span class="kr">in</span>` FV (&#39;[ x] u) &lt;-&gt; y `<span class="kr">in</span>` FV u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk68"><span class="nb">unfold</span> close, FV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y `<span class="kr">in</span>` LN.FV (to_U_inv (LN.close x u)) &lt;-&gt;
y `<span class="kr">in</span>` LN.FV u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk69"><span class="nb">rewrite</span> to_U_iso_inv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y `<span class="kr">in</span>` LN.FV (LN.close x u) &lt;-&gt; y `<span class="kr">in</span>` LN.FV u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6a"><span class="nb">rewrite</span> &lt;- free_iff_FV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">element_of y (LN.free (LN.close x u)) &lt;-&gt;
y `<span class="kr">in</span>` LN.FV u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6b"><span class="nb">rewrite</span> in_free_close_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">element_of y (LN.free u) /\ x &lt;&gt; y &lt;-&gt; y `<span class="kr">in</span>` LN.FV u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ln-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="ln-v-chk6c"><span class="nb">rewrite</span> &lt;- free_iff_FV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>u</var><span class="hyp-type"><b>: </b><span>oterm</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>atom</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">element_of y (LN.free u) /\ x &lt;&gt; y &lt;-&gt;
element_of y (LN.free u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intuition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">MakeTheory_Hetero</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module Type</span> <span class="nf">SyntaxSIG</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> (<span class="nv">term</span> : <span class="kt">Type</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> (<span class="nv">T</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span>
    (<span class="nv">ret_inst</span> : Return T)
    (<span class="nv">binddt_inst</span> : Binddt nat T T)
    (<span class="nv">monad_inst</span> : DecoratedTraversableMonad nat T
              (unit := Monoid_unit_zero)
              (op := Monoid_op_plus)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_T</span>:  term -&gt; T LN.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_T_inv</span>: T LN -&gt; term.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_T_iso</span> : <span class="kr">forall</span> (<span class="nv">t</span> : term), to_T_inv (to_T t) = t.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">to_T_iso_inv</span> : <span class="kr">forall</span> (<span class="nv">t</span> : T LN), to_T (to_T_inv t) = t.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">from_atom</span>: atom -&gt; term.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">from_ix</span>: nat -&gt; term.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">from_atom_Ret</span>:
    from_atom = to_T_inv ‚óã @ret T ret_inst LN ‚óã Fr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameter</span> <span class="nv">from_ix_Ret</span>:
    from_ix = to_T_inv ‚óã @ret T ret_inst LN ‚óã Bd.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">SyntaxSIG</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">Adapter</span> (M1: SyntaxSIG) &lt;: SyntaxSIGHetero.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">iterm</span> := M1.term.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">oterm</span> := M1.term.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">T</span> := M1.T.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">U</span> := M1.T.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">ret_inst</span> := M1.ret_inst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">binddt_T_inst</span> := M1.binddt_inst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">binddt_U_inst</span> := M1.binddt_inst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">module_inst</span> :=
    @DecoratedTraversableRightModule_DecoratedTraversableMonad
      nat T _ _ M1.ret_inst M1.binddt_inst M1.monad_inst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_T</span> := M1.to_T.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_T_inv</span> := M1.to_T_inv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_T_iso</span> := M1.to_T_iso.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_T_iso_inv</span> := M1.to_T_iso_inv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_U</span> := M1.to_T.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_U_inv</span> := M1.to_T_inv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_U_iso</span> := M1.to_T_iso.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_U_iso_inv</span> := M1.to_T_iso_inv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">from_atom</span> := M1.from_atom.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">from_ix</span> := M1.from_ix.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">from_atom_Ret</span> := M1.from_atom_Ret.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">from_ix_Ret</span> := M1.from_ix_Ret.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Adapter</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">MakeTheory</span> (Syntax: SyntaxSIG) &lt;:
    (TheorySIG <span class="kr">with</span> <span class="kn">Definition</span> <span class="nf">iterm</span> := Syntax.term
     <span class="kr">with</span> <span class="kn">Definition</span> <span class="nf">oterm</span> := Syntax.term).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">Syntax_Hetero</span> &lt;: SyntaxSIGHetero
  := Adapter Syntax.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">Theory</span> &lt;:
    (TheorySIG <span class="kr">with</span> <span class="kn">Definition</span> <span class="nf">iterm</span> := Syntax.term
     <span class="kr">with</span> <span class="kn">Definition</span> <span class="nf">oterm</span> := Syntax.term)
    := MakeTheory_Hetero Syntax_Hetero.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Include</span> Theory.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">MakeTheory</span>.</span></span></pre>
</div>
</div></body>
</html>
